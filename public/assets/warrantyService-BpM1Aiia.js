var g=Object.defineProperty,W=Object.defineProperties;var v=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var E=(a,r,t)=>r in a?g(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,n=(a,r)=>{for(var t in r||(r={}))C.call(r,t)&&E(a,t,r[t]);if(A)for(var t of A(r))G.call(r,t)&&E(a,t,r[t]);return a},p=(a,r)=>W(a,v(r));var s=(a,r,t)=>new Promise((e,c)=>{var u=o=>{try{D(t.next(o))}catch(h){c(h)}},T=o=>{try{D(t.throw(o))}catch(h){c(h)}},D=o=>o.done?e(o.value):Promise.resolve(o.value).then(u,T);D((t=t.apply(a,r)).next())});import{A as B,D as R,E as i,F as L,H as N,T as O,J as d,K as f,M as l,N as q,O as m,P as x,Q as P}from"./index-BQmY0BmM.js";const w="warranty",F=a=>s(void 0,null,function*(){try{let r=B(R(i,w),L("receivedDate","desc"));return a!=null&&a.customerId,a!=null&&a.status,(yield N(r)).docs.map(e=>n({id:e.id},e.data()))}catch(r){throw console.error("Get warranty records error:",r),r}}),y=a=>s(void 0,null,function*(){try{const r=yield P(m(i,w,a));return r.exists()?n({id:r.id},r.data()):null}catch(r){throw console.error("Get warranty record by id error:",r),r}}),H=a=>s(void 0,null,function*(){try{const r=p(n({},a),{receivedDate:a.receivedDate||O.now(),createdAt:d(),updatedAt:d()}),t=yield f(R(i,w),r),e=yield y(t.id);if(!e)throw new Error("Garanti kaydı oluşturulamadı");return yield l("CREATE","warranty",t.id,a.createdBy,null,e),e}catch(r){throw console.error("Create warranty record error:",r),r}}),J=(a,r,t)=>s(void 0,null,function*(){try{const e=yield y(a),c=p(n({},r),{updatedAt:d()});r.status==="completed"&&!(e!=null&&e.completedDate)&&(c.completedDate=d()),r.status==="returned"&&!(e!=null&&e.returnedDate)&&(c.returnedDate=d()),yield q(m(i,w,a),c);const u=yield y(a);t&&(yield l("UPDATE","warranty",a,t,e,u))}catch(e){throw console.error("Update warranty record error:",e),e}}),K=(a,r)=>s(void 0,null,function*(){try{const t=yield y(a);yield x(m(i,w,a)),r&&(yield l("DELETE","warranty",a,r,t,null))}catch(t){throw console.error("Delete warranty record error:",t),t}});export{y as a,H as c,K as d,F as g,J as u};

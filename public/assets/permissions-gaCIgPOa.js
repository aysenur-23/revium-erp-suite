var i=(r,e,n)=>new Promise((a,t)=>{var y=o=>{try{f(n.next(o))}catch(l){t(l)}},c=o=>{try{f(n.throw(o))}catch(l){t(l)}},f=o=>o.done?a(o.value):Promise.resolve(o.value).then(y,c);f((n=n.apply(r,e)).next())});import{getPermission as d}from"./rolePermissionsService-BQ7cNajw.js";import"./index-BQmY0BmM.js";import"./lucide-react-CAeuRJQk.js";const s=r=>{var e,n;return r&&(((e=r.role)==null?void 0:e.includes("main_admin"))||((n=r.role)==null?void 0:n.includes("super_admin")))||!1},U=r=>{var e,n,a;return r&&(((e=r.role)==null?void 0:e.includes("admin"))||((n=r.role)==null?void 0:n.includes("main_admin"))||((a=r.role)==null?void 0:a.includes("super_admin")))||!1},T=(n,...a)=>i(void 0,[n,...a],function*(r,e=[]){return r?s(r)?!0:yield m(r,"tasks"):!1}),$=(n,...a)=>i(void 0,[n,...a],function*(r,e=[]){return r?s(r)?!0:yield m(r,"projects"):!1}),b=(r,e)=>i(void 0,null,function*(){return!e||!r?!1:s(e)?!0:yield p(e,"tasks")}),C=(a,t,...y)=>i(void 0,[a,t,...y],function*(r,e,n=[]){return!e||!r?!1:!!(s(e)||(yield p(e,"tasks"))||n.includes(e.id)||r.assignedUsers&&r.assignedUsers.includes(e.id))}),_=(a,t,...y)=>i(void 0,[a,t,...y],function*(r,e,n=[]){return!e||!r?!1:s(e)?!0:r.onlyInMyTasks?r.createdBy===e.id:r.isPrivate?r.isPrivate?!!((yield P(e,"tasks"))||n.includes(e.id)||r.assignedUsers&&r.assignedUsers.includes(e.id)||r.createdBy===e.id):!1:!0}),u=(r,e,n)=>i(void 0,null,function*(){if(!r||!r.role||r.role.length===0)return!1;for(const a of r.role)try{const t=yield d(a,e);if(t&&t[n])return!0}catch(t){console.error(`Error checking permission for role ${a} and resource ${e}:`,t)}return!1}),k=(r,e,n)=>i(void 0,null,function*(){if(!r||!r.role||r.role.length===0)return!1;if(s(r))return!0;for(const a of r.role)try{const t=yield d(a,e);if(t&&t.subPermissions&&t.subPermissions[n])return!0}catch(t){console.error(`Error checking sub-permission for role ${a}, resource ${e}, subPermission ${n}:`,t)}return!1}),m=(r,e)=>i(void 0,null,function*(){return r?s(r)?!0:yield u(r,e,"canCreate"):!1}),P=(r,e)=>i(void 0,null,function*(){return r?s(r)?!0:yield u(r,e,"canRead"):!1}),p=(r,e)=>i(void 0,null,function*(){return r?s(r)?!0:yield u(r,e,"canUpdate"):!1});export{$ as canCreateProject,m as canCreateResource,T as canCreateTask,b as canEditTask,C as canInteractWithTask,k as canPerformSubPermission,P as canReadResource,p as canUpdateResource,_ as canViewTask,U as isAdmin,s as isMainAdmin};

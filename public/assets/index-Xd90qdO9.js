const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-Cd021t-a.js","assets/MainLayout-DW7UjMSA.js","assets/taskService-CQO0i9v5.js","assets/StatCard-Dh2Sp8Wp.js","assets/trending-up-DyiN6Ad2.js","assets/reportService-eZYvGhBr.js","assets/storageService-pEqhfEwa.js","assets/driveService-020R8zku.js","assets/materialService-fdlP1ZS7.js","assets/Production-BO_DC2gN.js","assets/search-input-QX7HVhJf.js","assets/table-CHpYTcky.js","assets/currency-BpxR3_y8.js","assets/alert-dialog-BVp-ELLM.js","assets/CreateOrderDialog-UaDZ5hoj.js","assets/CustomerCombobox-B9g9riZZ.js","assets/popover-BA39Kv9C.js","assets/CreateCustomerDialog-Ct1V89iV.js","assets/save-Bgz0wbo5.js","assets/plus-D9uLCipi.js","assets/OrderDetailModal-DehNQxg3.js","assets/square-pen-zeHrcQ7c.js","assets/trash-2-DlZRXDqX.js","assets/truck-CIL1YvLr.js","assets/circle-dot-CCfpRgG9.js","assets/list-checks-CkcaKLuC.js","assets/loading-state-CyTUOPV3.js","assets/Tasks-j5VmRSrX.js","assets/avatar-KtUT5CWN.js","assets/requestService-BZtc3QPN.js","assets/TaskInlineForm-CDqKbM2W.js","assets/checkbox-BX7aNvy5.js","assets/UserMultiSelect-KlPlOKAA.js","assets/permissions-D79DzJt5.js","assets/rolePermissionsService-CoZ8Qmsy.js","assets/TaskBoard-fwyGe4xh.js","assets/user-plus-DWuSLDZe.js","assets/tag-EYbV-h0Y.js","assets/message-square-BAQ_w3zD.js","assets/folder-DUFwF4S_.js","assets/ellipsis-vertical-gVlTlFy-.js","assets/format-DuC-NjES.js","assets/isToday-C_-qpr0F.js","assets/isSameDay-CmhUF_DM.js","assets/addDays-b8IynWul.js","assets/send-DtcYVw6S.js","assets/calendar-days-DIIfLF_e.js","assets/isBefore-CpsBulHW.js","assets/TaskDetail-ar69kH0H.js","assets/separator-BNuYyAQ9.js","assets/TaskPool-CTAdN623.js","assets/TasksArchive-DOMiRHnq.js","assets/TaskDetailModal-DYo7pzLX.js","assets/progress-DSBhhNxd.js","assets/Customers-CUOT9w7t.js","assets/CustomerDetailModal-D1Gwzqrs.js","assets/map-pin-CYdnXw-f.js","assets/download-Bq-rl9Ru.js","assets/DetailedValueReportModal-Hb3qQukI.js","assets/exchangeRateService-Cpnvl6ZU.js","assets/chart-column-tcYl_7Fa.js","assets/Products-CD-v0evj.js","assets/recipeService-CoAKsRoE.js","assets/Orders-ByhjdmG5.js","assets/CreateOrderDialog-Di2tky-V.js","assets/subDays-BSPI1LCX.js","assets/arrow-up-CYB1EkPb.js","assets/Reports-Bblk1VGx.js","assets/pdfGenerator-H9L-JbYf.js","assets/RawMaterials-BAsM9hfQ.js","assets/toastHelpers-I2G9dhou.js","assets/Settings-DBQkX1YU.js","assets/switch-Bq-e7DDF.js","assets/Profile-DQuLyO5P.js","assets/skeleton-DkPhyqEs.js","assets/formatLastLogin-CD2ke5e-.js","assets/Admin-0Fo3q3pj.js","assets/DepartmentDetailModal-eftmRmp7.js","assets/TeamManagement-DvELcpKp.js","assets/Projects-CCMlHBeL.js","assets/Warranty-EX25GULt.js","assets/Requests-CGC9XHEO.js","assets/Notifications-k-mcjnZU.js"])))=>i.map(i=>d[i]);
var FM=Object.defineProperty;var nb=t=>{throw TypeError(t)};var VM=(t,e,n)=>e in t?FM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var sf=(t,e,n)=>VM(t,typeof e!="symbol"?e+"":e,n),sy=(t,e,n)=>e.has(t)||nb("Cannot "+n);var H=(t,e,n)=>(sy(t,e,"read from private field"),n?n.call(t):e.get(t)),Ze=(t,e,n)=>e.has(t)?nb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ae=(t,e,n,r)=>(sy(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Cn=(t,e,n)=>(sy(t,e,"access private method"),n);var of=(t,e,n,r)=>({set _(s){Ae(t,e,s,n)},get _(){return H(t,e,r)}});function oC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var bZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lC={exports:{}},Dm={},cC={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ph=Symbol.for("react.element"),jM=Symbol.for("react.portal"),UM=Symbol.for("react.fragment"),zM=Symbol.for("react.strict_mode"),$M=Symbol.for("react.profiler"),BM=Symbol.for("react.provider"),WM=Symbol.for("react.context"),HM=Symbol.for("react.forward_ref"),qM=Symbol.for("react.suspense"),GM=Symbol.for("react.memo"),KM=Symbol.for("react.lazy"),rb=Symbol.iterator;function QM(t){return t===null||typeof t!="object"?null:(t=rb&&t[rb]||t["@@iterator"],typeof t=="function"?t:null)}var uC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dC=Object.assign,hC={};function Yc(t,e,n){this.props=t,this.context=e,this.refs=hC,this.updater=n||uC}Yc.prototype.isReactComponent={};Yc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fC(){}fC.prototype=Yc.prototype;function Pw(t,e,n){this.props=t,this.context=e,this.refs=hC,this.updater=n||uC}var Nw=Pw.prototype=new fC;Nw.constructor=Pw;dC(Nw,Yc.prototype);Nw.isPureReactComponent=!0;var sb=Array.isArray,pC=Object.prototype.hasOwnProperty,Dw={current:null},mC={key:!0,ref:!0,__self:!0,__source:!0};function gC(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)pC.call(e,r)&&!mC.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ph,type:t,key:i,ref:o,props:s,_owner:Dw.current}}function YM(t,e){return{$$typeof:ph,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ow(t){return typeof t=="object"&&t!==null&&t.$$typeof===ph}function XM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ib=/\/+/g;function iy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?XM(""+t.key):e.toString(36)}function Bf(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ph:case jM:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+iy(o,0):r,sb(s)?(n="",t!=null&&(n=t.replace(ib,"$&/")+"/"),Bf(s,e,n,"",function(c){return c})):s!=null&&(Ow(s)&&(s=YM(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ib,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",sb(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+iy(i,a);o+=Bf(i,e,n,l,s)}else if(l=QM(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+iy(i,a++),o+=Bf(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function af(t,e,n){if(t==null)return t;var r=[],s=0;return Bf(t,r,"","",function(i){return e.call(n,i,s++)}),r}function JM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var er={current:null},Wf={transition:null},ZM={ReactCurrentDispatcher:er,ReactCurrentBatchConfig:Wf,ReactCurrentOwner:Dw};function yC(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:af,forEach:function(t,e,n){af(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return af(t,function(){e++}),e},toArray:function(t){return af(t,function(e){return e})||[]},only:function(t){if(!Ow(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Fe.Component=Yc;Fe.Fragment=UM;Fe.Profiler=$M;Fe.PureComponent=Pw;Fe.StrictMode=zM;Fe.Suspense=qM;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZM;Fe.act=yC;Fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=dC({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Dw.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)pC.call(e,l)&&!mC.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ph,type:t.type,key:s,ref:i,props:r,_owner:o}};Fe.createContext=function(t){return t={$$typeof:WM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BM,_context:t},t.Consumer=t};Fe.createElement=gC;Fe.createFactory=function(t){var e=gC.bind(null,t);return e.type=t,e};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(t){return{$$typeof:HM,render:t}};Fe.isValidElement=Ow;Fe.lazy=function(t){return{$$typeof:KM,_payload:{_status:-1,_result:t},_init:JM}};Fe.memo=function(t,e){return{$$typeof:GM,type:t,compare:e===void 0?null:e}};Fe.startTransition=function(t){var e=Wf.transition;Wf.transition={};try{t()}finally{Wf.transition=e}};Fe.unstable_act=yC;Fe.useCallback=function(t,e){return er.current.useCallback(t,e)};Fe.useContext=function(t){return er.current.useContext(t)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(t){return er.current.useDeferredValue(t)};Fe.useEffect=function(t,e){return er.current.useEffect(t,e)};Fe.useId=function(){return er.current.useId()};Fe.useImperativeHandle=function(t,e,n){return er.current.useImperativeHandle(t,e,n)};Fe.useInsertionEffect=function(t,e){return er.current.useInsertionEffect(t,e)};Fe.useLayoutEffect=function(t,e){return er.current.useLayoutEffect(t,e)};Fe.useMemo=function(t,e){return er.current.useMemo(t,e)};Fe.useReducer=function(t,e,n){return er.current.useReducer(t,e,n)};Fe.useRef=function(t){return er.current.useRef(t)};Fe.useState=function(t){return er.current.useState(t)};Fe.useSyncExternalStore=function(t,e,n){return er.current.useSyncExternalStore(t,e,n)};Fe.useTransition=function(){return er.current.useTransition()};Fe.version="18.3.1";cC.exports=Fe;var _=cC.exports;const J=aC(_),Lw=oC({__proto__:null,default:J},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eF=_,tF=Symbol.for("react.element"),nF=Symbol.for("react.fragment"),rF=Object.prototype.hasOwnProperty,sF=eF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iF={key:!0,ref:!0,__self:!0,__source:!0};function vC(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)rF.call(e,r)&&!iF.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:tF,type:t,key:i,ref:o,props:s,_owner:sF.current}}Dm.Fragment=nF;Dm.jsx=vC;Dm.jsxs=vC;lC.exports=Dm;var m=lC.exports,_C={exports:{}},Lr={},wC={exports:{}},EC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,$){var Z=j.length;j.push($);e:for(;0<Z;){var pe=Z-1>>>1,te=j[pe];if(0<s(te,$))j[pe]=$,j[Z]=te,Z=pe;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var $=j[0],Z=j.pop();if(Z!==$){j[0]=Z;e:for(var pe=0,te=j.length,Y=te>>>1;pe<Y;){var ye=2*(pe+1)-1,Ce=j[ye],Qe=ye+1,X=j[Qe];if(0>s(Ce,Z))Qe<te&&0>s(X,Ce)?(j[pe]=X,j[Qe]=Z,pe=Qe):(j[pe]=Ce,j[ye]=Z,pe=ye);else if(Qe<te&&0>s(X,Z))j[pe]=X,j[Qe]=Z,pe=Qe;else break e}}return $}function s(j,$){var Z=j.sortIndex-$.sortIndex;return Z!==0?Z:j.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,T=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(j){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=j)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function C(j){if(y=!1,S(j),!T)if(n(l)!==null)T=!0,Q(O);else{var $=n(c);$!==null&&oe(C,$.startTime-j)}}function O(j,$){T=!1,y&&(y=!1,E(I),I=-1),p=!0;var Z=f;try{for(S($),h=n(l);h!==null&&(!(h.expirationTime>$)||j&&!N());){var pe=h.callback;if(typeof pe=="function"){h.callback=null,f=h.priorityLevel;var te=pe(h.expirationTime<=$);$=t.unstable_now(),typeof te=="function"?h.callback=te:h===n(l)&&r(l),S($)}else r(l);h=n(l)}if(h!==null)var Y=!0;else{var ye=n(c);ye!==null&&oe(C,ye.startTime-$),Y=!1}return Y}finally{h=null,f=Z,p=!1}}var M=!1,b=null,I=-1,A=5,R=-1;function N(){return!(t.unstable_now()-R<A)}function D(){if(b!==null){var j=t.unstable_now();R=j;var $=!0;try{$=b(!0,j)}finally{$?P():(M=!1,b=null)}}else M=!1}var P;if(typeof v=="function")P=function(){v(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,se=B.port2;B.port1.onmessage=D,P=function(){se.postMessage(null)}}else P=function(){w(D,0)};function Q(j){b=j,M||(M=!0,P())}function oe(j,$){I=w(function(){j(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){T||p||(T=!0,Q(O))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var Z=f;f=$;try{return j()}finally{f=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,$){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Z=f;f=j;try{return $()}finally{f=Z}},t.unstable_scheduleCallback=function(j,$,Z){var pe=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?pe+Z:pe):Z=pe,j){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Z+te,j={id:d++,callback:$,priorityLevel:j,startTime:Z,expirationTime:te,sortIndex:-1},Z>pe?(j.sortIndex=Z,e(c,j),n(l)===null&&j===n(c)&&(y?(E(I),I=-1):y=!0,oe(C,Z-pe))):(j.sortIndex=te,e(l,j),T||p||(T=!0,Q(O))),j},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(j){var $=f;return function(){var Z=f;f=$;try{return j.apply(this,arguments)}finally{f=Z}}}})(EC);wC.exports=EC;var oF=wC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aF=_,Nr=oF;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TC=new Set,Rd={};function hl(t,e){Ic(t,e),Ic(t+"Capture",e)}function Ic(t,e){for(Rd[t]=e,t=0;t<e.length;t++)TC.add(e[t])}var Vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wv=Object.prototype.hasOwnProperty,lF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ob={},ab={};function cF(t){return wv.call(ab,t)?!0:wv.call(ob,t)?!1:lF.test(t)?ab[t]=!0:(ob[t]=!0,!1)}function uF(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dF(t,e,n,r){if(e===null||typeof e>"u"||uF(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wn[t]=new tr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];wn[e]=new tr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){wn[t]=new tr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){wn[t]=new tr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wn[t]=new tr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){wn[t]=new tr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){wn[t]=new tr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){wn[t]=new tr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){wn[t]=new tr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mw=/[\-:]([a-z])/g;function Fw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mw,Fw);wn[e]=new tr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mw,Fw);wn[e]=new tr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mw,Fw);wn[e]=new tr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){wn[t]=new tr(t,1,!1,t.toLowerCase(),null,!1,!1)});wn.xlinkHref=new tr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){wn[t]=new tr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Vw(t,e,n,r){var s=wn.hasOwnProperty(e)?wn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dF(e,n,s,r)&&(n=null),r||s===null?cF(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ji=aF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lf=Symbol.for("react.element"),Ul=Symbol.for("react.portal"),zl=Symbol.for("react.fragment"),jw=Symbol.for("react.strict_mode"),Ev=Symbol.for("react.profiler"),bC=Symbol.for("react.provider"),xC=Symbol.for("react.context"),Uw=Symbol.for("react.forward_ref"),Tv=Symbol.for("react.suspense"),bv=Symbol.for("react.suspense_list"),zw=Symbol.for("react.memo"),Eo=Symbol.for("react.lazy"),SC=Symbol.for("react.offscreen"),lb=Symbol.iterator;function Au(t){return t===null||typeof t!="object"?null:(t=lb&&t[lb]||t["@@iterator"],typeof t=="function"?t:null)}var Lt=Object.assign,oy;function Gu(t){if(oy===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);oy=e&&e[1]||""}return`
`+oy+t}var ay=!1;function ly(t,e){if(!t||ay)return"";ay=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ay=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Gu(t):""}function hF(t){switch(t.tag){case 5:return Gu(t.type);case 16:return Gu("Lazy");case 13:return Gu("Suspense");case 19:return Gu("SuspenseList");case 0:case 2:case 15:return t=ly(t.type,!1),t;case 11:return t=ly(t.type.render,!1),t;case 1:return t=ly(t.type,!0),t;default:return""}}function xv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zl:return"Fragment";case Ul:return"Portal";case Ev:return"Profiler";case jw:return"StrictMode";case Tv:return"Suspense";case bv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xC:return(t.displayName||"Context")+".Consumer";case bC:return(t._context.displayName||"Context")+".Provider";case Uw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zw:return e=t.displayName||null,e!==null?e:xv(t.type)||"Memo";case Eo:e=t._payload,t=t._init;try{return xv(t(e))}catch{}}return null}function fF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xv(e);case 8:return e===jw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ea(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function IC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pF(t){var e=IC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cf(t){t._valueTracker||(t._valueTracker=pF(t))}function CC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=IC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sv(t,e){var n=e.checked;return Lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function cb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ea(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function RC(t,e){e=e.checked,e!=null&&Vw(t,"checked",e,!1)}function Iv(t,e){RC(t,e);var n=ea(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cv(t,e.type,n):e.hasOwnProperty("defaultValue")&&Cv(t,e.type,ea(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ub(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Cv(t,e,n){(e!=="number"||vp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ku=Array.isArray;function nc(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ea(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Rv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return Lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function db(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Ku(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ea(n)}}function AC(t,e){var n=ea(e.value),r=ea(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Av(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var uf,PC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(uf=uf||document.createElement("div"),uf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=uf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ad(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var sd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mF=["Webkit","ms","Moz","O"];Object.keys(sd).forEach(function(t){mF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),sd[e]=sd[t]})});function NC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||sd.hasOwnProperty(t)&&sd[t]?(""+e).trim():e+"px"}function DC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=NC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var gF=Lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kv(t,e){if(e){if(gF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function Pv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nv=null;function $w(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dv=null,rc=null,sc=null;function fb(t){if(t=yh(t)){if(typeof Dv!="function")throw Error(K(280));var e=t.stateNode;e&&(e=Vm(e),Dv(t.stateNode,t.type,e))}}function OC(t){rc?sc?sc.push(t):sc=[t]:rc=t}function LC(){if(rc){var t=rc,e=sc;if(sc=rc=null,fb(t),e)for(t=0;t<e.length;t++)fb(e[t])}}function MC(t,e){return t(e)}function FC(){}var cy=!1;function VC(t,e,n){if(cy)return t(e,n);cy=!0;try{return MC(t,e,n)}finally{cy=!1,(rc!==null||sc!==null)&&(FC(),LC())}}function kd(t,e){var n=t.stateNode;if(n===null)return null;var r=Vm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var Ov=!1;if(Vi)try{var ku={};Object.defineProperty(ku,"passive",{get:function(){Ov=!0}}),window.addEventListener("test",ku,ku),window.removeEventListener("test",ku,ku)}catch{Ov=!1}function yF(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var id=!1,_p=null,wp=!1,Lv=null,vF={onError:function(t){id=!0,_p=t}};function _F(t,e,n,r,s,i,o,a,l){id=!1,_p=null,yF.apply(vF,arguments)}function wF(t,e,n,r,s,i,o,a,l){if(_F.apply(this,arguments),id){if(id){var c=_p;id=!1,_p=null}else throw Error(K(198));wp||(wp=!0,Lv=c)}}function fl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function jC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pb(t){if(fl(t)!==t)throw Error(K(188))}function EF(t){var e=t.alternate;if(!e){if(e=fl(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return pb(s),t;if(i===r)return pb(s),e;i=i.sibling}throw Error(K(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function UC(t){return t=EF(t),t!==null?zC(t):null}function zC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zC(t);if(e!==null)return e;t=t.sibling}return null}var $C=Nr.unstable_scheduleCallback,mb=Nr.unstable_cancelCallback,TF=Nr.unstable_shouldYield,bF=Nr.unstable_requestPaint,$t=Nr.unstable_now,xF=Nr.unstable_getCurrentPriorityLevel,Bw=Nr.unstable_ImmediatePriority,BC=Nr.unstable_UserBlockingPriority,Ep=Nr.unstable_NormalPriority,SF=Nr.unstable_LowPriority,WC=Nr.unstable_IdlePriority,Om=null,Ys=null;function IF(t){if(Ys&&typeof Ys.onCommitFiberRoot=="function")try{Ys.onCommitFiberRoot(Om,t,void 0,(t.current.flags&128)===128)}catch{}}var Es=Math.clz32?Math.clz32:AF,CF=Math.log,RF=Math.LN2;function AF(t){return t>>>=0,t===0?32:31-(CF(t)/RF|0)|0}var df=64,hf=4194304;function Qu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Qu(a):(i&=o,i!==0&&(r=Qu(i)))}else o=n&~s,o!==0?r=Qu(o):i!==0&&(r=Qu(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Es(e),s=1<<n,r|=t[n],e&=~s;return r}function kF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Es(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=kF(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Mv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function HC(){var t=df;return df<<=1,!(df&4194240)&&(df=64),t}function uy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function mh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Es(e),t[e]=n}function NF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Es(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ww(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Es(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ot=0;function qC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var GC,Hw,KC,QC,YC,Fv=!1,ff=[],Fo=null,Vo=null,jo=null,Pd=new Map,Nd=new Map,bo=[],DF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gb(t,e){switch(t){case"focusin":case"focusout":Fo=null;break;case"dragenter":case"dragleave":Vo=null;break;case"mouseover":case"mouseout":jo=null;break;case"pointerover":case"pointerout":Pd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nd.delete(e.pointerId)}}function Pu(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=yh(e),e!==null&&Hw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function OF(t,e,n,r,s){switch(e){case"focusin":return Fo=Pu(Fo,t,e,n,r,s),!0;case"dragenter":return Vo=Pu(Vo,t,e,n,r,s),!0;case"mouseover":return jo=Pu(jo,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Pd.set(i,Pu(Pd.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Nd.set(i,Pu(Nd.get(i)||null,t,e,n,r,s)),!0}return!1}function XC(t){var e=Aa(t.target);if(e!==null){var n=fl(e);if(n!==null){if(e=n.tag,e===13){if(e=jC(n),e!==null){t.blockedOn=e,YC(t.priority,function(){KC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Nv=r,n.target.dispatchEvent(r),Nv=null}else return e=yh(n),e!==null&&Hw(e),t.blockedOn=n,!1;e.shift()}return!0}function yb(t,e,n){Hf(t)&&n.delete(e)}function LF(){Fv=!1,Fo!==null&&Hf(Fo)&&(Fo=null),Vo!==null&&Hf(Vo)&&(Vo=null),jo!==null&&Hf(jo)&&(jo=null),Pd.forEach(yb),Nd.forEach(yb)}function Nu(t,e){t.blockedOn===e&&(t.blockedOn=null,Fv||(Fv=!0,Nr.unstable_scheduleCallback(Nr.unstable_NormalPriority,LF)))}function Dd(t){function e(s){return Nu(s,t)}if(0<ff.length){Nu(ff[0],t);for(var n=1;n<ff.length;n++){var r=ff[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Fo!==null&&Nu(Fo,t),Vo!==null&&Nu(Vo,t),jo!==null&&Nu(jo,t),Pd.forEach(e),Nd.forEach(e),n=0;n<bo.length;n++)r=bo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<bo.length&&(n=bo[0],n.blockedOn===null);)XC(n),n.blockedOn===null&&bo.shift()}var ic=Ji.ReactCurrentBatchConfig,bp=!0;function MF(t,e,n,r){var s=ot,i=ic.transition;ic.transition=null;try{ot=1,qw(t,e,n,r)}finally{ot=s,ic.transition=i}}function FF(t,e,n,r){var s=ot,i=ic.transition;ic.transition=null;try{ot=4,qw(t,e,n,r)}finally{ot=s,ic.transition=i}}function qw(t,e,n,r){if(bp){var s=Vv(t,e,n,r);if(s===null)wy(t,e,r,xp,n),gb(t,r);else if(OF(s,t,e,n,r))r.stopPropagation();else if(gb(t,r),e&4&&-1<DF.indexOf(t)){for(;s!==null;){var i=yh(s);if(i!==null&&GC(i),i=Vv(t,e,n,r),i===null&&wy(t,e,r,xp,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else wy(t,e,r,null,n)}}var xp=null;function Vv(t,e,n,r){if(xp=null,t=$w(r),t=Aa(t),t!==null)if(e=fl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=jC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xp=t,null}function JC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xF()){case Bw:return 1;case BC:return 4;case Ep:case SF:return 16;case WC:return 536870912;default:return 16}default:return 16}}var Do=null,Gw=null,qf=null;function ZC(){if(qf)return qf;var t,e=Gw,n=e.length,r,s="value"in Do?Do.value:Do.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return qf=s.slice(t,1<r?1-r:void 0)}function Gf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pf(){return!0}function vb(){return!1}function Mr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?pf:vb,this.isPropagationStopped=vb,this}return Lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pf)},persist:function(){},isPersistent:pf}),e}var Xc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kw=Mr(Xc),gh=Lt({},Xc,{view:0,detail:0}),VF=Mr(gh),dy,hy,Du,Lm=Lt({},gh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Du&&(Du&&t.type==="mousemove"?(dy=t.screenX-Du.screenX,hy=t.screenY-Du.screenY):hy=dy=0,Du=t),dy)},movementY:function(t){return"movementY"in t?t.movementY:hy}}),_b=Mr(Lm),jF=Lt({},Lm,{dataTransfer:0}),UF=Mr(jF),zF=Lt({},gh,{relatedTarget:0}),fy=Mr(zF),$F=Lt({},Xc,{animationName:0,elapsedTime:0,pseudoElement:0}),BF=Mr($F),WF=Lt({},Xc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),HF=Mr(WF),qF=Lt({},Xc,{data:0}),wb=Mr(qF),GF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QF[t])?!!e[t]:!1}function Qw(){return YF}var XF=Lt({},gh,{key:function(t){if(t.key){var e=GF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?KF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qw,charCode:function(t){return t.type==="keypress"?Gf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),JF=Mr(XF),ZF=Lt({},Lm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eb=Mr(ZF),eV=Lt({},gh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qw}),tV=Mr(eV),nV=Lt({},Xc,{propertyName:0,elapsedTime:0,pseudoElement:0}),rV=Mr(nV),sV=Lt({},Lm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iV=Mr(sV),oV=[9,13,27,32],Yw=Vi&&"CompositionEvent"in window,od=null;Vi&&"documentMode"in document&&(od=document.documentMode);var aV=Vi&&"TextEvent"in window&&!od,eR=Vi&&(!Yw||od&&8<od&&11>=od),Tb=" ",bb=!1;function tR(t,e){switch(t){case"keyup":return oV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $l=!1;function lV(t,e){switch(t){case"compositionend":return nR(e);case"keypress":return e.which!==32?null:(bb=!0,Tb);case"textInput":return t=e.data,t===Tb&&bb?null:t;default:return null}}function cV(t,e){if($l)return t==="compositionend"||!Yw&&tR(t,e)?(t=ZC(),qf=Gw=Do=null,$l=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eR&&e.locale!=="ko"?null:e.data;default:return null}}var uV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uV[t.type]:e==="textarea"}function rR(t,e,n,r){OC(r),e=Sp(e,"onChange"),0<e.length&&(n=new Kw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ad=null,Od=null;function dV(t){pR(t,0)}function Mm(t){var e=Hl(t);if(CC(e))return t}function hV(t,e){if(t==="change")return e}var sR=!1;if(Vi){var py;if(Vi){var my="oninput"in document;if(!my){var Sb=document.createElement("div");Sb.setAttribute("oninput","return;"),my=typeof Sb.oninput=="function"}py=my}else py=!1;sR=py&&(!document.documentMode||9<document.documentMode)}function Ib(){ad&&(ad.detachEvent("onpropertychange",iR),Od=ad=null)}function iR(t){if(t.propertyName==="value"&&Mm(Od)){var e=[];rR(e,Od,t,$w(t)),VC(dV,e)}}function fV(t,e,n){t==="focusin"?(Ib(),ad=e,Od=n,ad.attachEvent("onpropertychange",iR)):t==="focusout"&&Ib()}function pV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mm(Od)}function mV(t,e){if(t==="click")return Mm(e)}function gV(t,e){if(t==="input"||t==="change")return Mm(e)}function yV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rs=typeof Object.is=="function"?Object.is:yV;function Ld(t,e){if(Rs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!wv.call(e,s)||!Rs(t[s],e[s]))return!1}return!0}function Cb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rb(t,e){var n=Cb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cb(n)}}function oR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aR(){for(var t=window,e=vp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vp(t.document)}return e}function Xw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vV(t){var e=aR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oR(n.ownerDocument.documentElement,n)){if(r!==null&&Xw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Rb(n,i);var o=Rb(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _V=Vi&&"documentMode"in document&&11>=document.documentMode,Bl=null,jv=null,ld=null,Uv=!1;function Ab(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uv||Bl==null||Bl!==vp(r)||(r=Bl,"selectionStart"in r&&Xw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ld&&Ld(ld,r)||(ld=r,r=Sp(jv,"onSelect"),0<r.length&&(e=new Kw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Bl)))}function mf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wl={animationend:mf("Animation","AnimationEnd"),animationiteration:mf("Animation","AnimationIteration"),animationstart:mf("Animation","AnimationStart"),transitionend:mf("Transition","TransitionEnd")},gy={},lR={};Vi&&(lR=document.createElement("div").style,"AnimationEvent"in window||(delete Wl.animationend.animation,delete Wl.animationiteration.animation,delete Wl.animationstart.animation),"TransitionEvent"in window||delete Wl.transitionend.transition);function Fm(t){if(gy[t])return gy[t];if(!Wl[t])return t;var e=Wl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lR)return gy[t]=e[n];return t}var cR=Fm("animationend"),uR=Fm("animationiteration"),dR=Fm("animationstart"),hR=Fm("transitionend"),fR=new Map,kb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function da(t,e){fR.set(t,e),hl(e,[t])}for(var yy=0;yy<kb.length;yy++){var vy=kb[yy],wV=vy.toLowerCase(),EV=vy[0].toUpperCase()+vy.slice(1);da(wV,"on"+EV)}da(cR,"onAnimationEnd");da(uR,"onAnimationIteration");da(dR,"onAnimationStart");da("dblclick","onDoubleClick");da("focusin","onFocus");da("focusout","onBlur");da(hR,"onTransitionEnd");Ic("onMouseEnter",["mouseout","mouseover"]);Ic("onMouseLeave",["mouseout","mouseover"]);Ic("onPointerEnter",["pointerout","pointerover"]);Ic("onPointerLeave",["pointerout","pointerover"]);hl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hl("onBeforeInput",["compositionend","keypress","textInput","paste"]);hl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yu));function Pb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,wF(r,e,void 0,t),t.currentTarget=null}function pR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Pb(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Pb(s,a,c),i=l}}}if(wp)throw t=Lv,wp=!1,Lv=null,t}function Tt(t,e){var n=e[Hv];n===void 0&&(n=e[Hv]=new Set);var r=t+"__bubble";n.has(r)||(mR(e,t,2,!1),n.add(r))}function _y(t,e,n){var r=0;e&&(r|=4),mR(n,t,r,e)}var gf="_reactListening"+Math.random().toString(36).slice(2);function Md(t){if(!t[gf]){t[gf]=!0,TC.forEach(function(n){n!=="selectionchange"&&(TV.has(n)||_y(n,!1,t),_y(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gf]||(e[gf]=!0,_y("selectionchange",!1,e))}}function mR(t,e,n,r){switch(JC(e)){case 1:var s=MF;break;case 4:s=FF;break;default:s=qw}n=s.bind(null,e,n,t),s=void 0,!Ov||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function wy(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Aa(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}VC(function(){var c=i,d=$w(n),h=[];e:{var f=fR.get(t);if(f!==void 0){var p=Kw,T=t;switch(t){case"keypress":if(Gf(n)===0)break e;case"keydown":case"keyup":p=JF;break;case"focusin":T="focus",p=fy;break;case"focusout":T="blur",p=fy;break;case"beforeblur":case"afterblur":p=fy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=_b;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=UF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=tV;break;case cR:case uR:case dR:p=BF;break;case hR:p=rV;break;case"scroll":p=VF;break;case"wheel":p=iV;break;case"copy":case"cut":case"paste":p=HF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Eb}var y=(e&4)!==0,w=!y&&t==="scroll",E=y?f!==null?f+"Capture":null:f;y=[];for(var v=c,S;v!==null;){S=v;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,E!==null&&(C=kd(v,E),C!=null&&y.push(Fd(v,C,S)))),w)break;v=v.return}0<y.length&&(f=new p(f,T,null,n,d),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Nv&&(T=n.relatedTarget||n.fromElement)&&(Aa(T)||T[ji]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(T=n.relatedTarget||n.toElement,p=c,T=T?Aa(T):null,T!==null&&(w=fl(T),T!==w||T.tag!==5&&T.tag!==6)&&(T=null)):(p=null,T=c),p!==T)){if(y=_b,C="onMouseLeave",E="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=Eb,C="onPointerLeave",E="onPointerEnter",v="pointer"),w=p==null?f:Hl(p),S=T==null?f:Hl(T),f=new y(C,v+"leave",p,n,d),f.target=w,f.relatedTarget=S,C=null,Aa(d)===c&&(y=new y(E,v+"enter",T,n,d),y.target=S,y.relatedTarget=w,C=y),w=C,p&&T)t:{for(y=p,E=T,v=0,S=y;S;S=kl(S))v++;for(S=0,C=E;C;C=kl(C))S++;for(;0<v-S;)y=kl(y),v--;for(;0<S-v;)E=kl(E),S--;for(;v--;){if(y===E||E!==null&&y===E.alternate)break t;y=kl(y),E=kl(E)}y=null}else y=null;p!==null&&Nb(h,f,p,y,!1),T!==null&&w!==null&&Nb(h,w,T,y,!0)}}e:{if(f=c?Hl(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var O=hV;else if(xb(f))if(sR)O=gV;else{O=pV;var M=fV}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(O=mV);if(O&&(O=O(t,c))){rR(h,O,n,d);break e}M&&M(t,f,c),t==="focusout"&&(M=f._wrapperState)&&M.controlled&&f.type==="number"&&Cv(f,"number",f.value)}switch(M=c?Hl(c):window,t){case"focusin":(xb(M)||M.contentEditable==="true")&&(Bl=M,jv=c,ld=null);break;case"focusout":ld=jv=Bl=null;break;case"mousedown":Uv=!0;break;case"contextmenu":case"mouseup":case"dragend":Uv=!1,Ab(h,n,d);break;case"selectionchange":if(_V)break;case"keydown":case"keyup":Ab(h,n,d)}var b;if(Yw)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else $l?tR(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(eR&&n.locale!=="ko"&&($l||I!=="onCompositionStart"?I==="onCompositionEnd"&&$l&&(b=ZC()):(Do=d,Gw="value"in Do?Do.value:Do.textContent,$l=!0)),M=Sp(c,I),0<M.length&&(I=new wb(I,t,null,n,d),h.push({event:I,listeners:M}),b?I.data=b:(b=nR(n),b!==null&&(I.data=b)))),(b=aV?lV(t,n):cV(t,n))&&(c=Sp(c,"onBeforeInput"),0<c.length&&(d=new wb("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=b))}pR(h,e)})}function Fd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sp(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=kd(t,n),i!=null&&r.unshift(Fd(t,i,s)),i=kd(t,e),i!=null&&r.push(Fd(t,i,s))),t=t.return}return r}function kl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nb(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=kd(n,i),l!=null&&o.unshift(Fd(n,l,a))):s||(l=kd(n,i),l!=null&&o.push(Fd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var bV=/\r\n?/g,xV=/\u0000|\uFFFD/g;function Db(t){return(typeof t=="string"?t:""+t).replace(bV,`
`).replace(xV,"")}function yf(t,e,n){if(e=Db(e),Db(t)!==e&&n)throw Error(K(425))}function Ip(){}var zv=null,$v=null;function Bv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wv=typeof setTimeout=="function"?setTimeout:void 0,SV=typeof clearTimeout=="function"?clearTimeout:void 0,Ob=typeof Promise=="function"?Promise:void 0,IV=typeof queueMicrotask=="function"?queueMicrotask:typeof Ob<"u"?function(t){return Ob.resolve(null).then(t).catch(CV)}:Wv;function CV(t){setTimeout(function(){throw t})}function Ey(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Dd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Dd(e)}function Uo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Jc=Math.random().toString(36).slice(2),qs="__reactFiber$"+Jc,Vd="__reactProps$"+Jc,ji="__reactContainer$"+Jc,Hv="__reactEvents$"+Jc,RV="__reactListeners$"+Jc,AV="__reactHandles$"+Jc;function Aa(t){var e=t[qs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ji]||n[qs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lb(t);t!==null;){if(n=t[qs])return n;t=Lb(t)}return e}t=n,n=t.parentNode}return null}function yh(t){return t=t[qs]||t[ji],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Vm(t){return t[Vd]||null}var qv=[],ql=-1;function ha(t){return{current:t}}function It(t){0>ql||(t.current=qv[ql],qv[ql]=null,ql--)}function vt(t,e){ql++,qv[ql]=t.current,t.current=e}var ta={},Un=ha(ta),dr=ha(!1),Ga=ta;function Cc(t,e){var n=t.type.contextTypes;if(!n)return ta;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function hr(t){return t=t.childContextTypes,t!=null}function Cp(){It(dr),It(Un)}function Mb(t,e,n){if(Un.current!==ta)throw Error(K(168));vt(Un,e),vt(dr,n)}function gR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(K(108,fF(t)||"Unknown",s));return Lt({},n,r)}function Rp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ta,Ga=Un.current,vt(Un,t),vt(dr,dr.current),!0}function Fb(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=gR(t,e,Ga),r.__reactInternalMemoizedMergedChildContext=t,It(dr),It(Un),vt(Un,t)):It(dr),vt(dr,n)}var Ei=null,jm=!1,Ty=!1;function yR(t){Ei===null?Ei=[t]:Ei.push(t)}function kV(t){jm=!0,yR(t)}function fa(){if(!Ty&&Ei!==null){Ty=!0;var t=0,e=ot;try{var n=Ei;for(ot=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ei=null,jm=!1}catch(s){throw Ei!==null&&(Ei=Ei.slice(t+1)),$C(Bw,fa),s}finally{ot=e,Ty=!1}}return null}var Gl=[],Kl=0,Ap=null,kp=0,$r=[],Br=0,Ka=null,Si=1,Ii="";function ba(t,e){Gl[Kl++]=kp,Gl[Kl++]=Ap,Ap=t,kp=e}function vR(t,e,n){$r[Br++]=Si,$r[Br++]=Ii,$r[Br++]=Ka,Ka=t;var r=Si;t=Ii;var s=32-Es(r)-1;r&=~(1<<s),n+=1;var i=32-Es(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Si=1<<32-Es(e)+s|n<<s|r,Ii=i+t}else Si=1<<i|n<<s|r,Ii=t}function Jw(t){t.return!==null&&(ba(t,1),vR(t,1,0))}function Zw(t){for(;t===Ap;)Ap=Gl[--Kl],Gl[Kl]=null,kp=Gl[--Kl],Gl[Kl]=null;for(;t===Ka;)Ka=$r[--Br],$r[Br]=null,Ii=$r[--Br],$r[Br]=null,Si=$r[--Br],$r[Br]=null}var Rr=null,Ir=null,kt=!1,gs=null;function _R(t,e){var n=Wr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Vb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rr=t,Ir=Uo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rr=t,Ir=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ka!==null?{id:Si,overflow:Ii}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rr=t,Ir=null,!0):!1;default:return!1}}function Gv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kv(t){if(kt){var e=Ir;if(e){var n=e;if(!Vb(t,e)){if(Gv(t))throw Error(K(418));e=Uo(n.nextSibling);var r=Rr;e&&Vb(t,e)?_R(r,n):(t.flags=t.flags&-4097|2,kt=!1,Rr=t)}}else{if(Gv(t))throw Error(K(418));t.flags=t.flags&-4097|2,kt=!1,Rr=t}}}function jb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rr=t}function vf(t){if(t!==Rr)return!1;if(!kt)return jb(t),kt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bv(t.type,t.memoizedProps)),e&&(e=Ir)){if(Gv(t))throw wR(),Error(K(418));for(;e;)_R(t,e),e=Uo(e.nextSibling)}if(jb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ir=Uo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ir=null}}else Ir=Rr?Uo(t.stateNode.nextSibling):null;return!0}function wR(){for(var t=Ir;t;)t=Uo(t.nextSibling)}function Rc(){Ir=Rr=null,kt=!1}function e0(t){gs===null?gs=[t]:gs.push(t)}var PV=Ji.ReactCurrentBatchConfig;function Ou(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function _f(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ub(t){var e=t._init;return e(t._payload)}function ER(t){function e(E,v){if(t){var S=E.deletions;S===null?(E.deletions=[v],E.flags|=16):S.push(v)}}function n(E,v){if(!t)return null;for(;v!==null;)e(E,v),v=v.sibling;return null}function r(E,v){for(E=new Map;v!==null;)v.key!==null?E.set(v.key,v):E.set(v.index,v),v=v.sibling;return E}function s(E,v){return E=Wo(E,v),E.index=0,E.sibling=null,E}function i(E,v,S){return E.index=S,t?(S=E.alternate,S!==null?(S=S.index,S<v?(E.flags|=2,v):S):(E.flags|=2,v)):(E.flags|=1048576,v)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,v,S,C){return v===null||v.tag!==6?(v=Ay(S,E.mode,C),v.return=E,v):(v=s(v,S),v.return=E,v)}function l(E,v,S,C){var O=S.type;return O===zl?d(E,v,S.props.children,C,S.key):v!==null&&(v.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Eo&&Ub(O)===v.type)?(C=s(v,S.props),C.ref=Ou(E,v,S),C.return=E,C):(C=ep(S.type,S.key,S.props,null,E.mode,C),C.ref=Ou(E,v,S),C.return=E,C)}function c(E,v,S,C){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=ky(S,E.mode,C),v.return=E,v):(v=s(v,S.children||[]),v.return=E,v)}function d(E,v,S,C,O){return v===null||v.tag!==7?(v=Wa(S,E.mode,C,O),v.return=E,v):(v=s(v,S),v.return=E,v)}function h(E,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ay(""+v,E.mode,S),v.return=E,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case lf:return S=ep(v.type,v.key,v.props,null,E.mode,S),S.ref=Ou(E,null,v),S.return=E,S;case Ul:return v=ky(v,E.mode,S),v.return=E,v;case Eo:var C=v._init;return h(E,C(v._payload),S)}if(Ku(v)||Au(v))return v=Wa(v,E.mode,S,null),v.return=E,v;_f(E,v)}return null}function f(E,v,S,C){var O=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return O!==null?null:a(E,v,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case lf:return S.key===O?l(E,v,S,C):null;case Ul:return S.key===O?c(E,v,S,C):null;case Eo:return O=S._init,f(E,v,O(S._payload),C)}if(Ku(S)||Au(S))return O!==null?null:d(E,v,S,C,null);_f(E,S)}return null}function p(E,v,S,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return E=E.get(S)||null,a(v,E,""+C,O);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case lf:return E=E.get(C.key===null?S:C.key)||null,l(v,E,C,O);case Ul:return E=E.get(C.key===null?S:C.key)||null,c(v,E,C,O);case Eo:var M=C._init;return p(E,v,S,M(C._payload),O)}if(Ku(C)||Au(C))return E=E.get(S)||null,d(v,E,C,O,null);_f(v,C)}return null}function T(E,v,S,C){for(var O=null,M=null,b=v,I=v=0,A=null;b!==null&&I<S.length;I++){b.index>I?(A=b,b=null):A=b.sibling;var R=f(E,b,S[I],C);if(R===null){b===null&&(b=A);break}t&&b&&R.alternate===null&&e(E,b),v=i(R,v,I),M===null?O=R:M.sibling=R,M=R,b=A}if(I===S.length)return n(E,b),kt&&ba(E,I),O;if(b===null){for(;I<S.length;I++)b=h(E,S[I],C),b!==null&&(v=i(b,v,I),M===null?O=b:M.sibling=b,M=b);return kt&&ba(E,I),O}for(b=r(E,b);I<S.length;I++)A=p(b,E,I,S[I],C),A!==null&&(t&&A.alternate!==null&&b.delete(A.key===null?I:A.key),v=i(A,v,I),M===null?O=A:M.sibling=A,M=A);return t&&b.forEach(function(N){return e(E,N)}),kt&&ba(E,I),O}function y(E,v,S,C){var O=Au(S);if(typeof O!="function")throw Error(K(150));if(S=O.call(S),S==null)throw Error(K(151));for(var M=O=null,b=v,I=v=0,A=null,R=S.next();b!==null&&!R.done;I++,R=S.next()){b.index>I?(A=b,b=null):A=b.sibling;var N=f(E,b,R.value,C);if(N===null){b===null&&(b=A);break}t&&b&&N.alternate===null&&e(E,b),v=i(N,v,I),M===null?O=N:M.sibling=N,M=N,b=A}if(R.done)return n(E,b),kt&&ba(E,I),O;if(b===null){for(;!R.done;I++,R=S.next())R=h(E,R.value,C),R!==null&&(v=i(R,v,I),M===null?O=R:M.sibling=R,M=R);return kt&&ba(E,I),O}for(b=r(E,b);!R.done;I++,R=S.next())R=p(b,E,I,R.value,C),R!==null&&(t&&R.alternate!==null&&b.delete(R.key===null?I:R.key),v=i(R,v,I),M===null?O=R:M.sibling=R,M=R);return t&&b.forEach(function(D){return e(E,D)}),kt&&ba(E,I),O}function w(E,v,S,C){if(typeof S=="object"&&S!==null&&S.type===zl&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case lf:e:{for(var O=S.key,M=v;M!==null;){if(M.key===O){if(O=S.type,O===zl){if(M.tag===7){n(E,M.sibling),v=s(M,S.props.children),v.return=E,E=v;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Eo&&Ub(O)===M.type){n(E,M.sibling),v=s(M,S.props),v.ref=Ou(E,M,S),v.return=E,E=v;break e}n(E,M);break}else e(E,M);M=M.sibling}S.type===zl?(v=Wa(S.props.children,E.mode,C,S.key),v.return=E,E=v):(C=ep(S.type,S.key,S.props,null,E.mode,C),C.ref=Ou(E,v,S),C.return=E,E=C)}return o(E);case Ul:e:{for(M=S.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){n(E,v.sibling),v=s(v,S.children||[]),v.return=E,E=v;break e}else{n(E,v);break}else e(E,v);v=v.sibling}v=ky(S,E.mode,C),v.return=E,E=v}return o(E);case Eo:return M=S._init,w(E,v,M(S._payload),C)}if(Ku(S))return T(E,v,S,C);if(Au(S))return y(E,v,S,C);_f(E,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(n(E,v.sibling),v=s(v,S),v.return=E,E=v):(n(E,v),v=Ay(S,E.mode,C),v.return=E,E=v),o(E)):n(E,v)}return w}var Ac=ER(!0),TR=ER(!1),Pp=ha(null),Np=null,Ql=null,t0=null;function n0(){t0=Ql=Np=null}function r0(t){var e=Pp.current;It(Pp),t._currentValue=e}function Qv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function oc(t,e){Np=t,t0=Ql=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(cr=!0),t.firstContext=null)}function Kr(t){var e=t._currentValue;if(t0!==t)if(t={context:t,memoizedValue:e,next:null},Ql===null){if(Np===null)throw Error(K(308));Ql=t,Np.dependencies={lanes:0,firstContext:t}}else Ql=Ql.next=t;return e}var ka=null;function s0(t){ka===null?ka=[t]:ka.push(t)}function bR(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,s0(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ui(t,r)}function Ui(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var To=!1;function i0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ki(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ke&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ui(t,n)}return s=r.interleaved,s===null?(e.next=e,s0(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ui(t,n)}function Kf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ww(t,n)}}function zb(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dp(t,e,n,r){var s=t.updateQueue;To=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,y=a;switch(f=e,p=n,y.tag){case 1:if(T=y.payload,typeof T=="function"){h=T.call(p,h,f);break e}h=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=y.payload,f=typeof T=="function"?T.call(p,h,f):T,f==null)break e;h=Lt({},h,f);break e;case 2:To=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ya|=o,t.lanes=o,t.memoizedState=h}}function $b(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(K(191,s));s.call(r)}}}var vh={},Xs=ha(vh),jd=ha(vh),Ud=ha(vh);function Pa(t){if(t===vh)throw Error(K(174));return t}function o0(t,e){switch(vt(Ud,e),vt(jd,t),vt(Xs,vh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Av(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Av(e,t)}It(Xs),vt(Xs,e)}function kc(){It(Xs),It(jd),It(Ud)}function SR(t){Pa(Ud.current);var e=Pa(Xs.current),n=Av(e,t.type);e!==n&&(vt(jd,t),vt(Xs,n))}function a0(t){jd.current===t&&(It(Xs),It(jd))}var Nt=ha(0);function Op(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var by=[];function l0(){for(var t=0;t<by.length;t++)by[t]._workInProgressVersionPrimary=null;by.length=0}var Qf=Ji.ReactCurrentDispatcher,xy=Ji.ReactCurrentBatchConfig,Qa=0,Ot=null,tn=null,un=null,Lp=!1,cd=!1,zd=0,NV=0;function Rn(){throw Error(K(321))}function c0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Rs(t[n],e[n]))return!1;return!0}function u0(t,e,n,r,s,i){if(Qa=i,Ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qf.current=t===null||t.memoizedState===null?MV:FV,t=n(r,s),cd){i=0;do{if(cd=!1,zd=0,25<=i)throw Error(K(301));i+=1,un=tn=null,e.updateQueue=null,Qf.current=VV,t=n(r,s)}while(cd)}if(Qf.current=Mp,e=tn!==null&&tn.next!==null,Qa=0,un=tn=Ot=null,Lp=!1,e)throw Error(K(300));return t}function d0(){var t=zd!==0;return zd=0,t}function zs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?Ot.memoizedState=un=t:un=un.next=t,un}function Qr(){if(tn===null){var t=Ot.alternate;t=t!==null?t.memoizedState:null}else t=tn.next;var e=un===null?Ot.memoizedState:un.next;if(e!==null)un=e,tn=t;else{if(t===null)throw Error(K(310));tn=t,t={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},un===null?Ot.memoizedState=un=t:un=un.next=t}return un}function $d(t,e){return typeof e=="function"?e(t):e}function Sy(t){var e=Qr(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=tn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Qa&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ot.lanes|=d,Ya|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Rs(r,e.memoizedState)||(cr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ot.lanes|=i,Ya|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Iy(t){var e=Qr(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Rs(i,e.memoizedState)||(cr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function IR(){}function CR(t,e){var n=Ot,r=Qr(),s=e(),i=!Rs(r.memoizedState,s);if(i&&(r.memoizedState=s,cr=!0),r=r.queue,h0(kR.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||un!==null&&un.memoizedState.tag&1){if(n.flags|=2048,Bd(9,AR.bind(null,n,r,s,e),void 0,null),pn===null)throw Error(K(349));Qa&30||RR(n,e,s)}return s}function RR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AR(t,e,n,r){e.value=n,e.getSnapshot=r,PR(e)&&NR(t)}function kR(t,e,n){return n(function(){PR(e)&&NR(t)})}function PR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Rs(t,n)}catch{return!0}}function NR(t){var e=Ui(t,1);e!==null&&Ts(e,t,1,-1)}function Bb(t){var e=zs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$d,lastRenderedState:t},e.queue=t,t=t.dispatch=LV.bind(null,Ot,t),[e.memoizedState,t]}function Bd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function DR(){return Qr().memoizedState}function Yf(t,e,n,r){var s=zs();Ot.flags|=t,s.memoizedState=Bd(1|e,n,void 0,r===void 0?null:r)}function Um(t,e,n,r){var s=Qr();r=r===void 0?null:r;var i=void 0;if(tn!==null){var o=tn.memoizedState;if(i=o.destroy,r!==null&&c0(r,o.deps)){s.memoizedState=Bd(e,n,i,r);return}}Ot.flags|=t,s.memoizedState=Bd(1|e,n,i,r)}function Wb(t,e){return Yf(8390656,8,t,e)}function h0(t,e){return Um(2048,8,t,e)}function OR(t,e){return Um(4,2,t,e)}function LR(t,e){return Um(4,4,t,e)}function MR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function FR(t,e,n){return n=n!=null?n.concat([t]):null,Um(4,4,MR.bind(null,e,t),n)}function f0(){}function VR(t,e){var n=Qr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&c0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function jR(t,e){var n=Qr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&c0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function UR(t,e,n){return Qa&21?(Rs(n,e)||(n=HC(),Ot.lanes|=n,Ya|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,cr=!0),t.memoizedState=n)}function DV(t,e){var n=ot;ot=n!==0&&4>n?n:4,t(!0);var r=xy.transition;xy.transition={};try{t(!1),e()}finally{ot=n,xy.transition=r}}function zR(){return Qr().memoizedState}function OV(t,e,n){var r=Bo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$R(t))BR(e,n);else if(n=bR(t,e,n,r),n!==null){var s=Xn();Ts(n,t,r,s),WR(n,e,r)}}function LV(t,e,n){var r=Bo(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($R(t))BR(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Rs(a,o)){var l=e.interleaved;l===null?(s.next=s,s0(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=bR(t,e,s,r),n!==null&&(s=Xn(),Ts(n,t,r,s),WR(n,e,r))}}function $R(t){var e=t.alternate;return t===Ot||e!==null&&e===Ot}function BR(t,e){cd=Lp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function WR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ww(t,n)}}var Mp={readContext:Kr,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useInsertionEffect:Rn,useLayoutEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useMutableSource:Rn,useSyncExternalStore:Rn,useId:Rn,unstable_isNewReconciler:!1},MV={readContext:Kr,useCallback:function(t,e){return zs().memoizedState=[t,e===void 0?null:e],t},useContext:Kr,useEffect:Wb,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Yf(4194308,4,MR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Yf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yf(4,2,t,e)},useMemo:function(t,e){var n=zs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=OV.bind(null,Ot,t),[r.memoizedState,t]},useRef:function(t){var e=zs();return t={current:t},e.memoizedState=t},useState:Bb,useDebugValue:f0,useDeferredValue:function(t){return zs().memoizedState=t},useTransition:function(){var t=Bb(!1),e=t[0];return t=DV.bind(null,t[1]),zs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ot,s=zs();if(kt){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),pn===null)throw Error(K(349));Qa&30||RR(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Wb(kR.bind(null,r,i,t),[t]),r.flags|=2048,Bd(9,AR.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=zs(),e=pn.identifierPrefix;if(kt){var n=Ii,r=Si;n=(r&~(1<<32-Es(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=zd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=NV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FV={readContext:Kr,useCallback:VR,useContext:Kr,useEffect:h0,useImperativeHandle:FR,useInsertionEffect:OR,useLayoutEffect:LR,useMemo:jR,useReducer:Sy,useRef:DR,useState:function(){return Sy($d)},useDebugValue:f0,useDeferredValue:function(t){var e=Qr();return UR(e,tn.memoizedState,t)},useTransition:function(){var t=Sy($d)[0],e=Qr().memoizedState;return[t,e]},useMutableSource:IR,useSyncExternalStore:CR,useId:zR,unstable_isNewReconciler:!1},VV={readContext:Kr,useCallback:VR,useContext:Kr,useEffect:h0,useImperativeHandle:FR,useInsertionEffect:OR,useLayoutEffect:LR,useMemo:jR,useReducer:Iy,useRef:DR,useState:function(){return Iy($d)},useDebugValue:f0,useDeferredValue:function(t){var e=Qr();return tn===null?e.memoizedState=t:UR(e,tn.memoizedState,t)},useTransition:function(){var t=Iy($d)[0],e=Qr().memoizedState;return[t,e]},useMutableSource:IR,useSyncExternalStore:CR,useId:zR,unstable_isNewReconciler:!1};function us(t,e){if(t&&t.defaultProps){e=Lt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Lt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zm={isMounted:function(t){return(t=t._reactInternals)?fl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xn(),s=Bo(t),i=ki(r,s);i.payload=e,n!=null&&(i.callback=n),e=zo(t,i,s),e!==null&&(Ts(e,t,s,r),Kf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xn(),s=Bo(t),i=ki(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=zo(t,i,s),e!==null&&(Ts(e,t,s,r),Kf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xn(),r=Bo(t),s=ki(n,r);s.tag=2,e!=null&&(s.callback=e),e=zo(t,s,r),e!==null&&(Ts(e,t,r,n),Kf(e,t,r))}};function Hb(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ld(n,r)||!Ld(s,i):!0}function HR(t,e,n){var r=!1,s=ta,i=e.contextType;return typeof i=="object"&&i!==null?i=Kr(i):(s=hr(e)?Ga:Un.current,r=e.contextTypes,i=(r=r!=null)?Cc(t,s):ta),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function qb(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zm.enqueueReplaceState(e,e.state,null)}function Xv(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},i0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Kr(i):(i=hr(e)?Ga:Un.current,s.context=Cc(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Yv(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&zm.enqueueReplaceState(s,s.state,null),Dp(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Pc(t,e){try{var n="",r=e;do n+=hF(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Cy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Jv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jV=typeof WeakMap=="function"?WeakMap:Map;function qR(t,e,n){n=ki(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Vp||(Vp=!0,l_=r),Jv(t,e)},n}function GR(t,e,n){n=ki(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Jv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Jv(t,e),typeof r!="function"&&($o===null?$o=new Set([this]):$o.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Gb(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new jV;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ZV.bind(null,t,e,n),e.then(t,t))}function Kb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qb(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ki(-1,1),e.tag=2,zo(n,e,1))),n.lanes|=1),t)}var UV=Ji.ReactCurrentOwner,cr=!1;function Gn(t,e,n,r){e.child=t===null?TR(e,null,n,r):Ac(e,t.child,n,r)}function Yb(t,e,n,r,s){n=n.render;var i=e.ref;return oc(e,s),r=u0(t,e,n,r,i,s),n=d0(),t!==null&&!cr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zi(t,e,s)):(kt&&n&&Jw(e),e.flags|=1,Gn(t,e,r,s),e.child)}function Xb(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!E0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,KR(t,e,i,r,s)):(t=ep(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ld,n(o,r)&&t.ref===e.ref)return zi(t,e,s)}return e.flags|=1,t=Wo(i,r),t.ref=e.ref,t.return=e,e.child=t}function KR(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ld(i,r)&&t.ref===e.ref)if(cr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(cr=!0);else return e.lanes=t.lanes,zi(t,e,s)}return Zv(t,e,n,r,s)}function QR(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(Xl,Tr),Tr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,vt(Xl,Tr),Tr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,vt(Xl,Tr),Tr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,vt(Xl,Tr),Tr|=r;return Gn(t,e,s,n),e.child}function YR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zv(t,e,n,r,s){var i=hr(n)?Ga:Un.current;return i=Cc(e,i),oc(e,s),n=u0(t,e,n,r,i,s),r=d0(),t!==null&&!cr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zi(t,e,s)):(kt&&r&&Jw(e),e.flags|=1,Gn(t,e,n,s),e.child)}function Jb(t,e,n,r,s){if(hr(n)){var i=!0;Rp(e)}else i=!1;if(oc(e,s),e.stateNode===null)Xf(t,e),HR(e,n,r),Xv(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Kr(c):(c=hr(n)?Ga:Un.current,c=Cc(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&qb(e,o,r,c),To=!1;var f=e.memoizedState;o.state=f,Dp(e,r,o,s),l=e.memoizedState,a!==r||f!==l||dr.current||To?(typeof d=="function"&&(Yv(e,n,d,r),l=e.memoizedState),(a=To||Hb(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,xR(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:us(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Kr(l):(l=hr(n)?Ga:Un.current,l=Cc(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&qb(e,o,r,l),To=!1,f=e.memoizedState,o.state=f,Dp(e,r,o,s);var T=e.memoizedState;a!==h||f!==T||dr.current||To?(typeof p=="function"&&(Yv(e,n,p,r),T=e.memoizedState),(c=To||Hb(e,n,c,r,f,T,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return e_(t,e,n,r,i,s)}function e_(t,e,n,r,s,i){YR(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Fb(e,n,!1),zi(t,e,i);r=e.stateNode,UV.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ac(e,t.child,null,i),e.child=Ac(e,null,a,i)):Gn(t,e,a,i),e.memoizedState=r.state,s&&Fb(e,n,!0),e.child}function XR(t){var e=t.stateNode;e.pendingContext?Mb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Mb(t,e.context,!1),o0(t,e.containerInfo)}function Zb(t,e,n,r,s){return Rc(),e0(s),e.flags|=256,Gn(t,e,n,r),e.child}var t_={dehydrated:null,treeContext:null,retryLane:0};function n_(t){return{baseLanes:t,cachePool:null,transitions:null}}function JR(t,e,n){var r=e.pendingProps,s=Nt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),vt(Nt,s&1),t===null)return Kv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Wm(o,r,0,null),t=Wa(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=n_(n),e.memoizedState=t_,t):p0(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return zV(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Wo(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Wo(a,i):(i=Wa(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?n_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=t_,r}return i=t.child,t=i.sibling,r=Wo(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function p0(t,e){return e=Wm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wf(t,e,n,r){return r!==null&&e0(r),Ac(e,t.child,null,n),t=p0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zV(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Cy(Error(K(422))),wf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Wm({mode:"visible",children:r.children},s,0,null),i=Wa(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ac(e,t.child,null,o),e.child.memoizedState=n_(o),e.memoizedState=t_,i);if(!(e.mode&1))return wf(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(K(419)),r=Cy(i,r,void 0),wf(t,e,o,r)}if(a=(o&t.childLanes)!==0,cr||a){if(r=pn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ui(t,s),Ts(r,t,s,-1))}return w0(),r=Cy(Error(K(421))),wf(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=ej.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ir=Uo(s.nextSibling),Rr=e,kt=!0,gs=null,t!==null&&($r[Br++]=Si,$r[Br++]=Ii,$r[Br++]=Ka,Si=t.id,Ii=t.overflow,Ka=e),e=p0(e,r.children),e.flags|=4096,e)}function ex(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qv(t.return,e,n)}function Ry(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ZR(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Gn(t,e,r.children,n),r=Nt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ex(t,n,e);else if(t.tag===19)ex(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(vt(Nt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Op(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ry(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Op(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ry(e,!0,n,null,i);break;case"together":Ry(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ya|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=Wo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $V(t,e,n){switch(e.tag){case 3:XR(e),Rc();break;case 5:SR(e);break;case 1:hr(e.type)&&Rp(e);break;case 4:o0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;vt(Pp,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(vt(Nt,Nt.current&1),e.flags|=128,null):n&e.child.childLanes?JR(t,e,n):(vt(Nt,Nt.current&1),t=zi(t,e,n),t!==null?t.sibling:null);vt(Nt,Nt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ZR(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),vt(Nt,Nt.current),r)break;return null;case 22:case 23:return e.lanes=0,QR(t,e,n)}return zi(t,e,n)}var eA,r_,tA,nA;eA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};r_=function(){};tA=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Pa(Xs.current);var i=null;switch(n){case"input":s=Sv(t,s),r=Sv(t,r),i=[];break;case"select":s=Lt({},s,{value:void 0}),r=Lt({},r,{value:void 0}),i=[];break;case"textarea":s=Rv(t,s),r=Rv(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ip)}kv(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Rd.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Rd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Tt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};nA=function(t,e,n,r){n!==r&&(e.flags|=4)};function Lu(t,e){if(!kt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function An(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function BV(t,e,n){var r=e.pendingProps;switch(Zw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(e),null;case 1:return hr(e.type)&&Cp(),An(e),null;case 3:return r=e.stateNode,kc(),It(dr),It(Un),l0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(vf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gs!==null&&(d_(gs),gs=null))),r_(t,e),An(e),null;case 5:a0(e);var s=Pa(Ud.current);if(n=e.type,t!==null&&e.stateNode!=null)tA(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return An(e),null}if(t=Pa(Xs.current),vf(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[qs]=e,r[Vd]=i,t=(e.mode&1)!==0,n){case"dialog":Tt("cancel",r),Tt("close",r);break;case"iframe":case"object":case"embed":Tt("load",r);break;case"video":case"audio":for(s=0;s<Yu.length;s++)Tt(Yu[s],r);break;case"source":Tt("error",r);break;case"img":case"image":case"link":Tt("error",r),Tt("load",r);break;case"details":Tt("toggle",r);break;case"input":cb(r,i),Tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Tt("invalid",r);break;case"textarea":db(r,i),Tt("invalid",r)}kv(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&yf(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&yf(r.textContent,a,t),s=["children",""+a]):Rd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Tt("scroll",r)}switch(n){case"input":cf(r),ub(r,i,!0);break;case"textarea":cf(r),hb(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ip)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[qs]=e,t[Vd]=r,eA(t,e,!1,!1),e.stateNode=t;e:{switch(o=Pv(n,r),n){case"dialog":Tt("cancel",t),Tt("close",t),s=r;break;case"iframe":case"object":case"embed":Tt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Yu.length;s++)Tt(Yu[s],t);s=r;break;case"source":Tt("error",t),s=r;break;case"img":case"image":case"link":Tt("error",t),Tt("load",t),s=r;break;case"details":Tt("toggle",t),s=r;break;case"input":cb(t,r),s=Sv(t,r),Tt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Lt({},r,{value:void 0}),Tt("invalid",t);break;case"textarea":db(t,r),s=Rv(t,r),Tt("invalid",t);break;default:s=r}kv(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?DC(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&PC(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ad(t,l):typeof l=="number"&&Ad(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Rd.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Tt("scroll",t):l!=null&&Vw(t,i,l,o))}switch(n){case"input":cf(t),ub(t,r,!1);break;case"textarea":cf(t),hb(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ea(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?nc(t,!!r.multiple,i,!1):r.defaultValue!=null&&nc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ip)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return An(e),null;case 6:if(t&&e.stateNode!=null)nA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=Pa(Ud.current),Pa(Xs.current),vf(e)){if(r=e.stateNode,n=e.memoizedProps,r[qs]=e,(i=r.nodeValue!==n)&&(t=Rr,t!==null))switch(t.tag){case 3:yf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yf(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qs]=e,e.stateNode=r}return An(e),null;case 13:if(It(Nt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(kt&&Ir!==null&&e.mode&1&&!(e.flags&128))wR(),Rc(),e.flags|=98560,i=!1;else if(i=vf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(K(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[qs]=e}else Rc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;An(e),i=!1}else gs!==null&&(d_(gs),gs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Nt.current&1?sn===0&&(sn=3):w0())),e.updateQueue!==null&&(e.flags|=4),An(e),null);case 4:return kc(),r_(t,e),t===null&&Md(e.stateNode.containerInfo),An(e),null;case 10:return r0(e.type._context),An(e),null;case 17:return hr(e.type)&&Cp(),An(e),null;case 19:if(It(Nt),i=e.memoizedState,i===null)return An(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Lu(i,!1);else{if(sn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Op(t),o!==null){for(e.flags|=128,Lu(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return vt(Nt,Nt.current&1|2),e.child}t=t.sibling}i.tail!==null&&$t()>Nc&&(e.flags|=128,r=!0,Lu(i,!1),e.lanes=4194304)}else{if(!r)if(t=Op(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Lu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!kt)return An(e),null}else 2*$t()-i.renderingStartTime>Nc&&n!==1073741824&&(e.flags|=128,r=!0,Lu(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=$t(),e.sibling=null,n=Nt.current,vt(Nt,r?n&1|2:n&1),e):(An(e),null);case 22:case 23:return _0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Tr&1073741824&&(An(e),e.subtreeFlags&6&&(e.flags|=8192)):An(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function WV(t,e){switch(Zw(e),e.tag){case 1:return hr(e.type)&&Cp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return kc(),It(dr),It(Un),l0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return a0(e),null;case 13:if(It(Nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));Rc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return It(Nt),null;case 4:return kc(),null;case 10:return r0(e.type._context),null;case 22:case 23:return _0(),null;case 24:return null;default:return null}}var Ef=!1,Dn=!1,HV=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Yl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ut(t,e,r)}else n.current=null}function s_(t,e,n){try{n()}catch(r){Ut(t,e,r)}}var tx=!1;function qV(t,e){if(zv=bp,t=aR(),Xw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for($v={focusedElem:t,selectionRange:n},bp=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var y=T.memoizedProps,w=T.memoizedState,E=e.stateNode,v=E.getSnapshotBeforeUpdate(e.elementType===e.type?y:us(e.type,y),w);E.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(C){Ut(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return T=tx,tx=!1,T}function ud(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&s_(e,n,i)}s=s.next}while(s!==r)}}function $m(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function i_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rA(t){var e=t.alternate;e!==null&&(t.alternate=null,rA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qs],delete e[Vd],delete e[Hv],delete e[RV],delete e[AV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sA(t){return t.tag===5||t.tag===3||t.tag===4}function nx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function o_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ip));else if(r!==4&&(t=t.child,t!==null))for(o_(t,e,n),t=t.sibling;t!==null;)o_(t,e,n),t=t.sibling}function a_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(a_(t,e,n),t=t.sibling;t!==null;)a_(t,e,n),t=t.sibling}var yn=null,ps=!1;function po(t,e,n){for(n=n.child;n!==null;)iA(t,e,n),n=n.sibling}function iA(t,e,n){if(Ys&&typeof Ys.onCommitFiberUnmount=="function")try{Ys.onCommitFiberUnmount(Om,n)}catch{}switch(n.tag){case 5:Dn||Yl(n,e);case 6:var r=yn,s=ps;yn=null,po(t,e,n),yn=r,ps=s,yn!==null&&(ps?(t=yn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yn.removeChild(n.stateNode));break;case 18:yn!==null&&(ps?(t=yn,n=n.stateNode,t.nodeType===8?Ey(t.parentNode,n):t.nodeType===1&&Ey(t,n),Dd(t)):Ey(yn,n.stateNode));break;case 4:r=yn,s=ps,yn=n.stateNode.containerInfo,ps=!0,po(t,e,n),yn=r,ps=s;break;case 0:case 11:case 14:case 15:if(!Dn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&s_(n,e,o),s=s.next}while(s!==r)}po(t,e,n);break;case 1:if(!Dn&&(Yl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ut(n,e,a)}po(t,e,n);break;case 21:po(t,e,n);break;case 22:n.mode&1?(Dn=(r=Dn)||n.memoizedState!==null,po(t,e,n),Dn=r):po(t,e,n);break;default:po(t,e,n)}}function rx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new HV),e.forEach(function(r){var s=tj.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function as(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:yn=a.stateNode,ps=!1;break e;case 3:yn=a.stateNode.containerInfo,ps=!0;break e;case 4:yn=a.stateNode.containerInfo,ps=!0;break e}a=a.return}if(yn===null)throw Error(K(160));iA(i,o,s),yn=null,ps=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Ut(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oA(e,t),e=e.sibling}function oA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(as(e,t),Us(t),r&4){try{ud(3,t,t.return),$m(3,t)}catch(y){Ut(t,t.return,y)}try{ud(5,t,t.return)}catch(y){Ut(t,t.return,y)}}break;case 1:as(e,t),Us(t),r&512&&n!==null&&Yl(n,n.return);break;case 5:if(as(e,t),Us(t),r&512&&n!==null&&Yl(n,n.return),t.flags&32){var s=t.stateNode;try{Ad(s,"")}catch(y){Ut(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&RC(s,i),Pv(a,o);var c=Pv(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?DC(s,h):d==="dangerouslySetInnerHTML"?PC(s,h):d==="children"?Ad(s,h):Vw(s,d,h,c)}switch(a){case"input":Iv(s,i);break;case"textarea":AC(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?nc(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?nc(s,!!i.multiple,i.defaultValue,!0):nc(s,!!i.multiple,i.multiple?[]:"",!1))}s[Vd]=i}catch(y){Ut(t,t.return,y)}}break;case 6:if(as(e,t),Us(t),r&4){if(t.stateNode===null)throw Error(K(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){Ut(t,t.return,y)}}break;case 3:if(as(e,t),Us(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Dd(e.containerInfo)}catch(y){Ut(t,t.return,y)}break;case 4:as(e,t),Us(t);break;case 13:as(e,t),Us(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(y0=$t())),r&4&&rx(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Dn=(c=Dn)||d,as(e,t),Dn=c):as(e,t),Us(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ce=t,d=t.child;d!==null;){for(h=ce=d;ce!==null;){switch(f=ce,p=f.child,f.tag){case 0:case 11:case 14:case 15:ud(4,f,f.return);break;case 1:Yl(f,f.return);var T=f.stateNode;if(typeof T.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(y){Ut(r,n,y)}}break;case 5:Yl(f,f.return);break;case 22:if(f.memoizedState!==null){ix(h);continue}}p!==null?(p.return=f,ce=p):ix(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=NC("display",o))}catch(y){Ut(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){Ut(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:as(e,t),Us(t),r&4&&rx(t);break;case 21:break;default:as(e,t),Us(t)}}function Us(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(sA(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ad(s,""),r.flags&=-33);var i=nx(t);a_(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=nx(t);o_(t,a,o);break;default:throw Error(K(161))}}catch(l){Ut(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function GV(t,e,n){ce=t,aA(t)}function aA(t,e,n){for(var r=(t.mode&1)!==0;ce!==null;){var s=ce,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ef;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Dn;a=Ef;var c=Dn;if(Ef=o,(Dn=l)&&!c)for(ce=s;ce!==null;)o=ce,l=o.child,o.tag===22&&o.memoizedState!==null?ox(s):l!==null?(l.return=o,ce=l):ox(s);for(;i!==null;)ce=i,aA(i),i=i.sibling;ce=s,Ef=a,Dn=c}sx(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ce=i):sx(t)}}function sx(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dn||$m(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Dn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:us(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&$b(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$b(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Dd(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Dn||e.flags&512&&i_(e)}catch(f){Ut(e,e.return,f)}}if(e===t){ce=null;break}if(n=e.sibling,n!==null){n.return=e.return,ce=n;break}ce=e.return}}function ix(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ce=n;break}ce=e.return}}function ox(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$m(4,e)}catch(l){Ut(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Ut(e,s,l)}}var i=e.return;try{i_(e)}catch(l){Ut(e,i,l)}break;case 5:var o=e.return;try{i_(e)}catch(l){Ut(e,o,l)}}}catch(l){Ut(e,e.return,l)}if(e===t){ce=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ce=a;break}ce=e.return}}var KV=Math.ceil,Fp=Ji.ReactCurrentDispatcher,m0=Ji.ReactCurrentOwner,Gr=Ji.ReactCurrentBatchConfig,Ke=0,pn=null,Kt=null,_n=0,Tr=0,Xl=ha(0),sn=0,Wd=null,Ya=0,Bm=0,g0=0,dd=null,ar=null,y0=0,Nc=1/0,wi=null,Vp=!1,l_=null,$o=null,Tf=!1,Oo=null,jp=0,hd=0,c_=null,Jf=-1,Zf=0;function Xn(){return Ke&6?$t():Jf!==-1?Jf:Jf=$t()}function Bo(t){return t.mode&1?Ke&2&&_n!==0?_n&-_n:PV.transition!==null?(Zf===0&&(Zf=HC()),Zf):(t=ot,t!==0||(t=window.event,t=t===void 0?16:JC(t.type)),t):1}function Ts(t,e,n,r){if(50<hd)throw hd=0,c_=null,Error(K(185));mh(t,n,r),(!(Ke&2)||t!==pn)&&(t===pn&&(!(Ke&2)&&(Bm|=n),sn===4&&xo(t,_n)),fr(t,r),n===1&&Ke===0&&!(e.mode&1)&&(Nc=$t()+500,jm&&fa()))}function fr(t,e){var n=t.callbackNode;PF(t,e);var r=Tp(t,t===pn?_n:0);if(r===0)n!==null&&mb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&mb(n),e===1)t.tag===0?kV(ax.bind(null,t)):yR(ax.bind(null,t)),IV(function(){!(Ke&6)&&fa()}),n=null;else{switch(qC(r)){case 1:n=Bw;break;case 4:n=BC;break;case 16:n=Ep;break;case 536870912:n=WC;break;default:n=Ep}n=mA(n,lA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lA(t,e){if(Jf=-1,Zf=0,Ke&6)throw Error(K(327));var n=t.callbackNode;if(ac()&&t.callbackNode!==n)return null;var r=Tp(t,t===pn?_n:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Up(t,r);else{e=r;var s=Ke;Ke|=2;var i=uA();(pn!==t||_n!==e)&&(wi=null,Nc=$t()+500,Ba(t,e));do try{XV();break}catch(a){cA(t,a)}while(!0);n0(),Fp.current=i,Ke=s,Kt!==null?e=0:(pn=null,_n=0,e=sn)}if(e!==0){if(e===2&&(s=Mv(t),s!==0&&(r=s,e=u_(t,s))),e===1)throw n=Wd,Ba(t,0),xo(t,r),fr(t,$t()),n;if(e===6)xo(t,r);else{if(s=t.current.alternate,!(r&30)&&!QV(s)&&(e=Up(t,r),e===2&&(i=Mv(t),i!==0&&(r=i,e=u_(t,i))),e===1))throw n=Wd,Ba(t,0),xo(t,r),fr(t,$t()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:xa(t,ar,wi);break;case 3:if(xo(t,r),(r&130023424)===r&&(e=y0+500-$t(),10<e)){if(Tp(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Xn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Wv(xa.bind(null,t,ar,wi),e);break}xa(t,ar,wi);break;case 4:if(xo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Es(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=$t()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*KV(r/1960))-r,10<r){t.timeoutHandle=Wv(xa.bind(null,t,ar,wi),r);break}xa(t,ar,wi);break;case 5:xa(t,ar,wi);break;default:throw Error(K(329))}}}return fr(t,$t()),t.callbackNode===n?lA.bind(null,t):null}function u_(t,e){var n=dd;return t.current.memoizedState.isDehydrated&&(Ba(t,e).flags|=256),t=Up(t,e),t!==2&&(e=ar,ar=n,e!==null&&d_(e)),t}function d_(t){ar===null?ar=t:ar.push.apply(ar,t)}function QV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Rs(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xo(t,e){for(e&=~g0,e&=~Bm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Es(e),r=1<<n;t[n]=-1,e&=~r}}function ax(t){if(Ke&6)throw Error(K(327));ac();var e=Tp(t,0);if(!(e&1))return fr(t,$t()),null;var n=Up(t,e);if(t.tag!==0&&n===2){var r=Mv(t);r!==0&&(e=r,n=u_(t,r))}if(n===1)throw n=Wd,Ba(t,0),xo(t,e),fr(t,$t()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xa(t,ar,wi),fr(t,$t()),null}function v0(t,e){var n=Ke;Ke|=1;try{return t(e)}finally{Ke=n,Ke===0&&(Nc=$t()+500,jm&&fa())}}function Xa(t){Oo!==null&&Oo.tag===0&&!(Ke&6)&&ac();var e=Ke;Ke|=1;var n=Gr.transition,r=ot;try{if(Gr.transition=null,ot=1,t)return t()}finally{ot=r,Gr.transition=n,Ke=e,!(Ke&6)&&fa()}}function _0(){Tr=Xl.current,It(Xl)}function Ba(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,SV(n)),Kt!==null)for(n=Kt.return;n!==null;){var r=n;switch(Zw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cp();break;case 3:kc(),It(dr),It(Un),l0();break;case 5:a0(r);break;case 4:kc();break;case 13:It(Nt);break;case 19:It(Nt);break;case 10:r0(r.type._context);break;case 22:case 23:_0()}n=n.return}if(pn=t,Kt=t=Wo(t.current,null),_n=Tr=e,sn=0,Wd=null,g0=Bm=Ya=0,ar=dd=null,ka!==null){for(e=0;e<ka.length;e++)if(n=ka[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ka=null}return t}function cA(t,e){do{var n=Kt;try{if(n0(),Qf.current=Mp,Lp){for(var r=Ot.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Lp=!1}if(Qa=0,un=tn=Ot=null,cd=!1,zd=0,m0.current=null,n===null||n.return===null){sn=1,Wd=e,Kt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=_n,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Kb(o);if(p!==null){p.flags&=-257,Qb(p,o,a,i,e),p.mode&1&&Gb(i,c,e),e=p,l=c;var T=e.updateQueue;if(T===null){var y=new Set;y.add(l),e.updateQueue=y}else T.add(l);break e}else{if(!(e&1)){Gb(i,c,e),w0();break e}l=Error(K(426))}}else if(kt&&a.mode&1){var w=Kb(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Qb(w,o,a,i,e),e0(Pc(l,a));break e}}i=l=Pc(l,a),sn!==4&&(sn=2),dd===null?dd=[i]:dd.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=qR(i,l,e);zb(i,E);break e;case 1:a=l;var v=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&($o===null||!$o.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=GR(i,a,e);zb(i,C);break e}}i=i.return}while(i!==null)}hA(n)}catch(O){e=O,Kt===n&&n!==null&&(Kt=n=n.return);continue}break}while(!0)}function uA(){var t=Fp.current;return Fp.current=Mp,t===null?Mp:t}function w0(){(sn===0||sn===3||sn===2)&&(sn=4),pn===null||!(Ya&268435455)&&!(Bm&268435455)||xo(pn,_n)}function Up(t,e){var n=Ke;Ke|=2;var r=uA();(pn!==t||_n!==e)&&(wi=null,Ba(t,e));do try{YV();break}catch(s){cA(t,s)}while(!0);if(n0(),Ke=n,Fp.current=r,Kt!==null)throw Error(K(261));return pn=null,_n=0,sn}function YV(){for(;Kt!==null;)dA(Kt)}function XV(){for(;Kt!==null&&!TF();)dA(Kt)}function dA(t){var e=pA(t.alternate,t,Tr);t.memoizedProps=t.pendingProps,e===null?hA(t):Kt=e,m0.current=null}function hA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=WV(n,e),n!==null){n.flags&=32767,Kt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{sn=6,Kt=null;return}}else if(n=BV(n,e,Tr),n!==null){Kt=n;return}if(e=e.sibling,e!==null){Kt=e;return}Kt=e=t}while(e!==null);sn===0&&(sn=5)}function xa(t,e,n){var r=ot,s=Gr.transition;try{Gr.transition=null,ot=1,JV(t,e,n,r)}finally{Gr.transition=s,ot=r}return null}function JV(t,e,n,r){do ac();while(Oo!==null);if(Ke&6)throw Error(K(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(NF(t,i),t===pn&&(Kt=pn=null,_n=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tf||(Tf=!0,mA(Ep,function(){return ac(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Gr.transition,Gr.transition=null;var o=ot;ot=1;var a=Ke;Ke|=4,m0.current=null,qV(t,n),oA(n,t),vV($v),bp=!!zv,$v=zv=null,t.current=n,GV(n),bF(),Ke=a,ot=o,Gr.transition=i}else t.current=n;if(Tf&&(Tf=!1,Oo=t,jp=s),i=t.pendingLanes,i===0&&($o=null),IF(n.stateNode),fr(t,$t()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Vp)throw Vp=!1,t=l_,l_=null,t;return jp&1&&t.tag!==0&&ac(),i=t.pendingLanes,i&1?t===c_?hd++:(hd=0,c_=t):hd=0,fa(),null}function ac(){if(Oo!==null){var t=qC(jp),e=Gr.transition,n=ot;try{if(Gr.transition=null,ot=16>t?16:t,Oo===null)var r=!1;else{if(t=Oo,Oo=null,jp=0,Ke&6)throw Error(K(331));var s=Ke;for(Ke|=4,ce=t.current;ce!==null;){var i=ce,o=i.child;if(ce.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ce=c;ce!==null;){var d=ce;switch(d.tag){case 0:case 11:case 15:ud(8,d,i)}var h=d.child;if(h!==null)h.return=d,ce=h;else for(;ce!==null;){d=ce;var f=d.sibling,p=d.return;if(rA(d),d===c){ce=null;break}if(f!==null){f.return=p,ce=f;break}ce=p}}}var T=i.alternate;if(T!==null){var y=T.child;if(y!==null){T.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}ce=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ce=o;else e:for(;ce!==null;){if(i=ce,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ud(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,ce=E;break e}ce=i.return}}var v=t.current;for(ce=v;ce!==null;){o=ce;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ce=S;else e:for(o=v;ce!==null;){if(a=ce,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$m(9,a)}}catch(O){Ut(a,a.return,O)}if(a===o){ce=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,ce=C;break e}ce=a.return}}if(Ke=s,fa(),Ys&&typeof Ys.onPostCommitFiberRoot=="function")try{Ys.onPostCommitFiberRoot(Om,t)}catch{}r=!0}return r}finally{ot=n,Gr.transition=e}}return!1}function lx(t,e,n){e=Pc(n,e),e=qR(t,e,1),t=zo(t,e,1),e=Xn(),t!==null&&(mh(t,1,e),fr(t,e))}function Ut(t,e,n){if(t.tag===3)lx(t,t,n);else for(;e!==null;){if(e.tag===3){lx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($o===null||!$o.has(r))){t=Pc(n,t),t=GR(e,t,1),e=zo(e,t,1),t=Xn(),e!==null&&(mh(e,1,t),fr(e,t));break}}e=e.return}}function ZV(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xn(),t.pingedLanes|=t.suspendedLanes&n,pn===t&&(_n&n)===n&&(sn===4||sn===3&&(_n&130023424)===_n&&500>$t()-y0?Ba(t,0):g0|=n),fr(t,e)}function fA(t,e){e===0&&(t.mode&1?(e=hf,hf<<=1,!(hf&130023424)&&(hf=4194304)):e=1);var n=Xn();t=Ui(t,e),t!==null&&(mh(t,e,n),fr(t,n))}function ej(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fA(t,n)}function tj(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),fA(t,n)}var pA;pA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||dr.current)cr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return cr=!1,$V(t,e,n);cr=!!(t.flags&131072)}else cr=!1,kt&&e.flags&1048576&&vR(e,kp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xf(t,e),t=e.pendingProps;var s=Cc(e,Un.current);oc(e,n),s=u0(null,e,r,t,s,n);var i=d0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hr(r)?(i=!0,Rp(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,i0(e),s.updater=zm,e.stateNode=s,s._reactInternals=e,Xv(e,r,t,n),e=e_(null,e,r,!0,i,n)):(e.tag=0,kt&&i&&Jw(e),Gn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xf(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=rj(r),t=us(r,t),s){case 0:e=Zv(null,e,r,t,n);break e;case 1:e=Jb(null,e,r,t,n);break e;case 11:e=Yb(null,e,r,t,n);break e;case 14:e=Xb(null,e,r,us(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:us(r,s),Zv(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:us(r,s),Jb(t,e,r,s,n);case 3:e:{if(XR(e),t===null)throw Error(K(387));r=e.pendingProps,i=e.memoizedState,s=i.element,xR(t,e),Dp(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Pc(Error(K(423)),e),e=Zb(t,e,r,n,s);break e}else if(r!==s){s=Pc(Error(K(424)),e),e=Zb(t,e,r,n,s);break e}else for(Ir=Uo(e.stateNode.containerInfo.firstChild),Rr=e,kt=!0,gs=null,n=TR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rc(),r===s){e=zi(t,e,n);break e}Gn(t,e,r,n)}e=e.child}return e;case 5:return SR(e),t===null&&Kv(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Bv(r,s)?o=null:i!==null&&Bv(r,i)&&(e.flags|=32),YR(t,e),Gn(t,e,o,n),e.child;case 6:return t===null&&Kv(e),null;case 13:return JR(t,e,n);case 4:return o0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ac(e,null,r,n):Gn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:us(r,s),Yb(t,e,r,s,n);case 7:return Gn(t,e,e.pendingProps,n),e.child;case 8:return Gn(t,e,e.pendingProps.children,n),e.child;case 12:return Gn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,vt(Pp,r._currentValue),r._currentValue=o,i!==null)if(Rs(i.value,o)){if(i.children===s.children&&!dr.current){e=zi(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ki(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Qv(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(K(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Gn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,oc(e,n),s=Kr(s),r=r(s),e.flags|=1,Gn(t,e,r,n),e.child;case 14:return r=e.type,s=us(r,e.pendingProps),s=us(r.type,s),Xb(t,e,r,s,n);case 15:return KR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:us(r,s),Xf(t,e),e.tag=1,hr(r)?(t=!0,Rp(e)):t=!1,oc(e,n),HR(e,r,s),Xv(e,r,s,n),e_(null,e,r,!0,t,n);case 19:return ZR(t,e,n);case 22:return QR(t,e,n)}throw Error(K(156,e.tag))};function mA(t,e){return $C(t,e)}function nj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(t,e,n,r){return new nj(t,e,n,r)}function E0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rj(t){if(typeof t=="function")return E0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uw)return 11;if(t===zw)return 14}return 2}function Wo(t,e){var n=t.alternate;return n===null?(n=Wr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ep(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")E0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case zl:return Wa(n.children,s,i,e);case jw:o=8,s|=8;break;case Ev:return t=Wr(12,n,e,s|2),t.elementType=Ev,t.lanes=i,t;case Tv:return t=Wr(13,n,e,s),t.elementType=Tv,t.lanes=i,t;case bv:return t=Wr(19,n,e,s),t.elementType=bv,t.lanes=i,t;case SC:return Wm(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bC:o=10;break e;case xC:o=9;break e;case Uw:o=11;break e;case zw:o=14;break e;case Eo:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=Wr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Wa(t,e,n,r){return t=Wr(7,t,r,e),t.lanes=n,t}function Wm(t,e,n,r){return t=Wr(22,t,r,e),t.elementType=SC,t.lanes=n,t.stateNode={isHidden:!1},t}function Ay(t,e,n){return t=Wr(6,t,null,e),t.lanes=n,t}function ky(t,e,n){return e=Wr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sj(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uy(0),this.expirationTimes=uy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uy(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function T0(t,e,n,r,s,i,o,a,l){return t=new sj(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Wr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},i0(i),t}function ij(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ul,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gA(t){if(!t)return ta;t=t._reactInternals;e:{if(fl(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(hr(n))return gR(t,n,e)}return e}function yA(t,e,n,r,s,i,o,a,l){return t=T0(n,r,!0,t,s,i,o,a,l),t.context=gA(null),n=t.current,r=Xn(),s=Bo(n),i=ki(r,s),i.callback=e??null,zo(n,i,s),t.current.lanes=s,mh(t,s,r),fr(t,r),t}function Hm(t,e,n,r){var s=e.current,i=Xn(),o=Bo(s);return n=gA(n),e.context===null?e.context=n:e.pendingContext=n,e=ki(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zo(s,e,o),t!==null&&(Ts(t,s,o,i),Kf(t,s,o)),o}function zp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function b0(t,e){cx(t,e),(t=t.alternate)&&cx(t,e)}function oj(){return null}var vA=typeof reportError=="function"?reportError:function(t){console.error(t)};function x0(t){this._internalRoot=t}qm.prototype.render=x0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));Hm(t,e,null,null)};qm.prototype.unmount=x0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xa(function(){Hm(null,t,null,null)}),e[ji]=null}};function qm(t){this._internalRoot=t}qm.prototype.unstable_scheduleHydration=function(t){if(t){var e=QC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<bo.length&&e!==0&&e<bo[n].priority;n++);bo.splice(n,0,t),n===0&&XC(t)}};function S0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ux(){}function aj(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=zp(o);i.call(c)}}var o=yA(e,r,t,0,null,!1,!1,"",ux);return t._reactRootContainer=o,t[ji]=o.current,Md(t.nodeType===8?t.parentNode:t),Xa(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=zp(l);a.call(c)}}var l=T0(t,0,!1,null,null,!1,!1,"",ux);return t._reactRootContainer=l,t[ji]=l.current,Md(t.nodeType===8?t.parentNode:t),Xa(function(){Hm(e,l,n,r)}),l}function Km(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=zp(o);a.call(l)}}Hm(e,o,t,s)}else o=aj(n,e,t,s,r);return zp(o)}GC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qu(e.pendingLanes);n!==0&&(Ww(e,n|1),fr(e,$t()),!(Ke&6)&&(Nc=$t()+500,fa()))}break;case 13:Xa(function(){var r=Ui(t,1);if(r!==null){var s=Xn();Ts(r,t,1,s)}}),b0(t,1)}};Hw=function(t){if(t.tag===13){var e=Ui(t,134217728);if(e!==null){var n=Xn();Ts(e,t,134217728,n)}b0(t,134217728)}};KC=function(t){if(t.tag===13){var e=Bo(t),n=Ui(t,e);if(n!==null){var r=Xn();Ts(n,t,e,r)}b0(t,e)}};QC=function(){return ot};YC=function(t,e){var n=ot;try{return ot=t,e()}finally{ot=n}};Dv=function(t,e,n){switch(e){case"input":if(Iv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Vm(r);if(!s)throw Error(K(90));CC(r),Iv(r,s)}}}break;case"textarea":AC(t,n);break;case"select":e=n.value,e!=null&&nc(t,!!n.multiple,e,!1)}};MC=v0;FC=Xa;var lj={usingClientEntryPoint:!1,Events:[yh,Hl,Vm,OC,LC,v0]},Mu={findFiberByHostInstance:Aa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cj={bundleType:Mu.bundleType,version:Mu.version,rendererPackageName:Mu.rendererPackageName,rendererConfig:Mu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ji.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=UC(t),t===null?null:t.stateNode},findFiberByHostInstance:Mu.findFiberByHostInstance||oj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bf.isDisabled&&bf.supportsFiber)try{Om=bf.inject(cj),Ys=bf}catch{}}Lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lj;Lr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S0(e))throw Error(K(200));return ij(t,e,null,n)};Lr.createRoot=function(t,e){if(!S0(t))throw Error(K(299));var n=!1,r="",s=vA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=T0(t,1,!1,null,null,n,!1,r,s),t[ji]=e.current,Md(t.nodeType===8?t.parentNode:t),new x0(e)};Lr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=UC(e),t=t===null?null:t.stateNode,t};Lr.flushSync=function(t){return Xa(t)};Lr.hydrate=function(t,e,n){if(!Gm(e))throw Error(K(200));return Km(null,t,e,!0,n)};Lr.hydrateRoot=function(t,e,n){if(!S0(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=vA;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=yA(e,null,t,1,n??null,s,!1,i,o),t[ji]=e.current,Md(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new qm(e)};Lr.render=function(t,e,n){if(!Gm(e))throw Error(K(200));return Km(null,t,e,!1,n)};Lr.unmountComponentAtNode=function(t){if(!Gm(t))throw Error(K(40));return t._reactRootContainer?(Xa(function(){Km(null,null,t,!1,function(){t._reactRootContainer=null,t[ji]=null})}),!0):!1};Lr.unstable_batchedUpdates=v0;Lr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Gm(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Km(t,e,n,!1,r)};Lr.version="18.3.1-next-f1338f8080-20240426";function _A(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_A)}catch(t){console.error(t)}}_A(),_C.exports=Lr;var pa=_C.exports;const I0=aC(pa),uj=oC({__proto__:null,default:I0},[pa]);var wA,dx=pa;wA=dx.createRoot,dx.hydrateRoot;const dj="modulepreload",hj=function(t){return"/"+t},hx={},tt=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=hj(l),l in hx)return;hx[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":dj,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},fj=1,pj=1e6;let Py=0;function mj(){return Py=(Py+1)%Number.MAX_SAFE_INTEGER,Py.toString()}const Ny=new Map,fx=t=>{if(Ny.has(t))return;const e=setTimeout(()=>{Ny.delete(t),fd({type:"REMOVE_TOAST",toastId:t})},pj);Ny.set(t,e)},gj=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,fj)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?fx(n):t.toasts.forEach(r=>{fx(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},tp=[];let np={toasts:[]};function fd(t){np=gj(np,t),tp.forEach(e=>{e(np)})}function yj({...t}){const e=mj(),n=s=>fd({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>fd({type:"DISMISS_TOAST",toastId:e});return fd({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function vj(){const[t,e]=_.useState(np);return _.useEffect(()=>(tp.push(e),()=>{const n=tp.indexOf(e);n>-1&&tp.splice(n,1)}),[]),{...t,toast:yj,dismiss:n=>fd({type:"DISMISS_TOAST",toastId:n})}}function Se(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function px(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function EA(...t){return e=>{let n=!1;const r=t.map(s=>{const i=px(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():px(t[s],null)}}}}function Mt(...t){return _.useCallback(EA(...t),t)}function xZ(t,e){const n=_.createContext(e),r=i=>{const{children:o,...a}=i,l=_.useMemo(()=>a,Object.values(a));return m.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=_.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function pl(t,e=[]){let n=[];function r(i,o){const a=_.createContext(o),l=n.length;n=[...n,o];const c=h=>{var E;const{scope:f,children:p,...T}=h,y=((E=f==null?void 0:f[t])==null?void 0:E[l])||a,w=_.useMemo(()=>T,Object.values(T));return m.jsx(y.Provider,{value:w,children:p})};c.displayName=i+"Provider";function d(h,f){var y;const p=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,T=_.useContext(p);if(T)return T;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>_.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return _.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,_j(s,...e)]}function _j(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Hd(t){const e=Ej(t),n=_.forwardRef((r,s)=>{const{children:i,...o}=r,a=_.Children.toArray(i),l=a.find(bj);if(l){const c=l.props.children,d=a.map(h=>h===l?_.Children.count(c)>1?_.Children.only(null):_.isValidElement(c)?c.props.children:null:h);return m.jsx(e,{...o,ref:s,children:_.isValidElement(c)?_.cloneElement(c,void 0,d):null})}return m.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var wj=Hd("Slot");function Ej(t){const e=_.forwardRef((n,r)=>{const{children:s,...i}=n;if(_.isValidElement(s)){const o=Sj(s),a=xj(i,s.props);return s.type!==_.Fragment&&(a.ref=r?EA(r,o):o),_.cloneElement(s,a)}return _.Children.count(s)>1?_.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var TA=Symbol("radix.slottable");function Tj(t){const e=({children:n})=>m.jsx(m.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=TA,e}function bj(t){return _.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===TA}function xj(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function Sj(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function C0(t){const e=t+"CollectionProvider",[n,r]=pl(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:w,children:E}=y,v=J.useRef(null),S=J.useRef(new Map).current;return m.jsx(s,{scope:w,itemMap:S,collectionRef:v,children:E})};o.displayName=e;const a=t+"CollectionSlot",l=Hd(a),c=J.forwardRef((y,w)=>{const{scope:E,children:v}=y,S=i(a,E),C=Mt(w,S.collectionRef);return m.jsx(l,{ref:C,children:v})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=Hd(d),p=J.forwardRef((y,w)=>{const{scope:E,children:v,...S}=y,C=J.useRef(null),O=Mt(w,C),M=i(d,E);return J.useEffect(()=>(M.itemMap.set(C,{ref:C,...S}),()=>void M.itemMap.delete(C))),m.jsx(f,{[h]:"",ref:O,children:v})});p.displayName=d;function T(y){const w=i(t+"CollectionConsumer",y);return J.useCallback(()=>{const v=w.collectionRef.current;if(!v)return[];const S=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((M,b)=>S.indexOf(M.ref.current)-S.indexOf(b.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},T,r]}var Ij=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Be=Ij.reduce((t,e)=>{const n=Hd(`Primitive.${e}`),r=_.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function bA(t,e){t&&pa.flushSync(()=>t.dispatchEvent(e))}function Yr(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Cj(t,e=globalThis==null?void 0:globalThis.document){const n=Yr(t);_.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Rj="DismissableLayer",h_="dismissableLayer.update",Aj="dismissableLayer.pointerDownOutside",kj="dismissableLayer.focusOutside",mx,xA=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Qm=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=_.useContext(xA),[d,h]=_.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=_.useState({}),T=Mt(e,b=>h(b)),y=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=y.indexOf(w),v=d?y.indexOf(d):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,C=v>=E,O=Nj(b=>{const I=b.target,A=[...c.branches].some(R=>R.contains(I));!C||A||(s==null||s(b),o==null||o(b),b.defaultPrevented||a==null||a())},f),M=Dj(b=>{const I=b.target;[...c.branches].some(R=>R.contains(I))||(i==null||i(b),o==null||o(b),b.defaultPrevented||a==null||a())},f);return Cj(b=>{v===c.layers.size-1&&(r==null||r(b),!b.defaultPrevented&&a&&(b.preventDefault(),a()))},f),_.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(mx=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),gx(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=mx)}},[d,f,n,c]),_.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),gx())},[d,c]),_.useEffect(()=>{const b=()=>p({});return document.addEventListener(h_,b),()=>document.removeEventListener(h_,b)},[]),m.jsx(Be.div,{...l,ref:T,style:{pointerEvents:S?C?"auto":"none":void 0,...t.style},onFocusCapture:Se(t.onFocusCapture,M.onFocusCapture),onBlurCapture:Se(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Se(t.onPointerDownCapture,O.onPointerDownCapture)})});Qm.displayName=Rj;var Pj="DismissableLayerBranch",SA=_.forwardRef((t,e)=>{const n=_.useContext(xA),r=_.useRef(null),s=Mt(e,r);return _.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),m.jsx(Be.div,{...t,ref:s})});SA.displayName=Pj;function Nj(t,e=globalThis==null?void 0:globalThis.document){const n=Yr(t),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){IA(Aj,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Dj(t,e=globalThis==null?void 0:globalThis.document){const n=Yr(t),r=_.useRef(!1);return _.useEffect(()=>{const s=i=>{i.target&&!r.current&&IA(kj,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function gx(){const t=new CustomEvent(h_);document.dispatchEvent(t)}function IA(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?bA(s,i):s.dispatchEvent(i)}var Oj=Qm,Lj=SA,En=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},Mj="Portal",R0=_.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=_.useState(!1);En(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?I0.createPortal(m.jsx(Be.div,{...r,ref:e}),o):null});R0.displayName=Mj;function Fj(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var Ym=t=>{const{present:e,children:n}=t,r=Vj(e),s=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),i=Mt(r.ref,jj(s));return typeof n=="function"||r.isPresent?_.cloneElement(s,{ref:i}):null};Ym.displayName="Presence";function Vj(t){const[e,n]=_.useState(),r=_.useRef(null),s=_.useRef(t),i=_.useRef("none"),o=t?"mounted":"unmounted",[a,l]=Fj(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const c=xf(r.current);i.current=a==="mounted"?c:"none"},[a]),En(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,p=xf(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),En(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=p=>{const y=xf(r.current).includes(p.animationName);if(p.target===e&&y&&(l("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},f=p=>{p.target===e&&(i.current=xf(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:_.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function xf(t){return(t==null?void 0:t.animationName)||"none"}function jj(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Uj=Lw[" useInsertionEffect ".trim().toString()]||En;function Dc({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=zj({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=_.useRef(t!==void 0);_.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=_.useCallback(d=>{var h;if(a){const f=$j(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,c]}function zj({defaultProp:t,onChange:e}){const[n,r]=_.useState(t),s=_.useRef(n),i=_.useRef(e);return Uj(()=>{i.current=e},[e]),_.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function $j(t){return typeof t=="function"}var CA=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Bj="VisuallyHidden",Xm=_.forwardRef((t,e)=>m.jsx(Be.span,{...t,ref:e,style:{...CA,...t.style}}));Xm.displayName=Bj;var Wj=Xm,A0="ToastProvider",[k0,Hj,qj]=C0("Toast"),[RA,SZ]=pl("Toast",[qj]),[Gj,Jm]=RA(A0),AA=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=_.useState(null),[c,d]=_.useState(0),h=_.useRef(!1),f=_.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${A0}\`. Expected non-empty \`string\`.`),m.jsx(k0.Provider,{scope:e,children:m.jsx(Gj,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:_.useCallback(()=>d(p=>p+1),[]),onToastRemove:_.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};AA.displayName=A0;var kA="ToastViewport",Kj=["F8"],f_="toast.viewportPause",p_="toast.viewportResume",PA=_.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=Kj,label:s="Notifications ({hotkey})",...i}=t,o=Jm(kA,n),a=Hj(n),l=_.useRef(null),c=_.useRef(null),d=_.useRef(null),h=_.useRef(null),f=Mt(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=o.toastCount>0;_.useEffect(()=>{const w=E=>{var S;r.length!==0&&r.every(C=>E[C]||E.code===C)&&((S=h.current)==null||S.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),_.useEffect(()=>{const w=l.current,E=h.current;if(T&&w&&E){const v=()=>{if(!o.isClosePausedRef.current){const M=new CustomEvent(f_);E.dispatchEvent(M),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const M=new CustomEvent(p_);E.dispatchEvent(M),o.isClosePausedRef.current=!1}},C=M=>{!w.contains(M.relatedTarget)&&S()},O=()=>{w.contains(document.activeElement)||S()};return w.addEventListener("focusin",v),w.addEventListener("focusout",C),w.addEventListener("pointermove",v),w.addEventListener("pointerleave",O),window.addEventListener("blur",v),window.addEventListener("focus",S),()=>{w.removeEventListener("focusin",v),w.removeEventListener("focusout",C),w.removeEventListener("pointermove",v),w.removeEventListener("pointerleave",O),window.removeEventListener("blur",v),window.removeEventListener("focus",S)}}},[T,o.isClosePausedRef]);const y=_.useCallback(({tabbingDirection:w})=>{const v=a().map(S=>{const C=S.ref.current,O=[C,...a4(C)];return w==="forwards"?O:O.reverse()});return(w==="forwards"?v.reverse():v).flat()},[a]);return _.useEffect(()=>{const w=h.current;if(w){const E=v=>{var O,M,b;const S=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!S){const I=document.activeElement,A=v.shiftKey;if(v.target===w&&A){(O=c.current)==null||O.focus();return}const D=y({tabbingDirection:A?"backwards":"forwards"}),P=D.findIndex(B=>B===I);Dy(D.slice(P+1))?v.preventDefault():A?(M=c.current)==null||M.focus():(b=d.current)==null||b.focus()}};return w.addEventListener("keydown",E),()=>w.removeEventListener("keydown",E)}},[a,y]),m.jsxs(Lj,{ref:l,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:T?void 0:"none"},children:[T&&m.jsx(m_,{ref:c,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"forwards"});Dy(w)}}),m.jsx(k0.Slot,{scope:n,children:m.jsx(Be.ol,{tabIndex:-1,...i,ref:f})}),T&&m.jsx(m_,{ref:d,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"backwards"});Dy(w)}})]})});PA.displayName=kA;var NA="ToastFocusProxy",m_=_.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Jm(NA,n);return m.jsx(Xm,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});m_.displayName=NA;var _h="Toast",Qj="toast.swipeStart",Yj="toast.swipeMove",Xj="toast.swipeCancel",Jj="toast.swipeEnd",DA=_.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=Dc({prop:r,defaultProp:s??!0,onChange:i,caller:_h});return m.jsx(Ym,{present:n||a,children:m.jsx(t4,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Yr(t.onPause),onResume:Yr(t.onResume),onSwipeStart:Se(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Se(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Se(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Se(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});DA.displayName=_h;var[Zj,e4]=RA(_h,{onClose(){}}),t4=_.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...T}=t,y=Jm(_h,n),[w,E]=_.useState(null),v=Mt(e,B=>E(B)),S=_.useRef(null),C=_.useRef(null),O=s||y.duration,M=_.useRef(0),b=_.useRef(O),I=_.useRef(0),{onToastAdd:A,onToastRemove:R}=y,N=Yr(()=>{var se;(w==null?void 0:w.contains(document.activeElement))&&((se=y.viewport)==null||se.focus()),o()}),D=_.useCallback(B=>{!B||B===1/0||(window.clearTimeout(I.current),M.current=new Date().getTime(),I.current=window.setTimeout(N,B))},[N]);_.useEffect(()=>{const B=y.viewport;if(B){const se=()=>{D(b.current),c==null||c()},Q=()=>{const oe=new Date().getTime()-M.current;b.current=b.current-oe,window.clearTimeout(I.current),l==null||l()};return B.addEventListener(f_,Q),B.addEventListener(p_,se),()=>{B.removeEventListener(f_,Q),B.removeEventListener(p_,se)}}},[y.viewport,O,l,c,D]),_.useEffect(()=>{i&&!y.isClosePausedRef.current&&D(O)},[i,O,y.isClosePausedRef,D]),_.useEffect(()=>(A(),()=>R()),[A,R]);const P=_.useMemo(()=>w?UA(w):null,[w]);return y.viewport?m.jsxs(m.Fragment,{children:[P&&m.jsx(n4,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:P}),m.jsx(Zj,{scope:n,onClose:N,children:pa.createPortal(m.jsx(k0.ItemSlot,{scope:n,children:m.jsx(Oj,{asChild:!0,onEscapeKeyDown:Se(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||N(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:m.jsx(Be.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...T,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Se(t.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:Se(t.onPointerDown,B=>{B.button===0&&(S.current={x:B.clientX,y:B.clientY})}),onPointerMove:Se(t.onPointerMove,B=>{if(!S.current)return;const se=B.clientX-S.current.x,Q=B.clientY-S.current.y,oe=!!C.current,j=["left","right"].includes(y.swipeDirection),$=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,Z=j?$(0,se):0,pe=j?0:$(0,Q),te=B.pointerType==="touch"?10:2,Y={x:Z,y:pe},ye={originalEvent:B,delta:Y};oe?(C.current=Y,Sf(Yj,h,ye,{discrete:!1})):yx(Y,y.swipeDirection,te)?(C.current=Y,Sf(Qj,d,ye,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(se)>te||Math.abs(Q)>te)&&(S.current=null)}),onPointerUp:Se(t.onPointerUp,B=>{const se=C.current,Q=B.target;if(Q.hasPointerCapture(B.pointerId)&&Q.releasePointerCapture(B.pointerId),C.current=null,S.current=null,se){const oe=B.currentTarget,j={originalEvent:B,delta:se};yx(se,y.swipeDirection,y.swipeThreshold)?Sf(Jj,p,j,{discrete:!0}):Sf(Xj,f,j,{discrete:!0}),oe.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),n4=t=>{const{__scopeToast:e,children:n,...r}=t,s=Jm(_h,e),[i,o]=_.useState(!1),[a,l]=_.useState(!1);return i4(()=>o(!0)),_.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:m.jsx(R0,{asChild:!0,children:m.jsx(Xm,{...r,children:i&&m.jsxs(m.Fragment,{children:[s.label," ",n]})})})},r4="ToastTitle",OA=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.jsx(Be.div,{...r,ref:e})});OA.displayName=r4;var s4="ToastDescription",LA=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.jsx(Be.div,{...r,ref:e})});LA.displayName=s4;var MA="ToastAction",FA=_.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?m.jsx(jA,{altText:n,asChild:!0,children:m.jsx(P0,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${MA}\`. Expected non-empty \`string\`.`),null)});FA.displayName=MA;var VA="ToastClose",P0=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=e4(VA,n);return m.jsx(jA,{asChild:!0,children:m.jsx(Be.button,{type:"button",...r,ref:e,onClick:Se(t.onClick,s.onClose)})})});P0.displayName=VA;var jA=_.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return m.jsx(Be.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function UA(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),o4(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...UA(r))}}),e}function Sf(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?bA(s,i):s.dispatchEvent(i)}var yx=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function i4(t=()=>{}){const e=Yr(t);En(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function o4(t){return t.nodeType===t.ELEMENT_NODE}function a4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Dy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var l4=AA,zA=PA,$A=DA,BA=OA,WA=LA,HA=FA,qA=P0;function GA(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=GA(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function KA(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=GA(t))&&(r&&(r+=" "),r+=e);return r}const vx=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,_x=KA,N0=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return _x(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=vx(d)||vx(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(T=>{let[y,w]=T;return Array.isArray(w)?w.includes({...i,...a}[y]):{...i,...a}[y]===w})?[...c,h,f]:c},[]);return _x(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QA=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var u4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>_.createElement("svg",{ref:l,...u4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:QA("lucide",s),...a},[...o.map(([c,d])=>_.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=(t,e)=>{const n=_.forwardRef(({className:r,...s},i)=>_.createElement(d4,{ref:i,iconNode:e,className:QA(`lucide-${c4(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=Pt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=Pt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=Pt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=Pt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=Pt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=Pt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=Pt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=Pt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=Pt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=Pt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=Pt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=Pt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=Pt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=Pt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=Pt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=Pt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=Pt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=Pt("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=Pt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=Pt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=Pt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=Pt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=Pt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=Pt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),D0="-",T4=t=>{const e=x4(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(D0);return a[0]===""&&a.length!==1&&a.shift(),rk(a,e)||b4(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},rk=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?rk(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(D0);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},Ex=/^\[(.+)\]$/,b4=t=>{if(Ex.test(t)){const e=Ex.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},x4=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return I4(Object.entries(t.classGroups),n).forEach(([i,o])=>{v_(o,r,i,e)}),r},v_=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Tx(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(S4(s)){v_(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{v_(o,Tx(e,i),n,r)})})},Tx=(t,e)=>{let n=t;return e.split(D0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},S4=t=>t.isThemeGetter,I4=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,C4=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},sk="!",R4=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let w=0;w<a.length;w++){let E=a[w];if(c===0){if(E===s&&(r||a.slice(w,w+i)===e)){l.push(a.slice(d,w)),d=w+i;continue}if(E==="/"){h=w;continue}}E==="["?c++:E==="]"&&c--}const f=l.length===0?a:a.substring(d),p=f.startsWith(sk),T=p?f.substring(1):f,y=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:T,maybePostfixModifierPosition:y}};return n?a=>n({className:a,parseClassName:o}):o},A4=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},k4=t=>({cache:C4(t.cacheSize),parseClassName:R4(t),...T4(t)}),P4=/\s+/,N4=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(P4);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let T=!!p,y=r(T?f.substring(0,p):f);if(!y){if(!T){a=c+(a.length>0?" "+a:a);continue}if(y=r(f),!y){a=c+(a.length>0?" "+a:a);continue}T=!1}const w=A4(d).join(":"),E=h?w+sk:w,v=E+y;if(i.includes(v))continue;i.push(v);const S=s(y,T);for(let C=0;C<S.length;++C){const O=S[C];i.push(E+O)}a=c+(a.length>0?" "+a:a)}return a};function D4(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=ik(e))&&(r&&(r+=" "),r+=n);return r}const ik=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=ik(t[r]))&&(n&&(n+=" "),n+=e);return n};function O4(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=k4(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=N4(l,n);return s(l,d),d}return function(){return i(D4.apply(null,arguments))}}const Et=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},ok=/^\[(?:([a-z-]+):)?(.+)\]$/i,L4=/^\d+\/\d+$/,M4=new Set(["px","full","screen"]),F4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,V4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,j4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,U4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,z4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,yi=t=>cc(t)||M4.has(t)||L4.test(t),mo=t=>Zc(t,"length",Q4),cc=t=>!!t&&!Number.isNaN(Number(t)),Oy=t=>Zc(t,"number",cc),Fu=t=>!!t&&Number.isInteger(Number(t)),$4=t=>t.endsWith("%")&&cc(t.slice(0,-1)),Pe=t=>ok.test(t),go=t=>F4.test(t),B4=new Set(["length","size","percentage"]),W4=t=>Zc(t,B4,ak),H4=t=>Zc(t,"position",ak),q4=new Set(["image","url"]),G4=t=>Zc(t,q4,X4),K4=t=>Zc(t,"",Y4),Vu=()=>!0,Zc=(t,e,n)=>{const r=ok.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Q4=t=>V4.test(t)&&!j4.test(t),ak=()=>!1,Y4=t=>U4.test(t),X4=t=>z4.test(t),J4=()=>{const t=Et("colors"),e=Et("spacing"),n=Et("blur"),r=Et("brightness"),s=Et("borderColor"),i=Et("borderRadius"),o=Et("borderSpacing"),a=Et("borderWidth"),l=Et("contrast"),c=Et("grayscale"),d=Et("hueRotate"),h=Et("invert"),f=Et("gap"),p=Et("gradientColorStops"),T=Et("gradientColorStopPositions"),y=Et("inset"),w=Et("margin"),E=Et("opacity"),v=Et("padding"),S=Et("saturate"),C=Et("scale"),O=Et("sepia"),M=Et("skew"),b=Et("space"),I=Et("translate"),A=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",Pe,e],D=()=>[Pe,e],P=()=>["",yi,mo],B=()=>["auto",cc,Pe],se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],j=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Pe],Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],pe=()=>[cc,Pe];return{cacheSize:500,separator:":",theme:{colors:[Vu],spacing:[yi,mo],blur:["none","",go,Pe],brightness:pe(),borderColor:[t],borderRadius:["none","","full",go,Pe],borderSpacing:D(),borderWidth:P(),contrast:pe(),grayscale:$(),hueRotate:pe(),invert:$(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[$4,mo],inset:N(),margin:N(),opacity:pe(),padding:D(),saturate:pe(),scale:pe(),sepia:$(),skew:pe(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Pe]}],container:["container"],columns:[{columns:[go]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...se(),Pe]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Fu,Pe]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Pe]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Fu,Pe]}],"grid-cols":[{"grid-cols":[Vu]}],"col-start-end":[{col:["auto",{span:["full",Fu,Pe]},Pe]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Vu]}],"row-start-end":[{row:["auto",{span:[Fu,Pe]},Pe]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Pe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...j()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...j(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...j(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[b]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[b]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Pe,e]}],"min-w":[{"min-w":[Pe,e,"min","max","fit"]}],"max-w":[{"max-w":[Pe,e,"none","full","min","max","fit","prose",{screen:[go]},go]}],h:[{h:[Pe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Pe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Pe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Pe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",go,mo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Oy]}],"font-family":[{font:[Vu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Pe]}],"line-clamp":[{"line-clamp":["none",cc,Oy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",yi,Pe]}],"list-image":[{"list-image":["none",Pe]}],"list-style-type":[{list:["none","disc","decimal",Pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",yi,mo]}],"underline-offset":[{"underline-offset":["auto",yi,Pe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...se(),H4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",W4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},G4]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[T]}],"gradient-via-pos":[{via:[T]}],"gradient-to-pos":[{to:[T]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:Q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[yi,Pe]}],"outline-w":[{outline:[yi,mo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[yi,mo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",go,K4]}],"shadow-color":[{shadow:[Vu]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...oe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":oe()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",go,Pe]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[S]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Pe]}],duration:[{duration:pe()}],ease:[{ease:["linear","in","out","in-out",Pe]}],delay:[{delay:pe()}],animate:[{animate:["none","spin","ping","pulse","bounce",Pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Fu,Pe]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Pe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[yi,mo,Oy]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Z4=O4(J4);function lt(...t){return Z4(KA(t))}const eU=l4,lk=_.forwardRef(({className:t,...e},n)=>m.jsx(zA,{ref:n,className:lt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));lk.displayName=zA.displayName;const tU=N0("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ck=_.forwardRef(({className:t,variant:e,...n},r)=>m.jsx($A,{ref:r,className:lt(tU({variant:e}),t),...n}));ck.displayName=$A.displayName;const nU=_.forwardRef(({className:t,...e},n)=>m.jsx(HA,{ref:n,className:lt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));nU.displayName=HA.displayName;const uk=_.forwardRef(({className:t,...e},n)=>m.jsx(qA,{ref:n,className:lt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:m.jsx(E4,{className:"h-4 w-4"})}));uk.displayName=qA.displayName;const dk=_.forwardRef(({className:t,...e},n)=>m.jsx(BA,{ref:n,className:lt("text-sm font-semibold",t),...e}));dk.displayName=BA.displayName;const hk=_.forwardRef(({className:t,...e},n)=>m.jsx(WA,{ref:n,className:lt("text-sm opacity-90",t),...e}));hk.displayName=WA.displayName;function rU(){const{toasts:t}=vj();return m.jsxs(eU,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return m.jsxs(ck,{...i,children:[m.jsxs("div",{className:"grid gap-1",children:[n&&m.jsx(dk,{children:n}),r&&m.jsx(hk,{children:r})]}),s,m.jsx(uk,{})]},e)}),m.jsx(lk,{})]})}var bx=["light","dark"],sU="(prefers-color-scheme: dark)",iU=_.createContext(void 0),oU={setTheme:t=>{},themes:[]},aU=()=>{var t;return(t=_.useContext(iU))!=null?t:oU};_.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(T=>`'${T}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?bx.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(T,y=!1,w=!0)=>{let E=o?o[T]:T,v=y?T+"|| ''":`'${E}'`,S="";return s&&w&&!y&&bx.includes(T)&&(S+=`d.style.colorScheme = '${T}';`),n==="class"?y||E?S+=`c.add(${v})`:S+="null":E&&(S+=`d[s](n,${v})`),S},p=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${sU}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return _.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})});var lU=t=>{switch(t){case"success":return dU;case"info":return fU;case"warning":return hU;case"error":return pU;default:return null}},cU=Array(12).fill(0),uU=({visible:t,className:e})=>J.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},J.createElement("div",{className:"sonner-spinner"},cU.map((n,r)=>J.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),dU=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),hU=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),fU=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),pU=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),mU=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},J.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),J.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),gU=()=>{let[t,e]=J.useState(document.hidden);return J.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},__=1,yU=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:__++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],J.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(_U(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||__++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ir=new yU,vU=(t,e)=>{let n=(e==null?void 0:e.id)||__++;return ir.addToast({title:t,...e,id:n}),n},_U=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",wU=vU,EU=()=>ir.toasts,TU=()=>ir.getActiveToasts(),nn=Object.assign(wU,{success:ir.success,info:ir.info,warning:ir.warning,error:ir.error,custom:ir.custom,message:ir.message,promise:ir.promise,dismiss:ir.dismiss,loading:ir.loading},{getHistory:EU,getToasts:TU});function bU(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}bU(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function If(t){return t.label!==void 0}var xU=3,SU="32px",IU="16px",xx=4e3,CU=356,RU=14,AU=20,kU=200;function ls(...t){return t.filter(Boolean).join(" ")}function PU(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var NU=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:f,toast:p,unstyled:T,interacting:y,setHeights:w,visibleToasts:E,heights:v,index:S,toasts:C,expanded:O,removeToast:M,defaultRichColors:b,closeButton:I,style:A,cancelButtonStyle:R,actionButtonStyle:N,className:D="",descriptionClassName:P="",duration:B,position:se,gap:Q,loadingIcon:oe,expandByDefault:j,classNames:$,icons:Z,closeButtonAriaLabel:pe="Close toast",pauseWhenPageIsHidden:te}=t,[Y,ye]=J.useState(null),[Ce,Qe]=J.useState(null),[X,Ve]=J.useState(!1),[ht,Oe]=J.useState(!1),[ke,ge]=J.useState(!1),[ct,Jt]=J.useState(!1),[mr,Zt]=J.useState(!1),[ts,ui]=J.useState(0),[Fr,so]=J.useState(0),Os=J.useRef(p.duration||B||xx),Sl=J.useRef(null),gr=J.useRef(null),yr=S===0,Ls=S+1<=E,Ye=p.type,ft=p.dismissible!==!1,Bn=p.className||"",nr=p.descriptionClassName||"",Ms=J.useMemo(()=>v.findIndex(we=>we.toastId===p.id)||0,[v,p.id]),io=J.useMemo(()=>{var we;return(we=p.closeButton)!=null?we:I},[p.closeButton,I]),Fs=J.useMemo(()=>p.duration||B||xx,[p.duration,B]),Wn=J.useRef(0),Vr=J.useRef(0),di=J.useRef(0),ns=J.useRef(null),[wu,oo]=se.split("-"),Vs=J.useMemo(()=>v.reduce((we,je,Xe)=>Xe>=Ms?we:we+je.height,0),[v,Ms]),ao=gU(),rs=p.invert||f,ss=Ye==="loading";Vr.current=J.useMemo(()=>Ms*Q+Vs,[Ms,Vs]),J.useEffect(()=>{Os.current=Fs},[Fs]),J.useEffect(()=>{Ve(!0)},[]),J.useEffect(()=>{let we=gr.current;if(we){let je=we.getBoundingClientRect().height;return so(je),w(Xe=>[{toastId:p.id,height:je,position:p.position},...Xe]),()=>w(Xe=>Xe.filter(Ft=>Ft.toastId!==p.id))}},[w,p.id]),J.useLayoutEffect(()=>{if(!X)return;let we=gr.current,je=we.style.height;we.style.height="auto";let Xe=we.getBoundingClientRect().height;we.style.height=je,so(Xe),w(Ft=>Ft.find(xn=>xn.toastId===p.id)?Ft.map(xn=>xn.toastId===p.id?{...xn,height:Xe}:xn):[{toastId:p.id,height:Xe,position:p.position},...Ft])},[X,p.title,p.description,w,p.id]);let rr=J.useCallback(()=>{Oe(!0),ui(Vr.current),w(we=>we.filter(je=>je.toastId!==p.id)),setTimeout(()=>{M(p)},kU)},[p,M,w,Vr]);J.useEffect(()=>{if(p.promise&&Ye==="loading"||p.duration===1/0||p.type==="loading")return;let we;return O||y||te&&ao?(()=>{if(di.current<Wn.current){let je=new Date().getTime()-Wn.current;Os.current=Os.current-je}di.current=new Date().getTime()})():Os.current!==1/0&&(Wn.current=new Date().getTime(),we=setTimeout(()=>{var je;(je=p.onAutoClose)==null||je.call(p,p),rr()},Os.current)),()=>clearTimeout(we)},[O,y,p,Ye,te,ao,rr]),J.useEffect(()=>{p.delete&&rr()},[rr,p.delete]);function jr(){var we,je,Xe;return Z!=null&&Z.loading?J.createElement("div",{className:ls($==null?void 0:$.loader,(we=p==null?void 0:p.classNames)==null?void 0:we.loader,"sonner-loader"),"data-visible":Ye==="loading"},Z.loading):oe?J.createElement("div",{className:ls($==null?void 0:$.loader,(je=p==null?void 0:p.classNames)==null?void 0:je.loader,"sonner-loader"),"data-visible":Ye==="loading"},oe):J.createElement(uU,{className:ls($==null?void 0:$.loader,(Xe=p==null?void 0:p.classNames)==null?void 0:Xe.loader),visible:Ye==="loading"})}return J.createElement("li",{tabIndex:0,ref:gr,className:ls(D,Bn,$==null?void 0:$.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,$==null?void 0:$.default,$==null?void 0:$[Ye],(n=p==null?void 0:p.classNames)==null?void 0:n[Ye]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:b,"data-styled":!(p.jsx||p.unstyled||T),"data-mounted":X,"data-promise":!!p.promise,"data-swiped":mr,"data-removed":ht,"data-visible":Ls,"data-y-position":wu,"data-x-position":oo,"data-index":S,"data-front":yr,"data-swiping":ke,"data-dismissible":ft,"data-type":Ye,"data-invert":rs,"data-swipe-out":ct,"data-swipe-direction":Ce,"data-expanded":!!(O||j&&X),style:{"--index":S,"--toasts-before":S,"--z-index":C.length-S,"--offset":`${ht?ts:Vr.current}px`,"--initial-height":j?"auto":`${Fr}px`,...A,...p.style},onDragEnd:()=>{ge(!1),ye(null),ns.current=null},onPointerDown:we=>{ss||!ft||(Sl.current=new Date,ui(Vr.current),we.target.setPointerCapture(we.pointerId),we.target.tagName!=="BUTTON"&&(ge(!0),ns.current={x:we.clientX,y:we.clientY}))},onPointerUp:()=>{var we,je,Xe,Ft;if(ct||!ft)return;ns.current=null;let xn=Number(((we=gr.current)==null?void 0:we.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),pt=Number(((je=gr.current)==null?void 0:je.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),L=new Date().getTime()-((Xe=Sl.current)==null?void 0:Xe.getTime()),F=Y==="x"?xn:pt,U=Math.abs(F)/L;if(Math.abs(F)>=AU||U>.11){ui(Vr.current),(Ft=p.onDismiss)==null||Ft.call(p,p),Qe(Y==="x"?xn>0?"right":"left":pt>0?"down":"up"),rr(),Jt(!0),Zt(!1);return}ge(!1),ye(null)},onPointerMove:we=>{var je,Xe,Ft,xn;if(!ns.current||!ft||((je=window.getSelection())==null?void 0:je.toString().length)>0)return;let pt=we.clientY-ns.current.y,L=we.clientX-ns.current.x,F=(Xe=t.swipeDirections)!=null?Xe:PU(se);!Y&&(Math.abs(L)>1||Math.abs(pt)>1)&&ye(Math.abs(L)>Math.abs(pt)?"x":"y");let U={x:0,y:0};Y==="y"?(F.includes("top")||F.includes("bottom"))&&(F.includes("top")&&pt<0||F.includes("bottom")&&pt>0)&&(U.y=pt):Y==="x"&&(F.includes("left")||F.includes("right"))&&(F.includes("left")&&L<0||F.includes("right")&&L>0)&&(U.x=L),(Math.abs(U.x)>0||Math.abs(U.y)>0)&&Zt(!0),(Ft=gr.current)==null||Ft.style.setProperty("--swipe-amount-x",`${U.x}px`),(xn=gr.current)==null||xn.style.setProperty("--swipe-amount-y",`${U.y}px`)}},io&&!p.jsx?J.createElement("button",{"aria-label":pe,"data-disabled":ss,"data-close-button":!0,onClick:ss||!ft?()=>{}:()=>{var we;rr(),(we=p.onDismiss)==null||we.call(p,p)},className:ls($==null?void 0:$.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(i=Z==null?void 0:Z.close)!=null?i:mU):null,p.jsx||_.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:J.createElement(J.Fragment,null,Ye||p.icon||p.promise?J.createElement("div",{"data-icon":"",className:ls($==null?void 0:$.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||jr():null,p.type!=="loading"?p.icon||(Z==null?void 0:Z[Ye])||lU(Ye):null):null,J.createElement("div",{"data-content":"",className:ls($==null?void 0:$.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},J.createElement("div",{"data-title":"",className:ls($==null?void 0:$.title,(l=p==null?void 0:p.classNames)==null?void 0:l.title)},typeof p.title=="function"?p.title():p.title),p.description?J.createElement("div",{"data-description":"",className:ls(P,nr,$==null?void 0:$.description,(c=p==null?void 0:p.classNames)==null?void 0:c.description)},typeof p.description=="function"?p.description():p.description):null),_.isValidElement(p.cancel)?p.cancel:p.cancel&&If(p.cancel)?J.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||R,onClick:we=>{var je,Xe;If(p.cancel)&&ft&&((Xe=(je=p.cancel).onClick)==null||Xe.call(je,we),rr())},className:ls($==null?void 0:$.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,_.isValidElement(p.action)?p.action:p.action&&If(p.action)?J.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||N,onClick:we=>{var je,Xe;If(p.action)&&((Xe=(je=p.action).onClick)==null||Xe.call(je,we),!we.defaultPrevented&&rr())},className:ls($==null?void 0:$.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function Sx(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function DU(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?IU:SU;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var OU=_.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:f,style:p,visibleToasts:T=xU,toastOptions:y,dir:w=Sx(),gap:E=RU,loadingIcon:v,icons:S,containerAriaLabel:C="Notifications",pauseWhenPageIsHidden:O}=t,[M,b]=J.useState([]),I=J.useMemo(()=>Array.from(new Set([r].concat(M.filter(te=>te.position).map(te=>te.position)))),[M,r]),[A,R]=J.useState([]),[N,D]=J.useState(!1),[P,B]=J.useState(!1),[se,Q]=J.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),oe=J.useRef(null),j=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=J.useRef(null),Z=J.useRef(!1),pe=J.useCallback(te=>{b(Y=>{var ye;return(ye=Y.find(Ce=>Ce.id===te.id))!=null&&ye.delete||ir.dismiss(te.id),Y.filter(({id:Ce})=>Ce!==te.id)})},[]);return J.useEffect(()=>ir.subscribe(te=>{if(te.dismiss){b(Y=>Y.map(ye=>ye.id===te.id?{...ye,delete:!0}:ye));return}setTimeout(()=>{I0.flushSync(()=>{b(Y=>{let ye=Y.findIndex(Ce=>Ce.id===te.id);return ye!==-1?[...Y.slice(0,ye),{...Y[ye],...te},...Y.slice(ye+1)]:[te,...Y]})})})}),[]),J.useEffect(()=>{if(d!=="system"){Q(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Q("dark"):Q("light")),typeof window>"u")return;let te=window.matchMedia("(prefers-color-scheme: dark)");try{te.addEventListener("change",({matches:Y})=>{Q(Y?"dark":"light")})}catch{te.addListener(({matches:ye})=>{try{Q(ye?"dark":"light")}catch(Ce){console.error(Ce)}})}},[d]),J.useEffect(()=>{M.length<=1&&D(!1)},[M]),J.useEffect(()=>{let te=Y=>{var ye,Ce;s.every(Qe=>Y[Qe]||Y.code===Qe)&&(D(!0),(ye=oe.current)==null||ye.focus()),Y.code==="Escape"&&(document.activeElement===oe.current||(Ce=oe.current)!=null&&Ce.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},[s]),J.useEffect(()=>{if(oe.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,Z.current=!1)}},[oe.current]),J.createElement("section",{ref:e,"aria-label":`${C} ${j}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((te,Y)=>{var ye;let[Ce,Qe]=te.split("-");return M.length?J.createElement("ol",{key:te,dir:w==="auto"?Sx():w,tabIndex:-1,ref:oe,className:a,"data-sonner-toaster":!0,"data-theme":se,"data-y-position":Ce,"data-lifted":N&&M.length>1&&!i,"data-x-position":Qe,style:{"--front-toast-height":`${((ye=A[0])==null?void 0:ye.height)||0}px`,"--width":`${CU}px`,"--gap":`${E}px`,...p,...DU(l,c)},onBlur:X=>{Z.current&&!X.currentTarget.contains(X.relatedTarget)&&(Z.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||Z.current||(Z.current=!0,$.current=X.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{P||D(!1)},onDragEnd:()=>D(!1),onPointerDown:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},M.filter(X=>!X.position&&Y===0||X.position===te).map((X,Ve)=>{var ht,Oe;return J.createElement(NU,{key:X.id,icons:S,index:Ve,toast:X,defaultRichColors:h,duration:(ht=y==null?void 0:y.duration)!=null?ht:f,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:n,visibleToasts:T,closeButton:(Oe=y==null?void 0:y.closeButton)!=null?Oe:o,interacting:P,position:te,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:pe,toasts:M.filter(ke=>ke.position==X.position),heights:A.filter(ke=>ke.position==X.position),setHeights:R,expandByDefault:i,gap:E,loadingIcon:v,expanded:N,pauseWhenPageIsHidden:O,swipeDirections:t.swipeDirections})})):null}))});const LU=({...t})=>{const{theme:e="system"}=aU();return m.jsx(OU,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var MU=Lw[" useId ".trim().toString()]||(()=>{}),FU=0;function eu(t){const[e,n]=_.useState(MU());return En(()=>{t||n(r=>r??String(FU++))},[t]),t||(e?`radix-${e}`:"")}const VU=["top","right","bottom","left"],na=Math.min,xr=Math.max,$p=Math.round,Cf=Math.floor,Js=t=>({x:t,y:t}),jU={left:"right",right:"left",bottom:"top",top:"bottom"},UU={start:"end",end:"start"};function w_(t,e,n){return xr(t,na(e,n))}function $i(t,e){return typeof t=="function"?t(e):t}function Bi(t){return t.split("-")[0]}function tu(t){return t.split("-")[1]}function O0(t){return t==="x"?"y":"x"}function L0(t){return t==="y"?"height":"width"}const zU=new Set(["top","bottom"]);function Ks(t){return zU.has(Bi(t))?"y":"x"}function M0(t){return O0(Ks(t))}function $U(t,e,n){n===void 0&&(n=!1);const r=tu(t),s=M0(t),i=L0(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Bp(o)),[o,Bp(o)]}function BU(t){const e=Bp(t);return[E_(t),e,E_(e)]}function E_(t){return t.replace(/start|end/g,e=>UU[e])}const Ix=["left","right"],Cx=["right","left"],WU=["top","bottom"],HU=["bottom","top"];function qU(t,e,n){switch(t){case"top":case"bottom":return n?e?Cx:Ix:e?Ix:Cx;case"left":case"right":return e?WU:HU;default:return[]}}function GU(t,e,n,r){const s=tu(t);let i=qU(Bi(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(E_)))),i}function Bp(t){return t.replace(/left|right|bottom|top/g,e=>jU[e])}function KU(t){return{top:0,right:0,bottom:0,left:0,...t}}function fk(t){return typeof t!="number"?KU(t):{top:t,right:t,bottom:t,left:t}}function Wp(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Rx(t,e,n){let{reference:r,floating:s}=t;const i=Ks(e),o=M0(e),a=L0(o),l=Bi(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(tu(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const QU=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=Rx(c,r,l),f=r,p={},T=0;for(let y=0;y<a.length;y++){const{name:w,fn:E}=a[y],{x:v,y:S,data:C,reset:O}=await E({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});d=v??d,h=S??h,p={...p,[w]:{...p[w],...C}},O&&T<=50&&(T++,typeof O=="object"&&(O.placement&&(f=O.placement),O.rects&&(c=O.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):O.rects),{x:d,y:h}=Rx(c,f,l)),y=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:p}};async function qd(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=$i(e,t),T=fk(p),w=a[f?h==="floating"?"reference":"floating":h],E=Wp(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),v=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),C=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},O=Wp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:S,strategy:l}):v);return{top:(E.top-O.top+T.top)/C.y,bottom:(O.bottom-E.bottom+T.bottom)/C.y,left:(E.left-O.left+T.left)/C.x,right:(O.right-E.right+T.right)/C.x}}const YU=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=$i(t,e)||{};if(c==null)return{};const h=fk(d),f={x:n,y:r},p=M0(s),T=L0(p),y=await o.getDimensions(c),w=p==="y",E=w?"top":"left",v=w?"bottom":"right",S=w?"clientHeight":"clientWidth",C=i.reference[T]+i.reference[p]-f[p]-i.floating[T],O=f[p]-i.reference[p],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let b=M?M[S]:0;(!b||!await(o.isElement==null?void 0:o.isElement(M)))&&(b=a.floating[S]||i.floating[T]);const I=C/2-O/2,A=b/2-y[T]/2-1,R=na(h[E],A),N=na(h[v],A),D=R,P=b-y[T]-N,B=b/2-y[T]/2+I,se=w_(D,B,P),Q=!l.arrow&&tu(s)!=null&&B!==se&&i.reference[T]/2-(B<D?R:N)-y[T]/2<0,oe=Q?B<D?B-D:B-P:0;return{[p]:f[p]+oe,data:{[p]:se,centerOffset:B-se-oe,...Q&&{alignmentOffset:oe}},reset:Q}}}),XU=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:y=!0,...w}=$i(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=Bi(s),v=Ks(a),S=Bi(a)===a,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=f||(S||!y?[Bp(a)]:BU(a)),M=T!=="none";!f&&M&&O.push(...GU(a,y,T,C));const b=[a,...O],I=await qd(e,w),A=[];let R=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&A.push(I[E]),h){const B=$U(s,o,C);A.push(I[B[0]],I[B[1]])}if(R=[...R,{placement:s,overflows:A}],!A.every(B=>B<=0)){var N,D;const B=(((N=i.flip)==null?void 0:N.index)||0)+1,se=b[B];if(se&&(!(h==="alignment"?v!==Ks(se):!1)||R.every(j=>j.overflows[0]>0&&Ks(j.placement)===v)))return{data:{index:B,overflows:R},reset:{placement:se}};let Q=(D=R.filter(oe=>oe.overflows[0]<=0).sort((oe,j)=>oe.overflows[1]-j.overflows[1])[0])==null?void 0:D.placement;if(!Q)switch(p){case"bestFit":{var P;const oe=(P=R.filter(j=>{if(M){const $=Ks(j.placement);return $===v||$==="y"}return!0}).map(j=>[j.placement,j.overflows.filter($=>$>0).reduce(($,Z)=>$+Z,0)]).sort((j,$)=>j[1]-$[1])[0])==null?void 0:P[0];oe&&(Q=oe);break}case"initialPlacement":Q=a;break}if(s!==Q)return{reset:{placement:Q}}}return{}}}};function Ax(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function kx(t){return VU.some(e=>t[e]>=0)}const JU=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=$i(t,e);switch(r){case"referenceHidden":{const i=await qd(e,{...s,elementContext:"reference"}),o=Ax(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:kx(o)}}}case"escaped":{const i=await qd(e,{...s,altBoundary:!0}),o=Ax(i,n.floating);return{data:{escapedOffsets:o,escaped:kx(o)}}}default:return{}}}}},pk=new Set(["left","top"]);async function ZU(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Bi(n),a=tu(n),l=Ks(n)==="y",c=pk.has(o)?-1:1,d=i&&l?-1:1,h=$i(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:T}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof T=="number"&&(p=a==="end"?T*-1:T),l?{x:p*d,y:f*c}:{x:f*c,y:p*d}}const e3=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await ZU(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},t3=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:E,y:v}=w;return{x:E,y:v}}},...l}=$i(t,e),c={x:n,y:r},d=await qd(e,l),h=Ks(Bi(s)),f=O0(h);let p=c[f],T=c[h];if(i){const w=f==="y"?"top":"left",E=f==="y"?"bottom":"right",v=p+d[w],S=p-d[E];p=w_(v,p,S)}if(o){const w=h==="y"?"top":"left",E=h==="y"?"bottom":"right",v=T+d[w],S=T-d[E];T=w_(v,T,S)}const y=a.fn({...e,[f]:p,[h]:T});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[f]:i,[h]:o}}}}}},n3=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=$i(t,e),d={x:n,y:r},h=Ks(s),f=O0(h);let p=d[f],T=d[h];const y=$i(a,e),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const S=f==="y"?"height":"width",C=i.reference[f]-i.floating[S]+w.mainAxis,O=i.reference[f]+i.reference[S]-w.mainAxis;p<C?p=C:p>O&&(p=O)}if(c){var E,v;const S=f==="y"?"width":"height",C=pk.has(Bi(s)),O=i.reference[h]-i.floating[S]+(C&&((E=o.offset)==null?void 0:E[h])||0)+(C?0:w.crossAxis),M=i.reference[h]+i.reference[S]+(C?0:((v=o.offset)==null?void 0:v[h])||0)-(C?w.crossAxis:0);T<O?T=O:T>M&&(T=M)}return{[f]:p,[h]:T}}}},r3=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=$i(t,e),d=await qd(e,c),h=Bi(s),f=tu(s),p=Ks(s)==="y",{width:T,height:y}=i.floating;let w,E;h==="top"||h==="bottom"?(w=h,E=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=h,w=f==="end"?"top":"bottom");const v=y-d.top-d.bottom,S=T-d.left-d.right,C=na(y-d[w],v),O=na(T-d[E],S),M=!e.middlewareData.shift;let b=C,I=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(I=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(b=v),M&&!f){const R=xr(d.left,0),N=xr(d.right,0),D=xr(d.top,0),P=xr(d.bottom,0);p?I=T-2*(R!==0||N!==0?R+N:xr(d.left,d.right)):b=y-2*(D!==0||P!==0?D+P:xr(d.top,d.bottom))}await l({...e,availableWidth:I,availableHeight:b});const A=await o.getDimensions(a.floating);return T!==A.width||y!==A.height?{reset:{rects:!0}}:{}}}};function Zm(){return typeof window<"u"}function nu(t){return mk(t)?(t.nodeName||"").toLowerCase():"#document"}function Ar(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ii(t){var e;return(e=(mk(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function mk(t){return Zm()?t instanceof Node||t instanceof Ar(t).Node:!1}function As(t){return Zm()?t instanceof Element||t instanceof Ar(t).Element:!1}function ni(t){return Zm()?t instanceof HTMLElement||t instanceof Ar(t).HTMLElement:!1}function Px(t){return!Zm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ar(t).ShadowRoot}const s3=new Set(["inline","contents"]);function wh(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ks(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!s3.has(s)}const i3=new Set(["table","td","th"]);function o3(t){return i3.has(nu(t))}const a3=[":popover-open",":modal"];function eg(t){return a3.some(e=>{try{return t.matches(e)}catch{return!1}})}const l3=["transform","translate","scale","rotate","perspective"],c3=["transform","translate","scale","rotate","perspective","filter"],u3=["paint","layout","strict","content"];function F0(t){const e=V0(),n=As(t)?ks(t):t;return l3.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||c3.some(r=>(n.willChange||"").includes(r))||u3.some(r=>(n.contain||"").includes(r))}function d3(t){let e=ra(t);for(;ni(e)&&!Oc(e);){if(F0(e))return e;if(eg(e))return null;e=ra(e)}return null}function V0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const h3=new Set(["html","body","#document"]);function Oc(t){return h3.has(nu(t))}function ks(t){return Ar(t).getComputedStyle(t)}function tg(t){return As(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ra(t){if(nu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Px(t)&&t.host||ii(t);return Px(e)?e.host:e}function gk(t){const e=ra(t);return Oc(e)?t.ownerDocument?t.ownerDocument.body:t.body:ni(e)&&wh(e)?e:gk(e)}function Gd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=gk(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Ar(s);if(i){const a=T_(o);return e.concat(o,o.visualViewport||[],wh(s)?s:[],a&&n?Gd(a):[])}return e.concat(s,Gd(s,[],n))}function T_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function yk(t){const e=ks(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ni(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=$p(n)!==i||$p(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function j0(t){return As(t)?t:t.contextElement}function uc(t){const e=j0(t);if(!ni(e))return Js(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=yk(e);let o=(i?$p(n.width):n.width)/r,a=(i?$p(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const f3=Js(0);function vk(t){const e=Ar(t);return!V0()||!e.visualViewport?f3:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function p3(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ar(t)?!1:e}function Ja(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=j0(t);let o=Js(1);e&&(r?As(r)&&(o=uc(r)):o=uc(t));const a=p3(i,n,r)?vk(i):Js(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=Ar(i),p=r&&As(r)?Ar(r):r;let T=f,y=T_(T);for(;y&&r&&p!==T;){const w=uc(y),E=y.getBoundingClientRect(),v=ks(y),S=E.left+(y.clientLeft+parseFloat(v.paddingLeft))*w.x,C=E.top+(y.clientTop+parseFloat(v.paddingTop))*w.y;l*=w.x,c*=w.y,d*=w.x,h*=w.y,l+=S,c+=C,T=Ar(y),y=T_(T)}}return Wp({width:d,height:h,x:l,y:c})}function U0(t,e){const n=tg(t).scrollLeft;return e?e.left+n:Ja(ii(t)).left+n}function _k(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:U0(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function m3(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=ii(r),a=e?eg(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Js(1);const d=Js(0),h=ni(r);if((h||!h&&!i)&&((nu(r)!=="body"||wh(o))&&(l=tg(r)),ni(r))){const p=Ja(r);c=uc(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!i?_k(o,l,!0):Js(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function g3(t){return Array.from(t.getClientRects())}function y3(t){const e=ii(t),n=tg(t),r=t.ownerDocument.body,s=xr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=xr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+U0(t);const a=-n.scrollTop;return ks(r).direction==="rtl"&&(o+=xr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function v3(t,e){const n=Ar(t),r=ii(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=V0();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}const _3=new Set(["absolute","fixed"]);function w3(t,e){const n=Ja(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=ni(t)?uc(t):Js(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function Nx(t,e,n){let r;if(e==="viewport")r=v3(t,n);else if(e==="document")r=y3(ii(t));else if(As(e))r=w3(e,n);else{const s=vk(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Wp(r)}function wk(t,e){const n=ra(t);return n===e||!As(n)||Oc(n)?!1:ks(n).position==="fixed"||wk(n,e)}function E3(t,e){const n=e.get(t);if(n)return n;let r=Gd(t,[],!1).filter(a=>As(a)&&nu(a)!=="body"),s=null;const i=ks(t).position==="fixed";let o=i?ra(t):t;for(;As(o)&&!Oc(o);){const a=ks(o),l=F0(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&_3.has(s.position)||wh(o)&&!l&&wk(t,o))?r=r.filter(d=>d!==o):s=a,o=ra(o)}return e.set(t,r),r}function T3(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?eg(e)?[]:E3(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=Nx(e,d,s);return c.top=xr(h.top,c.top),c.right=na(h.right,c.right),c.bottom=na(h.bottom,c.bottom),c.left=xr(h.left,c.left),c},Nx(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function b3(t){const{width:e,height:n}=yk(t);return{width:e,height:n}}function x3(t,e,n){const r=ni(e),s=ii(e),i=n==="fixed",o=Ja(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Js(0);function c(){l.x=U0(s)}if(r||!r&&!i)if((nu(e)!=="body"||wh(s))&&(a=tg(e)),r){const p=Ja(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?_k(s,a):Js(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function Ly(t){return ks(t).position==="static"}function Dx(t,e){if(!ni(t)||ks(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ii(t)===n&&(n=n.ownerDocument.body),n}function Ek(t,e){const n=Ar(t);if(eg(t))return n;if(!ni(t)){let s=ra(t);for(;s&&!Oc(s);){if(As(s)&&!Ly(s))return s;s=ra(s)}return n}let r=Dx(t,e);for(;r&&o3(r)&&Ly(r);)r=Dx(r,e);return r&&Oc(r)&&Ly(r)&&!F0(r)?n:r||d3(t)||n}const S3=async function(t){const e=this.getOffsetParent||Ek,n=this.getDimensions,r=await n(t.floating);return{reference:x3(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function I3(t){return ks(t).direction==="rtl"}const C3={convertOffsetParentRelativeRectToViewportRelativeRect:m3,getDocumentElement:ii,getClippingRect:T3,getOffsetParent:Ek,getElementRects:S3,getClientRects:g3,getDimensions:b3,getScale:uc,isElement:As,isRTL:I3};function Tk(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function R3(t,e){let n=null,r;const s=ii(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=c;if(a||e(),!f||!p)return;const T=Cf(h),y=Cf(s.clientWidth-(d+f)),w=Cf(s.clientHeight-(h+p)),E=Cf(d),S={rootMargin:-T+"px "+-y+"px "+-w+"px "+-E+"px",threshold:xr(0,na(1,l))||1};let C=!0;function O(M){const b=M[0].intersectionRatio;if(b!==l){if(!C)return o();b?o(!1,b):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b===1&&!Tk(c,t.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(O,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(O,S)}n.observe(t)}return o(!0),i}function A3(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=j0(t),d=s||i?[...c?Gd(c):[],...Gd(e)]:[];d.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const h=c&&a?R3(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(E=>{let[v]=E;v&&v.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var S;(S=p)==null||S.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let T,y=l?Ja(t):null;l&&w();function w(){const E=Ja(t);y&&!Tk(y,E)&&n(),y=E,T=requestAnimationFrame(w)}return n(),()=>{var E;d.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),h==null||h(),(E=p)==null||E.disconnect(),p=null,l&&cancelAnimationFrame(T)}}const k3=e3,P3=t3,N3=XU,D3=r3,O3=JU,Ox=YU,L3=n3,M3=(t,e,n)=>{const r=new Map,s={platform:C3,...n},i={...s.platform,_c:r};return QU(t,e,{...s,platform:i})};var F3=typeof document<"u",V3=function(){},rp=F3?_.useLayoutEffect:V3;function Hp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Hp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Hp(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function bk(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Lx(t,e){const n=bk(t);return Math.round(e*n)/n}function My(t){const e=_.useRef(t);return rp(()=>{e.current=t}),e}function j3(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=_.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=_.useState(r);Hp(f,r)||p(r);const[T,y]=_.useState(null),[w,E]=_.useState(null),v=_.useCallback(j=>{j!==M.current&&(M.current=j,y(j))},[]),S=_.useCallback(j=>{j!==b.current&&(b.current=j,E(j))},[]),C=i||T,O=o||w,M=_.useRef(null),b=_.useRef(null),I=_.useRef(d),A=l!=null,R=My(l),N=My(s),D=My(c),P=_.useCallback(()=>{if(!M.current||!b.current)return;const j={placement:e,strategy:n,middleware:f};N.current&&(j.platform=N.current),M3(M.current,b.current,j).then($=>{const Z={...$,isPositioned:D.current!==!1};B.current&&!Hp(I.current,Z)&&(I.current=Z,pa.flushSync(()=>{h(Z)}))})},[f,e,n,N,D]);rp(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,h(j=>({...j,isPositioned:!1})))},[c]);const B=_.useRef(!1);rp(()=>(B.current=!0,()=>{B.current=!1}),[]),rp(()=>{if(C&&(M.current=C),O&&(b.current=O),C&&O){if(R.current)return R.current(C,O,P);P()}},[C,O,P,R,A]);const se=_.useMemo(()=>({reference:M,floating:b,setReference:v,setFloating:S}),[v,S]),Q=_.useMemo(()=>({reference:C,floating:O}),[C,O]),oe=_.useMemo(()=>{const j={position:n,left:0,top:0};if(!Q.floating)return j;const $=Lx(Q.floating,d.x),Z=Lx(Q.floating,d.y);return a?{...j,transform:"translate("+$+"px, "+Z+"px)",...bk(Q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:Z}},[n,a,Q.floating,d.x,d.y]);return _.useMemo(()=>({...d,update:P,refs:se,elements:Q,floatingStyles:oe}),[d,P,se,Q,oe])}const U3=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Ox({element:r.current,padding:s}).fn(n):{}:r?Ox({element:r,padding:s}).fn(n):{}}}},z3=(t,e)=>({...k3(t),options:[t,e]}),$3=(t,e)=>({...P3(t),options:[t,e]}),B3=(t,e)=>({...L3(t),options:[t,e]}),W3=(t,e)=>({...N3(t),options:[t,e]}),H3=(t,e)=>({...D3(t),options:[t,e]}),q3=(t,e)=>({...O3(t),options:[t,e]}),G3=(t,e)=>({...U3(t),options:[t,e]});var K3="Arrow",xk=_.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return m.jsx(Be.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});xk.displayName=K3;var Q3=xk;function Y3(t){const[e,n]=_.useState(void 0);return En(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var z0="Popper",[Sk,ng]=pl(z0),[X3,Ik]=Sk(z0),Ck=t=>{const{__scopePopper:e,children:n}=t,[r,s]=_.useState(null);return m.jsx(X3,{scope:e,anchor:r,onAnchorChange:s,children:n})};Ck.displayName=z0;var Rk="PopperAnchor",Ak=_.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=Ik(Rk,n),o=_.useRef(null),a=Mt(e,o);return _.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:m.jsx(Be.div,{...s,ref:a})});Ak.displayName=Rk;var $0="PopperContent",[J3,Z3]=Sk($0),kk=_.forwardRef((t,e)=>{var X,Ve,ht,Oe,ke,ge;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:T,...y}=t,w=Ik($0,n),[E,v]=_.useState(null),S=Mt(e,ct=>v(ct)),[C,O]=_.useState(null),M=Y3(C),b=(M==null?void 0:M.width)??0,I=(M==null?void 0:M.height)??0,A=r+(i!=="center"?"-"+i:""),R=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},N=Array.isArray(c)?c:[c],D=N.length>0,P={padding:R,boundary:N.filter(t6),altBoundary:D},{refs:B,floatingStyles:se,placement:Q,isPositioned:oe,middlewareData:j}=j3({strategy:"fixed",placement:A,whileElementsMounted:(...ct)=>A3(...ct,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[z3({mainAxis:s+I,alignmentAxis:o}),l&&$3({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?B3():void 0,...P}),l&&W3({...P}),H3({...P,apply:({elements:ct,rects:Jt,availableWidth:mr,availableHeight:Zt})=>{const{width:ts,height:ui}=Jt.reference,Fr=ct.floating.style;Fr.setProperty("--radix-popper-available-width",`${mr}px`),Fr.setProperty("--radix-popper-available-height",`${Zt}px`),Fr.setProperty("--radix-popper-anchor-width",`${ts}px`),Fr.setProperty("--radix-popper-anchor-height",`${ui}px`)}}),C&&G3({element:C,padding:a}),n6({arrowWidth:b,arrowHeight:I}),f&&q3({strategy:"referenceHidden",...P})]}),[$,Z]=Dk(Q),pe=Yr(T);En(()=>{oe&&(pe==null||pe())},[oe,pe]);const te=(X=j.arrow)==null?void 0:X.x,Y=(Ve=j.arrow)==null?void 0:Ve.y,ye=((ht=j.arrow)==null?void 0:ht.centerOffset)!==0,[Ce,Qe]=_.useState();return En(()=>{E&&Qe(window.getComputedStyle(E).zIndex)},[E]),m.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:oe?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ce,"--radix-popper-transform-origin":[(Oe=j.transformOrigin)==null?void 0:Oe.x,(ke=j.transformOrigin)==null?void 0:ke.y].join(" "),...((ge=j.hide)==null?void 0:ge.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:m.jsx(J3,{scope:n,placedSide:$,onArrowChange:O,arrowX:te,arrowY:Y,shouldHideArrow:ye,children:m.jsx(Be.div,{"data-side":$,"data-align":Z,...y,ref:S,style:{...y.style,animation:oe?void 0:"none"}})})})});kk.displayName=$0;var Pk="PopperArrow",e6={top:"bottom",right:"left",bottom:"top",left:"right"},Nk=_.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=Z3(Pk,r),o=e6[i.placedSide];return m.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:m.jsx(Q3,{...s,ref:n,style:{...s.style,display:"block"}})})});Nk.displayName=Pk;function t6(t){return t!==null}var n6=t=>({name:"transformOrigin",options:t,fn(e){var w,E,v;const{placement:n,rects:r,middlewareData:s}=e,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=Dk(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((E=s.arrow)==null?void 0:E.x)??0)+a/2,p=(((v=s.arrow)==null?void 0:v.y)??0)+l/2;let T="",y="";return c==="bottom"?(T=o?h:`${f}px`,y=`${-l}px`):c==="top"?(T=o?h:`${f}px`,y=`${r.floating.height+l}px`):c==="right"?(T=`${-l}px`,y=o?h:`${p}px`):c==="left"&&(T=`${r.floating.width+l}px`,y=o?h:`${p}px`),{data:{x:T,y}}}});function Dk(t){const[e,n="center"]=t.split("-");return[e,n]}var Ok=Ck,Lk=Ak,Mk=kk,Fk=Nk,[rg,CZ]=pl("Tooltip",[ng]),sg=ng(),Vk="TooltipProvider",r6=700,b_="tooltip.open",[s6,B0]=rg(Vk),jk=t=>{const{__scopeTooltip:e,delayDuration:n=r6,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=_.useRef(!0),a=_.useRef(!1),l=_.useRef(0);return _.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),m.jsx(s6,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:_.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:_.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:_.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};jk.displayName=Vk;var Kd="Tooltip",[i6,ig]=rg(Kd),Uk=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=t,l=B0(Kd,t.__scopeTooltip),c=sg(e),[d,h]=_.useState(null),f=eu(),p=_.useRef(0),T=o??l.disableHoverableContent,y=a??l.delayDuration,w=_.useRef(!1),[E,v]=Dc({prop:r,defaultProp:s??!1,onChange:b=>{b?(l.onOpen(),document.dispatchEvent(new CustomEvent(b_))):l.onClose(),i==null||i(b)},caller:Kd}),S=_.useMemo(()=>E?w.current?"delayed-open":"instant-open":"closed",[E]),C=_.useCallback(()=>{window.clearTimeout(p.current),p.current=0,w.current=!1,v(!0)},[v]),O=_.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v(!1)},[v]),M=_.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{w.current=!0,v(!0),p.current=0},y)},[y,v]);return _.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),m.jsx(Ok,{...c,children:m.jsx(i6,{scope:e,contentId:f,open:E,stateAttribute:S,trigger:d,onTriggerChange:h,onTriggerEnter:_.useCallback(()=>{l.isOpenDelayedRef.current?M():C()},[l.isOpenDelayedRef,M,C]),onTriggerLeave:_.useCallback(()=>{T?O():(window.clearTimeout(p.current),p.current=0)},[O,T]),onOpen:C,onClose:O,disableHoverableContent:T,children:n})})};Uk.displayName=Kd;var x_="TooltipTrigger",zk=_.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=ig(x_,n),i=B0(x_,n),o=sg(n),a=_.useRef(null),l=Mt(e,a,s.onTriggerChange),c=_.useRef(!1),d=_.useRef(!1),h=_.useCallback(()=>c.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),m.jsx(Lk,{asChild:!0,...o,children:m.jsx(Be.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Se(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Se(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Se(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Se(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Se(t.onBlur,s.onClose),onClick:Se(t.onClick,s.onClose)})})});zk.displayName=x_;var o6="TooltipPortal",[RZ,a6]=rg(o6,{forceMount:void 0}),Lc="TooltipContent",$k=_.forwardRef((t,e)=>{const n=a6(Lc,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=ig(Lc,t.__scopeTooltip);return m.jsx(Ym,{present:r||o.open,children:o.disableHoverableContent?m.jsx(Bk,{side:s,...i,ref:e}):m.jsx(l6,{side:s,...i,ref:e})})}),l6=_.forwardRef((t,e)=>{const n=ig(Lc,t.__scopeTooltip),r=B0(Lc,t.__scopeTooltip),s=_.useRef(null),i=Mt(e,s),[o,a]=_.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=_.useCallback(()=>{a(null),h(!1)},[h]),p=_.useCallback((T,y)=>{const w=T.currentTarget,E={x:T.clientX,y:T.clientY},v=f6(E,w.getBoundingClientRect()),S=p6(E,v),C=m6(y.getBoundingClientRect()),O=y6([...S,...C]);a(O),h(!0)},[h]);return _.useEffect(()=>()=>f(),[f]),_.useEffect(()=>{if(l&&d){const T=w=>p(w,d),y=w=>p(w,l);return l.addEventListener("pointerleave",T),d.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",T),d.removeEventListener("pointerleave",y)}}},[l,d,p,f]),_.useEffect(()=>{if(o){const T=y=>{const w=y.target,E={x:y.clientX,y:y.clientY},v=(l==null?void 0:l.contains(w))||(d==null?void 0:d.contains(w)),S=!g6(E,o);v?f():S&&(f(),c())};return document.addEventListener("pointermove",T),()=>document.removeEventListener("pointermove",T)}},[l,d,o,c,f]),m.jsx(Bk,{...t,ref:i})}),[c6,u6]=rg(Kd,{isInside:!1}),d6=Tj("TooltipContent"),Bk=_.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=ig(Lc,n),c=sg(n),{onClose:d}=l;return _.useEffect(()=>(document.addEventListener(b_,d),()=>document.removeEventListener(b_,d)),[d]),_.useEffect(()=>{if(l.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),m.jsx(Qm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:m.jsxs(Mk,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[m.jsx(d6,{children:r}),m.jsx(c6,{scope:n,isInside:!0,children:m.jsx(Wj,{id:l.contentId,role:"tooltip",children:s||r})})]})})});$k.displayName=Lc;var Wk="TooltipArrow",h6=_.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=sg(n);return u6(Wk,n).isInside?null:m.jsx(Fk,{...s,...r,ref:e})});h6.displayName=Wk;function f6(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function p6(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function m6(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function g6(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-c)*(r-d)/(f-d)+c&&(s=!s)}return s}function y6(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),v6(e)}function v6(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var _6=jk,w6=Uk,E6=zk,Hk=$k;const T6=_6,AZ=w6,kZ=E6,b6=_.forwardRef(({className:t,sideOffset:e=4,...n},r)=>m.jsx(Hk,{ref:r,sideOffset:e,className:lt("z-[9999] overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));b6.displayName=Hk.displayName;var og=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ag=typeof window>"u"||"Deno"in globalThis;function ds(){}function x6(t,e){return typeof t=="function"?t(e):t}function S6(t){return typeof t=="number"&&t>=0&&t!==1/0}function I6(t,e){return Math.max(t+(e||0)-Date.now(),0)}function S_(t,e){return typeof t=="function"?t(e):t}function C6(t,e){return typeof t=="function"?t(e):t}function Mx(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==W0(o,e.options))return!1}else if(!Yd(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function Fx(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Qd(e.options.mutationKey)!==Qd(i))return!1}else if(!Yd(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function W0(t,e){return((e==null?void 0:e.queryKeyHashFn)||Qd)(t)}function Qd(t){return JSON.stringify(t,(e,n)=>I_(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Yd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Yd(t[n],e[n])):!1}function qk(t,e){if(t===e)return t;const n=Vx(t)&&Vx(e);if(n||I_(t)&&I_(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},l=new Set(r);let c=0;for(let d=0;d<o;d++){const h=n?d:i[d];(!n&&l.has(h)||n)&&t[h]===void 0&&e[h]===void 0?(a[h]=void 0,c++):(a[h]=qk(t[h],e[h]),a[h]===t[h]&&t[h]!==void 0&&c++)}return s===o&&c===s?t:a}return e}function PZ(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Vx(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function I_(t){if(!jx(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!jx(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function jx(t){return Object.prototype.toString.call(t)==="[object Object]"}function R6(t){return new Promise(e=>{setTimeout(e,t)})}function A6(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?qk(t,e):e}function k6(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function P6(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var H0=Symbol();function Gk(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===H0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function NZ(t,e){return typeof t=="function"?t(...e):!!t}var Fa,Ro,vc,JI,N6=(JI=class extends og{constructor(){super();Ze(this,Fa);Ze(this,Ro);Ze(this,vc);Ae(this,vc,e=>{if(!ag&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){H(this,Ro)||this.setEventListener(H(this,vc))}onUnsubscribe(){var e;this.hasListeners()||((e=H(this,Ro))==null||e.call(this),Ae(this,Ro,void 0))}setEventListener(e){var n;Ae(this,vc,e),(n=H(this,Ro))==null||n.call(this),Ae(this,Ro,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){H(this,Fa)!==e&&(Ae(this,Fa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof H(this,Fa)=="boolean"?H(this,Fa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Fa=new WeakMap,Ro=new WeakMap,vc=new WeakMap,JI),Kk=new N6,_c,Ao,wc,ZI,D6=(ZI=class extends og{constructor(){super();Ze(this,_c,!0);Ze(this,Ao);Ze(this,wc);Ae(this,wc,e=>{if(!ag&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){H(this,Ao)||this.setEventListener(H(this,wc))}onUnsubscribe(){var e;this.hasListeners()||((e=H(this,Ao))==null||e.call(this),Ae(this,Ao,void 0))}setEventListener(e){var n;Ae(this,wc,e),(n=H(this,Ao))==null||n.call(this),Ae(this,Ao,e(this.setOnline.bind(this)))}setOnline(e){H(this,_c)!==e&&(Ae(this,_c,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return H(this,_c)}},_c=new WeakMap,Ao=new WeakMap,wc=new WeakMap,ZI),qp=new D6;function O6(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function L6(t){return Math.min(1e3*2**t,3e4)}function Qk(t){return(t??"online")==="online"?qp.isOnline():!0}var Yk=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Fy(t){return t instanceof Yk}function Xk(t){let e=!1,n=0,r=!1,s;const i=O6(),o=y=>{var w;r||(f(new Yk(y)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>Kk.isFocused()&&(t.networkMode==="always"||qp.isOnline())&&t.canRun(),d=()=>Qk(t.networkMode)&&t.canRun(),h=y=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,y),s==null||s(),i.resolve(y))},f=y=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,y),s==null||s(),i.reject(y))},p=()=>new Promise(y=>{var w;s=E=>{(r||c())&&y(E)},(w=t.onPause)==null||w.call(t)}).then(()=>{var y;s=void 0,r||(y=t.onContinue)==null||y.call(t)}),T=()=>{if(r)return;let y;const w=n===0?t.initialPromise:void 0;try{y=w??t.fn()}catch(E){y=Promise.reject(E)}Promise.resolve(y).then(h).catch(E=>{var M;if(r)return;const v=t.retry??(ag?0:3),S=t.retryDelay??L6,C=typeof S=="function"?S(n,E):S,O=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,E);if(e||!O){f(E);return}n++,(M=t.onFail)==null||M.call(t,n,E),R6(C).then(()=>c()?void 0:p()).then(()=>{e?f(E):T()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?T():p().then(T),i)}}var M6=t=>setTimeout(t,0);function F6(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=M6;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Kn=F6(),Va,eC,Jk=(eC=class{constructor(){Ze(this,Va)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),S6(this.gcTime)&&Ae(this,Va,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ag?1/0:5*60*1e3))}clearGcTimeout(){H(this,Va)&&(clearTimeout(H(this,Va)),Ae(this,Va,void 0))}},Va=new WeakMap,eC),Ec,ja,zr,Ua,Pn,hh,za,hs,vi,tC,V6=(tC=class extends Jk{constructor(n){super();Ze(this,hs);Ze(this,Ec);Ze(this,ja);Ze(this,zr);Ze(this,Ua);Ze(this,Pn);Ze(this,hh);Ze(this,za);Ae(this,za,!1),Ae(this,hh,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ae(this,Ua,n.client),Ae(this,zr,H(this,Ua).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ae(this,Ec,U6(this.options)),this.state=n.state??H(this,Ec),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=H(this,Pn))==null?void 0:n.promise}setOptions(n){this.options={...H(this,hh),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,zr).remove(this)}setData(n,r){const s=A6(this.state.data,n,this.options);return Cn(this,hs,vi).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Cn(this,hs,vi).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=H(this,Pn))==null?void 0:s.promise;return(i=H(this,Pn))==null||i.cancel(n),r?r.then(ds).catch(ds):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,Ec))}isActive(){return this.observers.some(n=>C6(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===H0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>S_(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!I6(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=H(this,Pn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=H(this,Pn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),H(this,zr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(H(this,Pn)&&(H(this,za)?H(this,Pn).cancel({revert:!0}):H(this,Pn).cancelRetry()),this.scheduleGc()),H(this,zr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Cn(this,hs,vi).call(this,{type:"invalidate"})}fetch(n,r){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(H(this,Pn))return H(this,Pn).continueRetry(),H(this,Pn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const p=this.observers.find(T=>T.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Ae(this,za,!0),s.signal)})},o=()=>{const p=Gk(this.options,r),y=(()=>{const w={client:H(this,Ua),queryKey:this.queryKey,meta:this.meta};return i(w),w})();return Ae(this,za,!1),this.options.persister?this.options.persister(p,y,this):p(y)},l=(()=>{const p={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:H(this,Ua),state:this.state,fetchFn:o};return i(p),p})();(d=this.options.behavior)==null||d.onFetch(l,this),Ae(this,ja,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Cn(this,hs,vi).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=p=>{var T,y,w,E;Fy(p)&&p.silent||Cn(this,hs,vi).call(this,{type:"error",error:p}),Fy(p)||((y=(T=H(this,zr).config).onError)==null||y.call(T,p,this),(E=(w=H(this,zr).config).onSettled)==null||E.call(w,this.state.data,p,this)),this.scheduleGc()};return Ae(this,Pn,Xk({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var T,y,w,E;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(v){c(v);return}(y=(T=H(this,zr).config).onSuccess)==null||y.call(T,p,this),(E=(w=H(this,zr).config).onSettled)==null||E.call(w,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,T)=>{Cn(this,hs,vi).call(this,{type:"failed",failureCount:p,error:T})},onPause:()=>{Cn(this,hs,vi).call(this,{type:"pause"})},onContinue:()=>{Cn(this,hs,vi).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),H(this,Pn).start()}},Ec=new WeakMap,ja=new WeakMap,zr=new WeakMap,Ua=new WeakMap,Pn=new WeakMap,hh=new WeakMap,za=new WeakMap,hs=new WeakSet,vi=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...j6(s.data,this.options),fetchMeta:n.meta??null};case"success":return Ae(this,ja,void 0),{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return Fy(i)&&i.revert&&H(this,ja)?{...H(this,ja),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Kn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),H(this,zr).notify({query:this,type:"updated",action:n})})},tC);function j6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Qk(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function U6(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Bs,nC,z6=(nC=class extends og{constructor(e={}){super();Ze(this,Bs);this.config=e,Ae(this,Bs,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??W0(s,n);let o=this.get(i);return o||(o=new V6({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){H(this,Bs).has(e.queryHash)||(H(this,Bs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=H(this,Bs).get(e.queryHash);n&&(e.destroy(),n===e&&H(this,Bs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Kn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return H(this,Bs).get(e)}getAll(){return[...H(this,Bs).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Mx(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Mx(e,r)):n}notify(e){Kn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Kn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Kn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Bs=new WeakMap,nC),Ws,qn,$a,Hs,vo,rC,$6=(rC=class extends Jk{constructor(n){super();Ze(this,Hs);Ze(this,Ws);Ze(this,qn);Ze(this,$a);this.mutationId=n.mutationId,Ae(this,qn,n.mutationCache),Ae(this,Ws,[]),this.state=n.state||B6(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){H(this,Ws).includes(n)||(H(this,Ws).push(n),this.clearGcTimeout(),H(this,qn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ae(this,Ws,H(this,Ws).filter(r=>r!==n)),this.scheduleGc(),H(this,qn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){H(this,Ws).length||(this.state.status==="pending"?this.scheduleGc():H(this,qn).remove(this))}continue(){var n;return((n=H(this,$a))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,a,l,c,d,h,f,p,T,y,w,E,v,S,C,O,M,b,I,A;const r=()=>{Cn(this,Hs,vo).call(this,{type:"continue"})};Ae(this,$a,Xk({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(R,N)=>{Cn(this,Hs,vo).call(this,{type:"failed",failureCount:R,error:N})},onPause:()=>{Cn(this,Hs,vo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,qn).canRun(this)}));const s=this.state.status==="pending",i=!H(this,$a).canStart();try{if(s)r();else{Cn(this,Hs,vo).call(this,{type:"pending",variables:n,isPaused:i}),await((a=(o=H(this,qn).config).onMutate)==null?void 0:a.call(o,n,this));const N=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));N!==this.state.context&&Cn(this,Hs,vo).call(this,{type:"pending",context:N,variables:n,isPaused:i})}const R=await H(this,$a).start();return await((h=(d=H(this,qn).config).onSuccess)==null?void 0:h.call(d,R,n,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,R,n,this.state.context)),await((y=(T=H(this,qn).config).onSettled)==null?void 0:y.call(T,R,null,this.state.variables,this.state.context,this)),await((E=(w=this.options).onSettled)==null?void 0:E.call(w,R,null,n,this.state.context)),Cn(this,Hs,vo).call(this,{type:"success",data:R}),R}catch(R){try{throw await((S=(v=H(this,qn).config).onError)==null?void 0:S.call(v,R,n,this.state.context,this)),await((O=(C=this.options).onError)==null?void 0:O.call(C,R,n,this.state.context)),await((b=(M=H(this,qn).config).onSettled)==null?void 0:b.call(M,void 0,R,this.state.variables,this.state.context,this)),await((A=(I=this.options).onSettled)==null?void 0:A.call(I,void 0,R,n,this.state.context)),R}finally{Cn(this,Hs,vo).call(this,{type:"error",error:R})}}finally{H(this,qn).runNext(this)}}},Ws=new WeakMap,qn=new WeakMap,$a=new WeakMap,Hs=new WeakSet,vo=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Kn.batch(()=>{H(this,Ws).forEach(s=>{s.onMutationUpdate(n)}),H(this,qn).notify({mutation:this,type:"updated",action:n})})},rC);function B6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var bi,fs,fh,sC,W6=(sC=class extends og{constructor(e={}){super();Ze(this,bi);Ze(this,fs);Ze(this,fh);this.config=e,Ae(this,bi,new Set),Ae(this,fs,new Map),Ae(this,fh,0)}build(e,n,r){const s=new $6({mutationCache:this,mutationId:++of(this,fh)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){H(this,bi).add(e);const n=Rf(e);if(typeof n=="string"){const r=H(this,fs).get(n);r?r.push(e):H(this,fs).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(H(this,bi).delete(e)){const n=Rf(e);if(typeof n=="string"){const r=H(this,fs).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&H(this,fs).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Rf(e);if(typeof n=="string"){const r=H(this,fs).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Rf(e);if(typeof n=="string"){const s=(r=H(this,fs).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Kn.batch(()=>{H(this,bi).forEach(e=>{this.notify({type:"removed",mutation:e})}),H(this,bi).clear(),H(this,fs).clear()})}getAll(){return Array.from(H(this,bi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Fx(n,r))}findAll(e={}){return this.getAll().filter(n=>Fx(e,n))}notify(e){Kn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Kn.batch(()=>Promise.all(e.map(n=>n.continue().catch(ds))))}},bi=new WeakMap,fs=new WeakMap,fh=new WeakMap,sC);function Rf(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Ux(t){return{onFetch:(e,n)=>{var d,h,f,p,T;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((T=e.state.data)==null?void 0:T.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let y=!1;const w=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},E=Gk(e.options,e.fetchOptions),v=async(S,C,O)=>{if(y)return Promise.reject();if(C==null&&S.pages.length)return Promise.resolve(S);const b=(()=>{const N={client:e.client,queryKey:e.queryKey,pageParam:C,direction:O?"backward":"forward",meta:e.options.meta};return w(N),N})(),I=await E(b),{maxPages:A}=e.options,R=O?P6:k6;return{pages:R(S.pages,I,A),pageParams:R(S.pageParams,C,A)}};if(s&&i.length){const S=s==="backward",C=S?H6:zx,O={pages:i,pageParams:o},M=C(r,O);a=await v(O,M,S)}else{const S=t??i.length;do{const C=l===0?o[0]??r.initialPageParam:zx(r,a);if(l>0&&C==null)break;a=await v(a,C),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var y,w;return(w=(y=e.options).persister)==null?void 0:w.call(y,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function zx(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function H6(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var jt,ko,Po,Tc,bc,No,xc,Sc,iC,q6=(iC=class{constructor(t={}){Ze(this,jt);Ze(this,ko);Ze(this,Po);Ze(this,Tc);Ze(this,bc);Ze(this,No);Ze(this,xc);Ze(this,Sc);Ae(this,jt,t.queryCache||new z6),Ae(this,ko,t.mutationCache||new W6),Ae(this,Po,t.defaultOptions||{}),Ae(this,Tc,new Map),Ae(this,bc,new Map),Ae(this,No,0)}mount(){of(this,No)._++,H(this,No)===1&&(Ae(this,xc,Kk.subscribe(async t=>{t&&(await this.resumePausedMutations(),H(this,jt).onFocus())})),Ae(this,Sc,qp.subscribe(async t=>{t&&(await this.resumePausedMutations(),H(this,jt).onOnline())})))}unmount(){var t,e;of(this,No)._--,H(this,No)===0&&((t=H(this,xc))==null||t.call(this),Ae(this,xc,void 0),(e=H(this,Sc))==null||e.call(this),Ae(this,Sc,void 0))}isFetching(t){return H(this,jt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return H(this,ko).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=H(this,jt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=H(this,jt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(S_(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return H(this,jt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=H(this,jt).get(r.queryHash),i=s==null?void 0:s.state.data,o=x6(e,i);if(o!==void 0)return H(this,jt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Kn.batch(()=>H(this,jt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=H(this,jt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=H(this,jt);Kn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=H(this,jt);return Kn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Kn.batch(()=>H(this,jt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(ds).catch(ds)}invalidateQueries(t,e={}){return Kn.batch(()=>(H(this,jt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Kn.batch(()=>H(this,jt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(ds)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ds)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=H(this,jt).build(this,e);return n.isStaleByTime(S_(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ds).catch(ds)}fetchInfiniteQuery(t){return t.behavior=Ux(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ds).catch(ds)}ensureInfiniteQueryData(t){return t.behavior=Ux(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return qp.isOnline()?H(this,ko).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,jt)}getMutationCache(){return H(this,ko)}getDefaultOptions(){return H(this,Po)}setDefaultOptions(t){Ae(this,Po,t)}setQueryDefaults(t,e){H(this,Tc).set(Qd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...H(this,Tc).values()],n={};return e.forEach(r=>{Yd(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){H(this,bc).set(Qd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...H(this,bc).values()],n={};return e.forEach(r=>{Yd(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...H(this,Po).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=W0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===H0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...H(this,Po).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){H(this,jt).clear(),H(this,ko).clear()}},jt=new WeakMap,ko=new WeakMap,Po=new WeakMap,Tc=new WeakMap,bc=new WeakMap,No=new WeakMap,xc=new WeakMap,Sc=new WeakMap,iC),Zk=_.createContext(void 0),LZ=t=>{const e=_.useContext(Zk);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},G6=({client:t,children:e})=>(_.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(Zk.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function At(){return At=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},At.apply(this,arguments)}var Gt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Gt||(Gt={}));const $x="popstate";function K6(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Xd("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Za(s)}return Y6(e,n,null,t)}function Ne(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Mc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Q6(){return Math.random().toString(36).substr(2,8)}function Bx(t,e){return{usr:t.state,key:t.key,idx:e}}function Xd(t,e,n,r){return n===void 0&&(n=null),At({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ma(e):e,{state:n,key:e&&e.key||r||Q6()})}function Za(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ma(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Y6(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Gt.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(At({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Gt.Pop;let w=d(),E=w==null?null:w-c;c=w,l&&l({action:a,location:y.location,delta:E})}function f(w,E){a=Gt.Push;let v=Xd(y.location,w,E);c=d()+1;let S=Bx(v,c),C=y.createHref(v);try{o.pushState(S,"",C)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(C)}i&&l&&l({action:a,location:y.location,delta:1})}function p(w,E){a=Gt.Replace;let v=Xd(y.location,w,E);c=d();let S=Bx(v,c),C=y.createHref(v);o.replaceState(S,"",C),i&&l&&l({action:a,location:y.location,delta:0})}function T(w){let E=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof w=="string"?w:Za(w);return v=v.replace(/ $/,"%20"),Ne(E,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,E)}let y={get action(){return a},get location(){return t(s,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener($x,h),l=w,()=>{s.removeEventListener($x,h),l=null}},createHref(w){return e(s,w)},createURL:T,encodeLocation(w){let E=T(w);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:p,go(w){return o.go(w)}};return y}var it;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(it||(it={}));const X6=new Set(["lazy","caseSensitive","path","id","index","children"]);function J6(t){return t.index===!0}function Gp(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((s,i)=>{let o=[...n,String(i)],a=typeof s.id=="string"?s.id:o.join("-");if(Ne(s.index!==!0||!s.children,"Cannot specify children on an index route"),Ne(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),J6(s)){let l=At({},s,e(s),{id:a});return r[a]=l,l}else{let l=At({},s,e(s),{id:a,children:void 0});return r[a]=l,s.children&&(l.children=Gp(s.children,e,o,r)),l}})}function Ca(t,e,n){return n===void 0&&(n="/"),sp(t,e,n,!1)}function sp(t,e,n,r){let s=typeof e=="string"?ma(e):e,i=Wi(s.pathname||"/",n);if(i==null)return null;let o=eP(t);e5(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=d5(i);a=c5(o[l],c,r)}return a}function Z6(t,e){let{route:n,pathname:r,params:s}=t;return{id:n.id,pathname:r,params:s,data:e[n.id],handle:n.handle}}function eP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ne(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Pi([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Ne(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),eP(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:a5(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of tP(i.path))s(i,o,l)}),e}function tP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=tP(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function e5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:l5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const t5=/^:[\w-]+$/,n5=3,r5=2,s5=1,i5=10,o5=-2,Wx=t=>t==="*";function a5(t,e){let n=t.split("/"),r=n.length;return n.some(Wx)&&(r+=o5),e&&(r+=r5),n.filter(s=>!Wx(s)).reduce((s,i)=>s+(t5.test(i)?n5:i===""?s5:i5),r)}function l5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function c5(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=Kp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=Kp({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Pi([i,h.pathname]),pathnameBase:p5(Pi([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Pi([i,h.pathnameBase]))}return o}function Kp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=u5(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let y=a[h]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const T=a[h];return p&&!T?c[f]=void 0:c[f]=(T||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function u5(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Mc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function d5(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Wi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function h5(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ma(t):t;return{pathname:n?n.startsWith("/")?n:f5(n,e):e,search:m5(r),hash:g5(s)}}function f5(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Vy(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function lg(t,e){let n=nP(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function cg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ma(t):(s=At({},t),Ne(!s.pathname||!s.pathname.includes("?"),Vy("?","pathname","search",s)),Ne(!s.pathname||!s.pathname.includes("#"),Vy("#","pathname","hash",s)),Ne(!s.search||!s.search.includes("#"),Vy("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=h5(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Pi=t=>t.join("/").replace(/\/\/+/g,"/"),p5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),m5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,g5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Qp{constructor(e,n,r,s){s===void 0&&(s=!1),this.status=e,this.statusText=n||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function qo(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const rP=["post","put","patch","delete"],y5=new Set(rP),v5=["get",...rP],_5=new Set(v5),w5=new Set([301,302,303,307,308]),E5=new Set([307,308]),jy={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},T5={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ju={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},q0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,b5=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),sP="remix-router-transitions";function x5(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Ne(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(t.mapRouteProperties)s=t.mapRouteProperties;else if(t.detectErrorBoundary){let L=t.detectErrorBoundary;s=F=>({hasErrorBoundary:L(F)})}else s=b5;let i={},o=Gp(t.routes,s,void 0,i),a,l=t.basename||"/",c=t.dataStrategy||R5,d=t.patchRoutesOnNavigation,h=At({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),f=null,p=new Set,T=null,y=null,w=null,E=t.hydrationData!=null,v=Ca(o,t.history.location,l),S=!1,C=null;if(v==null&&!d){let L=sr(404,{pathname:t.history.location.pathname}),{matches:F,route:U}=t1(o);v=F,C={[U.id]:L}}v&&!t.hydrationData&&Xe(v,o,t.history.location.pathname).active&&(v=null);let O;if(v)if(v.some(L=>L.route.lazy))O=!1;else if(!v.some(L=>L.route.loader))O=!0;else if(h.v7_partialHydration){let L=t.hydrationData?t.hydrationData.loaderData:null,F=t.hydrationData?t.hydrationData.errors:null;if(F){let U=v.findIndex(G=>F[G.route.id]!==void 0);O=v.slice(0,U+1).every(G=>!R_(G.route,L,F))}else O=v.every(U=>!R_(U.route,L,F))}else O=t.hydrationData!=null;else if(O=!1,v=[],h.v7_partialHydration){let L=Xe(null,o,t.history.location.pathname);L.active&&L.matches&&(S=!0,v=L.matches)}let M,b={historyAction:t.history.action,location:t.history.location,matches:v,initialized:O,navigation:jy,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||C,fetchers:new Map,blockers:new Map},I=Gt.Pop,A=!1,R,N=!1,D=new Map,P=null,B=!1,se=!1,Q=[],oe=new Set,j=new Map,$=0,Z=-1,pe=new Map,te=new Set,Y=new Map,ye=new Map,Ce=new Set,Qe=new Map,X=new Map,Ve;function ht(){if(f=t.history.listen(L=>{let{action:F,location:U,delta:G}=L;if(Ve){Ve(),Ve=void 0;return}Mc(X.size===0||G!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ne=ao({currentLocation:b.location,nextLocation:U,historyAction:F});if(ne&&G!=null){let he=new Promise(Ee=>{Ve=Ee});t.history.go(G*-1),Vs(ne,{state:"blocked",location:U,proceed(){Vs(ne,{state:"proceeding",proceed:void 0,reset:void 0,location:U}),he.then(()=>t.history.go(G))},reset(){let Ee=new Map(b.blockers);Ee.set(ne,ju),ge({blockers:Ee})}});return}return Zt(F,U)}),n){$5(e,D);let L=()=>B5(e,D);e.addEventListener("pagehide",L),P=()=>e.removeEventListener("pagehide",L)}return b.initialized||Zt(Gt.Pop,b.location,{initialHydration:!0}),M}function Oe(){f&&f(),P&&P(),p.clear(),R&&R.abort(),b.fetchers.forEach((L,F)=>io(F)),b.blockers.forEach((L,F)=>oo(F))}function ke(L){return p.add(L),()=>p.delete(L)}function ge(L,F){F===void 0&&(F={}),b=At({},b,L);let U=[],G=[];h.v7_fetcherPersist&&b.fetchers.forEach((ne,he)=>{ne.state==="idle"&&(Ce.has(he)?G.push(he):U.push(he))}),Ce.forEach(ne=>{!b.fetchers.has(ne)&&!j.has(ne)&&G.push(ne)}),[...p].forEach(ne=>ne(b,{deletedFetchers:G,viewTransitionOpts:F.viewTransitionOpts,flushSync:F.flushSync===!0})),h.v7_fetcherPersist?(U.forEach(ne=>b.fetchers.delete(ne)),G.forEach(ne=>io(ne))):G.forEach(ne=>Ce.delete(ne))}function ct(L,F,U){var G,ne;let{flushSync:he}=U===void 0?{}:U,Ee=b.actionData!=null&&b.navigation.formMethod!=null&&ms(b.navigation.formMethod)&&b.navigation.state==="loading"&&((G=L.state)==null?void 0:G._isRedirect)!==!0,de;F.actionData?Object.keys(F.actionData).length>0?de=F.actionData:de=null:Ee?de=b.actionData:de=null;let ue=F.loaderData?Zx(b.loaderData,F.loaderData,F.matches||[],F.errors):b.loaderData,le=b.blockers;le.size>0&&(le=new Map(le),le.forEach((Re,Wt)=>le.set(Wt,ju)));let fe=A===!0||b.navigation.formMethod!=null&&ms(b.navigation.formMethod)&&((ne=L.state)==null?void 0:ne._isRedirect)!==!0;a&&(o=a,a=void 0),B||I===Gt.Pop||(I===Gt.Push?t.history.push(L,L.state):I===Gt.Replace&&t.history.replace(L,L.state));let be;if(I===Gt.Pop){let Re=D.get(b.location.pathname);Re&&Re.has(L.pathname)?be={currentLocation:b.location,nextLocation:L}:D.has(L.pathname)&&(be={currentLocation:L,nextLocation:b.location})}else if(N){let Re=D.get(b.location.pathname);Re?Re.add(L.pathname):(Re=new Set([L.pathname]),D.set(b.location.pathname,Re)),be={currentLocation:b.location,nextLocation:L}}ge(At({},F,{actionData:de,loaderData:ue,historyAction:I,location:L,initialized:!0,navigation:jy,revalidation:"idle",restoreScrollPosition:je(L,F.matches||b.matches),preventScrollReset:fe,blockers:le}),{viewTransitionOpts:be,flushSync:he===!0}),I=Gt.Pop,A=!1,N=!1,B=!1,se=!1,Q=[]}async function Jt(L,F){if(typeof L=="number"){t.history.go(L);return}let U=C_(b.location,b.matches,l,h.v7_prependBasename,L,h.v7_relativeSplatPath,F==null?void 0:F.fromRouteId,F==null?void 0:F.relative),{path:G,submission:ne,error:he}=Hx(h.v7_normalizeFormMethod,!1,U,F),Ee=b.location,de=Xd(b.location,G,F&&F.state);de=At({},de,t.history.encodeLocation(de));let ue=F&&F.replace!=null?F.replace:void 0,le=Gt.Push;ue===!0?le=Gt.Replace:ue===!1||ne!=null&&ms(ne.formMethod)&&ne.formAction===b.location.pathname+b.location.search&&(le=Gt.Replace);let fe=F&&"preventScrollReset"in F?F.preventScrollReset===!0:void 0,be=(F&&F.flushSync)===!0,Re=ao({currentLocation:Ee,nextLocation:de,historyAction:le});if(Re){Vs(Re,{state:"blocked",location:de,proceed(){Vs(Re,{state:"proceeding",proceed:void 0,reset:void 0,location:de}),Jt(L,F)},reset(){let Wt=new Map(b.blockers);Wt.set(Re,ju),ge({blockers:Wt})}});return}return await Zt(le,de,{submission:ne,pendingError:he,preventScrollReset:fe,replace:F&&F.replace,enableViewTransition:F&&F.viewTransition,flushSync:be})}function mr(){if(ft(),ge({revalidation:"loading"}),b.navigation.state!=="submitting"){if(b.navigation.state==="idle"){Zt(b.historyAction,b.location,{startUninterruptedRevalidation:!0});return}Zt(I||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation,enableViewTransition:N===!0})}}async function Zt(L,F,U){R&&R.abort(),R=null,I=L,B=(U&&U.startUninterruptedRevalidation)===!0,we(b.location,b.matches),A=(U&&U.preventScrollReset)===!0,N=(U&&U.enableViewTransition)===!0;let G=a||o,ne=U&&U.overrideNavigation,he=U!=null&&U.initialHydration&&b.matches&&b.matches.length>0&&!S?b.matches:Ca(G,F,l),Ee=(U&&U.flushSync)===!0;if(he&&b.initialized&&!se&&O5(b.location,F)&&!(U&&U.submission&&ms(U.submission.formMethod))){ct(F,{matches:he},{flushSync:Ee});return}let de=Xe(he,G,F.pathname);if(de.active&&de.matches&&(he=de.matches),!he){let{error:st,notFoundMatches:ze,route:mt}=rs(F.pathname);ct(F,{matches:ze,loaderData:{},errors:{[mt.id]:st}},{flushSync:Ee});return}R=new AbortController;let ue=Pl(t.history,F,R.signal,U&&U.submission),le;if(U&&U.pendingError)le=[Ra(he).route.id,{type:it.error,error:U.pendingError}];else if(U&&U.submission&&ms(U.submission.formMethod)){let st=await ts(ue,F,U.submission,he,de.active,{replace:U.replace,flushSync:Ee});if(st.shortCircuited)return;if(st.pendingActionResult){let[ze,mt]=st.pendingActionResult;if(br(mt)&&qo(mt.error)&&mt.error.status===404){R=null,ct(F,{matches:st.matches,loaderData:{},errors:{[ze]:mt.error}});return}}he=st.matches||he,le=st.pendingActionResult,ne=Uy(F,U.submission),Ee=!1,de.active=!1,ue=Pl(t.history,ue.url,ue.signal)}let{shortCircuited:fe,matches:be,loaderData:Re,errors:Wt}=await ui(ue,F,he,de.active,ne,U&&U.submission,U&&U.fetcherSubmission,U&&U.replace,U&&U.initialHydration===!0,Ee,le);fe||(R=null,ct(F,At({matches:be||he},e1(le),{loaderData:Re,errors:Wt})))}async function ts(L,F,U,G,ne,he){he===void 0&&(he={}),ft();let Ee=U5(F,U);if(ge({navigation:Ee},{flushSync:he.flushSync===!0}),ne){let le=await Ft(G,F.pathname,L.signal);if(le.type==="aborted")return{shortCircuited:!0};if(le.type==="error"){let fe=Ra(le.partialMatches).route.id;return{matches:le.partialMatches,pendingActionResult:[fe,{type:it.error,error:le.error}]}}else if(le.matches)G=le.matches;else{let{notFoundMatches:fe,error:be,route:Re}=rs(F.pathname);return{matches:fe,pendingActionResult:[Re.id,{type:it.error,error:be}]}}}let de,ue=Xu(G,F);if(!ue.route.action&&!ue.route.lazy)de={type:it.error,error:sr(405,{method:L.method,pathname:F.pathname,routeId:ue.route.id})};else if(de=(await Ls("action",b,L,[ue],G,null))[ue.route.id],L.signal.aborted)return{shortCircuited:!0};if(Na(de)){let le;return he&&he.replace!=null?le=he.replace:le=Yx(de.response.headers.get("Location"),new URL(L.url),l)===b.location.pathname+b.location.search,await yr(L,de,!0,{submission:U,replace:le}),{shortCircuited:!0}}if(Lo(de))throw sr(400,{type:"defer-action"});if(br(de)){let le=Ra(G,ue.route.id);return(he&&he.replace)!==!0&&(I=Gt.Push),{matches:G,pendingActionResult:[le.route.id,de]}}return{matches:G,pendingActionResult:[ue.route.id,de]}}async function ui(L,F,U,G,ne,he,Ee,de,ue,le,fe){let be=ne||Uy(F,he),Re=he||Ee||r1(be),Wt=!B&&(!h.v7_partialHydration||!ue);if(G){if(Wt){let _t=Fr(fe);ge(At({navigation:be},_t!==void 0?{actionData:_t}:{}),{flushSync:le})}let We=await Ft(U,F.pathname,L.signal);if(We.type==="aborted")return{shortCircuited:!0};if(We.type==="error"){let _t=Ra(We.partialMatches).route.id;return{matches:We.partialMatches,loaderData:{},errors:{[_t]:We.error}}}else if(We.matches)U=We.matches;else{let{error:_t,notFoundMatches:pi,route:uo}=rs(F.pathname);return{matches:pi,loaderData:{},errors:{[uo.id]:_t}}}}let st=a||o,[ze,mt]=Gx(t.history,b,U,Re,F,h.v7_partialHydration&&ue===!0,h.v7_skipActionErrorRevalidation,se,Q,oe,Ce,Y,te,st,l,fe);if(ss(We=>!(U&&U.some(_t=>_t.route.id===We))||ze&&ze.some(_t=>_t.route.id===We)),Z=++$,ze.length===0&&mt.length===0){let We=di();return ct(F,At({matches:U,loaderData:{},errors:fe&&br(fe[1])?{[fe[0]]:fe[1].error}:null},e1(fe),We?{fetchers:new Map(b.fetchers)}:{}),{flushSync:le}),{shortCircuited:!0}}if(Wt){let We={};if(!G){We.navigation=be;let _t=Fr(fe);_t!==void 0&&(We.actionData=_t)}mt.length>0&&(We.fetchers=so(mt)),ge(We,{flushSync:le})}mt.forEach(We=>{Wn(We.key),We.controller&&j.set(We.key,We.controller)});let hi=()=>mt.forEach(We=>Wn(We.key));R&&R.signal.addEventListener("abort",hi);let{loaderResults:lo,fetcherResults:is}=await Ye(b,U,ze,mt,L);if(L.signal.aborted)return{shortCircuited:!0};R&&R.signal.removeEventListener("abort",hi),mt.forEach(We=>j.delete(We.key));let Hn=Af(lo);if(Hn)return await yr(L,Hn.result,!0,{replace:de}),{shortCircuited:!0};if(Hn=Af(is),Hn)return te.add(Hn.key),await yr(L,Hn.result,!0,{replace:de}),{shortCircuited:!0};let{loaderData:Il,errors:fi}=Jx(b,U,lo,fe,mt,is,Qe);Qe.forEach((We,_t)=>{We.subscribe(pi=>{(pi||We.done)&&Qe.delete(_t)})}),h.v7_partialHydration&&ue&&b.errors&&(fi=At({},b.errors,fi));let vr=di(),Ur=ns(Z),co=vr||Ur||mt.length>0;return At({matches:U,loaderData:Il,errors:fi},co?{fetchers:new Map(b.fetchers)}:{})}function Fr(L){if(L&&!br(L[1]))return{[L[0]]:L[1].data};if(b.actionData)return Object.keys(b.actionData).length===0?null:b.actionData}function so(L){return L.forEach(F=>{let U=b.fetchers.get(F.key),G=Uu(void 0,U?U.data:void 0);b.fetchers.set(F.key,G)}),new Map(b.fetchers)}function Os(L,F,U,G){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Wn(L);let ne=(G&&G.flushSync)===!0,he=a||o,Ee=C_(b.location,b.matches,l,h.v7_prependBasename,U,h.v7_relativeSplatPath,F,G==null?void 0:G.relative),de=Ca(he,Ee,l),ue=Xe(de,he,Ee);if(ue.active&&ue.matches&&(de=ue.matches),!de){nr(L,F,sr(404,{pathname:Ee}),{flushSync:ne});return}let{path:le,submission:fe,error:be}=Hx(h.v7_normalizeFormMethod,!0,Ee,G);if(be){nr(L,F,be,{flushSync:ne});return}let Re=Xu(de,le),Wt=(G&&G.preventScrollReset)===!0;if(fe&&ms(fe.formMethod)){Sl(L,F,le,Re,de,ue.active,ne,Wt,fe);return}Y.set(L,{routeId:F,path:le}),gr(L,F,le,Re,de,ue.active,ne,Wt,fe)}async function Sl(L,F,U,G,ne,he,Ee,de,ue){ft(),Y.delete(L);function le(Rt){if(!Rt.route.action&&!Rt.route.lazy){let js=sr(405,{method:ue.formMethod,pathname:U,routeId:F});return nr(L,F,js,{flushSync:Ee}),!0}return!1}if(!he&&le(G))return;let fe=b.fetchers.get(L);Bn(L,z5(ue,fe),{flushSync:Ee});let be=new AbortController,Re=Pl(t.history,U,be.signal,ue);if(he){let Rt=await Ft(ne,new URL(Re.url).pathname,Re.signal,L);if(Rt.type==="aborted")return;if(Rt.type==="error"){nr(L,F,Rt.error,{flushSync:Ee});return}else if(Rt.matches){if(ne=Rt.matches,G=Xu(ne,U),le(G))return}else{nr(L,F,sr(404,{pathname:U}),{flushSync:Ee});return}}j.set(L,be);let Wt=$,ze=(await Ls("action",b,Re,[G],ne,L))[G.route.id];if(Re.signal.aborted){j.get(L)===be&&j.delete(L);return}if(h.v7_fetcherPersist&&Ce.has(L)){if(Na(ze)||br(ze)){Bn(L,_o(void 0));return}}else{if(Na(ze))if(j.delete(L),Z>Wt){Bn(L,_o(void 0));return}else return te.add(L),Bn(L,Uu(ue)),yr(Re,ze,!1,{fetcherSubmission:ue,preventScrollReset:de});if(br(ze)){nr(L,F,ze.error);return}}if(Lo(ze))throw sr(400,{type:"defer-action"});let mt=b.navigation.location||b.location,hi=Pl(t.history,mt,be.signal),lo=a||o,is=b.navigation.state!=="idle"?Ca(lo,b.navigation.location,l):b.matches;Ne(is,"Didn't find any matches after fetcher action");let Hn=++$;pe.set(L,Hn);let Il=Uu(ue,ze.data);b.fetchers.set(L,Il);let[fi,vr]=Gx(t.history,b,is,ue,mt,!1,h.v7_skipActionErrorRevalidation,se,Q,oe,Ce,Y,te,lo,l,[G.route.id,ze]);vr.filter(Rt=>Rt.key!==L).forEach(Rt=>{let js=Rt.key,Eu=b.fetchers.get(js),qh=Uu(void 0,Eu?Eu.data:void 0);b.fetchers.set(js,qh),Wn(js),Rt.controller&&j.set(js,Rt.controller)}),ge({fetchers:new Map(b.fetchers)});let Ur=()=>vr.forEach(Rt=>Wn(Rt.key));be.signal.addEventListener("abort",Ur);let{loaderResults:co,fetcherResults:We}=await Ye(b,is,fi,vr,hi);if(be.signal.aborted)return;be.signal.removeEventListener("abort",Ur),pe.delete(L),j.delete(L),vr.forEach(Rt=>j.delete(Rt.key));let _t=Af(co);if(_t)return yr(hi,_t.result,!1,{preventScrollReset:de});if(_t=Af(We),_t)return te.add(_t.key),yr(hi,_t.result,!1,{preventScrollReset:de});let{loaderData:pi,errors:uo}=Jx(b,is,co,void 0,vr,We,Qe);if(b.fetchers.has(L)){let Rt=_o(ze.data);b.fetchers.set(L,Rt)}ns(Hn),b.navigation.state==="loading"&&Hn>Z?(Ne(I,"Expected pending action"),R&&R.abort(),ct(b.navigation.location,{matches:is,loaderData:pi,errors:uo,fetchers:new Map(b.fetchers)})):(ge({errors:uo,loaderData:Zx(b.loaderData,pi,is,uo),fetchers:new Map(b.fetchers)}),se=!1)}async function gr(L,F,U,G,ne,he,Ee,de,ue){let le=b.fetchers.get(L);Bn(L,Uu(ue,le?le.data:void 0),{flushSync:Ee});let fe=new AbortController,be=Pl(t.history,U,fe.signal);if(he){let ze=await Ft(ne,new URL(be.url).pathname,be.signal,L);if(ze.type==="aborted")return;if(ze.type==="error"){nr(L,F,ze.error,{flushSync:Ee});return}else if(ze.matches)ne=ze.matches,G=Xu(ne,U);else{nr(L,F,sr(404,{pathname:U}),{flushSync:Ee});return}}j.set(L,fe);let Re=$,st=(await Ls("loader",b,be,[G],ne,L))[G.route.id];if(Lo(st)&&(st=await G0(st,be.signal,!0)||st),j.get(L)===fe&&j.delete(L),!be.signal.aborted){if(Ce.has(L)){Bn(L,_o(void 0));return}if(Na(st))if(Z>Re){Bn(L,_o(void 0));return}else{te.add(L),await yr(be,st,!1,{preventScrollReset:de});return}if(br(st)){nr(L,F,st.error);return}Ne(!Lo(st),"Unhandled fetcher deferred data"),Bn(L,_o(st.data))}}async function yr(L,F,U,G){let{submission:ne,fetcherSubmission:he,preventScrollReset:Ee,replace:de}=G===void 0?{}:G;F.response.headers.has("X-Remix-Revalidate")&&(se=!0);let ue=F.response.headers.get("Location");Ne(ue,"Expected a Location header on the redirect Response"),ue=Yx(ue,new URL(L.url),l);let le=Xd(b.location,ue,{_isRedirect:!0});if(n){let ze=!1;if(F.response.headers.has("X-Remix-Reload-Document"))ze=!0;else if(q0.test(ue)){const mt=t.history.createURL(ue);ze=mt.origin!==e.location.origin||Wi(mt.pathname,l)==null}if(ze){de?e.location.replace(ue):e.location.assign(ue);return}}R=null;let fe=de===!0||F.response.headers.has("X-Remix-Replace")?Gt.Replace:Gt.Push,{formMethod:be,formAction:Re,formEncType:Wt}=b.navigation;!ne&&!he&&be&&Re&&Wt&&(ne=r1(b.navigation));let st=ne||he;if(E5.has(F.response.status)&&st&&ms(st.formMethod))await Zt(fe,le,{submission:At({},st,{formAction:ue}),preventScrollReset:Ee||A,enableViewTransition:U?N:void 0});else{let ze=Uy(le,ne);await Zt(fe,le,{overrideNavigation:ze,fetcherSubmission:he,preventScrollReset:Ee||A,enableViewTransition:U?N:void 0})}}async function Ls(L,F,U,G,ne,he){let Ee,de={};try{Ee=await A5(c,L,F,U,G,ne,he,i,s)}catch(ue){return G.forEach(le=>{de[le.route.id]={type:it.error,error:ue}}),de}for(let[ue,le]of Object.entries(Ee))if(L5(le)){let fe=le.result;de[ue]={type:it.redirect,response:N5(fe,U,ue,ne,l,h.v7_relativeSplatPath)}}else de[ue]=await P5(le);return de}async function Ye(L,F,U,G,ne){let he=L.matches,Ee=Ls("loader",L,ne,U,F,null),de=Promise.all(G.map(async fe=>{if(fe.matches&&fe.match&&fe.controller){let Re=(await Ls("loader",L,Pl(t.history,fe.path,fe.controller.signal),[fe.match],fe.matches,fe.key))[fe.match.route.id];return{[fe.key]:Re}}else return Promise.resolve({[fe.key]:{type:it.error,error:sr(404,{pathname:fe.path})}})})),ue=await Ee,le=(await de).reduce((fe,be)=>Object.assign(fe,be),{});return await Promise.all([V5(F,ue,ne.signal,he,L.loaderData),j5(F,le,G)]),{loaderResults:ue,fetcherResults:le}}function ft(){se=!0,Q.push(...ss()),Y.forEach((L,F)=>{j.has(F)&&oe.add(F),Wn(F)})}function Bn(L,F,U){U===void 0&&(U={}),b.fetchers.set(L,F),ge({fetchers:new Map(b.fetchers)},{flushSync:(U&&U.flushSync)===!0})}function nr(L,F,U,G){G===void 0&&(G={});let ne=Ra(b.matches,F);io(L),ge({errors:{[ne.route.id]:U},fetchers:new Map(b.fetchers)},{flushSync:(G&&G.flushSync)===!0})}function Ms(L){return ye.set(L,(ye.get(L)||0)+1),Ce.has(L)&&Ce.delete(L),b.fetchers.get(L)||T5}function io(L){let F=b.fetchers.get(L);j.has(L)&&!(F&&F.state==="loading"&&pe.has(L))&&Wn(L),Y.delete(L),pe.delete(L),te.delete(L),h.v7_fetcherPersist&&Ce.delete(L),oe.delete(L),b.fetchers.delete(L)}function Fs(L){let F=(ye.get(L)||0)-1;F<=0?(ye.delete(L),Ce.add(L),h.v7_fetcherPersist||io(L)):ye.set(L,F),ge({fetchers:new Map(b.fetchers)})}function Wn(L){let F=j.get(L);F&&(F.abort(),j.delete(L))}function Vr(L){for(let F of L){let U=Ms(F),G=_o(U.data);b.fetchers.set(F,G)}}function di(){let L=[],F=!1;for(let U of te){let G=b.fetchers.get(U);Ne(G,"Expected fetcher: "+U),G.state==="loading"&&(te.delete(U),L.push(U),F=!0)}return Vr(L),F}function ns(L){let F=[];for(let[U,G]of pe)if(G<L){let ne=b.fetchers.get(U);Ne(ne,"Expected fetcher: "+U),ne.state==="loading"&&(Wn(U),pe.delete(U),F.push(U))}return Vr(F),F.length>0}function wu(L,F){let U=b.blockers.get(L)||ju;return X.get(L)!==F&&X.set(L,F),U}function oo(L){b.blockers.delete(L),X.delete(L)}function Vs(L,F){let U=b.blockers.get(L)||ju;Ne(U.state==="unblocked"&&F.state==="blocked"||U.state==="blocked"&&F.state==="blocked"||U.state==="blocked"&&F.state==="proceeding"||U.state==="blocked"&&F.state==="unblocked"||U.state==="proceeding"&&F.state==="unblocked","Invalid blocker state transition: "+U.state+" -> "+F.state);let G=new Map(b.blockers);G.set(L,F),ge({blockers:G})}function ao(L){let{currentLocation:F,nextLocation:U,historyAction:G}=L;if(X.size===0)return;X.size>1&&Mc(!1,"A router only supports one blocker at a time");let ne=Array.from(X.entries()),[he,Ee]=ne[ne.length-1],de=b.blockers.get(he);if(!(de&&de.state==="proceeding")&&Ee({currentLocation:F,nextLocation:U,historyAction:G}))return he}function rs(L){let F=sr(404,{pathname:L}),U=a||o,{matches:G,route:ne}=t1(U);return ss(),{notFoundMatches:G,route:ne,error:F}}function ss(L){let F=[];return Qe.forEach((U,G)=>{(!L||L(G))&&(U.cancel(),F.push(G),Qe.delete(G))}),F}function rr(L,F,U){if(T=L,w=F,y=U||null,!E&&b.navigation===jy){E=!0;let G=je(b.location,b.matches);G!=null&&ge({restoreScrollPosition:G})}return()=>{T=null,w=null,y=null}}function jr(L,F){return y&&y(L,F.map(G=>Z6(G,b.loaderData)))||L.key}function we(L,F){if(T&&w){let U=jr(L,F);T[U]=w()}}function je(L,F){if(T){let U=jr(L,F),G=T[U];if(typeof G=="number")return G}return null}function Xe(L,F,U){if(d)if(L){if(Object.keys(L[0].params).length>0)return{active:!0,matches:sp(F,U,l,!0)}}else return{active:!0,matches:sp(F,U,l,!0)||[]};return{active:!1,matches:null}}async function Ft(L,F,U,G){if(!d)return{type:"success",matches:L};let ne=L;for(;;){let he=a==null,Ee=a||o,de=i;try{await d({signal:U,path:F,matches:ne,fetcherKey:G,patch:(fe,be)=>{U.aborted||Qx(fe,be,Ee,de,s)}})}catch(fe){return{type:"error",error:fe,partialMatches:ne}}finally{he&&!U.aborted&&(o=[...o])}if(U.aborted)return{type:"aborted"};let ue=Ca(Ee,F,l);if(ue)return{type:"success",matches:ue};let le=sp(Ee,F,l,!0);if(!le||ne.length===le.length&&ne.every((fe,be)=>fe.route.id===le[be].route.id))return{type:"success",matches:null};ne=le}}function xn(L){i={},a=Gp(L,s,void 0,i)}function pt(L,F){let U=a==null;Qx(L,F,a||o,i,s),U&&(o=[...o],ge({}))}return M={get basename(){return l},get future(){return h},get state(){return b},get routes(){return o},get window(){return e},initialize:ht,subscribe:ke,enableScrollRestoration:rr,navigate:Jt,fetch:Os,revalidate:mr,createHref:L=>t.history.createHref(L),encodeLocation:L=>t.history.encodeLocation(L),getFetcher:Ms,deleteFetcher:Fs,dispose:Oe,getBlocker:wu,deleteBlocker:oo,patchRoutes:pt,_internalFetchControllers:j,_internalActiveDeferreds:Qe,_internalSetRoutes:xn},M}function S5(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function C_(t,e,n,r,s,i,o,a){let l,c;if(o){l=[];for(let h of e)if(l.push(h),h.route.id===o){c=h;break}}else l=e,c=e[e.length-1];let d=cg(s||".",lg(l,i),Wi(t.pathname,n)||t.pathname,a==="path");if(s==null&&(d.search=t.search,d.hash=t.hash),(s==null||s===""||s===".")&&c){let h=K0(d.search);if(c.route.index&&!h)d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&h){let f=new URLSearchParams(d.search),p=f.getAll("index");f.delete("index"),p.filter(y=>y).forEach(y=>f.append("index",y));let T=f.toString();d.search=T?"?"+T:""}}return r&&n!=="/"&&(d.pathname=d.pathname==="/"?n:Pi([n,d.pathname])),Za(d)}function Hx(t,e,n,r){if(!r||!S5(r))return{path:n};if(r.formMethod&&!F5(r.formMethod))return{path:n,error:sr(405,{method:r.formMethod})};let s=()=>({path:n,error:sr(400,{type:"invalid-body"})}),i=r.formMethod||"get",o=t?i.toUpperCase():i.toLowerCase(),a=aP(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!ms(o))return s();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((p,T)=>{let[y,w]=T;return""+p+y+"="+w+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!ms(o))return s();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return s()}}}Ne(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=A_(r.formData),c=r.formData;else if(r.body instanceof FormData)l=A_(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=Xx(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=Xx(l)}catch{return s()}let d={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(ms(d.formMethod))return{path:n,submission:d};let h=ma(n);return e&&h.search&&K0(h.search)&&l.append("index",""),h.search="?"+l,{path:Za(h),submission:d}}function qx(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(s=>s.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function Gx(t,e,n,r,s,i,o,a,l,c,d,h,f,p,T,y){let w=y?br(y[1])?y[1].error:y[1].data:void 0,E=t.createURL(e.location),v=t.createURL(s),S=n;i&&e.errors?S=qx(n,Object.keys(e.errors)[0],!0):y&&br(y[1])&&(S=qx(n,y[0]));let C=y?y[1].statusCode:void 0,O=o&&C&&C>=400,M=S.filter((I,A)=>{let{route:R}=I;if(R.lazy)return!0;if(R.loader==null)return!1;if(i)return R_(R,e.loaderData,e.errors);if(I5(e.loaderData,e.matches[A],I)||l.some(P=>P===I.route.id))return!0;let N=e.matches[A],D=I;return Kx(I,At({currentUrl:E,currentParams:N.params,nextUrl:v,nextParams:D.params},r,{actionResult:w,actionStatus:C,defaultShouldRevalidate:O?!1:a||E.pathname+E.search===v.pathname+v.search||E.search!==v.search||iP(N,D)}))}),b=[];return h.forEach((I,A)=>{if(i||!n.some(B=>B.route.id===I.routeId)||d.has(A))return;let R=Ca(p,I.path,T);if(!R){b.push({key:A,routeId:I.routeId,path:I.path,matches:null,match:null,controller:null});return}let N=e.fetchers.get(A),D=Xu(R,I.path),P=!1;f.has(A)?P=!1:c.has(A)?(c.delete(A),P=!0):N&&N.state!=="idle"&&N.data===void 0?P=a:P=Kx(D,At({currentUrl:E,currentParams:e.matches[e.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params},r,{actionResult:w,actionStatus:C,defaultShouldRevalidate:O?!1:a})),P&&b.push({key:A,routeId:I.routeId,path:I.path,matches:R,match:D,controller:new AbortController})}),[M,b]}function R_(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,s=n!=null&&n[t.id]!==void 0;return!r&&s?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!s}function I5(t,e,n){let r=!e||n.route.id!==e.route.id,s=t[n.route.id]===void 0;return r||s}function iP(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Kx(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function Qx(t,e,n,r,s){var i;let o;if(t){let c=r[t];Ne(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),o=c.children}else o=n;let a=e.filter(c=>!o.some(d=>oP(c,d))),l=Gp(a,s,[t||"_","patch",String(((i=o)==null?void 0:i.length)||"0")],r);o.push(...l)}function oP(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var s;return(s=e.children)==null?void 0:s.some(i=>oP(n,i))}):!1}async function C5(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let s=n[t.id];Ne(s,"No route found in manifest");let i={};for(let o in r){let l=s[o]!==void 0&&o!=="hasErrorBoundary";Mc(!l,'Route "'+s.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!X6.has(o)&&(i[o]=r[o])}Object.assign(s,i),Object.assign(s,At({},e(s),{lazy:void 0}))}async function R5(t){let{matches:e}=t,n=e.filter(s=>s.shouldLoad);return(await Promise.all(n.map(s=>s.resolve()))).reduce((s,i,o)=>Object.assign(s,{[n[o].route.id]:i}),{})}async function A5(t,e,n,r,s,i,o,a,l,c){let d=i.map(p=>p.route.lazy?C5(p.route,l,a):void 0),h=i.map((p,T)=>{let y=d[T],w=s.some(v=>v.route.id===p.route.id);return At({},p,{shouldLoad:w,resolve:async v=>(v&&r.method==="GET"&&(p.route.lazy||p.route.loader)&&(w=!0),w?k5(e,r,p,y,v,c):Promise.resolve({type:it.data,result:void 0}))})}),f=await t({matches:h,request:r,params:i[0].params,fetcherKey:o,context:c});try{await Promise.all(d)}catch{}return f}async function k5(t,e,n,r,s,i){let o,a,l=c=>{let d,h=new Promise((T,y)=>d=y);a=()=>d(),e.signal.addEventListener("abort",a);let f=T=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:i},...T!==void 0?[T]:[]),p=(async()=>{try{return{type:"data",result:await(s?s(y=>f(y)):f())}}catch(T){return{type:"error",result:T}}})();return Promise.race([p,h])};try{let c=n.route[t];if(r)if(c){let d,[h]=await Promise.all([l(c).catch(f=>{d=f}),r]);if(d!==void 0)throw d;o=h}else if(await r,c=n.route[t],c)o=await l(c);else if(t==="action"){let d=new URL(e.url),h=d.pathname+d.search;throw sr(405,{method:e.method,pathname:h,routeId:n.route.id})}else return{type:it.data,result:void 0};else if(c)o=await l(c);else{let d=new URL(e.url),h=d.pathname+d.search;throw sr(404,{pathname:h})}Ne(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:it.error,result:c}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function P5(t){let{result:e,type:n}=t;if(lP(e)){let h;try{let f=e.headers.get("Content-Type");f&&/\bapplication\/json\b/.test(f)?e.body==null?h=null:h=await e.json():h=await e.text()}catch(f){return{type:it.error,error:f}}return n===it.error?{type:it.error,error:new Qp(e.status,e.statusText,h),statusCode:e.status,headers:e.headers}:{type:it.data,data:h,statusCode:e.status,headers:e.headers}}if(n===it.error){if(n1(e)){var r,s;if(e.data instanceof Error){var i,o;return{type:it.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:it.error,error:new Qp(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:qo(e)?e.status:void 0,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:it.error,error:e,statusCode:qo(e)?e.status:void 0}}if(M5(e)){var a,l;return{type:it.deferred,deferredData:e,statusCode:(a=e.init)==null?void 0:a.status,headers:((l=e.init)==null?void 0:l.headers)&&new Headers(e.init.headers)}}if(n1(e)){var c,d;return{type:it.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}}return{type:it.data,data:e}}function N5(t,e,n,r,s,i){let o=t.headers.get("Location");if(Ne(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!q0.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=C_(new URL(e.url),a,s,!0,o,i),t.headers.set("Location",o)}return t}function Yx(t,e,n){if(q0.test(t)){let r=t,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),i=Wi(s.pathname,n)!=null;if(s.origin===e.origin&&i)return s.pathname+s.search+s.hash}return t}function Pl(t,e,n,r){let s=t.createURL(aP(e)).toString(),i={signal:n};if(r&&ms(r.formMethod)){let{formMethod:o,formEncType:a}=r;i.method=o.toUpperCase(),a==="application/json"?(i.headers=new Headers({"Content-Type":a}),i.body=JSON.stringify(r.json)):a==="text/plain"?i.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?i.body=A_(r.formData):i.body=r.formData}return new Request(s,i)}function A_(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Xx(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function D5(t,e,n,r,s){let i={},o=null,a,l=!1,c={},d=n&&br(n[1])?n[1].error:void 0;return t.forEach(h=>{if(!(h.route.id in e))return;let f=h.route.id,p=e[f];if(Ne(!Na(p),"Cannot handle redirect results in processLoaderData"),br(p)){let T=p.error;d!==void 0&&(T=d,d=void 0),o=o||{};{let y=Ra(t,f);o[y.route.id]==null&&(o[y.route.id]=T)}i[f]=void 0,l||(l=!0,a=qo(p.error)?p.error.status:500),p.headers&&(c[f]=p.headers)}else Lo(p)?(r.set(f,p.deferredData),i[f]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(c[f]=p.headers)):(i[f]=p.data,p.statusCode&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(c[f]=p.headers))}),d!==void 0&&n&&(o={[n[0]]:d},i[n[0]]=void 0),{loaderData:i,errors:o,statusCode:a||200,loaderHeaders:c}}function Jx(t,e,n,r,s,i,o){let{loaderData:a,errors:l}=D5(e,n,r,o);return s.forEach(c=>{let{key:d,match:h,controller:f}=c,p=i[d];if(Ne(p,"Did not find corresponding fetcher result"),!(f&&f.signal.aborted))if(br(p)){let T=Ra(t.matches,h==null?void 0:h.route.id);l&&l[T.route.id]||(l=At({},l,{[T.route.id]:p.error})),t.fetchers.delete(d)}else if(Na(p))Ne(!1,"Unhandled fetcher revalidation redirect");else if(Lo(p))Ne(!1,"Unhandled fetcher deferred data");else{let T=_o(p.data);t.fetchers.set(d,T)}}),{loaderData:a,errors:l}}function Zx(t,e,n,r){let s=At({},e);for(let i of n){let o=i.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(s[o]=e[o]):t[o]!==void 0&&i.route.loader&&(s[o]=t[o]),r&&r.hasOwnProperty(o))break}return s}function e1(t){return t?br(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ra(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function t1(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function sr(t,e){let{pathname:n,routeId:r,method:s,type:i,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",s&&n&&r?l="You made a "+s+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":i==="defer-action"?l="defer() is not supported in actions":i==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",s&&n&&r?l="You made a "+s.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":s&&(l='Invalid request method "'+s.toUpperCase()+'"')),new Qp(t||500,a,new Error(l),!0)}function Af(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,s]=e[n];if(Na(s))return{key:r,result:s}}}function aP(t){let e=typeof t=="string"?ma(t):t;return Za(At({},e,{hash:""}))}function O5(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function L5(t){return lP(t.result)&&w5.has(t.result.status)}function Lo(t){return t.type===it.deferred}function br(t){return t.type===it.error}function Na(t){return(t&&t.type)===it.redirect}function n1(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function M5(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function lP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function F5(t){return _5.has(t.toLowerCase())}function ms(t){return y5.has(t.toLowerCase())}async function V5(t,e,n,r,s){let i=Object.entries(e);for(let o=0;o<i.length;o++){let[a,l]=i[o],c=t.find(f=>(f==null?void 0:f.route.id)===a);if(!c)continue;let d=r.find(f=>f.route.id===c.route.id),h=d!=null&&!iP(d,c)&&(s&&s[c.route.id])!==void 0;Lo(l)&&h&&await G0(l,n,!1).then(f=>{f&&(e[a]=f)})}}async function j5(t,e,n){for(let r=0;r<n.length;r++){let{key:s,routeId:i,controller:o}=n[r],a=e[s];t.find(c=>(c==null?void 0:c.route.id)===i)&&Lo(a)&&(Ne(o,"Expected an AbortController for revalidating fetcher deferred result"),await G0(a,o.signal,!0).then(c=>{c&&(e[s]=c)}))}}async function G0(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:it.data,data:t.deferredData.unwrappedData}}catch(s){return{type:it.error,error:s}}return{type:it.data,data:t.deferredData.data}}}function K0(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Xu(t,e){let n=typeof e=="string"?ma(e).search:e.search;if(t[t.length-1].route.index&&K0(n||""))return t[t.length-1];let r=nP(t);return r[r.length-1]}function r1(t){let{formMethod:e,formAction:n,formEncType:r,text:s,formData:i,json:o}=t;if(!(!e||!n||!r)){if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:s};if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Uy(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function U5(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Uu(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function z5(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function _o(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function $5(t,e){try{let n=t.sessionStorage.getItem(sP);if(n){let r=JSON.parse(n);for(let[s,i]of Object.entries(r||{}))i&&Array.isArray(i)&&e.set(s,new Set(i||[]))}}catch{}}function B5(t,e){if(e.size>0){let n={};for(let[r,s]of e)n[r]=[...s];try{t.sessionStorage.setItem(sP,JSON.stringify(n))}catch(r){Mc(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yp(){return Yp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yp.apply(this,arguments)}const Eh=_.createContext(null),Q0=_.createContext(null),Zi=_.createContext(null),Y0=_.createContext(null),oi=_.createContext({outlet:null,matches:[],isDataRoute:!1}),cP=_.createContext(null);function W5(t,e){let{relative:n}=e===void 0?{}:e;ru()||Ne(!1);let{basename:r,navigator:s}=_.useContext(Zi),{hash:i,pathname:o,search:a}=ug(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Pi([r,o])),s.createHref({pathname:l,search:a,hash:i})}function ru(){return _.useContext(Y0)!=null}function eo(){return ru()||Ne(!1),_.useContext(Y0).location}function uP(t){_.useContext(Zi).static||_.useLayoutEffect(t)}function ml(){let{isDataRoute:t}=_.useContext(oi);return t?r9():H5()}function H5(){ru()||Ne(!1);let t=_.useContext(Eh),{basename:e,future:n,navigator:r}=_.useContext(Zi),{matches:s}=_.useContext(oi),{pathname:i}=eo(),o=JSON.stringify(lg(s,n.v7_relativeSplatPath)),a=_.useRef(!1);return uP(()=>{a.current=!0}),_.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=cg(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Pi([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}const q5=_.createContext(null);function G5(t){let e=_.useContext(oi).outlet;return e&&_.createElement(q5.Provider,{value:t},e)}function MZ(){let{matches:t}=_.useContext(oi),e=t[t.length-1];return e?e.params:{}}function ug(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=_.useContext(Zi),{matches:s}=_.useContext(oi),{pathname:i}=eo(),o=JSON.stringify(lg(s,r.v7_relativeSplatPath));return _.useMemo(()=>cg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function K5(t,e,n,r){ru()||Ne(!1);let{navigator:s}=_.useContext(Zi),{matches:i}=_.useContext(oi),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=eo(),d;d=c;let h=d.pathname||"/",f=h;if(l!=="/"){let y=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=Ca(t,{pathname:f});return Z5(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Pi([l,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Pi([l,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r)}function Q5(){let t=fP(),e=qo(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:s},n):null,null)}const Y5=_.createElement(Q5,null);class X5 extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(oi.Provider,{value:this.props.routeContext},_.createElement(cP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function J5(t){let{routeContext:e,match:n,children:r}=t,s=_.useContext(Eh);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(oi.Provider,{value:e},r)}function Z5(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Ne(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=n,T=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||T){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,T=!1,y=null,w=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||Y5,l&&(c<0&&f===0?(T=!0,w=null):c===f&&(T=!0,w=h.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,f+1)),v=()=>{let S;return p?S=y:T?S=w:h.route.Component?S=_.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=d,_.createElement(J5,{match:h,routeContext:{outlet:d,matches:E,isDataRoute:n!=null},children:S})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?_.createElement(X5,{location:n.location,revalidation:n.revalidation,component:y,error:p,children:v(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):v()},null)}var dP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(dP||{}),Xp=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Xp||{});function e9(t){let e=_.useContext(Eh);return e||Ne(!1),e}function t9(t){let e=_.useContext(Q0);return e||Ne(!1),e}function n9(t){let e=_.useContext(oi);return e||Ne(!1),e}function hP(t){let e=n9(),n=e.matches[e.matches.length-1];return n.route.id||Ne(!1),n.route.id}function fP(){var t;let e=_.useContext(cP),n=t9(Xp.UseRouteError),r=hP(Xp.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function r9(){let{router:t}=e9(dP.UseNavigateStable),e=hP(Xp.UseNavigateStable),n=_.useRef(!1);return uP(()=>{n.current=!0}),_.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Yp({fromRouteId:e},i)))},[t,e])}function s9(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function s1(t){let{to:e,replace:n,state:r,relative:s}=t;ru()||Ne(!1);let{future:i,static:o}=_.useContext(Zi),{matches:a}=_.useContext(oi),{pathname:l}=eo(),c=ml(),d=cg(e,lg(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return _.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function i9(t){return G5(t.context)}function o9(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Gt.Pop,navigator:i,static:o=!1,future:a}=t;ru()&&Ne(!1);let l=e.replace(/^\/*/,"/"),c=_.useMemo(()=>({basename:l,navigator:i,static:o,future:Yp({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=ma(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:T="default"}=r,y=_.useMemo(()=>{let w=Wi(d,l);return w==null?null:{location:{pathname:w,search:h,hash:f,state:p,key:T},navigationType:s}},[l,d,h,f,p,T,s]);return y==null?null:_.createElement(Zi.Provider,{value:c},_.createElement(Y0.Provider,{children:n,value:y}))}new Promise(()=>{});function a9(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:_.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:_.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:_.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fc(){return Fc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fc.apply(this,arguments)}function pP(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function l9(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function c9(t,e){return t.button===0&&(!e||e==="_self")&&!l9(t)}function k_(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function u9(t,e){let n=k_(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const d9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],h9=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],f9="6";try{window.__reactRouterVersion=f9}catch{}function p9(t,e){return x5({basename:e==null?void 0:e.basename,future:Fc({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:K6({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||m9(),routes:t,mapRouteProperties:a9,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function m9(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Fc({},e,{errors:g9(e.errors)})),e}function g9(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")n[r]=new Qp(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let i=window[s.__subType];if(typeof i=="function")try{let o=new i(s.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let i=new Error(s.message);i.stack="",n[r]=i}}else n[r]=s;return n}const mP=_.createContext({isTransitioning:!1}),y9=_.createContext(new Map),v9="startTransition",i1=Lw[v9],_9="flushSync",o1=uj[_9];function w9(t){i1?i1(t):t()}function zu(t){o1?o1(t):t()}let E9=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function T9(t){let{fallbackElement:e,router:n,future:r}=t,[s,i]=_.useState(n.state),[o,a]=_.useState(),[l,c]=_.useState({isTransitioning:!1}),[d,h]=_.useState(),[f,p]=_.useState(),[T,y]=_.useState(),w=_.useRef(new Map),{v7_startTransition:E}=r||{},v=_.useCallback(I=>{E?w9(I):I()},[E]),S=_.useCallback((I,A)=>{let{deletedFetchers:R,flushSync:N,viewTransitionOpts:D}=A;I.fetchers.forEach((B,se)=>{B.data!==void 0&&w.current.set(se,B.data)}),R.forEach(B=>w.current.delete(B));let P=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!D||P){N?zu(()=>i(I)):v(()=>i(I));return}if(N){zu(()=>{f&&(d&&d.resolve(),f.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:D.currentLocation,nextLocation:D.nextLocation})});let B=n.window.document.startViewTransition(()=>{zu(()=>i(I))});B.finished.finally(()=>{zu(()=>{h(void 0),p(void 0),a(void 0),c({isTransitioning:!1})})}),zu(()=>p(B));return}f?(d&&d.resolve(),f.skipTransition(),y({state:I,currentLocation:D.currentLocation,nextLocation:D.nextLocation})):(a(I),c({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}))},[n.window,f,d,w,v]);_.useLayoutEffect(()=>n.subscribe(S),[n,S]),_.useEffect(()=>{l.isTransitioning&&!l.flushSync&&h(new E9)},[l]),_.useEffect(()=>{if(d&&o&&n.window){let I=o,A=d.promise,R=n.window.document.startViewTransition(async()=>{v(()=>i(I)),await A});R.finished.finally(()=>{h(void 0),p(void 0),a(void 0),c({isTransitioning:!1})}),p(R)}},[v,o,d,n.window]),_.useEffect(()=>{d&&o&&s.location.key===o.location.key&&d.resolve()},[d,f,s.location,o]),_.useEffect(()=>{!l.isTransitioning&&T&&(a(T.state),c({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}),y(void 0))},[l.isTransitioning,T]),_.useEffect(()=>{},[]);let C=_.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:I=>n.navigate(I),push:(I,A,R)=>n.navigate(I,{state:A,preventScrollReset:R==null?void 0:R.preventScrollReset}),replace:(I,A,R)=>n.navigate(I,{replace:!0,state:A,preventScrollReset:R==null?void 0:R.preventScrollReset})}),[n]),O=n.basename||"/",M=_.useMemo(()=>({router:n,navigator:C,static:!1,basename:O}),[n,C,O]),b=_.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return _.useEffect(()=>s9(r,n.future),[r,n.future]),_.createElement(_.Fragment,null,_.createElement(Eh.Provider,{value:M},_.createElement(Q0.Provider,{value:s},_.createElement(y9.Provider,{value:w.current},_.createElement(mP.Provider,{value:l},_.createElement(o9,{basename:O,location:s.location,navigationType:s.historyAction,navigator:C,future:b},s.initialized||n.future.v7_partialHydration?_.createElement(b9,{routes:n.routes,future:n.future,state:s}):e))))),null)}const b9=_.memo(x9);function x9(t){let{routes:e,future:n,state:r}=t;return K5(e,void 0,r,n)}const S9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",I9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jp=_.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=pP(e,d9),{basename:p}=_.useContext(Zi),T,y=!1;if(typeof c=="string"&&I9.test(c)&&(T=c,S9))try{let S=new URL(window.location.href),C=c.startsWith("//")?new URL(S.protocol+c):new URL(c),O=Wi(C.pathname,p);C.origin===S.origin&&O!=null?c=O+C.search+C.hash:y=!0}catch{}let w=W5(c,{relative:s}),E=R9(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function v(S){r&&r(S),S.defaultPrevented||E(S)}return _.createElement("a",Fc({},f,{href:T||w,onClick:y||i?r:v,ref:n,target:l}))}),VZ=_.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:d}=e,h=pP(e,h9),f=ug(l,{relative:h.relative}),p=eo(),T=_.useContext(Q0),{navigator:y,basename:w}=_.useContext(Zi),E=T!=null&&A9(f)&&c===!0,v=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,S=p.pathname,C=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;s||(S=S.toLowerCase(),C=C?C.toLowerCase():null,v=v.toLowerCase()),C&&w&&(C=Wi(C,w)||C);const O=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let M=S===v||!o&&S.startsWith(v)&&S.charAt(O)==="/",b=C!=null&&(C===v||!o&&C.startsWith(v)&&C.charAt(v.length)==="/"),I={isActive:M,isPending:b,isTransitioning:E},A=M?r:void 0,R;typeof i=="function"?R=i(I):R=[i,M?"active":null,b?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(I):a;return _.createElement(Jp,Fc({},h,{"aria-current":A,className:R,ref:n,style:N,to:l,viewTransition:c}),typeof d=="function"?d(I):d)});var P_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(P_||(P_={}));var a1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(a1||(a1={}));function C9(t){let e=_.useContext(Eh);return e||Ne(!1),e}function R9(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=ml(),c=eo(),d=ug(t,{relative:o});return _.useCallback(h=>{if(c9(h,n)){h.preventDefault();let f=r!==void 0?r:Za(c)===Za(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function gP(t){let e=_.useRef(k_(t)),n=_.useRef(!1),r=eo(),s=_.useMemo(()=>u9(r.search,n.current?null:e.current),[r.search]),i=ml(),o=_.useCallback((a,l)=>{const c=k_(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}function A9(t,e){e===void 0&&(e={});let n=_.useContext(mP);n==null&&Ne(!1);let{basename:r}=C9(P_.useViewTransitionState),s=ug(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Wi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Wi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Kp(s.pathname,o)!=null||Kp(s.pathname,i)!=null}const k9=()=>{};var l1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie=function(t,e){if(!t)throw su(e)},su=function(t){return new Error("Firebase Database ("+yP.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},P9=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},X0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[d],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):P9(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new N9;const f=i<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const T=c<<6&192|h;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class N9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _P=function(t){const e=vP(t);return X0.encodeByteArray(e,!0)},Zp=function(t){return _P(t).replace(/\./g,"")},em=function(t){try{return X0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D9(t){return wP(void 0,t)}function wP(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!O9(n)||(t[n]=wP(t[n],e[n]));return t}function O9(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L9(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9=()=>L9().__FIREBASE_DEFAULTS__,F9=()=>{if(typeof process>"u"||typeof l1>"u")return;const t=l1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},V9=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&em(t[1]);return e&&JSON.parse(e)},dg=()=>{try{return k9()||M9()||F9()||V9()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},EP=t=>{var e,n;return(n=(e=dg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},J0=t=>{const e=EP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},TP=()=>{var t;return(t=dg())===null||t===void 0?void 0:t.config},bP=t=>{var e;return(e=dg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Zp(JSON.stringify(n)),Zp(JSON.stringify(o)),""].join(".")}const md={};function j9(){const t={prod:[],emulator:[]};for(const e of Object.keys(md))md[e]?t.emulator.push(e):t.prod.push(e);return t}function U9(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let c1=!1;function fg(t,e){if(typeof window>"u"||typeof document>"u"||!ai(window.location.host)||md[t]===e||md[t]||c1)return;md[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=j9().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{c1=!0,o()},f}function d(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=U9(r),p=n("text"),T=document.getElementById(p)||document.createElement("span"),y=n("learnmore"),w=document.getElementById(y)||document.createElement("a"),E=n("preprendIcon"),v=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const S=f.element;a(S),d(w,y);const C=c();l(v,E),S.append(v,T,w,C),document.body.appendChild(S)}i?(T.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zn())}function z9(){var t;const e=(t=dg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $9(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function SP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function B9(){const t=zn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function IP(){return yP.NODE_ADMIN===!0}function W9(){return!z9()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CP(){try{return typeof indexedDB=="object"}catch{return!1}}function RP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function H9(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9="FirebaseError";class es extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=q9,Object.setPrototypeOf(this,es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gl.prototype.create)}}class gl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?G9(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new es(s,a,r)}}function G9(t,e){return t.replace(K9,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const K9=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(t){return JSON.parse(t)}function vn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Jd(em(i[0])||""),n=Jd(em(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},Q9=function(t){const e=AP(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Y9=function(t){const e=AP(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Vc(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function N_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function tm(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Hi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(u1(i)&&u1(o)){if(!Hi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function u1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ju(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Zu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,d;for(let h=0;h<80;h++){h<40?h<20?(c=a^i&(o^a),d=1518500249):(c=i^o^a,d=1859775393):h<60?(c=i&o|a&(i|o),d=2400959708):(c=i^o^a,d=3395469782);const f=(s<<5|s>>>27)+c+l+d+r[h]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function J9(t,e){const n=new Z9(t,e);return n.subscribe.bind(n)}class Z9{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ez(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=zy),s.error===void 0&&(s.error=zy),s.complete===void 0&&(s.complete=zy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ez(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function zy(){}function tz(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,ie(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},pg=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rz=1e3,sz=2,iz=4*60*60*1e3,oz=.5;function d1(t,e=rz,n=sz){const r=e*Math.pow(n,t),s=Math.round(oz*r*(Math.random()-.5)*2);return Math.min(iz,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(t){return t&&t._delegate?t._delegate:t}class Dr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Z0;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cz(e))try{this.getOrInitializeService({instanceIdentifier:Sa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sa){return this.instances.has(e)}getOptions(e=Sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lz(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Sa){return this.component?this.component.multipleInstances?e:Sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lz(t){return t===Sa?void 0:t}function cz(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new az(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Me||(Me={}));const dz={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},hz=Me.INFO,fz={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},pz=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=fz[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Th{constructor(e){this.name=e,this._logLevel=hz,this._logHandler=pz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const mz=(t,e)=>e.some(n=>t instanceof n);let h1,f1;function gz(){return h1||(h1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yz(){return f1||(f1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kP=new WeakMap,D_=new WeakMap,PP=new WeakMap,$y=new WeakMap,nE=new WeakMap;function vz(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Go(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kP.set(n,t)}).catch(()=>{}),nE.set(e,t),e}function _z(t){if(D_.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});D_.set(t,e)}let O_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return D_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||PP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Go(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wz(t){O_=t(O_)}function Ez(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(By(this),e,...n);return PP.set(r,e.sort?e.sort():[e]),Go(r)}:yz().includes(t)?function(...e){return t.apply(By(this),e),Go(kP.get(this))}:function(...e){return Go(t.apply(By(this),e))}}function Tz(t){return typeof t=="function"?Ez(t):(t instanceof IDBTransaction&&_z(t),mz(t,gz())?new Proxy(t,O_):t)}function Go(t){if(t instanceof IDBRequest)return vz(t);if($y.has(t))return $y.get(t);const e=Tz(t);return e!==t&&($y.set(t,e),nE.set(e,t)),e}const By=t=>nE.get(t);function NP(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Go(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Go(o.result),l.oldVersion,l.newVersion,Go(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const bz=["get","getKey","getAll","getAllKeys","count"],xz=["put","add","delete","clear"],Wy=new Map;function p1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wy.get(e))return Wy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=xz.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||bz.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Wy.set(e,i),i}wz(t=>({...t,get:(e,n,r)=>p1(e,n)||t.get(e,n,r),has:(e,n)=>!!p1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Iz(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Iz(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const L_="@firebase/app",m1="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new Th("@firebase/app"),Cz="@firebase/app-compat",Rz="@firebase/analytics-compat",Az="@firebase/analytics",kz="@firebase/app-check-compat",Pz="@firebase/app-check",Nz="@firebase/auth",Dz="@firebase/auth-compat",Oz="@firebase/database",Lz="@firebase/data-connect",Mz="@firebase/database-compat",Fz="@firebase/functions",Vz="@firebase/functions-compat",jz="@firebase/installations",Uz="@firebase/installations-compat",zz="@firebase/messaging",$z="@firebase/messaging-compat",Bz="@firebase/performance",Wz="@firebase/performance-compat",Hz="@firebase/remote-config",qz="@firebase/remote-config-compat",Gz="@firebase/storage",Kz="@firebase/storage-compat",Qz="@firebase/firestore",Yz="@firebase/ai",Xz="@firebase/firestore-compat",Jz="firebase",Zz="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="[DEFAULT]",e$={[L_]:"fire-core",[Cz]:"fire-core-compat",[Az]:"fire-analytics",[Rz]:"fire-analytics-compat",[Pz]:"fire-app-check",[kz]:"fire-app-check-compat",[Nz]:"fire-auth",[Dz]:"fire-auth-compat",[Oz]:"fire-rtdb",[Lz]:"fire-data-connect",[Mz]:"fire-rtdb-compat",[Fz]:"fire-fn",[Vz]:"fire-fn-compat",[jz]:"fire-iid",[Uz]:"fire-iid-compat",[zz]:"fire-fcm",[$z]:"fire-fcm-compat",[Bz]:"fire-perf",[Wz]:"fire-perf-compat",[Hz]:"fire-rc",[qz]:"fire-rc-compat",[Gz]:"fire-gcs",[Kz]:"fire-gcs-compat",[Qz]:"fire-fst",[Xz]:"fire-fst-compat",[Yz]:"fire-vertex","fire-js":"fire-js",[Jz]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=new Map,t$=new Map,F_=new Map;function g1(t,e){try{t.container.addComponent(e)}catch(n){qi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xr(t){const e=t.name;if(F_.has(e))return qi.debug(`There were multiple attempts to register component ${e}.`),!1;F_.set(e,t);for(const n of Zd.values())g1(n,t);for(const n of t$.values())g1(n,t);return!0}function no(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ko=new gl("app","Firebase",n$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ko.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=Zz;function DP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:M_,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Ko.create("bad-app-name",{appName:String(s)});if(n||(n=TP()),!n)throw Ko.create("no-options");const i=Zd.get(s);if(i){if(Hi(n,i.options)&&Hi(r,i.config))return i;throw Ko.create("duplicate-app",{appName:s})}const o=new uz(s);for(const l of F_.values())o.addComponent(l);const a=new r$(n,r,o);return Zd.set(s,a),a}function bh(t=M_){const e=Zd.get(t);if(!e&&t===M_&&TP())return DP();if(!e)throw Ko.create("no-app",{appName:t});return e}function y1(){return Array.from(Zd.values())}function Vn(t,e,n){var r;let s=(r=e$[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qi.warn(a.join(" "));return}Xr(new Dr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s$="firebase-heartbeat-database",i$=1,eh="firebase-heartbeat-store";let Hy=null;function OP(){return Hy||(Hy=NP(s$,i$,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(eh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ko.create("idb-open",{originalErrorMessage:t.message})})),Hy}async function o$(t){try{const n=(await OP()).transaction(eh),r=await n.objectStore(eh).get(LP(t));return await n.done,r}catch(e){if(e instanceof es)qi.warn(e.message);else{const n=Ko.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qi.warn(n.message)}}}async function v1(t,e){try{const r=(await OP()).transaction(eh,"readwrite");await r.objectStore(eh).put(e,LP(t)),await r.done}catch(n){if(n instanceof es)qi.warn(n.message);else{const r=Ko.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qi.warn(r.message)}}}function LP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a$=1024,l$=30;class c${constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new d$(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=_1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>l$){const o=h$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){qi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_1(),{heartbeatsToSend:r,unsentEntries:s}=u$(this._heartbeatsCache.heartbeats),i=Zp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return qi.warn(n),""}}}function _1(){return new Date().toISOString().substring(0,10)}function u$(t,e=a$){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),w1(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),w1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class d${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CP()?RP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await o$(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return v1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return v1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function w1(t){return Zp(JSON.stringify({version:2,heartbeats:t})).length}function h$(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f$(t){Xr(new Dr("platform-logger",e=>new Sz(e),"PRIVATE")),Xr(new Dr("heartbeat",e=>new c$(e),"PRIVATE")),Vn(L_,m1,t),Vn(L_,m1,"esm2017"),Vn("fire-js","")}f$("");var Gs=function(){return Gs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Gs.apply(this,arguments)};function xh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function p$(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function MP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const m$=MP,FP=new gl("auth","Firebase",MP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=new Th("@firebase/auth");function g$(t,...e){nm.logLevel<=Me.WARN&&nm.warn(`Auth (${ga}): ${t}`,...e)}function ip(t,...e){nm.logLevel<=Me.ERROR&&nm.error(`Auth (${ga}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t,...e){throw sE(t,...e)}function bs(t,...e){return sE(t,...e)}function rE(t,e,n){const r=Object.assign(Object.assign({},m$()),{[e]:n});return new gl("auth","Firebase",r).create(e,{appName:t.name})}function Ni(t){return rE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function y$(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Jr(t,"argument-error"),rE(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function sE(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return FP.create(t,...e)}function ve(t,e,...n){if(!t)throw sE(e,...n)}function Ci(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ip(e),new Error(e)}function Gi(t,e){t||Ci(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function v$(){return E1()==="http:"||E1()==="https:"}function E1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(v$()||xP()||"connection"in navigator)?navigator.onLine:!0}function w$(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gi(n>e,"Short delay should be less than long delay!"),this.isMobile=tE()||SP()}get(){return _$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(t,e){Gi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],b$=new Sh(3e4,6e4);function li(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ds(t,e,n,r,s={}){return jP(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=iu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return $9()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&ai(t.emulatorConfig.host)&&(c.credentials="include"),VP.fetch()(await UP(t,t.config.apiHost,n,a),c)})}async function jP(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},E$),e);try{const s=new S$(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw kf(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw kf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw kf(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw kf(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw rE(t,d,c);Jr(t,d)}}catch(s){if(s instanceof es)throw s;Jr(t,"network-request-failed",{message:String(s)})}}async function Ih(t,e,n,r,s={}){const i=await Ds(t,e,n,r,s);return"mfaPendingCredential"in i&&Jr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function UP(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?iE(t.config,s):`${t.config.apiScheme}://${s}`;return T$.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function x$(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class S${clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(bs(this.auth,"network-request-failed")),b$.get())})}}function kf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=bs(t,e,r);return s.customData._tokenResponse=n,s}function T1(t){return t!==void 0&&t.enterprise!==void 0}class I${constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return x$(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function C$(t,e){return Ds(t,"GET","/v2/recaptchaConfig",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R$(t,e){return Ds(t,"POST","/v1/accounts:delete",e)}async function rm(t,e){return Ds(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function A$(t,e=!1){const n=et(t),r=await n.getIdToken(e),s=oE(r);ve(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:gd(qy(s.auth_time)),issuedAtTime:gd(qy(s.iat)),expirationTime:gd(qy(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function qy(t){return Number(t)*1e3}function oE(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ip("JWT malformed, contained fewer than 3 sections"),null;try{const s=em(n);return s?JSON.parse(s):(ip("Failed to decode base64 JWT payload"),null)}catch(s){return ip("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function b1(t){const e=oE(t);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof es&&k$(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function k$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gd(this.lastLoginAt),this.creationTime=gd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sm(t){var e;const n=t.auth,r=await t.getIdToken(),s=await jc(t,rm(n,{idToken:r}));ve(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?zP(i.providerUserInfo):[],a=D$(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new j_(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function N$(t){const e=et(t);await sm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function D$(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function zP(t){return t.map(e=>{var{providerId:n}=e,r=xh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O$(t,e){const n=await jP(t,{},async()=>{const r=iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await UP(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&ai(t.emulatorConfig.host)&&(l.credentials="include"),VP.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function L$(t,e){return Ds(t,"POST","/v2/accounts:revokeToken",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):b1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const n=b1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await O$(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new dc;return r&&(ve(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ve(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ve(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dc,this.toJSON())}_performRefresh(){return Ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(t,e){ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vs{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=xh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new P$(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new j_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await jc(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return A$(this,e)}reload(){return N$(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await sm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(Ni(this.auth));const e=await this.getIdToken();return await jc(this,R$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:S,emailVerified:C,isAnonymous:O,providerData:M,stsTokenManager:b}=n;ve(S&&b,e,"internal-error");const I=dc.fromJSON(this.name,b);ve(typeof S=="string",e,"internal-error"),yo(h,e.name),yo(f,e.name),ve(typeof C=="boolean",e,"internal-error"),ve(typeof O=="boolean",e,"internal-error"),yo(p,e.name),yo(T,e.name),yo(y,e.name),yo(w,e.name),yo(E,e.name),yo(v,e.name);const A=new vs({uid:S,auth:e,email:f,emailVerified:C,displayName:h,isAnonymous:O,photoURL:T,phoneNumber:p,tenantId:y,stsTokenManager:I,createdAt:E,lastLoginAt:v});return M&&Array.isArray(M)&&(A.providerData=M.map(R=>Object.assign({},R))),w&&(A._redirectEventId=w),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new dc;s.updateFromServerResponse(n);const i=new vs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await sm(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ve(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?zP(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new dc;a.updateFromIdToken(r);const l=new vs({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new j_(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=new Map;function Ri(t){Gi(t instanceof Function,"Expected a class definition");let e=x1.get(t);return e?(Gi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,x1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$P.type="NONE";const S1=$P;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t,e,n){return`firebase:${t}:${e}:${n}`}class hc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=op(this.userKey,s.apiKey,i),this.fullPersistenceKey=op("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await rm(this.auth,{idToken:e}).catch(()=>{});return n?vs._fromGetAccountInfoResponse(this.auth,n,e):null}return vs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new hc(Ri(S1),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Ri(S1);const o=op(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const f=await rm(e,{idToken:d}).catch(()=>{});if(!f)break;h=await vs._fromGetAccountInfoResponse(e,f,d)}else h=vs._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new hc(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new hc(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KP(e))return"Blackberry";if(QP(e))return"Webos";if(WP(e))return"Safari";if((e.includes("chrome/")||HP(e))&&!e.includes("edge/"))return"Chrome";if(GP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function BP(t=zn()){return/firefox\//i.test(t)}function WP(t=zn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HP(t=zn()){return/crios\//i.test(t)}function qP(t=zn()){return/iemobile/i.test(t)}function GP(t=zn()){return/android/i.test(t)}function KP(t=zn()){return/blackberry/i.test(t)}function QP(t=zn()){return/webos/i.test(t)}function aE(t=zn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function M$(t=zn()){var e;return aE(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function F$(){return B9()&&document.documentMode===10}function YP(t=zn()){return aE(t)||GP(t)||QP(t)||KP(t)||/windows phone/i.test(t)||qP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t,e=[]){let n;switch(t){case"Browser":n=I1(zn());break;case"Worker":n=`${I1(zn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ga}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j$(t,e={}){return Ds(t,"GET","/v2/passwordPolicy",li(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$=6;class z${constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:U$,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C1(this),this.idTokenSubscription=new C1(this),this.beforeStateQueue=new V$(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ri(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await hc.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rm(this,{idToken:e}),r=await vs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Yn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=w$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(Ni(this));const n=e?et(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(Ni(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(Ni(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await j$(this),n=new z$(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await L$(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ri(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=await hc.create(this,[Ri(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&g$(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ro(t){return et(t)}class C1{constructor(e){this.auth=e,this.observer=null,this.addObserver=J9(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function B$(t){mg=t}function JP(t){return mg.loadJS(t)}function W$(){return mg.recaptchaEnterpriseScript}function H$(){return mg.gapiScript}function q$(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class G${constructor(){this.enterprise=new K$}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class K${ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Q$="recaptcha-enterprise",ZP="NO_RECAPTCHA";class Y${constructor(e){this.type=Q$,this.auth=ro(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{C$(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new I$(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;T1(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(ZP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new G$().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&T1(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=W$();l.length!==0&&(l+=a),JP(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function R1(t,e,n,r=!1,s=!1){const i=new Y$(t);let o;if(s)o=ZP;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function im(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await R1(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await R1(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(t,e){const n=no(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Hi(i,e??{}))return s;Jr(s,"already-initialized")}return n.initialize({options:e})}function J$(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ri);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Z$(t,e,n){const r=ro(t);ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=eN(e),{host:o,port:a}=eB(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ve(Hi(c,r.config.emulator)&&Hi(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,ai(o)?(hg(`${i}//${o}${l}`),fg("Auth",!0)):tB()}function eN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function eB(t){const e=eN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:A1(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:A1(o)}}}function A1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function tB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ci("not implemented")}_getIdTokenResponse(e){return Ci("not implemented")}_linkToIdToken(e,n){return Ci("not implemented")}_getReauthenticationResolver(e){return Ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nB(t,e){return Ds(t,"POST","/v1/accounts:resetPassword",li(t,e))}async function rB(t,e){return Ds(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sB(t,e){return Ih(t,"POST","/v1/accounts:signInWithPassword",li(t,e))}async function tN(t,e){return Ds(t,"POST","/v1/accounts:sendOobCode",li(t,e))}async function iB(t,e){return tN(t,e)}async function oB(t,e){return tN(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aB(t,e){return Ih(t,"POST","/v1/accounts:signInWithEmailLink",li(t,e))}async function lB(t,e){return Ih(t,"POST","/v1/accounts:signInWithEmailLink",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th extends lE{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new th(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new th(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(e,n,"signInWithPassword",sB);case"emailLink":return aB(e,{email:this._email,oobCode:this._password});default:Jr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(e,r,"signUpPassword",rB);case"emailLink":return lB(e,{idToken:n,email:this._email,oobCode:this._password});default:Jr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fc(t,e){return Ih(t,"POST","/v1/accounts:signInWithIdp",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cB="http://localhost";class el extends lE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new el(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=xh(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new el(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return fc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,fc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fc(e,n)}buildRequest(){const e={requestUri:cB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=iu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dB(t){const e=Ju(Zu(t)).link,n=e?Ju(Zu(e)).deep_link_id:null,r=Ju(Zu(t)).deep_link_id;return(r?Ju(Zu(r)).link:null)||r||n||e||t}class cE{constructor(e){var n,r,s,i,o,a;const l=Ju(Zu(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=uB((s=l.mode)!==null&&s!==void 0?s:null);ve(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=dB(e);try{return new cE(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(){this.providerId=ou.PROVIDER_ID}static credential(e,n){return th._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=cE.parseLink(n);return ve(r,"argument-error"),th._fromEmailAndCode(e,r.code,r.tenantId)}}ou.PROVIDER_ID="password";ou.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ou.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends uE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends Ch{constructor(){super("facebook.com")}static credential(e){return el._fromParams({providerId:So.PROVIDER_ID,signInMethod:So.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return So.credentialFromTaggedObject(e)}static credentialFromError(e){return So.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return So.credential(e.oauthAccessToken)}catch{return null}}}So.FACEBOOK_SIGN_IN_METHOD="facebook.com";So.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Ch{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return el._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return xi.credential(n,r)}catch{return null}}}xi.GOOGLE_SIGN_IN_METHOD="google.com";xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends Ch{constructor(){super("github.com")}static credential(e){return el._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Io.credentialFromTaggedObject(e)}static credentialFromError(e){return Io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Io.credential(e.oauthAccessToken)}catch{return null}}}Io.GITHUB_SIGN_IN_METHOD="github.com";Io.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co extends Ch{constructor(){super("twitter.com")}static credential(e,n){return el._fromParams({providerId:Co.PROVIDER_ID,signInMethod:Co.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Co.credentialFromTaggedObject(e)}static credentialFromError(e){return Co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Co.credential(n,r)}catch{return null}}}Co.TWITTER_SIGN_IN_METHOD="twitter.com";Co.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hB(t,e){return Ih(t,"POST","/v1/accounts:signUp",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await vs._fromIdTokenResponse(e,r,s),o=k1(r);return new tl({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=k1(r);return new tl({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function k1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om extends es{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,om.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new om(e,n,r,s)}}function nN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?om._fromErrorAndOperation(t,i,e,r):i})}async function fB(t,e,n=!1){const r=await jc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return tl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pB(t,e,n=!1){const{auth:r}=t;if(Yn(r.app))return Promise.reject(Ni(r));const s="reauthenticate";try{const i=await jc(t,nN(r,s,e,t),n);ve(i.idToken,r,"internal-error");const o=oE(i.idToken);ve(o,r,"internal-error");const{sub:a}=o;return ve(t.uid===a,r,"user-mismatch"),tl._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Jr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(t,e,n=!1){if(Yn(t.app))return Promise.reject(Ni(t));const r="signIn",s=await nN(t,r,e),i=await tl._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function mB(t,e){return rN(ro(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dE(t){const e=ro(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gB(t,e,n){const r=ro(t);await im(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",oB)}async function yB(t,e,n){await nB(et(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&dE(t),r})}async function vB(t,e,n){if(Yn(t.app))return Promise.reject(Ni(t));const r=ro(t),o=await im(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hB).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&dE(t),l}),a=await tl._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function _B(t,e,n){return Yn(t.app)?Promise.reject(Ni(t)):mB(et(t),ou.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&dE(t),r})}async function sN(t,e){const n=et(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await iB(n.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wB(t,e){return Ds(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=et(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await jc(r,wB(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function EB(t,e,n,r){return et(t).onIdTokenChanged(e,n,r)}function TB(t,e,n){return et(t).beforeAuthStateChanged(e,n)}function oN(t,e,n,r){return et(t).onAuthStateChanged(e,n,r)}function xs(t){return et(t).signOut()}async function bB(t){return et(t).delete()}const am="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(am,"1"),this.storage.removeItem(am),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB=1e3,SB=10;class lN extends aN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);F$()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,SB):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},xB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lN.type="LOCAL";const IB=lN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN extends aN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cN.type="SESSION";const uN=cN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new gg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await CB(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=hE("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(){return window}function AB(t){Zs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(){return typeof Zs().WorkerGlobalScope<"u"&&typeof Zs().importScripts=="function"}async function kB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function NB(){return dN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="firebaseLocalStorageDb",DB=1,lm="firebaseLocalStorage",fN="fbase_key";class Rh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yg(t,e){return t.transaction([lm],e?"readwrite":"readonly").objectStore(lm)}function OB(){const t=indexedDB.deleteDatabase(hN);return new Rh(t).toPromise()}function U_(){const t=indexedDB.open(hN,DB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(lm,{keyPath:fN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(lm)?e(r):(r.close(),await OB(),e(await U_()))})})}async function P1(t,e,n){const r=yg(t,!0).put({[fN]:e,value:n});return new Rh(r).toPromise()}async function LB(t,e){const n=yg(t,!1).get(e),r=await new Rh(n).toPromise();return r===void 0?null:r.value}function N1(t,e){const n=yg(t,!0).delete(e);return new Rh(n).toPromise()}const MB=800,FB=3;class pN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await U_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>FB)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gg._getInstance(NB()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await kB(),!this.activeServiceWorker)return;this.sender=new RB(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await U_();return await P1(e,am,"1"),await N1(e,am),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>P1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>LB(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>N1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=yg(s,!1).getAll();return new Rh(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pN.type="LOCAL";const VB=pN;new Sh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t,e){return e?Ri(e):(ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE extends lE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function jB(t){return rN(t.auth,new fE(t),t.bypassAuthState)}function UB(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),pB(n,new fE(t),t.bypassAuthState)}async function zB(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),fB(n,new fE(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jB;case"linkViaPopup":case"linkViaRedirect":return zB;case"reauthViaPopup":case"reauthViaRedirect":return UB;default:Jr(this.auth,"internal-error")}}resolve(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B=new Sh(2e3,1e4);async function BB(t,e,n){if(Yn(t.app))return Promise.reject(bs(t,"operation-not-supported-in-this-environment"));const r=ro(t);y$(t,e,uE);const s=mN(r,n);return new Da(r,"signInViaPopup",e,s).executeNotNull()}class Da extends gN{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Da.currentPopupAction&&Da.currentPopupAction.cancel(),Da.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){Gi(this.filter.length===1,"Popup operations only handle one event");const e=hE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(bs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Da.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$B.get())};e()}}Da.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WB="pendingRedirect",ap=new Map;class HB extends gN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ap.get(this.auth._key());if(!e){try{const r=await qB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ap.set(this.auth._key(),e)}return this.bypassAuthState||ap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qB(t,e){const n=QB(e),r=KB(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function GB(t,e){ap.set(t._key(),e)}function KB(t){return Ri(t._redirectPersistence)}function QB(t){return op(WB,t.config.apiKey,t.name)}async function YB(t,e,n=!1){if(Yn(t.app))return Promise.reject(Ni(t));const r=ro(t),s=mN(r,e),o=await new HB(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XB=10*60*1e3;class JB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!yN(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(bs(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XB&&this.cachedEventUids.clear(),this.cachedEventUids.has(D1(e))}saveEventToCache(e){this.cachedEventUids.add(D1(e)),this.lastProcessedEventTime=Date.now()}}function D1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e8(t,e={}){return Ds(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n8=/^https?/;async function r8(t){if(t.config.emulator)return;const{authorizedDomains:e}=await e8(t);for(const n of e)try{if(s8(n))return}catch{}Jr(t,"unauthorized-domain")}function s8(t){const e=V_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!n8.test(n))return!1;if(t8.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8=new Sh(3e4,6e4);function O1(){const t=Zs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function o8(t){return new Promise((e,n)=>{var r,s,i;function o(){O1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O1(),n(bs(t,"network-request-failed"))},timeout:i8.get()})}if(!((s=(r=Zs().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Zs().gapi)===null||i===void 0)&&i.load)o();else{const a=q$("iframefcb");return Zs()[a]=()=>{gapi.load?o():n(bs(t,"network-request-failed"))},JP(`${H$()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw lp=null,e})}let lp=null;function a8(t){return lp=lp||o8(t),lp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8=new Sh(5e3,15e3),c8="__/auth/iframe",u8="emulator/auth/iframe",d8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},h8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f8(t){const e=t.config;ve(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?iE(e,u8):`https://${t.config.authDomain}/${c8}`,r={apiKey:e.apiKey,appName:t.name,v:ga},s=h8.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${iu(r).slice(1)}`}async function p8(t){const e=await a8(t),n=Zs().gapi;return ve(n,t,"internal-error"),e.open({where:document.body,url:f8(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d8,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=bs(t,"network-request-failed"),a=Zs().setTimeout(()=>{i(o)},l8.get());function l(){Zs().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g8=500,y8=600,v8="_blank",_8="http://localhost";class L1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function w8(t,e,n,r=g8,s=y8){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},m8),{width:r.toString(),height:s.toString(),top:i,left:o}),c=zn().toLowerCase();n&&(a=HP(c)?v8:n),BP(c)&&(e=e||_8,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[p,T])=>`${f}${p}=${T},`,"");if(M$(c)&&a!=="_self")return E8(e||"",a),new L1(null);const h=window.open(e||"",a,d);ve(h,t,"popup-blocked");try{h.focus()}catch{}return new L1(h)}function E8(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8="__/auth/handler",b8="emulator/auth/handler",x8=encodeURIComponent("fac");async function M1(t,e,n,r,s,i){ve(t.config.authDomain,t,"auth-domain-config-required"),ve(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ga,eventId:s};if(e instanceof uE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",N_(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Ch){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${x8}=${encodeURIComponent(l)}`:"";return`${S8(t)}?${iu(a).slice(1)}${c}`}function S8({config:t}){return t.emulator?iE(t,b8):`https://${t.authDomain}/${T8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="webStorageSupport";class I8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uN,this._completeRedirectFn=YB,this._overrideRedirectResult=GB}async _openPopup(e,n,r,s){var i;Gi((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await M1(e,n,r,V_(),s);return w8(e,o,hE())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await M1(e,n,r,V_(),s);return AB(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Gi(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await p8(e),r=new JB(e);return n.register("authEvent",s=>(ve(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gy,{type:Gy},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Gy];o!==void 0&&n(!!o),Jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=r8(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return YP()||WP()||aE()}}const C8=I8;var F1="@firebase/auth",V1="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function k8(t){Xr(new Dr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ve(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XP(t)},c=new $$(r,s,i,l);return J$(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xr(new Dr("auth-internal",e=>{const n=ro(e.getProvider("auth").getImmediate());return(r=>new R8(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vn(F1,V1,A8(t)),Vn(F1,V1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8=5*60,N8=bP("authIdTokenMaxAge")||P8;let j1=null;const D8=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>N8)return;const s=n==null?void 0:n.token;j1!==s&&(j1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Ky(t=bh()){const e=no(t,"auth");if(e.isInitialized())return e.getImmediate();const n=X$(t,{popupRedirectResolver:C8,persistence:[VB,IB,uN]}),r=bP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=D8(i.toString());TB(n,o,()=>o(n.currentUser)),EB(n,a=>o(a))}}const s=EP("auth");return s&&Z$(n,`http://${s}`),n}function O8(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}B$({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=bs("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",O8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});k8("Browser");var U1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qo,vN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,I){function A(){}A.prototype=I.prototype,b.D=I.prototype,b.prototype=new A,b.prototype.constructor=b,b.C=function(R,N,D){for(var P=Array(arguments.length-2),B=2;B<arguments.length;B++)P[B-2]=arguments[B];return I.prototype[N].apply(R,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,I,A){A||(A=0);var R=Array(16);if(typeof I=="string")for(var N=0;16>N;++N)R[N]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(N=0;16>N;++N)R[N]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=b.g[0],A=b.g[1],N=b.g[2];var D=b.g[3],P=I+(D^A&(N^D))+R[0]+3614090360&4294967295;I=A+(P<<7&4294967295|P>>>25),P=D+(N^I&(A^N))+R[1]+3905402710&4294967295,D=I+(P<<12&4294967295|P>>>20),P=N+(A^D&(I^A))+R[2]+606105819&4294967295,N=D+(P<<17&4294967295|P>>>15),P=A+(I^N&(D^I))+R[3]+3250441966&4294967295,A=N+(P<<22&4294967295|P>>>10),P=I+(D^A&(N^D))+R[4]+4118548399&4294967295,I=A+(P<<7&4294967295|P>>>25),P=D+(N^I&(A^N))+R[5]+1200080426&4294967295,D=I+(P<<12&4294967295|P>>>20),P=N+(A^D&(I^A))+R[6]+2821735955&4294967295,N=D+(P<<17&4294967295|P>>>15),P=A+(I^N&(D^I))+R[7]+4249261313&4294967295,A=N+(P<<22&4294967295|P>>>10),P=I+(D^A&(N^D))+R[8]+1770035416&4294967295,I=A+(P<<7&4294967295|P>>>25),P=D+(N^I&(A^N))+R[9]+2336552879&4294967295,D=I+(P<<12&4294967295|P>>>20),P=N+(A^D&(I^A))+R[10]+4294925233&4294967295,N=D+(P<<17&4294967295|P>>>15),P=A+(I^N&(D^I))+R[11]+2304563134&4294967295,A=N+(P<<22&4294967295|P>>>10),P=I+(D^A&(N^D))+R[12]+1804603682&4294967295,I=A+(P<<7&4294967295|P>>>25),P=D+(N^I&(A^N))+R[13]+4254626195&4294967295,D=I+(P<<12&4294967295|P>>>20),P=N+(A^D&(I^A))+R[14]+2792965006&4294967295,N=D+(P<<17&4294967295|P>>>15),P=A+(I^N&(D^I))+R[15]+1236535329&4294967295,A=N+(P<<22&4294967295|P>>>10),P=I+(N^D&(A^N))+R[1]+4129170786&4294967295,I=A+(P<<5&4294967295|P>>>27),P=D+(A^N&(I^A))+R[6]+3225465664&4294967295,D=I+(P<<9&4294967295|P>>>23),P=N+(I^A&(D^I))+R[11]+643717713&4294967295,N=D+(P<<14&4294967295|P>>>18),P=A+(D^I&(N^D))+R[0]+3921069994&4294967295,A=N+(P<<20&4294967295|P>>>12),P=I+(N^D&(A^N))+R[5]+3593408605&4294967295,I=A+(P<<5&4294967295|P>>>27),P=D+(A^N&(I^A))+R[10]+38016083&4294967295,D=I+(P<<9&4294967295|P>>>23),P=N+(I^A&(D^I))+R[15]+3634488961&4294967295,N=D+(P<<14&4294967295|P>>>18),P=A+(D^I&(N^D))+R[4]+3889429448&4294967295,A=N+(P<<20&4294967295|P>>>12),P=I+(N^D&(A^N))+R[9]+568446438&4294967295,I=A+(P<<5&4294967295|P>>>27),P=D+(A^N&(I^A))+R[14]+3275163606&4294967295,D=I+(P<<9&4294967295|P>>>23),P=N+(I^A&(D^I))+R[3]+4107603335&4294967295,N=D+(P<<14&4294967295|P>>>18),P=A+(D^I&(N^D))+R[8]+1163531501&4294967295,A=N+(P<<20&4294967295|P>>>12),P=I+(N^D&(A^N))+R[13]+2850285829&4294967295,I=A+(P<<5&4294967295|P>>>27),P=D+(A^N&(I^A))+R[2]+4243563512&4294967295,D=I+(P<<9&4294967295|P>>>23),P=N+(I^A&(D^I))+R[7]+1735328473&4294967295,N=D+(P<<14&4294967295|P>>>18),P=A+(D^I&(N^D))+R[12]+2368359562&4294967295,A=N+(P<<20&4294967295|P>>>12),P=I+(A^N^D)+R[5]+4294588738&4294967295,I=A+(P<<4&4294967295|P>>>28),P=D+(I^A^N)+R[8]+2272392833&4294967295,D=I+(P<<11&4294967295|P>>>21),P=N+(D^I^A)+R[11]+1839030562&4294967295,N=D+(P<<16&4294967295|P>>>16),P=A+(N^D^I)+R[14]+4259657740&4294967295,A=N+(P<<23&4294967295|P>>>9),P=I+(A^N^D)+R[1]+2763975236&4294967295,I=A+(P<<4&4294967295|P>>>28),P=D+(I^A^N)+R[4]+1272893353&4294967295,D=I+(P<<11&4294967295|P>>>21),P=N+(D^I^A)+R[7]+4139469664&4294967295,N=D+(P<<16&4294967295|P>>>16),P=A+(N^D^I)+R[10]+3200236656&4294967295,A=N+(P<<23&4294967295|P>>>9),P=I+(A^N^D)+R[13]+681279174&4294967295,I=A+(P<<4&4294967295|P>>>28),P=D+(I^A^N)+R[0]+3936430074&4294967295,D=I+(P<<11&4294967295|P>>>21),P=N+(D^I^A)+R[3]+3572445317&4294967295,N=D+(P<<16&4294967295|P>>>16),P=A+(N^D^I)+R[6]+76029189&4294967295,A=N+(P<<23&4294967295|P>>>9),P=I+(A^N^D)+R[9]+3654602809&4294967295,I=A+(P<<4&4294967295|P>>>28),P=D+(I^A^N)+R[12]+3873151461&4294967295,D=I+(P<<11&4294967295|P>>>21),P=N+(D^I^A)+R[15]+530742520&4294967295,N=D+(P<<16&4294967295|P>>>16),P=A+(N^D^I)+R[2]+3299628645&4294967295,A=N+(P<<23&4294967295|P>>>9),P=I+(N^(A|~D))+R[0]+4096336452&4294967295,I=A+(P<<6&4294967295|P>>>26),P=D+(A^(I|~N))+R[7]+1126891415&4294967295,D=I+(P<<10&4294967295|P>>>22),P=N+(I^(D|~A))+R[14]+2878612391&4294967295,N=D+(P<<15&4294967295|P>>>17),P=A+(D^(N|~I))+R[5]+4237533241&4294967295,A=N+(P<<21&4294967295|P>>>11),P=I+(N^(A|~D))+R[12]+1700485571&4294967295,I=A+(P<<6&4294967295|P>>>26),P=D+(A^(I|~N))+R[3]+2399980690&4294967295,D=I+(P<<10&4294967295|P>>>22),P=N+(I^(D|~A))+R[10]+4293915773&4294967295,N=D+(P<<15&4294967295|P>>>17),P=A+(D^(N|~I))+R[1]+2240044497&4294967295,A=N+(P<<21&4294967295|P>>>11),P=I+(N^(A|~D))+R[8]+1873313359&4294967295,I=A+(P<<6&4294967295|P>>>26),P=D+(A^(I|~N))+R[15]+4264355552&4294967295,D=I+(P<<10&4294967295|P>>>22),P=N+(I^(D|~A))+R[6]+2734768916&4294967295,N=D+(P<<15&4294967295|P>>>17),P=A+(D^(N|~I))+R[13]+1309151649&4294967295,A=N+(P<<21&4294967295|P>>>11),P=I+(N^(A|~D))+R[4]+4149444226&4294967295,I=A+(P<<6&4294967295|P>>>26),P=D+(A^(I|~N))+R[11]+3174756917&4294967295,D=I+(P<<10&4294967295|P>>>22),P=N+(I^(D|~A))+R[2]+718787259&4294967295,N=D+(P<<15&4294967295|P>>>17),P=A+(D^(N|~I))+R[9]+3951481745&4294967295,b.g[0]=b.g[0]+I&4294967295,b.g[1]=b.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,b.g[2]=b.g[2]+N&4294967295,b.g[3]=b.g[3]+D&4294967295}r.prototype.u=function(b,I){I===void 0&&(I=b.length);for(var A=I-this.blockSize,R=this.B,N=this.h,D=0;D<I;){if(N==0)for(;D<=A;)s(this,b,D),D+=this.blockSize;if(typeof b=="string"){for(;D<I;)if(R[N++]=b.charCodeAt(D++),N==this.blockSize){s(this,R),N=0;break}}else for(;D<I;)if(R[N++]=b[D++],N==this.blockSize){s(this,R),N=0;break}}this.h=N,this.o+=I},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var I=1;I<b.length-8;++I)b[I]=0;var A=8*this.o;for(I=b.length-8;I<b.length;++I)b[I]=A&255,A/=256;for(this.u(b),b=Array(16),I=A=0;4>I;++I)for(var R=0;32>R;R+=8)b[A++]=this.g[I]>>>R&255;return b};function i(b,I){var A=a;return Object.prototype.hasOwnProperty.call(A,b)?A[b]:A[b]=I(b)}function o(b,I){this.h=I;for(var A=[],R=!0,N=b.length-1;0<=N;N--){var D=b[N]|0;R&&D==I||(A[N]=D,R=!1)}this.g=A}var a={};function l(b){return-128<=b&&128>b?i(b,function(I){return new o([I|0],0>I?-1:0)}):new o([b|0],0>b?-1:0)}function c(b){if(isNaN(b)||!isFinite(b))return h;if(0>b)return w(c(-b));for(var I=[],A=1,R=0;b>=A;R++)I[R]=b/A|0,A*=4294967296;return new o(I,0)}function d(b,I){if(b.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b.charAt(0)=="-")return w(d(b.substring(1),I));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(I,8)),R=h,N=0;N<b.length;N+=8){var D=Math.min(8,b.length-N),P=parseInt(b.substring(N,N+D),I);8>D?(D=c(Math.pow(I,D)),R=R.j(D).add(c(P))):(R=R.j(A),R=R.add(c(P)))}return R}var h=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(y(this))return-w(this).m();for(var b=0,I=1,A=0;A<this.g.length;A++){var R=this.i(A);b+=(0<=R?R:4294967296+R)*I,I*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(T(this))return"0";if(y(this))return"-"+w(this).toString(b);for(var I=c(Math.pow(b,6)),A=this,R="";;){var N=C(A,I).g;A=E(A,N.j(I));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(b);if(A=N,T(A))return D+R;for(;6>D.length;)D="0"+D;R=D+R}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function T(b){if(b.h!=0)return!1;for(var I=0;I<b.g.length;I++)if(b.g[I]!=0)return!1;return!0}function y(b){return b.h==-1}t.l=function(b){return b=E(this,b),y(b)?-1:T(b)?0:1};function w(b){for(var I=b.g.length,A=[],R=0;R<I;R++)A[R]=~b.g[R];return new o(A,~b.h).add(f)}t.abs=function(){return y(this)?w(this):this},t.add=function(b){for(var I=Math.max(this.g.length,b.g.length),A=[],R=0,N=0;N<=I;N++){var D=R+(this.i(N)&65535)+(b.i(N)&65535),P=(D>>>16)+(this.i(N)>>>16)+(b.i(N)>>>16);R=P>>>16,D&=65535,P&=65535,A[N]=P<<16|D}return new o(A,A[A.length-1]&-2147483648?-1:0)};function E(b,I){return b.add(w(I))}t.j=function(b){if(T(this)||T(b))return h;if(y(this))return y(b)?w(this).j(w(b)):w(w(this).j(b));if(y(b))return w(this.j(w(b)));if(0>this.l(p)&&0>b.l(p))return c(this.m()*b.m());for(var I=this.g.length+b.g.length,A=[],R=0;R<2*I;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(var N=0;N<b.g.length;N++){var D=this.i(R)>>>16,P=this.i(R)&65535,B=b.i(N)>>>16,se=b.i(N)&65535;A[2*R+2*N]+=P*se,v(A,2*R+2*N),A[2*R+2*N+1]+=D*se,v(A,2*R+2*N+1),A[2*R+2*N+1]+=P*B,v(A,2*R+2*N+1),A[2*R+2*N+2]+=D*B,v(A,2*R+2*N+2)}for(R=0;R<I;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=I;R<2*I;R++)A[R]=0;return new o(A,0)};function v(b,I){for(;(b[I]&65535)!=b[I];)b[I+1]+=b[I]>>>16,b[I]&=65535,I++}function S(b,I){this.g=b,this.h=I}function C(b,I){if(T(I))throw Error("division by zero");if(T(b))return new S(h,h);if(y(b))return I=C(w(b),I),new S(w(I.g),w(I.h));if(y(I))return I=C(b,w(I)),new S(w(I.g),I.h);if(30<b.g.length){if(y(b)||y(I))throw Error("slowDivide_ only works with positive integers.");for(var A=f,R=I;0>=R.l(b);)A=O(A),R=O(R);var N=M(A,1),D=M(R,1);for(R=M(R,2),A=M(A,2);!T(R);){var P=D.add(R);0>=P.l(b)&&(N=N.add(A),D=P),R=M(R,1),A=M(A,1)}return I=E(b,N.j(I)),new S(N,I)}for(N=h;0<=b.l(I);){for(A=Math.max(1,Math.floor(b.m()/I.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),D=c(A),P=D.j(I);y(P)||0<P.l(b);)A-=R,D=c(A),P=D.j(I);T(D)&&(D=f),N=N.add(D),b=E(b,P)}return new S(N,b)}t.A=function(b){return C(this,b).h},t.and=function(b){for(var I=Math.max(this.g.length,b.g.length),A=[],R=0;R<I;R++)A[R]=this.i(R)&b.i(R);return new o(A,this.h&b.h)},t.or=function(b){for(var I=Math.max(this.g.length,b.g.length),A=[],R=0;R<I;R++)A[R]=this.i(R)|b.i(R);return new o(A,this.h|b.h)},t.xor=function(b){for(var I=Math.max(this.g.length,b.g.length),A=[],R=0;R<I;R++)A[R]=this.i(R)^b.i(R);return new o(A,this.h^b.h)};function O(b){for(var I=b.g.length+1,A=[],R=0;R<I;R++)A[R]=b.i(R)<<1|b.i(R-1)>>>31;return new o(A,b.h)}function M(b,I){var A=I>>5;I%=32;for(var R=b.g.length-A,N=[],D=0;D<R;D++)N[D]=0<I?b.i(D+A)>>>I|b.i(D+A+1)<<32-I:b.i(D+A);return new o(N,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Qo=o}).apply(typeof U1<"u"?U1:typeof self<"u"?self:typeof window<"u"?window:{});var Pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _N,ed,wN,cp,z_,EN,TN,bN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,x){return u==Array.prototype||u==Object.prototype||(u[g]=x.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pf=="object"&&Pf];for(var g=0;g<u.length;++g){var x=u[g];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var x=r;u=u.split(".");for(var k=0;k<u.length-1;k++){var V=u[k];if(!(V in x))break e;x=x[V]}u=u[u.length-1],k=x[u],g=g(k),g!=k&&g!=null&&e(x,u,{configurable:!0,writable:!0,value:g})}}function i(u,g){u instanceof String&&(u+="");var x=0,k=!1,V={next:function(){if(!k&&x<u.length){var z=x++;return{value:g(z,u[z]),done:!1}}return k=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(u){return u||function(){return i(this,function(g,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,x){return u.call.apply(u.bind,arguments)}function h(u,g,x){if(!u)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,k),u.apply(g,V)}}return function(){return u.apply(g,arguments)}}function f(u,g,x){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function p(u,g){var x=Array.prototype.slice.call(arguments,1);return function(){var k=x.slice();return k.push.apply(k,arguments),u.apply(this,k)}}function T(u,g){function x(){}x.prototype=g.prototype,u.aa=g.prototype,u.prototype=new x,u.prototype.constructor=u,u.Qb=function(k,V,z){for(var ee=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)ee[ut-2]=arguments[ut];return g.prototype[V].apply(k,ee)}}function y(u){const g=u.length;if(0<g){const x=Array(g);for(let k=0;k<g;k++)x[k]=u[k];return x}return[]}function w(u,g){for(let x=1;x<arguments.length;x++){const k=arguments[x];if(l(k)){const V=u.length||0,z=k.length||0;u.length=V+z;for(let ee=0;ee<z;ee++)u[V+ee]=k[ee]}else u.push(k)}}class E{constructor(g,x){this.i=g,this.j=x,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function v(u){return/^[\s\xa0]*$/.test(u)}function S(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function C(u){return C[" "](u),u}C[" "]=function(){};var O=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function M(u,g,x){for(const k in u)g.call(x,u[k],k,u)}function b(u,g){for(const x in u)g.call(void 0,u[x],x,u)}function I(u){const g={};for(const x in u)g[x]=u[x];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(u,g){let x,k;for(let V=1;V<arguments.length;V++){k=arguments[V];for(x in k)u[x]=k[x];for(let z=0;z<A.length;z++)x=A[z],Object.prototype.hasOwnProperty.call(k,x)&&(u[x]=k[x])}}function N(u){var g=1;u=u.split(":");const x=[];for(;0<g&&u.length;)x.push(u.shift()),g--;return u.length&&x.push(u.join(":")),x}function D(u){a.setTimeout(()=>{throw u},0)}function P(){var u=$;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class B{constructor(){this.h=this.g=null}add(g,x){const k=se.get();k.set(g,x),this.h?this.h.next=k:this.g=k,this.h=k}}var se=new E(()=>new Q,u=>u.reset());class Q{constructor(){this.next=this.g=this.h=null}set(g,x){this.h=g,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,j=!1,$=new B,Z=()=>{const u=a.Promise.resolve(void 0);oe=()=>{u.then(pe)}};var pe=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(x){D(x)}var g=se;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}j=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const x=()=>{};a.addEventListener("test",x,g),a.removeEventListener("test",x,g)}catch{}return u}();function Ce(u,g){if(Y.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var x=this.type=u.type,k=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(O){e:{try{C(g.nodeName);var V=!0;break e}catch{}V=!1}V||(g=null)}}else x=="mouseover"?g=u.fromElement:x=="mouseout"&&(g=u.toElement);this.relatedTarget=g,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Qe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ce.aa.h.call(this)}}T(Ce,Y);var Qe={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var X="closure_listenable_"+(1e6*Math.random()|0),Ve=0;function ht(u,g,x,k,V){this.listener=u,this.proxy=null,this.src=g,this.type=x,this.capture=!!k,this.ha=V,this.key=++Ve,this.da=this.fa=!1}function Oe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ke(u){this.src=u,this.g={},this.h=0}ke.prototype.add=function(u,g,x,k,V){var z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);var ee=ct(u,g,k,V);return-1<ee?(g=u[ee],x||(g.fa=!1)):(g=new ht(g,this.src,z,!!k,V),g.fa=x,u.push(g)),g};function ge(u,g){var x=g.type;if(x in u.g){var k=u.g[x],V=Array.prototype.indexOf.call(k,g,void 0),z;(z=0<=V)&&Array.prototype.splice.call(k,V,1),z&&(Oe(g),u.g[x].length==0&&(delete u.g[x],u.h--))}}function ct(u,g,x,k){for(var V=0;V<u.length;++V){var z=u[V];if(!z.da&&z.listener==g&&z.capture==!!x&&z.ha==k)return V}return-1}var Jt="closure_lm_"+(1e6*Math.random()|0),mr={};function Zt(u,g,x,k,V){if(Array.isArray(g)){for(var z=0;z<g.length;z++)Zt(u,g[z],x,k,V);return null}return x=Ls(x),u&&u[X]?u.K(g,x,c(k)?!!k.capture:!!k,V):ts(u,g,x,!1,k,V)}function ts(u,g,x,k,V,z){if(!g)throw Error("Invalid event type");var ee=c(V)?!!V.capture:!!V,ut=gr(u);if(ut||(u[Jt]=ut=new ke(u)),x=ut.add(g,x,k,ee,z),x.proxy)return x;if(k=ui(),x.proxy=k,k.src=u,k.listener=x,u.addEventListener)ye||(V=ee),V===void 0&&(V=!1),u.addEventListener(g.toString(),k,V);else if(u.attachEvent)u.attachEvent(Os(g.toString()),k);else if(u.addListener&&u.removeListener)u.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return x}function ui(){function u(x){return g.call(u.src,u.listener,x)}const g=Sl;return u}function Fr(u,g,x,k,V){if(Array.isArray(g))for(var z=0;z<g.length;z++)Fr(u,g[z],x,k,V);else k=c(k)?!!k.capture:!!k,x=Ls(x),u&&u[X]?(u=u.i,g=String(g).toString(),g in u.g&&(z=u.g[g],x=ct(z,x,k,V),-1<x&&(Oe(z[x]),Array.prototype.splice.call(z,x,1),z.length==0&&(delete u.g[g],u.h--)))):u&&(u=gr(u))&&(g=u.g[g.toString()],u=-1,g&&(u=ct(g,x,k,V)),(x=-1<u?g[u]:null)&&so(x))}function so(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[X])ge(g.i,u);else{var x=u.type,k=u.proxy;g.removeEventListener?g.removeEventListener(x,k,u.capture):g.detachEvent?g.detachEvent(Os(x),k):g.addListener&&g.removeListener&&g.removeListener(k),(x=gr(g))?(ge(x,u),x.h==0&&(x.src=null,g[Jt]=null)):Oe(u)}}}function Os(u){return u in mr?mr[u]:mr[u]="on"+u}function Sl(u,g){if(u.da)u=!0;else{g=new Ce(g,this);var x=u.listener,k=u.ha||u.src;u.fa&&so(u),u=x.call(k,g)}return u}function gr(u){return u=u[Jt],u instanceof ke?u:null}var yr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ls(u){return typeof u=="function"?u:(u[yr]||(u[yr]=function(g){return u.handleEvent(g)}),u[yr])}function Ye(){te.call(this),this.i=new ke(this),this.M=this,this.F=null}T(Ye,te),Ye.prototype[X]=!0,Ye.prototype.removeEventListener=function(u,g,x,k){Fr(this,u,g,x,k)};function ft(u,g){var x,k=u.F;if(k)for(x=[];k;k=k.F)x.push(k);if(u=u.M,k=g.type||g,typeof g=="string")g=new Y(g,u);else if(g instanceof Y)g.target=g.target||u;else{var V=g;g=new Y(k,u),R(g,V)}if(V=!0,x)for(var z=x.length-1;0<=z;z--){var ee=g.g=x[z];V=Bn(ee,k,!0,g)&&V}if(ee=g.g=u,V=Bn(ee,k,!0,g)&&V,V=Bn(ee,k,!1,g)&&V,x)for(z=0;z<x.length;z++)ee=g.g=x[z],V=Bn(ee,k,!1,g)&&V}Ye.prototype.N=function(){if(Ye.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var x=u.g[g],k=0;k<x.length;k++)Oe(x[k]);delete u.g[g],u.h--}}this.F=null},Ye.prototype.K=function(u,g,x,k){return this.i.add(String(u),g,!1,x,k)},Ye.prototype.L=function(u,g,x,k){return this.i.add(String(u),g,!0,x,k)};function Bn(u,g,x,k){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var V=!0,z=0;z<g.length;++z){var ee=g[z];if(ee&&!ee.da&&ee.capture==x){var ut=ee.listener,gn=ee.ha||ee.src;ee.fa&&ge(u.i,ee),V=ut.call(gn,k)!==!1&&V}}return V&&!k.defaultPrevented}function nr(u,g,x){if(typeof u=="function")x&&(u=f(u,x));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function Ms(u){u.g=nr(()=>{u.g=null,u.i&&(u.i=!1,Ms(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class io extends te{constructor(g,x){super(),this.m=g,this.l=x,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ms(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fs(u){te.call(this),this.h=u,this.g={}}T(Fs,te);var Wn=[];function Vr(u){M(u.g,function(g,x){this.g.hasOwnProperty(x)&&so(g)},u),u.g={}}Fs.prototype.N=function(){Fs.aa.N.call(this),Vr(this)},Fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var di=a.JSON.stringify,ns=a.JSON.parse,wu=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function oo(){}oo.prototype.h=null;function Vs(u){return u.h||(u.h=u.i())}function ao(){}var rs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ss(){Y.call(this,"d")}T(ss,Y);function rr(){Y.call(this,"c")}T(rr,Y);var jr={},we=null;function je(){return we=we||new Ye}jr.La="serverreachability";function Xe(u){Y.call(this,jr.La,u)}T(Xe,Y);function Ft(u){const g=je();ft(g,new Xe(g))}jr.STAT_EVENT="statevent";function xn(u,g){Y.call(this,jr.STAT_EVENT,u),this.stat=g}T(xn,Y);function pt(u){const g=je();ft(g,new xn(g,u))}jr.Ma="timingevent";function L(u,g){Y.call(this,jr.Ma,u),this.size=g}T(L,Y);function F(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function U(){this.g=!0}U.prototype.xa=function(){this.g=!1};function G(u,g,x,k,V,z){u.info(function(){if(u.g)if(z)for(var ee="",ut=z.split("&"),gn=0;gn<ut.length;gn++){var Je=ut[gn].split("=");if(1<Je.length){var Sn=Je[0];Je=Je[1];var In=Sn.split("_");ee=2<=In.length&&In[1]=="type"?ee+(Sn+"="+Je+"&"):ee+(Sn+"=redacted&")}}else ee=null;else ee=z;return"XMLHTTP REQ ("+k+") [attempt "+V+"]: "+g+`
`+x+`
`+ee})}function ne(u,g,x,k,V,z,ee){u.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+V+"]: "+g+`
`+x+`
`+z+" "+ee})}function he(u,g,x,k){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+de(u,x)+(k?" "+k:"")})}function Ee(u,g){u.info(function(){return"TIMEOUT: "+g})}U.prototype.info=function(){};function de(u,g){if(!u.g)return g;if(!g)return null;try{var x=JSON.parse(g);if(x){for(u=0;u<x.length;u++)if(Array.isArray(x[u])){var k=x[u];if(!(2>k.length)){var V=k[1];if(Array.isArray(V)&&!(1>V.length)){var z=V[0];if(z!="noop"&&z!="stop"&&z!="close")for(var ee=1;ee<V.length;ee++)V[ee]=""}}}}return di(x)}catch{return g}}var ue={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},le={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fe;function be(){}T(be,oo),be.prototype.g=function(){return new XMLHttpRequest},be.prototype.i=function(){return{}},fe=new be;function Re(u,g,x,k){this.j=u,this.i=g,this.l=x,this.R=k||1,this.U=new Fs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wt}function Wt(){this.i=null,this.g="",this.h=!1}var st={},ze={};function mt(u,g,x){u.L=1,u.v=Qh(mi(g)),u.m=x,u.P=!0,hi(u,null)}function hi(u,g){u.F=Date.now(),Hn(u),u.A=mi(u.v);var x=u.A,k=u.R;Array.isArray(k)||(k=[String(k)]),OT(x.i,"t",k),u.C=0,x=u.j.J,u.h=new Wt,u.g=JT(u.j,x?g:null,!u.m),0<u.O&&(u.M=new io(f(u.Y,u,u.g),u.O)),g=u.U,x=u.g,k=u.ca;var V="readystatechange";Array.isArray(V)||(V&&(Wn[0]=V.toString()),V=Wn);for(var z=0;z<V.length;z++){var ee=Zt(x,V[z],k||g.handleEvent,!1,g.h||g);if(!ee)break;g.g[ee.key]=ee}g=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),Ft(),G(u.i,u.u,u.A,u.l,u.R,u.m)}Re.prototype.ca=function(u){u=u.target;const g=this.M;g&&gi(u)==3?g.j():this.Y(u)},Re.prototype.Y=function(u){try{if(u==this.g)e:{const In=gi(this.g);var g=this.g.Ba();const Al=this.g.Z();if(!(3>In)&&(In!=3||this.g&&(this.h.h||this.g.oa()||zT(this.g)))){this.J||In!=4||g==7||(g==8||0>=Al?Ft(3):Ft(2)),fi(this);var x=this.g.Z();this.X=x;t:if(lo(this)){var k=zT(this.g);u="";var V=k.length,z=gi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ur(this),vr(this);var ee="";break t}this.h.i=new a.TextDecoder}for(g=0;g<V;g++)this.h.h=!0,u+=this.h.i.decode(k[g],{stream:!(z&&g==V-1)});k.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=x==200,ne(this.i,this.u,this.A,this.l,this.R,In,x),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,gn=this.g;if((ut=gn.g?gn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(ut)){var Je=ut;break t}}Je=null}if(x=Je)he(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,co(this,x);else{this.o=!1,this.s=3,pt(12),Ur(this),vr(this);break e}}if(this.P){x=!0;let os;for(;!this.J&&this.C<ee.length;)if(os=is(this,ee),os==ze){In==4&&(this.s=4,pt(14),x=!1),he(this.i,this.l,null,"[Incomplete Response]");break}else if(os==st){this.s=4,pt(15),he(this.i,this.l,ee,"[Invalid Chunk]"),x=!1;break}else he(this.i,this.l,os,null),co(this,os);if(lo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),In!=4||ee.length!=0||this.h.h||(this.s=1,pt(16),x=!1),this.o=this.o&&x,!x)he(this.i,this.l,ee,"[Invalid Chunked Response]"),Ur(this),vr(this);else if(0<ee.length&&!this.W){this.W=!0;var Sn=this.j;Sn.g==this&&Sn.ba&&!Sn.M&&(Sn.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),ny(Sn),Sn.M=!0,pt(11))}}else he(this.i,this.l,ee,null),co(this,ee);In==4&&Ur(this),this.o&&!this.J&&(In==4?KT(this.j,this):(this.o=!1,Hn(this)))}else LM(this.g),x==400&&0<ee.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Ur(this),vr(this)}}}catch{}finally{}};function lo(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function is(u,g){var x=u.C,k=g.indexOf(`
`,x);return k==-1?ze:(x=Number(g.substring(x,k)),isNaN(x)?st:(k+=1,k+x>g.length?ze:(g=g.slice(k,k+x),u.C=k+x,g)))}Re.prototype.cancel=function(){this.J=!0,Ur(this)};function Hn(u){u.S=Date.now()+u.I,Il(u,u.I)}function Il(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=F(f(u.ba,u),g)}function fi(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Re.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ee(this.i,this.A),this.L!=2&&(Ft(),pt(17)),Ur(this),this.s=2,vr(this)):Il(this,this.S-u)};function vr(u){u.j.G==0||u.J||KT(u.j,u)}function Ur(u){fi(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Vr(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function co(u,g){try{var x=u.j;if(x.G!=0&&(x.g==u||Rt(x.h,u))){if(!u.K&&Rt(x.h,u)&&x.G==3){try{var k=x.Da.g.parse(g)}catch{k=null}if(Array.isArray(k)&&k.length==3){var V=k;if(V[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<u.F)tf(x),Zh(x);else break e;ty(x),pt(18)}}else x.za=V[1],0<x.za-x.T&&37500>V[2]&&x.F&&x.v==0&&!x.C&&(x.C=F(f(x.Za,x),6e3));if(1>=uo(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Ta(x,11)}else if((u.K||x.g==u)&&tf(x),!v(g))for(V=x.Da.g.parse(g),g=0;g<V.length;g++){let Je=V[g];if(x.T=Je[0],Je=Je[1],x.G==2)if(Je[0]=="c"){x.K=Je[1],x.ia=Je[2];const Sn=Je[3];Sn!=null&&(x.la=Sn,x.j.info("VER="+x.la));const In=Je[4];In!=null&&(x.Aa=In,x.j.info("SVER="+x.Aa));const Al=Je[5];Al!=null&&typeof Al=="number"&&0<Al&&(k=1.5*Al,x.L=k,x.j.info("backChannelRequestTimeoutMs_="+k)),k=x;const os=u.g;if(os){const rf=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rf){var z=k.h;z.g||rf.indexOf("spdy")==-1&&rf.indexOf("quic")==-1&&rf.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(js(z,z.h),z.h=null))}if(k.D){const ry=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;ry&&(k.ya=ry,wt(k.I,k.D,ry))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-u.F,x.j.info("Handshake RTT: "+x.R+"ms")),k=x;var ee=u;if(k.qa=XT(k,k.J?k.ia:null,k.W),ee.K){Eu(k.h,ee);var ut=ee,gn=k.L;gn&&(ut.I=gn),ut.B&&(fi(ut),Hn(ut)),k.g=ee}else qT(k);0<x.i.length&&ef(x)}else Je[0]!="stop"&&Je[0]!="close"||Ta(x,7);else x.G==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Ta(x,7):ey(x):Je[0]!="noop"&&x.l&&x.l.ta(Je),x.v=0)}}Ft(4)}catch{}}var We=class{constructor(u,g){this.g=u,this.map=g}};function _t(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pi(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function uo(u){return u.h?1:u.g?u.g.size:0}function Rt(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function js(u,g){u.g?u.g.add(g):u.h=g}function Eu(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}_t.prototype.cancel=function(){if(this.i=qh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function qh(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const x of u.g.values())g=g.concat(x.D);return g}return y(u.i)}function wM(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var g=[],x=u.length,k=0;k<x;k++)g.push(u[k]);return g}g=[],x=0;for(k in u)g[x++]=u[k];return g}function EM(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var g=[];u=u.length;for(var x=0;x<u;x++)g.push(x);return g}g=[],x=0;for(const k in u)g[x++]=k;return g}}}function RT(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var x=EM(u),k=wM(u),V=k.length,z=0;z<V;z++)g.call(void 0,k[z],x&&x[z],u)}var AT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TM(u,g){if(u){u=u.split("&");for(var x=0;x<u.length;x++){var k=u[x].indexOf("="),V=null;if(0<=k){var z=u[x].substring(0,k);V=u[x].substring(k+1)}else z=u[x];g(z,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Ea(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ea){this.h=u.h,Gh(this,u.j),this.o=u.o,this.g=u.g,Kh(this,u.s),this.l=u.l;var g=u.i,x=new xu;x.i=g.i,g.g&&(x.g=new Map(g.g),x.h=g.h),kT(this,x),this.m=u.m}else u&&(g=String(u).match(AT))?(this.h=!1,Gh(this,g[1]||"",!0),this.o=Tu(g[2]||""),this.g=Tu(g[3]||"",!0),Kh(this,g[4]),this.l=Tu(g[5]||"",!0),kT(this,g[6]||"",!0),this.m=Tu(g[7]||"")):(this.h=!1,this.i=new xu(null,this.h))}Ea.prototype.toString=function(){var u=[],g=this.j;g&&u.push(bu(g,PT,!0),":");var x=this.g;return(x||g=="file")&&(u.push("//"),(g=this.o)&&u.push(bu(g,PT,!0),"@"),u.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&u.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&u.push("/"),u.push(bu(x,x.charAt(0)=="/"?SM:xM,!0))),(x=this.i.toString())&&u.push("?",x),(x=this.m)&&u.push("#",bu(x,CM)),u.join("")};function mi(u){return new Ea(u)}function Gh(u,g,x){u.j=x?Tu(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Kh(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function kT(u,g,x){g instanceof xu?(u.i=g,RM(u.i,u.h)):(x||(g=bu(g,IM)),u.i=new xu(g,u.h))}function wt(u,g,x){u.i.set(g,x)}function Qh(u){return wt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Tu(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function bu(u,g,x){return typeof u=="string"?(u=encodeURI(u).replace(g,bM),x&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function bM(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var PT=/[#\/\?@]/g,xM=/[#\?:]/g,SM=/[#\?]/g,IM=/[#\?@]/g,CM=/#/g;function xu(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function ho(u){u.g||(u.g=new Map,u.h=0,u.i&&TM(u.i,function(g,x){u.add(decodeURIComponent(g.replace(/\+/g," ")),x)}))}t=xu.prototype,t.add=function(u,g){ho(this),this.i=null,u=Cl(this,u);var x=this.g.get(u);return x||this.g.set(u,x=[]),x.push(g),this.h+=1,this};function NT(u,g){ho(u),g=Cl(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function DT(u,g){return ho(u),g=Cl(u,g),u.g.has(g)}t.forEach=function(u,g){ho(this),this.g.forEach(function(x,k){x.forEach(function(V){u.call(g,V,k,this)},this)},this)},t.na=function(){ho(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),x=[];for(let k=0;k<g.length;k++){const V=u[k];for(let z=0;z<V.length;z++)x.push(g[k])}return x},t.V=function(u){ho(this);let g=[];if(typeof u=="string")DT(this,u)&&(g=g.concat(this.g.get(Cl(this,u))));else{u=Array.from(this.g.values());for(let x=0;x<u.length;x++)g=g.concat(u[x])}return g},t.set=function(u,g){return ho(this),this.i=null,u=Cl(this,u),DT(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function OT(u,g,x){NT(u,g),0<x.length&&(u.i=null,u.g.set(Cl(u,g),y(x)),u.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var x=0;x<g.length;x++){var k=g[x];const z=encodeURIComponent(String(k)),ee=this.V(k);for(k=0;k<ee.length;k++){var V=z;ee[k]!==""&&(V+="="+encodeURIComponent(String(ee[k]))),u.push(V)}}return this.i=u.join("&")};function Cl(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function RM(u,g){g&&!u.j&&(ho(u),u.i=null,u.g.forEach(function(x,k){var V=k.toLowerCase();k!=V&&(NT(this,k),OT(this,V,x))},u)),u.j=g}function AM(u,g){const x=new U;if(a.Image){const k=new Image;k.onload=p(fo,x,"TestLoadImage: loaded",!0,g,k),k.onerror=p(fo,x,"TestLoadImage: error",!1,g,k),k.onabort=p(fo,x,"TestLoadImage: abort",!1,g,k),k.ontimeout=p(fo,x,"TestLoadImage: timeout",!1,g,k),a.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=u}else g(!1)}function kM(u,g){const x=new U,k=new AbortController,V=setTimeout(()=>{k.abort(),fo(x,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:k.signal}).then(z=>{clearTimeout(V),z.ok?fo(x,"TestPingServer: ok",!0,g):fo(x,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),fo(x,"TestPingServer: error",!1,g)})}function fo(u,g,x,k,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),k(x)}catch{}}function PM(){this.g=new wu}function NM(u,g,x){const k=x||"";try{RT(u,function(V,z){let ee=V;c(V)&&(ee=di(V)),g.push(k+z+"="+encodeURIComponent(ee))})}catch(V){throw g.push(k+"type="+encodeURIComponent("_badmap")),V}}function Yh(u){this.l=u.Ub||null,this.j=u.eb||!1}T(Yh,oo),Yh.prototype.g=function(){return new Xh(this.l,this.j)},Yh.prototype.i=function(u){return function(){return u}}({});function Xh(u,g){Ye.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Xh,Ye),t=Xh.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Iu(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Su(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Iu(this)),this.g&&(this.readyState=3,Iu(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;LT(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function LT(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Su(this):Iu(this),this.readyState==3&&LT(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Su(this))},t.Qa=function(u){this.g&&(this.response=u,Su(this))},t.ga=function(){this.g&&Su(this)};function Su(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Iu(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var x=g.next();!x.done;)x=x.value,u.push(x[0]+": "+x[1]),x=g.next();return u.join(`\r
`)};function Iu(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Xh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function MT(u){let g="";return M(u,function(x,k){g+=k,g+=":",g+=x,g+=`\r
`}),g}function Zg(u,g,x){e:{for(k in x){var k=!1;break e}k=!0}k||(x=MT(x),typeof u=="string"?x!=null&&encodeURIComponent(String(x)):wt(u,g,x))}function Vt(u){Ye.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Vt,Ye);var DM=/^https?$/i,OM=["POST","PUT"];t=Vt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,x,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fe.g(),this.v=this.o?Vs(this.o):Vs(fe),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(z){FT(this,z);return}if(u=x||"",x=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var V in k)x.set(V,k[V]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const z of k.keys())x.set(z,k.get(z));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(x.keys()).find(z=>z.toLowerCase()=="content-type"),V=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(OM,g,void 0))||k||V||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ee]of x)this.g.setRequestHeader(z,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{UT(this),this.u=!0,this.g.send(u),this.u=!1}catch(z){FT(this,z)}};function FT(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,VT(u),Jh(u)}function VT(u){u.A||(u.A=!0,ft(u,"complete"),ft(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ft(this,"complete"),ft(this,"abort"),Jh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jh(this,!0)),Vt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?jT(this):this.bb())},t.bb=function(){jT(this)};function jT(u){if(u.h&&typeof o<"u"&&(!u.v[1]||gi(u)!=4||u.Z()!=2)){if(u.u&&gi(u)==4)nr(u.Ea,0,u);else if(ft(u,"readystatechange"),gi(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var x;if(!(x=g)){var k;if(k=ee===0){var V=String(u.D).match(AT)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),k=!DM.test(V?V.toLowerCase():"")}x=k}if(x)ft(u,"complete"),ft(u,"success");else{u.m=6;try{var z=2<gi(u)?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.Z()+"]",VT(u)}}finally{Jh(u)}}}}function Jh(u,g){if(u.g){UT(u);const x=u.g,k=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||ft(u,"ready");try{x.onreadystatechange=k}catch{}}}function UT(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function gi(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<gi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),ns(g)}};function zT(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function LM(u){const g={};u=(u.g&&2<=gi(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<u.length;k++){if(v(u[k]))continue;var x=N(u[k]);const V=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const z=g[V]||[];g[V]=z,z.push(x)}b(g,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cu(u,g,x){return x&&x.internalChannelParams&&x.internalChannelParams[u]||g}function $T(u){this.Aa=0,this.i=[],this.j=new U,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cu("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cu("baseRetryDelayMs",5e3,u),this.cb=Cu("retryDelaySeedMs",1e4,u),this.Wa=Cu("forwardChannelMaxRetries",2,u),this.wa=Cu("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new _t(u&&u.concurrentRequestLimit),this.Da=new PM,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=$T.prototype,t.la=8,t.G=1,t.connect=function(u,g,x,k){pt(0),this.W=u,this.H=g||{},x&&k!==void 0&&(this.H.OSID=x,this.H.OAID=k),this.F=this.X,this.I=XT(this,null,this.W),ef(this)};function ey(u){if(BT(u),u.G==3){var g=u.U++,x=mi(u.I);if(wt(x,"SID",u.K),wt(x,"RID",g),wt(x,"TYPE","terminate"),Ru(u,x),g=new Re(u,u.j,g),g.L=2,g.v=Qh(mi(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!x&&a.Image&&(new Image().src=g.v,x=!0),x||(g.g=JT(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Hn(g)}YT(u)}function Zh(u){u.g&&(ny(u),u.g.cancel(),u.g=null)}function BT(u){Zh(u),u.u&&(a.clearTimeout(u.u),u.u=null),tf(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ef(u){if(!pi(u.h)&&!u.s){u.s=!0;var g=u.Ga;oe||Z(),j||(oe(),j=!0),$.add(g,u),u.B=0}}function MM(u,g){return uo(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=F(f(u.Ga,u,g),QT(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const V=new Re(this,this.j,u);let z=this.o;if(this.S&&(z?(z=I(z),R(z,this.S)):z=this.S),this.m!==null||this.O||(V.H=z,z=null),this.P)e:{for(var g=0,x=0;x<this.i.length;x++){t:{var k=this.i[x];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(g+=k,4096<g){g=x;break e}if(g===4096||x===this.i.length-1){g=x+1;break e}}g=1e3}else g=1e3;g=HT(this,V,g),x=mi(this.I),wt(x,"RID",u),wt(x,"CVER",22),this.D&&wt(x,"X-HTTP-Session-Id",this.D),Ru(this,x),z&&(this.O?g="headers="+encodeURIComponent(String(MT(z)))+"&"+g:this.m&&Zg(x,this.m,z)),js(this.h,V),this.Ua&&wt(x,"TYPE","init"),this.P?(wt(x,"$req",g),wt(x,"SID","null"),V.T=!0,mt(V,x,null)):mt(V,x,g),this.G=2}}else this.G==3&&(u?WT(this,u):this.i.length==0||pi(this.h)||WT(this))};function WT(u,g){var x;g?x=g.l:x=u.U++;const k=mi(u.I);wt(k,"SID",u.K),wt(k,"RID",x),wt(k,"AID",u.T),Ru(u,k),u.m&&u.o&&Zg(k,u.m,u.o),x=new Re(u,u.j,x,u.B+1),u.m===null&&(x.H=u.o),g&&(u.i=g.D.concat(u.i)),g=HT(u,x,1e3),x.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),js(u.h,x),mt(x,k,g)}function Ru(u,g){u.H&&M(u.H,function(x,k){wt(g,k,x)}),u.l&&RT({},function(x,k){wt(g,k,x)})}function HT(u,g,x){x=Math.min(u.i.length,x);var k=u.l?f(u.l.Na,u.l,u):null;e:{var V=u.i;let z=-1;for(;;){const ee=["count="+x];z==-1?0<x?(z=V[0].g,ee.push("ofs="+z)):z=0:ee.push("ofs="+z);let ut=!0;for(let gn=0;gn<x;gn++){let Je=V[gn].g;const Sn=V[gn].map;if(Je-=z,0>Je)z=Math.max(0,V[gn].g-100),ut=!1;else try{NM(Sn,ee,"req"+Je+"_")}catch{k&&k(Sn)}}if(ut){k=ee.join("&");break e}}}return u=u.i.splice(0,x),g.D=u,k}function qT(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;oe||Z(),j||(oe(),j=!0),$.add(g,u),u.v=0}}function ty(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=F(f(u.Fa,u),QT(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,GT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=F(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Zh(this),GT(this))};function ny(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function GT(u){u.g=new Re(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=mi(u.qa);wt(g,"RID","rpc"),wt(g,"SID",u.K),wt(g,"AID",u.T),wt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&wt(g,"TO",u.ja),wt(g,"TYPE","xmlhttp"),Ru(u,g),u.m&&u.o&&Zg(g,u.m,u.o),u.L&&(u.g.I=u.L);var x=u.g;u=u.ia,x.L=1,x.v=Qh(mi(g)),x.m=null,x.P=!0,hi(x,u)}t.Za=function(){this.C!=null&&(this.C=null,Zh(this),ty(this),pt(19))};function tf(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function KT(u,g){var x=null;if(u.g==g){tf(u),ny(u),u.g=null;var k=2}else if(Rt(u.h,g))x=g.D,Eu(u.h,g),k=1;else return;if(u.G!=0){if(g.o)if(k==1){x=g.m?g.m.length:0,g=Date.now()-g.F;var V=u.B;k=je(),ft(k,new L(k,x)),ef(u)}else qT(u);else if(V=g.s,V==3||V==0&&0<g.X||!(k==1&&MM(u,g)||k==2&&ty(u)))switch(x&&0<x.length&&(g=u.h,g.i=g.i.concat(x)),V){case 1:Ta(u,5);break;case 4:Ta(u,10);break;case 3:Ta(u,6);break;default:Ta(u,2)}}}function QT(u,g){let x=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(x*=2),x*g}function Ta(u,g){if(u.j.info("Error code "+g),g==2){var x=f(u.fb,u),k=u.Xa;const V=!k;k=new Ea(k||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gh(k,"https"),Qh(k),V?AM(k.toString(),x):kM(k.toString(),x)}else pt(2);u.G=0,u.l&&u.l.sa(g),YT(u),BT(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function YT(u){if(u.G=0,u.ka=[],u.l){const g=qh(u.h);(g.length!=0||u.i.length!=0)&&(w(u.ka,g),w(u.ka,u.i),u.h.i.length=0,y(u.i),u.i.length=0),u.l.ra()}}function XT(u,g,x){var k=x instanceof Ea?mi(x):new Ea(x);if(k.g!="")g&&(k.g=g+"."+k.g),Kh(k,k.s);else{var V=a.location;k=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;var z=new Ea(null);k&&Gh(z,k),g&&(z.g=g),V&&Kh(z,V),x&&(z.l=x),k=z}return x=u.D,g=u.ya,x&&g&&wt(k,x,g),wt(k,"VER",u.la),Ru(u,k),k}function JT(u,g,x){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Vt(new Yh({eb:x})):new Vt(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ZT(){}t=ZT.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function nf(){}nf.prototype.g=function(u,g){return new _r(u,g)};function _r(u,g){Ye.call(this),this.g=new $T(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!v(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!v(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Rl(this)}T(_r,Ye),_r.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_r.prototype.close=function(){ey(this.g)},_r.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var x={};x.__data__=u,u=x}else this.u&&(x={},x.__data__=di(u),u=x);g.i.push(new We(g.Ya++,u)),g.G==3&&ef(g)},_r.prototype.N=function(){this.g.l=null,delete this.j,ey(this.g),delete this.g,_r.aa.N.call(this)};function eb(u){ss.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const x in g){u=x;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}T(eb,ss);function tb(){rr.call(this),this.status=1}T(tb,rr);function Rl(u){this.g=u}T(Rl,ZT),Rl.prototype.ua=function(){ft(this.g,"a")},Rl.prototype.ta=function(u){ft(this.g,new eb(u))},Rl.prototype.sa=function(u){ft(this.g,new tb)},Rl.prototype.ra=function(){ft(this.g,"b")},nf.prototype.createWebChannel=nf.prototype.g,_r.prototype.send=_r.prototype.o,_r.prototype.open=_r.prototype.m,_r.prototype.close=_r.prototype.close,bN=function(){return new nf},TN=function(){return je()},EN=jr,z_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,cp=ue,le.COMPLETE="complete",wN=le,ao.EventType=rs,rs.OPEN="a",rs.CLOSE="b",rs.ERROR="c",rs.MESSAGE="d",Ye.prototype.listen=Ye.prototype.K,ed=ao,Vt.prototype.listenOnce=Vt.prototype.L,Vt.prototype.getLastError=Vt.prototype.Ka,Vt.prototype.getLastErrorCode=Vt.prototype.Ba,Vt.prototype.getStatus=Vt.prototype.Z,Vt.prototype.getResponseJson=Vt.prototype.Oa,Vt.prototype.getResponseText=Vt.prototype.oa,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Ha,_N=Vt}).apply(typeof Pf<"u"?Pf:typeof self<"u"?self:typeof window<"u"?window:{});const z1="@firebase/firestore",$1="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let au="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=new Th("@firebase/firestore");function Ml(){return nl.logLevel}function ae(t,...e){if(nl.logLevel<=Me.DEBUG){const n=e.map(pE);nl.debug(`Firestore (${au}): ${t}`,...n)}}function Ki(t,...e){if(nl.logLevel<=Me.ERROR){const n=e.map(pE);nl.error(`Firestore (${au}): ${t}`,...n)}}function Qi(t,...e){if(nl.logLevel<=Me.WARN){const n=e.map(pE);nl.warn(`Firestore (${au}): ${t}`,...n)}}function pE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,xN(t,r,n)}function xN(t,e,n){let r=`FIRESTORE (${au}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ki(r),new Error(r)}function rt(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||xN(e,s,r)}function Ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends es{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nn.UNAUTHENTICATED))}shutdown(){}}class L8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class M8{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){rt(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Di,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Di)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt(typeof r.accessToken=="string",31837,{l:r}),new SN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string",2055,{h:e}),new Nn(e)}}class F8{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class V8{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new F8(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class B1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class j8{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){rt(this.o===void 0,3512);const r=i=>{i.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new B1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(rt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new B1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=U8(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function De(t,e){return t<e?-1:t>e?1:0}function $_(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return De(r,s);{const i=CN(),o=z8(i.encode(W1(t,n)),i.encode(W1(e,n)));return o!==0?o:De(r,s)}}n+=r>65535?2:1}return De(t.length,e.length)}function W1(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function z8(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return De(t[n],e[n]);return De(t.length,e.length)}function Uc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="__name__";class $s{constructor(e,n,r){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&_e(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return $s.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $s?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=$s.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return De(e.length,n.length)}static compareSegments(e,n){const r=$s.isNumericId(e),s=$s.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?$s.extractNumericId(e).compare($s.extractNumericId(n)):$_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qo.fromString(e.substring(4,e.length-2))}}class yt extends $s{construct(e,n,r){return new yt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new yt(n)}static emptyPath(){return new yt([])}}const $8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends $s{construct(e,n,r){return new hn(e,n,r)}static isValidIdentifier(e){return $8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===H1}static keyField(){return new hn([H1])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new re(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new re(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new re(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new re(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(n)}static emptyPath(){return new hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(yt.fromString(e))}static fromName(e){return new me(yt.fromString(e).popFirst(5))}static empty(){return new me(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return yt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new yt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t,e,n){if(!n)throw new re(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AN(t,e,n,r){if(e===!0&&r===!0)throw new re(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function q1(t){if(!me.isDocumentKey(t))throw new re(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function G1(t){if(me.isDocumentKey(t))throw new re(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function _g(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e(12329,{type:typeof t})}function jn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_g(t);throw new re(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function B8(t,e){if(e<=0)throw new re(W.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ah(t,e){if(!kN(t))throw new re(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new re(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=-62135596800,Q1=1e6;class Le{static now(){return Le.fromMillis(Date.now())}static fromDate(e){return Le.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Q1);return new Le(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<K1)throw new re(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Q1}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ah(e,Le._jsonSchema))return new Le(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-K1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Le._jsonSchemaVersion="firestore/timestamp/1.0",Le._jsonSchema={type:Yt("string",Le._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Le(0,0))}static max(){return new xe(new Le(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh=-1;function W8(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=xe.fromTimestamp(r===1e9?new Le(n+1,0):new Le(n,r));return new sa(s,me.empty(),e)}function H8(t){return new sa(t.readTime,t.key,nh)}class sa{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new sa(xe.min(),me.empty(),nh)}static max(){return new sa(xe.max(),me.empty(),nh)}}function q8(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(t.documentKey,e.documentKey),n!==0?n:De(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class K8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lu(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==G8)throw t;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Q8(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function cu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}wg.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=-1;function Eg(t){return t==null}function cm(t){return t===0&&1/t==-1/0}function Y8(t){return typeof t=="number"&&Number.isInteger(t)&&!cm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="";function X8(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Y1(e)),e=J8(t.get(n),e);return Y1(e)}function J8(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case PN:n+="";break;default:n+=i}}return n}function Y1(t){return t+PN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ya(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function NN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xt=class B_{constructor(e,n){this.comparator=e,this.root=n||Yo.EMPTY}insert(e,n){return new B_(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yo.BLACK,null,null))}remove(e){return new B_(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yo.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nf(this.root,e,this.comparator,!0)}},Nf=class{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Yo=class _i{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??_i.RED,this.left=s??_i.EMPTY,this.right=i??_i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new _i(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return _i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return _i.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}};Yo.EMPTY=null,Yo.RED=!0,Yo.BLACK=!1;Yo.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Yo(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.comparator=e,this.data=new Xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new J1(this.data.getIterator())}getIteratorFrom(e){return new J1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof on)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new on(this.comparator);return n.data=e,n}}class J1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new Cr([])}unionWith(e){let n=new on(hn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Cr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Uc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new DN("Invalid base64 string: "+i):i}}(e);return new mn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new mn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const Z8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ia(t){if(rt(!!t,39018),typeof t=="string"){let e=0;const n=Z8.exec(t);if(rt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zt(t.seconds),nanos:zt(t.nanos)}}function zt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function oa(t){return typeof t=="string"?mn.fromBase64String(t):mn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON="server_timestamp",LN="__type__",MN="__previous_value__",FN="__local_write_time__";function gE(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[LN])===null||n===void 0?void 0:n.stringValue)===ON}function Tg(t){const e=t.mapValue.fields[MN];return gE(e)?Tg(e):e}function rh(t){const e=ia(t.mapValue.fields[FN].timestampValue);return new Le(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const um="(default)";class zc{constructor(e,n){this.projectId=e,this.database=n||um}static empty(){return new zc("","")}get isDefaultDatabase(){return this.database===um}isEqual(e){return e instanceof zc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="__type__",jN="__max__",Df={mapValue:{fields:{__type__:{stringValue:jN}}}},UN="__vector__",dm="value";function aa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gE(t)?4:n7(t)?9007199254740991:t7(t)?10:11:_e(28295,{value:t})}function ri(t,e){if(t===e)return!0;const n=aa(t);if(n!==aa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rh(t).isEqual(rh(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ia(s.timestampValue),a=ia(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return oa(s.bytesValue).isEqual(oa(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return zt(s.geoPointValue.latitude)===zt(i.geoPointValue.latitude)&&zt(s.geoPointValue.longitude)===zt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return zt(s.integerValue)===zt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=zt(s.doubleValue),a=zt(i.doubleValue);return o===a?cm(o)===cm(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Uc(t.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(X1(o)!==X1(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ri(o[l],a[l])))return!1;return!0}(t,e);default:return _e(52216,{left:t})}}function sh(t,e){return(t.values||[]).find(n=>ri(n,e))!==void 0}function $c(t,e){if(t===e)return 0;const n=aa(t),r=aa(e);if(n!==r)return De(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return De(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=zt(i.integerValue||i.doubleValue),l=zt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Z1(t.timestampValue,e.timestampValue);case 4:return Z1(rh(t),rh(e));case 5:return $_(t.stringValue,e.stringValue);case 6:return function(i,o){const a=oa(i),l=oa(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=De(a[c],l[c]);if(d!==0)return d}return De(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=De(zt(i.latitude),zt(o.latitude));return a!==0?a:De(zt(i.longitude),zt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return eS(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,d;const h=i.fields||{},f=o.fields||{},p=(a=h[dm])===null||a===void 0?void 0:a.arrayValue,T=(l=f[dm])===null||l===void 0?void 0:l.arrayValue,y=De(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((d=T==null?void 0:T.values)===null||d===void 0?void 0:d.length)||0);return y!==0?y:eS(p,T)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Df.mapValue&&o===Df.mapValue)return 0;if(i===Df.mapValue)return 1;if(o===Df.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=$_(l[h],d[h]);if(f!==0)return f;const p=$c(a[l[h]],c[d[h]]);if(p!==0)return p}return De(l.length,d.length)}(t.mapValue,e.mapValue);default:throw _e(23264,{le:n})}}function Z1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return De(t,e);const n=ia(t),r=ia(e),s=De(n.seconds,r.seconds);return s!==0?s:De(n.nanos,r.nanos)}function eS(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=$c(n[s],r[s]);if(i)return i}return De(n.length,r.length)}function Bc(t){return W_(t)}function W_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ia(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return oa(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return me.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=W_(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${W_(n.fields[o])}`;return s+"}"}(t.mapValue):_e(61005,{value:t})}function up(t){switch(aa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tg(t);return e?16+up(e):16;case 5:return 2*t.stringValue.length;case 6:return oa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+up(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ya(r.fields,(i,o)=>{s+=i.length+up(o)}),s}(t.mapValue);default:throw _e(13486,{value:t})}}function tS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function H_(t){return!!t&&"integerValue"in t}function yE(t){return!!t&&"arrayValue"in t}function nS(t){return!!t&&"nullValue"in t}function rS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dp(t){return!!t&&"mapValue"in t}function t7(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[VN])===null||n===void 0?void 0:n.stringValue)===UN}function yd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ya(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function n7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===jN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.value=e}static empty(){return new lr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yd(n)}setAll(e){let n=hn.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=yd(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());dp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];dp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ya(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new lr(yd(this.value))}}function zN(t){const e=[];return ya(t.fields,(n,r)=>{const s=new hn([n]);if(dp(r)){const i=zN(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Cr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new On(e,0,xe.min(),xe.min(),xe.min(),lr.empty(),0)}static newFoundDocument(e,n,r,s){return new On(e,1,n,xe.min(),r,s,0)}static newNoDocument(e,n){return new On(e,2,n,xe.min(),xe.min(),lr.empty(),0)}static newUnknownDocument(e,n){return new On(e,3,n,xe.min(),xe.min(),lr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=lr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=lr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof On&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new On(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n){this.position=e,this.inclusive=n}}function sS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=me.comparator(me.fromName(o.referenceValue),n.key):r=$c(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function iS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ri(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n="asc"){this.field=e,this.dir=n}}function r7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{}class Qt extends $N{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new i7(e,n,r):n==="array-contains"?new l7(e,r):n==="in"?new c7(e,r):n==="not-in"?new u7(e,r):n==="array-contains-any"?new d7(e,r):new Qt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new o7(e,r):new a7(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($c(n,this.value)):n!==null&&aa(this.value)===aa(n)&&this.matchesComparison($c(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ps extends $N{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Ps(e,n)}matches(e){return BN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function BN(t){return t.op==="and"}function WN(t){return s7(t)&&BN(t)}function s7(t){for(const e of t.filters)if(e instanceof Ps)return!1;return!0}function q_(t){if(t instanceof Qt)return t.field.canonicalString()+t.op.toString()+Bc(t.value);if(WN(t))return t.filters.map(e=>q_(e)).join(",");{const e=t.filters.map(n=>q_(n)).join(",");return`${t.op}(${e})`}}function HN(t,e){return t instanceof Qt?function(r,s){return s instanceof Qt&&r.op===s.op&&r.field.isEqual(s.field)&&ri(r.value,s.value)}(t,e):t instanceof Ps?function(r,s){return s instanceof Ps&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&HN(o,s.filters[a]),!0):!1}(t,e):void _e(19439)}function qN(t){return t instanceof Qt?function(n){return`${n.field.canonicalString()} ${n.op} ${Bc(n.value)}`}(t):t instanceof Ps?function(n){return n.op.toString()+" {"+n.getFilters().map(qN).join(" ,")+"}"}(t):"Filter"}class i7 extends Qt{constructor(e,n,r){super(e,n,r),this.key=me.fromName(r.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class o7 extends Qt{constructor(e,n){super(e,"in",n),this.keys=GN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class a7 extends Qt{constructor(e,n){super(e,"not-in",n),this.keys=GN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function GN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>me.fromName(r.referenceValue))}class l7 extends Qt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yE(n)&&sh(n.arrayValue,this.value)}}class c7 extends Qt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sh(this.value.arrayValue,n)}}class u7 extends Qt{constructor(e,n){super(e,"not-in",n)}matches(e){if(sh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!sh(this.value.arrayValue,n)}}class d7 extends Qt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Pe=null}}function oS(t,e=null,n=[],r=[],s=null,i=null,o=null){return new h7(t,e,n,r,s,i,o)}function vE(t){const e=Ie(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>q_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Eg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Bc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Bc(r)).join(",")),e.Pe=n}return e.Pe}function _E(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!r7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!HN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iS(t.startAt,e.startAt)&&iS(t.endAt,e.endAt)}function G_(t){return me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function f7(t,e,n,r,s,i,o,a){return new uu(t,e,n,r,s,i,o,a)}function bg(t){return new uu(t)}function aS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function KN(t){return t.collectionGroup!==null}function vd(t){const e=Ie(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new on(hn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new ih(i,r))}),n.has(hn.keyField().canonicalString())||e.Te.push(new ih(hn.keyField(),r))}return e.Te}function ei(t){const e=Ie(t);return e.Ie||(e.Ie=p7(e,vd(t))),e.Ie}function p7(t,e){if(t.limitType==="F")return oS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ih(s.field,i)});const n=t.endAt?new hm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new hm(t.startAt.position,t.startAt.inclusive):null;return oS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function K_(t,e){const n=t.filters.concat([e]);return new uu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function fm(t,e,n){return new uu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xg(t,e){return _E(ei(t),ei(e))&&t.limitType===e.limitType}function QN(t){return`${vE(ei(t))}|lt:${t.limitType}`}function Fl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>qN(s)).join(", ")}]`),Eg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Bc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Bc(s)).join(",")),`Target(${r})`}(ei(t))}; limitType=${t.limitType})`}function Sg(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):me.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of vd(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=sS(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,vd(r),s)||r.endAt&&!function(o,a,l){const c=sS(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,vd(r),s))}(t,e)}function m7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function YN(t){return(e,n)=>{let r=!1;for(const s of vd(t)){const i=g7(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function g7(t,e,n){const r=t.field.isKeyField()?me.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?$c(l,c):_e(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ya(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return NN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7=new Xt(me.comparator);function Yi(){return y7}const XN=new Xt(me.comparator);function td(...t){let e=XN;for(const n of t)e=e.insert(n.key,n);return e}function JN(t){let e=XN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Oa(){return _d()}function ZN(){return _d()}function _d(){return new yl(t=>t.toString(),(t,e)=>t.isEqual(e))}const v7=new Xt(me.comparator),_7=new on(me.comparator);function Ue(...t){let e=_7;for(const n of t)e=e.add(n);return e}const w7=new on(De);function E7(){return w7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cm(e)?"-0":e}}function eD(t){return{integerValue:""+t}}function T7(t,e){return Y8(e)?eD(e):wE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(){this._=void 0}}function b7(t,e,n){return t instanceof oh?function(s,i){const o={fields:{[LN]:{stringValue:ON},[FN]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&gE(i)&&(i=Tg(i)),i&&(o.fields[MN]=i),{mapValue:o}}(n,e):t instanceof ah?nD(t,e):t instanceof lh?rD(t,e):function(s,i){const o=tD(s,i),a=lS(o)+lS(s.Ee);return H_(o)&&H_(s.Ee)?eD(a):wE(s.serializer,a)}(t,e)}function x7(t,e,n){return t instanceof ah?nD(t,e):t instanceof lh?rD(t,e):n}function tD(t,e){return t instanceof pm?function(r){return H_(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class oh extends Ig{}class ah extends Ig{constructor(e){super(),this.elements=e}}function nD(t,e){const n=sD(e);for(const r of t.elements)n.some(s=>ri(s,r))||n.push(r);return{arrayValue:{values:n}}}class lh extends Ig{constructor(e){super(),this.elements=e}}function rD(t,e){let n=sD(e);for(const r of t.elements)n=n.filter(s=>!ri(s,r));return{arrayValue:{values:n}}}class pm extends Ig{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function lS(t){return zt(t.integerValue||t.doubleValue)}function sD(t){return yE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(e,n){this.field=e,this.transform=n}}function I7(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ah&&s instanceof ah||r instanceof lh&&s instanceof lh?Uc(r.elements,s.elements,ri):r instanceof pm&&s instanceof pm?ri(r.Ee,s.Ee):r instanceof oh&&s instanceof oh}(t.transform,e.transform)}class C7{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Cg{}function iD(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Rg(t.key,Jn.none()):new kh(t.key,t.data,Jn.none());{const n=t.data,r=lr.empty();let s=new on(hn.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new va(t.key,r,new Cr(s.toArray()),Jn.none())}}function R7(t,e,n){t instanceof kh?function(s,i,o){const a=s.value.clone(),l=uS(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof va?function(s,i,o){if(!hp(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=uS(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(oD(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function wd(t,e,n,r){return t instanceof kh?function(i,o,a,l){if(!hp(i.precondition,o))return a;const c=i.value.clone(),d=dS(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof va?function(i,o,a,l){if(!hp(i.precondition,o))return a;const c=dS(i.fieldTransforms,l,o),d=o.data;return d.setAll(oD(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return hp(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function A7(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=tD(r.transform,s||null);i!=null&&(n===null&&(n=lr.empty()),n.set(r.field,i))}return n||null}function cS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Uc(r,s,(i,o)=>I7(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class kh extends Cg{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class va extends Cg{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function oD(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function uS(t,e,n){const r=new Map;rt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,x7(o,a,n[s]))}return r}function dS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,b7(i,o,e))}return r}class Rg extends Cg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class k7 extends Cg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&R7(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ZN();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=iD(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ue())}isEqual(e){return this.batchId===e.batchId&&Uc(this.mutations,e.mutations,(n,r)=>cS(n,r))&&Uc(this.baseMutations,e.baseMutations,(n,r)=>cS(n,r))}}class EE{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){rt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return v7}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new EE(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,He;function O7(t){switch(t){case W.OK:return _e(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return _e(15467,{code:t})}}function aD(t){if(t===void 0)return Ki("GRPC error has no .code"),W.UNKNOWN;switch(t){case qt.OK:return W.OK;case qt.CANCELLED:return W.CANCELLED;case qt.UNKNOWN:return W.UNKNOWN;case qt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case qt.INTERNAL:return W.INTERNAL;case qt.UNAVAILABLE:return W.UNAVAILABLE;case qt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case qt.NOT_FOUND:return W.NOT_FOUND;case qt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case qt.ABORTED:return W.ABORTED;case qt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case qt.DATA_LOSS:return W.DATA_LOSS;default:return _e(39323,{code:t})}}(He=qt||(qt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7=new Qo([4294967295,4294967295],0);function hS(t){const e=CN().encode(t),n=new vN;return n.update(e),new Uint8Array(n.digest())}function fS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Qo([n,r],0),new Qo([s,i],0)]}class TE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new nd(`Invalid padding: ${n}`);if(r<0)throw new nd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new nd(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Qo.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Qo.fromNumber(r)));return s.compare(L7)===1&&(s=new Qo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=hS(e),[r,s]=fS(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new TE(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=hS(e),[r,s]=fS(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class nd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ph.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ag(xe.min(),s,new Xt(De),Yi(),Ue())}}class Ph{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ph(r,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class lD{constructor(e,n){this.targetId=e,this.De=n}}class cD{constructor(e,n,r=mn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class pS{constructor(){this.ve=0,this.Ce=mS(),this.Fe=mn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ue(),n=Ue(),r=Ue();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:_e(38017,{changeType:i})}}),new Ph(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=mS()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,rt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class M7{constructor(e){this.We=e,this.Ge=new Map,this.ze=Yi(),this.je=Of(),this.Je=Of(),this.He=new Xt(De)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(G_(i))if(r===0){const o=new me(i.path);this.Xe(n,o,On.newNoDocument(o,xe.min()))}else rt(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const a=this._t(e),l=a?this.ut(a,e,o):1;if(l!==0){this.rt(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=oa(r).toUint8Array()}catch(l){if(l instanceof DN)return Qi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new TE(o,s,i)}catch(l){return Qi(l instanceof nd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const a=this.st(o);if(a){if(i.current&&G_(a.target)){const l=new me(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,On.newNoDocument(l,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=Ue();this.Je.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.st(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new Ag(e,n,this.He,this.ze,r);return this.ze=Yi(),this.je=Of(),this.Je=Of(),this.He=new Xt(De),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new pS,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new on(De),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new on(De),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new pS),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Of(){return new Xt(me.comparator)}function mS(){return new Xt(me.comparator)}const F7={asc:"ASCENDING",desc:"DESCENDING"},V7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},j7={and:"AND",or:"OR"};class U7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Q_(t,e){return t.useProto3Json||Eg(e)?e:{value:e}}function mm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function z7(t,e){return mm(t,e.toTimestamp())}function ti(t){return rt(!!t,49232),xe.fromTimestamp(function(n){const r=ia(n);return new Le(r.seconds,r.nanos)}(t))}function bE(t,e){return Y_(t,e).canonicalString()}function Y_(t,e){const n=function(s){return new yt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function dD(t){const e=yt.fromString(t);return rt(gD(e),10190,{key:e.toString()}),e}function X_(t,e){return bE(t.databaseId,e.path)}function Qy(t,e){const n=dD(e);if(n.get(1)!==t.databaseId.projectId)throw new re(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new me(fD(n))}function hD(t,e){return bE(t.databaseId,e)}function $7(t){const e=dD(t);return e.length===4?yt.emptyPath():fD(e)}function J_(t){return new yt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fD(t){return rt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gS(t,e,n){return{name:X_(t,e),fields:n.value.mapValue.fields}}function B7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:_e(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(rt(d===void 0||typeof d=="string",58123),mn.fromBase64String(d||"")):(rt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),mn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?W.UNKNOWN:aD(c.code);return new re(d,c.message||"")}(o);n=new cD(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Qy(t,r.document.name),i=ti(r.document.updateTime),o=r.document.createTime?ti(r.document.createTime):xe.min(),a=new lr({mapValue:{fields:r.document.fields}}),l=On.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new fp(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Qy(t,r.document),i=r.readTime?ti(r.readTime):xe.min(),o=On.newNoDocument(s,i),a=r.removedTargetIds||[];n=new fp([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Qy(t,r.document),i=r.removedTargetIds||[];n=new fp([],i,s,null)}else{if(!("filter"in e))return _e(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new D7(s,i),a=r.targetId;n=new lD(a,o)}}return n}function W7(t,e){let n;if(e instanceof kh)n={update:gS(t,e.key,e.value)};else if(e instanceof Rg)n={delete:X_(t,e.key)};else if(e instanceof va)n={update:gS(t,e.key,e.data),updateMask:Z7(e.fieldMask)};else{if(!(e instanceof k7))return _e(16599,{Rt:e.type});n={verify:X_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof oh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ah)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof lh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof pm)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw _e(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:z7(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:_e(27497)}(t,e.precondition)),n}function H7(t,e){return t&&t.length>0?(rt(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?ti(s.updateTime):ti(i);return o.isEqual(xe.min())&&(o=ti(i)),new C7(o,s.transformResults||[])}(n,e))):[]}function q7(t,e){return{documents:[hD(t,e.path)]}}function G7(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hD(t,s);const i=function(c){if(c.length!==0)return mD(Ps.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:Vl(f.field),direction:Y7(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Q_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{Vt:n,parent:s}}function K7(t){let e=$7(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){rt(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=pD(h);return f instanceof Ps&&WN(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(T){return new ih(jl(T.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Eg(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,p=h.values||[];return new hm(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,p=h.values||[];return new hm(p,f)}(n.endAt)),f7(e,s,o,i,a,"F",l,c)}function Q7(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pD(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=jl(n.unaryFilter.field);return Qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=jl(n.unaryFilter.field);return Qt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=jl(n.unaryFilter.field);return Qt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=jl(n.unaryFilter.field);return Qt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(t):t.fieldFilter!==void 0?function(n){return Qt.create(jl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ps.create(n.compositeFilter.filters.map(r=>pD(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(n.compositeFilter.op))}(t):_e(30097,{filter:t})}function Y7(t){return F7[t]}function X7(t){return V7[t]}function J7(t){return j7[t]}function Vl(t){return{fieldPath:t.canonicalString()}}function jl(t){return hn.fromServerFormat(t.fieldPath)}function mD(t){return t instanceof Qt?function(n){if(n.op==="=="){if(rS(n.value))return{unaryFilter:{field:Vl(n.field),op:"IS_NAN"}};if(nS(n.value))return{unaryFilter:{field:Vl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rS(n.value))return{unaryFilter:{field:Vl(n.field),op:"IS_NOT_NAN"}};if(nS(n.value))return{unaryFilter:{field:Vl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vl(n.field),op:X7(n.op),value:n.value}}}(t):t instanceof Ps?function(n){const r=n.getFilters().map(s=>mD(s));return r.length===1?r[0]:{compositeFilter:{op:J7(n.op),filters:r}}}(t):_e(54877,{filter:t})}function Z7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n,r,s,i=xe.min(),o=xe.min(),a=mn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Mo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Mo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW{constructor(e){this.gt=e}}function tW(t){const e=K7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{constructor(){this.Dn=new rW}addToCollectionParentIndex(e,n){return this.Dn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(sa.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(sa.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class rW{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new on(yt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new on(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yD=41943040;class or{static withCacheSize(e){return new or(e,or.DEFAULT_COLLECTION_PERCENTILE,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */or.DEFAULT_COLLECTION_PERCENTILE=10,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,or.DEFAULT=new or(yD,or.DEFAULT_COLLECTION_PERCENTILE,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),or.DISABLED=new or(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Wc(0)}static ur(){return new Wc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="LruGarbageCollector",sW=1048576;function _S([t,e],[n,r]){const s=De(t,n);return s===0?De(e,r):s}class iW{constructor(e){this.Tr=e,this.buffer=new on(_S),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();_S(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class oW{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ae(vS,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){cu(n)?ae(vS,"Ignoring IndexedDB error during garbage collection: ",n):await lu(n)}await this.Rr(3e5)})}}class aW{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(wg.ue);const r=new iW(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(yS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yS):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Ml()<=Me.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function lW(t,e){return new aW(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cW{constructor(){this.changes=new yl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uW{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dW{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&wd(r.mutation,s,Cr.empty(),Le.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ue()){const s=Oa();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=td();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Oa();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ue()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Yi();const o=_d(),a=function(){return _d()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof va)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),wd(d.mutation,c,d.mutation.getFieldMask(),Le.now())):o.set(c.key,Cr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new uW(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=_d();let s=new Xt((o,a)=>o-a),i=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Cr.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||Ue()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=ZN();d.forEach(f=>{if(!i.has(f)){const p=iD(n.get(f),r.get(f));p!==null&&h.set(f,p),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):KN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(Oa());let a=nh,l=i;return o.next(c=>q.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?q.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ue())).next(d=>({batchId:a,changes:JN(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next(r=>{let s=td();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=td();return this.indexManager.getCollectionParents(e,i).next(a=>q.forEach(a,l=>{const c=function(h,f){return new uu(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,On.newInvalidDocument(d)))});let a=td();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&wd(d.mutation,c,Cr.empty(),Le.now()),Sg(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return q.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ti(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:tW(s.bundledQuery),readTime:ti(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{constructor(){this.overlays=new Xt(me.comparator),this.kr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Oa();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=Oa(),i=n.length+1,o=new me(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Xt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Oa(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Oa(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return q.resolve(a)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new N7(n,r));let i=this.kr.get(n);i===void 0&&(i=Ue(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(){this.qr=new on(cn.Qr),this.$r=new on(cn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new cn(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new cn(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new me(new yt([])),r=new cn(n,e),s=new cn(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new me(new yt([])),r=new cn(n,e),s=new cn(n,e+1);let i=Ue();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new cn(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class cn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return me.comparator(e.key,n.key)||De(e.Hr,n.Hr)}static Ur(e,n){return De(e.Hr,n.Hr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new on(cn.Qr)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new P7(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Yr=this.Yr.add(new cn(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?mE:this.er-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new cn(n,0),s=new cn(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const a=this.Zr(o.Hr);i.push(a)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new on(De);return n.forEach(s=>{const i=new cn(s,0),o=new cn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],a=>{r=r.add(a.Hr)})}),q.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;me.isDocumentKey(i)||(i=i.child(""));const o=new cn(new me(i),0);let a=new on(De);return this.Yr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Hr)),!0)},o),q.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){rt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return q.forEach(n.mutations,s=>{const i=new cn(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new cn(n,0),s=this.Yr.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gW{constructor(e){this.ni=e,this.docs=function(){return new Xt(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():On.newInvalidDocument(n))}getEntries(e,n){let r=Yi();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():On.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Yi();const o=n.path,a=new me(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||q8(H8(d),r)<=0||(s.has(d.key)||Sg(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){_e(9500)}ri(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new yW(this)}getSize(e){return q.resolve(this.size)}}class yW extends cW{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vW{constructor(e){this.persistence=e,this.ii=new yl(n=>vE(n),_E),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.si=0,this.oi=new xE,this.targetCount=0,this._i=Wc.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),q.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Wc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.hr(n),q.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n){this.ai={},this.overlays={},this.ui=new wg(0),this.ci=!1,this.ci=!0,this.li=new pW,this.referenceDelegate=e(this),this.hi=new vW(this),this.indexManager=new nW,this.remoteDocumentCache=function(s){return new gW(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new eW(n),this.Ti=new hW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new fW,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new mW(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){ae("MemoryPersistence","Starting transaction:",e);const s=new _W(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return q.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class _W extends K8{constructor(e){super(),this.currentSequenceNumber=e}}class SE{constructor(e){this.persistence=e,this.Ai=new xE,this.Ri=null}static Vi(e){return new SE(e)}get mi(){if(this.Ri)return this.Ri;throw _e(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.mi,r=>{const s=me.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,xe.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return q.or([()=>q.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class gm{constructor(e,n){this.persistence=e,this.gi=new yl(r=>X8(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=lW(this,n)}static Vi(e,n){return new gm(e,n)}Ii(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return q.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?q.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,xe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),q.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=up(e.data.value)),n}Sr(e,n,r){return q.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return q.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=Ue(),s=Ue();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new IE(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EW{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return W9()?8:Q8(zn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new wW;return this.ws(e,n,o).next(a=>{if(i.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(Ml()<=Me.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Fl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),q.resolve()):(Ml()<=Me.DEBUG&&ae("QueryEngine","Query:",Fl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Ml()<=Me.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Fl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ei(n))):q.resolve())}ps(e,n){if(aS(n))return q.resolve(null);let r=ei(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=fm(n,null,"F"),r=ei(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ue(...i);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.bs(n,a);return this.Ds(n,c,o,l.readTime)?this.ps(e,fm(n,null,"F")):this.vs(e,c,n,l)}))})))}ys(e,n,r,s){return aS(n)||s.isEqual(xe.min())?q.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?q.resolve(null):(Ml()<=Me.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Fl(n)),this.vs(e,o,n,W8(s,nh)).next(a=>a))})}bs(e,n){let r=new on(YN(e));return n.forEach((s,i)=>{Sg(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return Ml()<=Me.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Fl(n)),this.gs.getDocumentsMatchingQuery(e,n,sa.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="LocalStore",TW=3e8;class bW{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Xt(De),this.Ms=new yl(i=>vE(i),_E),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dW(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function xW(t,e,n,r){return new bW(t,e,n,r)}async function _D(t,e){const n=Ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ue();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Bs:c,removedBatchIds:o,addedBatchIds:a}))})})}function SW(t,e){const n=Ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let p=q.resolve();return f.forEach(T=>{p=p.next(()=>d.getEntry(l,T)).next(y=>{const w=c.docVersions.get(T);rt(w!==null,48541),y.version.compareTo(w)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ue();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function wD(t){const e=Ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function IW(t,e){const n=Ie(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.hi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.hi.addMatchingKeys(i,d.addedDocuments,h)));let p=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(mn.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),s=s.insert(h,p),function(y,w,E){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=TW?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,p,d)&&a.push(n.hi.updateTargetData(i,p))});let l=Yi(),c=Ue();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(CW(i,o,e.documentUpdates).next(d=>{l=d.Ls,c=d.ks})),!r.isEqual(xe.min())){const d=n.hi.getLastRemoteSnapshotVersion(i).next(h=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return q.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Fs=s,i))}function CW(t,e,n){let r=Ue(),s=Ue();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Yi();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(xe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ae(CE,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ls:o,ks:s}})}function RW(t,e){const n=Ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=mE),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function AW(t,e){const n=Ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new Mo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Z_(t,e,n){const r=Ie(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!cu(o))throw o;ae(CE,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function wS(t,e,n){const r=Ie(t);let s=xe.min(),i=Ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=Ie(l),f=h.Ms.get(d);return f!==void 0?q.resolve(h.Fs.get(f)):h.hi.getTargetData(c,d)}(r,o,ei(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:xe.min(),n?i:Ue())).next(a=>(kW(r,m7(e),a),{documents:a,qs:i})))}function kW(t,e,n){let r=t.xs.get(e)||xe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class ES{constructor(){this.activeTargetIds=E7()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PW{constructor(){this.Fo=new ES,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new ES,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="ConnectivityMonitor";class bS{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ae(TS,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ae(TS,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lf=null;function ew(){return Lf===null?Lf=function(){return 268435456+Math.round(2147483648*Math.random())}():Lf++,"0x"+Lf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="RestConnection",DW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OW{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===um?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=ew(),a=this.Go(e,n.toUriEncodedString());ae(Yy,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,s,i);const{host:c}=new URL(a),d=ai(c);return this.jo(e,a,l,r,d).then(h=>(ae(Yy,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Qi(Yy,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+au}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=DW[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn="WebChannelConnection";class MW extends OW{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=ew();return new Promise((a,l)=>{const c=new _N;c.setWithCredentials(!0),c.listenOnce(wN.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case cp.NO_ERROR:const h=c.getResponseJson();ae(kn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case cp.TIMEOUT:ae(kn,`RPC '${e}' ${o} timed out`),l(new re(W.DEADLINE_EXCEEDED,"Request time out"));break;case cp.HTTP_ERROR:const f=c.getStatus();if(ae(kn,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const T=p==null?void 0:p.error;if(T&&T.status&&T.message){const y=function(E){const v=E.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(v)>=0?v:W.UNKNOWN}(T.status);l(new re(y,T.message))}else l(new re(W.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new re(W.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{c_:e,streamId:o,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{ae(kn,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);ae(kn,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}P_(e,n,r){const s=ew(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=bN(),a=TN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");ae(kn,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.T_(h);let f=!1,p=!1;const T=new LW({Ho:w=>{p?ae(kn,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(f||(ae(kn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),ae(kn,`RPC '${e}' stream ${s} sending:`,w),h.send(w))},Yo:()=>h.close()}),y=(w,E,v)=>{w.listen(E,S=>{try{v(S)}catch(C){setTimeout(()=>{throw C},0)}})};return y(h,ed.EventType.OPEN,()=>{p||(ae(kn,`RPC '${e}' stream ${s} transport opened.`),T.s_())}),y(h,ed.EventType.CLOSE,()=>{p||(p=!0,ae(kn,`RPC '${e}' stream ${s} transport closed`),T.__(),this.I_(h))}),y(h,ed.EventType.ERROR,w=>{p||(p=!0,Qi(kn,`RPC '${e}' stream ${s} transport errored. Name:`,w.name,"Message:",w.message),T.__(new re(W.UNAVAILABLE,"The operation could not be completed")))}),y(h,ed.EventType.MESSAGE,w=>{var E;if(!p){const v=w.data[0];rt(!!v,16349);const S=v,C=(S==null?void 0:S.error)||((E=S[0])===null||E===void 0?void 0:E.error);if(C){ae(kn,`RPC '${e}' stream ${s} received error:`,C);const O=C.status;let M=function(A){const R=qt[A];if(R!==void 0)return aD(R)}(O),b=C.message;M===void 0&&(M=W.INTERNAL,b="Unknown error status: "+O+" with message "+C.message),p=!0,T.__(new re(M,b)),h.close()}else ae(kn,`RPC '${e}' stream ${s} received:`,v),T.a_(v)}}),y(a,EN.STAT_EVENT,w=>{w.stat===z_.PROXY?ae(kn,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===z_.NOPROXY&&ae(kn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.o_()},0),T}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Xy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t){return new U7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&ae("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="PersistentStream";class TD{constructor(e,n,r,s,i,o,a,l){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new ED(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(Ki(n.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new re(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ae(xS,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ae(xS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FW extends TD{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=B7(this.serializer,e),r=function(i){if(!("targetChange"in i))return xe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?xe.min():o.readTime?ti(o.readTime):xe.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=J_(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=G_(l)?{documents:q7(i,l)}:{query:G7(i,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=uD(i,o.resumeToken);const c=Q_(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(xe.min())>0){a.readTime=mm(i,o.snapshotVersion.toTimestamp());const c=Q_(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Q7(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=J_(this.serializer),n.removeTarget=e,this.k_(n)}}class VW extends TD{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=H7(e.writeResults,e.commitTime),r=ti(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=J_(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>W7(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jW{}class UW extends jW{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new re(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Y_(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new re(W.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,Y_(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(W.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class zW{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ki(n),this._a=!1):ae("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl="RemoteStore";class $W{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{vl(this)&&(ae(rl,"Restarting streams for network reachability change."),await async function(l){const c=Ie(l);c.Ia.add(4),await Nh(c),c.Aa.set("Unknown"),c.Ia.delete(4),await Pg(c)}(this))})}),this.Aa=new zW(r,s)}}async function Pg(t){if(vl(t))for(const e of t.da)await e(!0)}async function Nh(t){for(const e of t.da)await e(!1)}function bD(t,e){const n=Ie(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),PE(n)?kE(n):du(n).x_()&&AE(n,e))}function RE(t,e){const n=Ie(t),r=du(n);n.Ta.delete(e),r.x_()&&xD(n,e),n.Ta.size===0&&(r.x_()?r.B_():vl(n)&&n.Aa.set("Unknown"))}function AE(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}du(t).H_(e)}function xD(t,e){t.Ra.$e(e),du(t).Y_(e)}function kE(t){t.Ra=new M7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),du(t).start(),t.Aa.aa()}function PE(t){return vl(t)&&!du(t).M_()&&t.Ta.size>0}function vl(t){return Ie(t).Ia.size===0}function SD(t){t.Ra=void 0}async function BW(t){t.Aa.set("Online")}async function WW(t){t.Ta.forEach((e,n)=>{AE(t,e)})}async function HW(t,e){SD(t),PE(t)?(t.Aa.la(e),kE(t)):t.Aa.set("Unknown")}async function qW(t,e,n){if(t.Aa.set("Online"),e instanceof cD&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ta.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ta.delete(a),s.Ra.removeTarget(a))}(t,e)}catch(r){ae(rl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ym(t,r)}else if(e instanceof fp?t.Ra.Ye(e):e instanceof lD?t.Ra.it(e):t.Ra.et(e),!n.isEqual(xe.min()))try{const r=await wD(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Ra.Pt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ta.get(c);d&&i.Ta.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ta.get(l);if(!d)return;i.Ta.set(l,d.withResumeToken(mn.EMPTY_BYTE_STRING,d.snapshotVersion)),xD(i,l);const h=new Mo(d.target,l,c,d.sequenceNumber);AE(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ae(rl,"Failed to raise snapshot:",r),await ym(t,r)}}async function ym(t,e,n){if(!cu(e))throw e;t.Ia.add(1),await Nh(t),t.Aa.set("Offline"),n||(n=()=>wD(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ae(rl,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Pg(t)})}function ID(t,e){return e().catch(n=>ym(t,n,e))}async function Ng(t){const e=Ie(t),n=la(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:mE;for(;GW(e);)try{const s=await RW(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,KW(e,s)}catch(s){await ym(e,s)}CD(e)&&RD(e)}function GW(t){return vl(t)&&t.Pa.length<10}function KW(t,e){t.Pa.push(e);const n=la(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function CD(t){return vl(t)&&!la(t).M_()&&t.Pa.length>0}function RD(t){la(t).start()}async function QW(t){la(t).na()}async function YW(t){const e=la(t);for(const n of t.Pa)e.X_(n.mutations)}async function XW(t,e,n){const r=t.Pa.shift(),s=EE.from(r,e,n);await ID(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ng(t)}async function JW(t,e){e&&la(t).Z_&&await async function(r,s){if(function(o){return O7(o)&&o!==W.ABORTED}(s.code)){const i=r.Pa.shift();la(r).N_(),await ID(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ng(r)}}(t,e),CD(t)&&RD(t)}async function SS(t,e){const n=Ie(t);n.asyncQueue.verifyOperationInProgress(),ae(rl,"RemoteStore received new credentials");const r=vl(n);n.Ia.add(3),await Nh(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Pg(n)}async function ZW(t,e){const n=Ie(t);e?(n.Ia.delete(2),await Pg(n)):e||(n.Ia.add(2),await Nh(n),n.Aa.set("Unknown"))}function du(t){return t.Va||(t.Va=function(n,r,s){const i=Ie(n);return i.ia(),new FW(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:BW.bind(null,t),e_:WW.bind(null,t),n_:HW.bind(null,t),J_:qW.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),PE(t)?kE(t):t.Aa.set("Unknown")):(await t.Va.stop(),SD(t))})),t.Va}function la(t){return t.ma||(t.ma=function(n,r,s){const i=Ie(n);return i.ia(),new VW(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:QW.bind(null,t),n_:JW.bind(null,t),ea:YW.bind(null,t),ta:XW.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Ng(t)):(await t.ma.stop(),t.Pa.length>0&&(ae(rl,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new NE(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function DE(t,e){if(Ki("AsyncQueue",`${e}: ${t}`),cu(t))return new re(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{static emptySet(e){return new pc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||me.comparator(n.key,r.key):(n,r)=>me.comparator(n.key,r.key),this.keyedMap=td(),this.sortedSet=new Xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(){this.fa=new Xt(me.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):_e(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Hc{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Hc(e,n,pc.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class tH{constructor(){this.queries=CS(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=Ie(n),i=s.queries;s.queries=CS(),i.forEach((o,a)=>{for(const l of a.wa)l.onError(r)})})(this,new re(W.ABORTED,"Firestore shutting down"))}}function CS(){return new yl(t=>QN(t),xg)}async function OE(t,e){const n=Ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new eH,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=DE(o,`Initialization of query '${Fl(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&ME(n)}async function LE(t,e){const n=Ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nH(t,e){const n=Ie(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.wa)a.Ca(s)&&(r=!0);o.ya=s}}r&&ME(n)}function rH(t,e,n){const r=Ie(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function ME(t){t.Da.forEach(e=>{e.next()})}var tw,RS;(RS=tw||(tw={})).Fa="default",RS.Cache="cache";class FE{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Hc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Hc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==tw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.key=e}}class kD{constructor(e){this.key=e}}class sH{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ue(),this.mutatedKeys=Ue(),this.Xa=YN(e),this.eu=new pc(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new IS,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),p=Sg(this.query,h)?h:null,T=!!f&&this.mutatedKeys.has(f.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;f&&p?f.data.isEqual(p.data)?T!==y&&(r.track({type:3,doc:p}),w=!0):this.iu(f,p)||(r.track({type:2,doc:p}),w=!0,(l&&this.Xa(p,l)>0||c&&this.Xa(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),w=!0):f&&!p&&(r.track({type:1,doc:f}),w=!0,(l||c)&&(a=!0)),w&&(p?(o=o.add(p),i=y?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{eu:o,ru:r,Ds:a,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((d,h)=>function(p,T){const y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{At:w})}};return y(p)-y(T)}(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),s=s!=null&&s;const a=n&&!s?this.ou():[],l=this.Za.size===0&&this.current&&!s?1:0,c=l!==this.Ya;return this.Ya=l,o.length!==0||c?{snapshot:new Hc(this.query,e.eu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new IS,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ue(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new kD(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new AD(r))}),n}uu(e){this.Ha=e.qs,this.Za=Ue();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Hc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const VE="SyncEngine";class iH{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class oH{constructor(e){this.key=e,this.lu=!1}}class aH{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new yl(a=>QN(a),xg),this.Tu=new Map,this.Iu=new Set,this.du=new Xt(me.comparator),this.Eu=new Map,this.Au=new xE,this.Ru={},this.Vu=new Map,this.mu=Wc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function lH(t,e,n=!0){const r=MD(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await PD(r,e,n,!0),s}async function cH(t,e){const n=MD(t);await PD(n,e,!0,!1)}async function PD(t,e,n,r){const s=await AW(t.localStore,ei(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await uH(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&bD(t.remoteStore,s),a}async function uH(t,e,n,r,s){t.gu=(h,f,p)=>async function(y,w,E,v){let S=w.view.nu(E);S.Ds&&(S=await wS(y.localStore,w.query,!1).then(({documents:b})=>w.view.nu(b,S)));const C=v&&v.targetChanges.get(w.targetId),O=v&&v.targetMismatches.get(w.targetId)!=null,M=w.view.applyChanges(S,y.isPrimaryClient,C,O);return kS(y,w.targetId,M._u),M.snapshot}(t,h,f,p);const i=await wS(t.localStore,e,!0),o=new sH(e,i.qs),a=o.nu(i.documents),l=Ph.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);kS(t,n,c._u);const d=new iH(e,n,o);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),c.snapshot}async function dH(t,e,n){const r=Ie(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!xg(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Z_(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&RE(r.remoteStore,s.targetId),nw(r,s.targetId)}).catch(lu)):(nw(r,s.targetId),await Z_(r.localStore,s.targetId,!0))}async function hH(t,e){const n=Ie(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),RE(n.remoteStore,r.targetId))}async function fH(t,e,n){const r=wH(t);try{const s=await function(o,a){const l=Ie(o),c=Le.now(),d=a.reduce((p,T)=>p.add(T.key),Ue());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let T=Yi(),y=Ue();return l.Os.getEntries(p,d).next(w=>{T=w,T.forEach((E,v)=>{v.isValidDocument()||(y=y.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,T)).next(w=>{h=w;const E=[];for(const v of a){const S=A7(v,h.get(v.key).overlayedDocument);S!=null&&E.push(new va(v.key,S,zN(S.value.mapValue),Jn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,E,a)}).next(w=>{f=w;const E=w.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(p,w.batchId,E)})}).then(()=>({batchId:f.batchId,changes:JN(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ru[o.currentUser.toKey()];c||(c=new Xt(De)),c=c.insert(a,l),o.Ru[o.currentUser.toKey()]=c}(r,s.batchId,n),await Dh(r,s.changes),await Ng(r.remoteStore)}catch(s){const i=DE(s,"Failed to persist write");n.reject(i)}}async function ND(t,e){const n=Ie(t);try{const r=await IW(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(rt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?rt(o.lu,14607):s.removedDocuments.size>0&&(rt(o.lu,42227),o.lu=!1))}),await Dh(n,r,e)}catch(r){await lu(r)}}function AS(t,e,n){const r=Ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Ie(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.wa)f.va(a)&&(c=!0)}),c&&ME(l)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function pH(t,e,n){const r=Ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new Xt(me.comparator);o=o.insert(i,On.newNoDocument(i,xe.min()));const a=Ue().add(i),l=new Ag(xe.min(),new Map,new Xt(De),o,a);await ND(r,l),r.du=r.du.remove(i),r.Eu.delete(e),jE(r)}else await Z_(r.localStore,e,!1).then(()=>nw(r,e,n)).catch(lu)}async function mH(t,e){const n=Ie(t),r=e.batch.batchId;try{const s=await SW(n.localStore,e);OD(n,r,null),DD(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Dh(n,s)}catch(s){await lu(s)}}async function gH(t,e,n){const r=Ie(t);try{const s=await function(o,a){const l=Ie(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(rt(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);OD(r,e,n),DD(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Dh(r,s)}catch(s){await lu(s)}}function DD(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function OD(t,e,n){const r=Ie(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function nw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||LD(t,r)})}function LD(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(RE(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),jE(t))}function kS(t,e,n){for(const r of n)r instanceof AD?(t.Au.addReference(r.key,e),yH(t,r)):r instanceof kD?(ae(VE,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||LD(t,r.key)):_e(19791,{yu:r})}function yH(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(ae(VE,"New document in limbo: "+n),t.Iu.add(r),jE(t))}function jE(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new me(yt.fromString(e)),r=t.mu.next();t.Eu.set(r,new oH(n)),t.du=t.du.insert(n,r),bD(t.remoteStore,new Mo(ei(bg(n.path)),r,"TargetPurposeLimboResolution",wg.ue))}}async function Dh(t,e,n){const r=Ie(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,l)=>{o.push(r.gu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=IE.Es(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.hu.J_(s),await async function(l,c){const d=Ie(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>q.forEach(c,f=>q.forEach(f.Is,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>q.forEach(f.ds,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!cu(h))throw h;ae(CE,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const p=d.Fs.get(f),T=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(T);d.Fs=d.Fs.insert(f,y)}}}(r.localStore,i))}async function vH(t,e){const n=Ie(t);if(!n.currentUser.isEqual(e)){ae(VE,"User change. New user:",e.toKey());const r=await _D(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(a=>{a.forEach(l=>{l.reject(new re(W.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Dh(n,r.Bs)}}function _H(t,e){const n=Ie(t),r=n.Eu.get(e);if(r&&r.lu)return Ue().add(r.key);{let s=Ue();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const a=n.Pu.get(o);s=s.unionWith(a.view.tu)}return s}}function MD(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ND.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_H.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pH.bind(null,e),e.hu.J_=nH.bind(null,e.eventManager),e.hu.pu=rH.bind(null,e.eventManager),e}function wH(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gH.bind(null,e),e}class vm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kg(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return xW(this.persistence,new EW,e.initialUser,this.serializer)}Du(e){return new vD(SE.Vi,this.serializer)}bu(e){return new PW}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vm.provider={build:()=>new vm};class EH extends vm{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){rt(this.persistence.referenceDelegate instanceof gm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new oW(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?or.withCacheSize(this.cacheSizeBytes):or.DEFAULT;return new vD(r=>gm.Vi(r,n),this.serializer)}}class rw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>AS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vH.bind(null,this.syncEngine),await ZW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tH}()}createDatastore(e){const n=kg(e.databaseInfo.databaseId),r=function(i){return new MW(i)}(e.databaseInfo);return function(i,o,a,l){return new UW(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new $W(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>AS(this.syncEngine,n,0),function(){return bS.C()?new bS:new NW}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new aH(s,i,o,a,l,c);return d&&(h.fu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ie(s);ae(rl,"RemoteStore shutting down."),i.Ia.add(5),await Nh(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}rw.provider={build:()=>new rw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ki("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="FirestoreClient";class TH{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Nn.UNAUTHENTICATED,this.clientId=vg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ae(ca,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ae(ca,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=DE(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Jy(t,e){t.asyncQueue.verifyOperationInProgress(),ae(ca,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await _D(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{Qi("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ae("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Qi("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function PS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bH(t);ae(ca,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>SS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>SS(e.remoteStore,s)),t._onlineComponents=e}async function bH(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ae(ca,"Using user provided OfflineComponentProvider");try{await Jy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===W.FAILED_PRECONDITION||s.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Qi("Error using user provided cache. Falling back to memory cache: "+n),await Jy(t,new vm)}}else ae(ca,"Using default OfflineComponentProvider"),await Jy(t,new EH(void 0));return t._offlineComponents}async function FD(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ae(ca,"Using user provided OnlineComponentProvider"),await PS(t,t._uninitializedComponentsProvider._online)):(ae(ca,"Using default OnlineComponentProvider"),await PS(t,new rw))),t._onlineComponents}function xH(t){return FD(t).then(e=>e.syncEngine)}async function _m(t){const e=await FD(t),n=e.eventManager;return n.onListen=lH.bind(null,e.syncEngine),n.onUnlisten=dH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=hH.bind(null,e.syncEngine),n}function SH(t,e,n={}){const r=new Di;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new UE({next:f=>{d.Ou(),o.enqueueAndForget(()=>LE(i,h));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new re(W.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new re(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new FE(bg(a.path),d,{includeMetadataChanges:!0,ka:!0});return OE(i,h)}(await _m(t),t.asyncQueue,e,n,r)),r.promise}function IH(t,e,n={}){const r=new Di;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new UE({next:f=>{d.Ou(),o.enqueueAndForget(()=>LE(i,h)),f.fromCache&&l.source==="server"?c.reject(new re(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new FE(a,d,{includeMetadataChanges:!0,ka:!0});return OE(i,h)}(await _m(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="firestore.googleapis.com",DS=!0;class OS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jD,this.ssl=DS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:DS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yD;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sW)throw new re(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VD((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new re(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new re(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new re(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dg{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new IN;switch(r.type){case"firstParty":return new V8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=NS.get(n);r&&(ae("ComponentProvider","Removing Datastore"),NS.delete(n),r.terminate())}(this),Promise.resolve()}}function UD(t,e,n,r={}){var s;t=jn(t,Dg);const i=ai(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;i&&(hg(`https://${l}`),fg("Firestore",!0)),o.host!==jD&&o.host!==l&&Qi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:i,emulatorOptions:r});if(!Hi(c,a)&&(t._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Nn.MOCK_USER;else{d=eE(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new re(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Nn(f)}t._authCredentials=new L8(new SN(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ci(this.firestore,e,this._query)}}class Dt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dt(this.firestore,e,this._key)}toJSON(){return{type:Dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ah(n,Dt._jsonSchema))return new Dt(e,r||null,new me(yt.fromString(n.referencePath)))}}Dt._jsonSchemaVersion="firestore/documentReference/1.0",Dt._jsonSchema={type:Yt("string",Dt._jsonSchemaVersion),referencePath:Yt("string")};class Oi extends ci{constructor(e,n,r){super(e,n,bg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new me(e))}withConverter(e){return new Oi(this.firestore,e,this._path)}}function Zn(t,e,...n){if(t=et(t),RN("collection","path",e),t instanceof Dg){const r=yt.fromString(e,...n);return G1(r),new Oi(t,null,r)}{if(!(t instanceof Dt||t instanceof Oi))throw new re(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(yt.fromString(e,...n));return G1(r),new Oi(t.firestore,null,r)}}function Bt(t,e,...n){if(t=et(t),arguments.length===1&&(e=vg.newId()),RN("doc","path",e),t instanceof Dg){const r=yt.fromString(e,...n);return q1(r),new Dt(t,null,new me(r))}{if(!(t instanceof Dt||t instanceof Oi))throw new re(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(yt.fromString(e,...n));return q1(r),new Dt(t.firestore,t instanceof Oi?t.converter:null,new me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="AsyncQueue";class MS{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new ED(this,"async_queue_retry"),this.oc=()=>{const r=Xy();r&&ae(LS,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Xy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Xy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Di;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!cu(e))throw e;ae(LS,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ki("INTERNAL UNHANDLED ERROR: ",FS(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=NE.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&_e(47125,{hc:FS(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function FS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ns extends Dg{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new MS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new MS(e),this._firestoreClient=void 0,await e}}}function sw(t,e){const n=typeof t=="object"?t:bh(),r=typeof t=="string"?t:um,s=no(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=J0("firestore");i&&UD(s,...i)}return s}function hu(t){if(t._terminated)throw new re(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||CH(t),t._firestoreClient}function CH(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new e7(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,VD(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new TH(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sr(mn.fromBase64String(e))}catch(n){throw new re(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Sr(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Sr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ah(e,Sr._jsonSchema))return Sr.fromBase64String(e.bytes)}}Sr._jsonSchemaVersion="firestore/bytes/1.0",Sr._jsonSchema={type:Yt("string",Sr._jsonSchemaVersion),bytes:Yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ss._jsonSchemaVersion}}static fromJSON(e){if(Ah(e,Ss._jsonSchema))return new Ss(e.latitude,e.longitude)}}Ss._jsonSchemaVersion="firestore/geoPoint/1.0",Ss._jsonSchema={type:Yt("string",Ss._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Is._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ah(e,Is._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Is(e.vectorValues);throw new re(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Is._jsonSchemaVersion="firestore/vectorValue/1.0",Is._jsonSchema={type:Yt("string",Is._jsonSchemaVersion),vectorValues:Yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RH=/^__.*__$/;class AH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new va(e,this.data,this.fieldMask,n,this.fieldTransforms):new kh(e,this.data,n,this.fieldTransforms)}}class zD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new va(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $D(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ec:t})}}class zE{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new zE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return wm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if($D(this.Ec)&&RH.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class kH{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||kg(e)}Dc(e,n,r,s=!1){return new zE({Ec:e,methodName:n,bc:r,path:hn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lh(t){const e=t._freezeSettings(),n=kg(t._databaseId);return new kH(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $E(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);WE("Data must be an object, but it was:",o,r);const a=HD(r,o);let l,c;if(i.merge)l=new Cr(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=iw(e,h,n);if(!o.contains(f))throw new re(W.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);GD(d,f)||d.push(f)}l=new Cr(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new AH(new lr(a),l,c)}class Og extends Oh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Og}}class BE extends Oh{_toFieldTransform(e){return new S7(e.path,new oh)}isEqual(e){return e instanceof BE}}function BD(t,e,n,r){const s=t.Dc(1,e,n);WE("Data must be an object, but it was:",s,r);const i=[],o=lr.empty();ya(r,(l,c)=>{const d=HE(e,l,n);c=et(c);const h=s.gc(d);if(c instanceof Og)i.push(d);else{const f=Mh(c,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new Cr(i);return new zD(o,a,s.fieldTransforms)}function WD(t,e,n,r,s,i){const o=t.Dc(1,e,n),a=[iw(e,r,n)],l=[s];if(i.length%2!=0)throw new re(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(iw(e,i[f])),l.push(i[f+1]);const c=[],d=lr.empty();for(let f=a.length-1;f>=0;--f)if(!GD(c,a[f])){const p=a[f];let T=l[f];T=et(T);const y=o.gc(p);if(T instanceof Og)c.push(p);else{const w=Mh(T,y);w!=null&&(c.push(p),d.set(p,w))}}const h=new Cr(c);return new zD(d,h,o.fieldTransforms)}function PH(t,e,n,r=!1){return Mh(n,t.Dc(r?4:3,e))}function Mh(t,e){if(qD(t=et(t)))return WE("Unsupported field value:",e,t),HD(t,e);if(t instanceof Oh)return function(r,s){if(!$D(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Mh(a,s.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return T7(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Le.fromDate(r);return{timestampValue:mm(s.serializer,i)}}if(r instanceof Le){const i=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mm(s.serializer,i)}}if(r instanceof Ss)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Sr)return{bytesValue:uD(s.serializer,r._byteString)};if(r instanceof Dt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:bE(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Is)return function(o,a){return{mapValue:{fields:{[VN]:{stringValue:UN},[dm]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.wc("VectorValues must only contain numeric values.");return wE(a.serializer,c)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${_g(r)}`)}(t,e)}function HD(t,e){const n={};return NN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ya(t,(r,s)=>{const i=Mh(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function qD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Le||t instanceof Ss||t instanceof Sr||t instanceof Dt||t instanceof Oh||t instanceof Is)}function WE(t,e,n){if(!qD(n)||!kN(n)){const r=_g(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function iw(t,e,n){if((e=et(e))instanceof fu)return e._internalPath;if(typeof e=="string")return HE(t,e);throw wm("Field path arguments must be of type string or ",t,!1,void 0,n)}const NH=new RegExp("[~\\*/\\[\\]]");function HE(t,e,n){if(e.search(NH)>=0)throw wm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fu(...e.split("."))._internalPath}catch{throw wm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wm(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new re(W.INVALID_ARGUMENT,a+t+l)}function GD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class DH extends KD{data(){return super.data()}}function Lg(t,e){return typeof e=="string"?HE(t,e):e instanceof fu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qE{}class Mg extends qE{}function Qn(t,e,...n){let r=[];e instanceof qE&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Fg).length,a=i.filter(l=>l instanceof Fh).length;if(o>1||o>0&&a>0)throw new re(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Fh extends Mg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fh(e,n,r)}_apply(e){const n=this._parse(e);return YD(e._query,n),new ci(e.firestore,e.converter,K_(e._query,n))}_parse(e){const n=Lh(e.firestore);return function(i,o,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new re(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){US(h,d);const T=[];for(const y of h)T.push(jS(l,i,y));f={arrayValue:{values:T}}}else f=jS(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||US(h,d),f=PH(a,o,h,d==="in"||d==="not-in");return Qt.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Li(t,e,n){const r=e,s=Lg("where",t);return Fh._create(s,r,n)}class Fg extends qE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Fg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ps.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)YD(o,l),o=K_(o,l)}(e._query,n),new ci(e.firestore,e.converter,K_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vg extends Mg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new re(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new re(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ih(i,o)}(e._query,this._field,this._direction);return new ci(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new uu(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function qc(t,e="asc"){const n=e,r=Lg("orderBy",t);return Vg._create(r,n)}class jg extends Mg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new jg(e,n,r)}_apply(e){return new ci(e.firestore,e.converter,fm(e._query,this._limit,this._limitType))}}function Em(t){return B8("limit",t),jg._create("limit",t,"F")}function jS(t,e,n){if(typeof(n=et(n))=="string"){if(n==="")throw new re(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KN(e)&&n.indexOf("/")!==-1)throw new re(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(yt.fromString(n));if(!me.isDocumentKey(r))throw new re(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tS(t,new me(r))}if(n instanceof Dt)return tS(t,n._key);throw new re(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_g(n)}.`)}function US(t,e){if(!Array.isArray(t)||t.length===0)throw new re(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YD(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class XD{convertValue(e,n="none"){switch(aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ya(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[dm].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>zt(o.doubleValue));return new Is(i)}convertGeoPoint(e){return new Ss(zt(e.latitude),zt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Tg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(rh(e));default:return null}}convertTimestamp(e){const n=ia(e);return new Le(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=yt.fromString(e);rt(gD(r),9688,{name:e});const s=new zc(r.get(1),r.get(3)),i=new me(r.popFirst(5));return s.isEqual(n)||Ki(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Zl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xo extends KD{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Lg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Xo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xo._jsonSchema={type:Yt("string",Xo._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class Ed extends Xo{data(e={}){return super.data(e)}}class Jo{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Zl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ed(this._firestore,this._userDataWriter,r.key,r,new Zl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Ed(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Zl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Ed(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Zl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:OH(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Jo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function OH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t){t=jn(t,Dt);const e=jn(t.firestore,Ns);return SH(hu(e),t._key).then(n=>ZD(e,t,n))}Jo._jsonSchemaVersion="firestore/querySnapshot/1.0",Jo._jsonSchema={type:Yt("string",Jo._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class KE extends XD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,n)}}function Or(t){t=jn(t,ci);const e=jn(t.firestore,Ns),n=hu(e),r=new KE(e);return QD(t._query),IH(n,t._query).then(s=>new Jo(e,r,t,s))}function QE(t,e,n){t=jn(t,Dt);const r=jn(t.firestore,Ns),s=GE(t.converter,e,n);return mu(r,[$E(Lh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Jn.none())])}function $n(t,e,n,...r){t=jn(t,Dt);const s=jn(t.firestore,Ns),i=Lh(s);let o;return o=typeof(e=et(e))=="string"||e instanceof fu?WD(i,"updateDoc",t._key,e,n,r):BD(i,"updateDoc",t._key,e),mu(s,[o.toMutation(t._key,Jn.exists(!0))])}function JD(t){return mu(jn(t.firestore,Ns),[new Rg(t._key,Jn.none())])}function YE(t,e){const n=jn(t.firestore,Ns),r=Bt(t),s=GE(t.converter,e);return mu(n,[$E(Lh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Jn.exists(!1))]).then(()=>r)}function LH(t,...e){var n,r,s;t=et(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||VS(e[o])||(i=e[o++]);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(VS(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,d;if(t instanceof Dt)c=jn(t.firestore,Ns),d=bg(t._key.path),l={next:h=>{e[o]&&e[o](ZD(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=jn(t,ci);c=jn(h.firestore,Ns),d=h._query;const f=new KE(c);l={next:p=>{e[o]&&e[o](new Jo(c,f,h,p))},error:e[o+1],complete:e[o+2]},QD(t._query)}return function(f,p,T,y){const w=new UE(y),E=new FE(p,w,T);return f.asyncQueue.enqueueAndForget(async()=>OE(await _m(f),E)),()=>{w.Ou(),f.asyncQueue.enqueueAndForget(async()=>LE(await _m(f),E))}}(hu(c),d,a,l)}function mu(t,e){return function(r,s){const i=new Di;return r.asyncQueue.enqueueAndForget(async()=>fH(await xH(r),s,i)),i.promise}(hu(t),e)}function ZD(t,e,n){const r=n.docs.get(e._key),s=new KE(t);return new Xo(t,s,e._key,r,new Zl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Lh(e)}set(e,n,r){this._verifyNotCommitted();const s=Zy(e,this._firestore),i=GE(s.converter,n,r),o=$E(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Jn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Zy(e,this._firestore);let o;return o=typeof(n=et(n))=="string"||n instanceof fu?WD(this._dataReader,"WriteBatch.update",i._key,n,r,s):BD(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Zy(e,this._firestore);return this._mutations=this._mutations.concat(new Rg(n._key,Jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new re(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zy(t,e){if((t=et(t)).firestore!==e)throw new re(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function _s(){return new BE("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(t){return hu(t=jn(t,Ns)),new eO(t,e=>mu(t,e))}(function(e,n=!0){(function(s){au=s})(ga),Xr(new Dr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ns(new M8(r.getProvider("auth-internal")),new j8(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new re(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zc(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Vn(z1,$1,e),Vn(z1,$1,"esm2017")})();const MH=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:XD,Bytes:Sr,CollectionReference:Oi,DocumentReference:Dt,DocumentSnapshot:Xo,FieldPath:fu,FieldValue:Oh,Firestore:Ns,FirestoreError:re,GeoPoint:Ss,Query:ci,QueryCompositeFilterConstraint:Fg,QueryConstraint:Mg,QueryDocumentSnapshot:Ed,QueryFieldFilterConstraint:Fh,QueryLimitConstraint:jg,QueryOrderByConstraint:Vg,QuerySnapshot:Jo,SnapshotMetadata:Zl,Timestamp:Le,VectorValue:Is,WriteBatch:eO,_AutoId:vg,_ByteString:mn,_DatabaseId:zc,_DocumentKey:me,_EmptyAuthCredentialsProvider:IN,_FieldPath:hn,_cast:jn,_logWarn:Qi,_validateIsNotUsedTogether:AN,addDoc:YE,collection:Zn,connectFirestoreEmulator:UD,deleteDoc:JD,doc:Bt,ensureFirestoreConfigured:hu,executeWrite:mu,getDoc:pu,getDocs:Or,getFirestore:sw,limit:Em,onSnapshot:LH,orderBy:qc,query:Qn,serverTimestamp:_s,setDoc:QE,updateDoc:$n,where:Li,writeBatch:tO},Symbol.toStringTag,{value:"Module"}));var FH="firebase",VH="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn(FH,VH,"app");const nO="@firebase/installations",XE="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=1e4,sO=`w:${XE}`,iO="FIS_v2",jH="https://firebaseinstallations.googleapis.com/v1",UH=60*60*1e3,zH="installations",$H="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BH={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},sl=new gl(zH,$H,BH);function oO(t){return t instanceof es&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO({projectId:t}){return`${jH}/projects/${t}/installations`}function lO(t){return{token:t.token,requestStatus:2,expiresIn:HH(t.expiresIn),creationTime:Date.now()}}async function cO(t,e){const r=(await e.json()).error;return sl.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function uO({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function WH(t,{refreshToken:e}){const n=uO(t);return n.append("Authorization",qH(e)),n}async function dO(t){const e=await t();return e.status>=500&&e.status<600?t():e}function HH(t){return Number(t.replace("s","000"))}function qH(t){return`${iO} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GH({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=aO(t),s=uO(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:iO,appId:t.appId,sdkVersion:sO},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await dO(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:lO(c.authToken)}}else throw await cO("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KH(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QH=/^[cdef][\w-]{21}$/,ow="";function YH(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=XH(t);return QH.test(n)?n:ow}catch{return ow}}function XH(t){return KH(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=new Map;function pO(t,e){const n=Ug(t);mO(n,e),JH(n,e)}function mO(t,e){const n=fO.get(t);if(n)for(const r of n)r(e)}function JH(t,e){const n=ZH();n&&n.postMessage({key:t,fid:e}),eq()}let La=null;function ZH(){return!La&&"BroadcastChannel"in self&&(La=new BroadcastChannel("[Firebase] FID Change"),La.onmessage=t=>{mO(t.data.key,t.data.fid)}),La}function eq(){fO.size===0&&La&&(La.close(),La=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tq="firebase-installations-database",nq=1,il="firebase-installations-store";let ev=null;function JE(){return ev||(ev=NP(tq,nq,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(il)}}})),ev}async function Tm(t,e){const n=Ug(t),s=(await JE()).transaction(il,"readwrite"),i=s.objectStore(il),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&pO(t,e.fid),e}async function gO(t){const e=Ug(t),r=(await JE()).transaction(il,"readwrite");await r.objectStore(il).delete(e),await r.done}async function zg(t,e){const n=Ug(t),s=(await JE()).transaction(il,"readwrite"),i=s.objectStore(il),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&pO(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZE(t){let e;const n=await zg(t.appConfig,r=>{const s=rq(r),i=sq(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===ow?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function rq(t){const e=t||{fid:YH(),registrationStatus:0};return yO(e)}function sq(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(sl.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=iq(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:oq(t)}:{installationEntry:e}}async function iq(t,e){try{const n=await GH(t,e);return Tm(t.appConfig,n)}catch(n){throw oO(n)&&n.customData.serverCode===409?await gO(t.appConfig):await Tm(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function oq(t){let e=await zS(t.appConfig);for(;e.registrationStatus===1;)await hO(100),e=await zS(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await ZE(t);return r||n}return e}function zS(t){return zg(t,e=>{if(!e)throw sl.create("installation-not-found");return yO(e)})}function yO(t){return aq(t)?{fid:t.fid,registrationStatus:0}:t}function aq(t){return t.registrationStatus===1&&t.registrationTime+rO<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lq({appConfig:t,heartbeatServiceProvider:e},n){const r=cq(t,n),s=WH(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:sO,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await dO(()=>fetch(r,a));if(l.ok){const c=await l.json();return lO(c)}else throw await cO("Generate Auth Token",l)}function cq(t,{fid:e}){return`${aO(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eT(t,e=!1){let n;const r=await zg(t.appConfig,i=>{if(!vO(i))throw sl.create("not-registered");const o=i.authToken;if(!e&&hq(o))return i;if(o.requestStatus===1)return n=uq(t,e),i;{if(!navigator.onLine)throw sl.create("app-offline");const a=pq(i);return n=dq(t,a),a}});return n?await n:r.authToken}async function uq(t,e){let n=await $S(t.appConfig);for(;n.authToken.requestStatus===1;)await hO(100),n=await $S(t.appConfig);const r=n.authToken;return r.requestStatus===0?eT(t,e):r}function $S(t){return zg(t,e=>{if(!vO(e))throw sl.create("not-registered");const n=e.authToken;return mq(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function dq(t,e){try{const n=await lq(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Tm(t.appConfig,r),n}catch(n){if(oO(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await gO(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Tm(t.appConfig,r)}throw n}}function vO(t){return t!==void 0&&t.registrationStatus===2}function hq(t){return t.requestStatus===2&&!fq(t)}function fq(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+UH}function pq(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function mq(t){return t.requestStatus===1&&t.requestTime+rO<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gq(t){const e=t,{installationEntry:n,registrationPromise:r}=await ZE(e);return r?r.catch(console.error):eT(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yq(t,e=!1){const n=t;return await vq(n),(await eT(n,e)).token}async function vq(t){const{registrationPromise:e}=await ZE(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _q(t){if(!t||!t.options)throw tv("App Configuration");if(!t.name)throw tv("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw tv(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function tv(t){return sl.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O="installations",wq="installations-internal",Eq=t=>{const e=t.getProvider("app").getImmediate(),n=_q(e),r=no(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Tq=t=>{const e=t.getProvider("app").getImmediate(),n=no(e,_O).getImmediate();return{getId:()=>gq(n),getToken:s=>yq(n,s)}};function bq(){Xr(new Dr(_O,Eq,"PUBLIC")),Xr(new Dr(wq,Tq,"PRIVATE"))}bq();Vn(nO,XE);Vn(nO,XE,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="analytics",xq="firebase_id",Sq="origin",Iq=60*1e3,Cq="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tT="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new Th("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rq={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},kr=new gl("analytics","Analytics",Rq);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aq(t){if(!t.startsWith(tT)){const e=kr.create("invalid-gtag-resource",{gtagURL:t});return pr.warn(e.message),""}return t}function wO(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function kq(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Pq(t,e){const n=kq("firebase-js-sdk-policy",{createScriptURL:Aq}),r=document.createElement("script"),s=`${tT}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function Nq(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Dq(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await wO(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){pr.error(a)}t("config",s,i)}async function Oq(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await wO(n);for(const l of o){const c=a.find(h=>h.measurementId===l),d=c&&e[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){pr.error(i)}}function Lq(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await Oq(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await Dq(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){pr.error(a)}}return s}function Mq(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=Lq(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function Fq(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(tT)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vq=30,jq=1e3;class Uq{constructor(e={},n=jq){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const EO=new Uq;function zq(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function $q(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:zq(r)},i=Cq.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw kr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function Bq(t,e=EO,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw kr.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw kr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new qq;return setTimeout(async()=>{a.abort()},Iq),TO({appId:r,apiKey:s,measurementId:i},o,a,e)}async function TO(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=EO){var i;const{appId:o,measurementId:a}=t;try{await Wq(r,e)}catch(l){if(a)return pr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await $q(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!Hq(c)){if(s.deleteThrottleMetadata(o),a)return pr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const d=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?d1(n,s.intervalMillis,Vq):d1(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,h),pr.debug(`Calling attemptFetch again in ${d} millis`),TO(t,h,r,s)}}function Wq(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(kr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Hq(t){if(!(t instanceof es)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class qq{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Gq(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kq(){if(CP())try{await RP()}catch(t){return pr.warn(kr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return pr.warn(kr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Qq(t,e,n,r,s,i,o){var a;const l=Bq(t);l.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&pr.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>pr.error(p)),e.push(l);const c=Kq().then(p=>{if(p)return r.getId()}),[d,h]=await Promise.all([l,c]);Fq(i)||Pq(i,d.measurementId),s("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[Sq]="firebase",f.update=!0,h!=null&&(f[xq]=h),s("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yq{constructor(e){this.app=e}_delete(){return delete Td[this.app.options.appId],Promise.resolve()}}let Td={},BS=[];const WS={};let nv="dataLayer",Xq="gtag",HS,bO,qS=!1;function Jq(){const t=[];if(xP()&&t.push("This is a browser extension environment."),H9()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=kr.create("invalid-analytics-context",{errorInfo:e});pr.warn(n.message)}}function Zq(t,e,n){Jq();const r=t.options.appId;if(!r)throw kr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)pr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw kr.create("no-api-key");if(Td[r]!=null)throw kr.create("already-exists",{id:r});if(!qS){Nq(nv);const{wrappedGtag:i,gtagCore:o}=Mq(Td,BS,WS,nv,Xq);bO=i,HS=o,qS=!0}return Td[r]=Qq(t,BS,WS,e,HS,nv,n),new Yq(t)}function eG(t=bh()){t=et(t);const e=no(t,bm);return e.isInitialized()?e.getImmediate():tG(t)}function tG(t,e={}){const n=no(t,bm);if(n.isInitialized()){const s=n.getImmediate();if(Hi(e,n.getOptions()))return s;throw kr.create("already-initialized")}return n.initialize({options:e})}function nG(t,e,n,r){t=et(t),Gq(bO,Td[t.app.options.appId],e,n,r).catch(s=>pr.error(s))}const GS="@firebase/analytics",KS="0.10.17";function rG(){Xr(new Dr(bm,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return Zq(r,s,n)},"PUBLIC")),Xr(new Dr("analytics-internal",t,"PRIVATE")),Vn(GS,KS),Vn(GS,KS,"esm2017");function t(e){try{const n=e.getProvider(bm).getImmediate();return{logEvent:(r,s,i)=>nG(n,r,s,i)}}catch(n){throw kr.create("interop-component-reg-failed",{reason:n})}}}rG();var QS={};const YS="@firebase/database",XS="1.0.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xO="";function sG(t){xO=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),vn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Jd(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oG{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return to(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new iG(e)}}catch{}return new oG},Ma=SO("localStorage"),aG=SO("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new Th("@firebase/database"),lG=function(){let t=1;return function(){return t++}}(),IO=function(t){const e=nz(t),n=new X9;n.update(e);const r=n.digest();return X0.encodeByteArray(r)},Vh=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Vh.apply(null,r):typeof r=="object"?e+=vn(r):e+=r,e+=" "}return e};let bd=null,JS=!0;const cG=function(t,e){ie(!e,"Can't turn on custom loggers persistently."),mc.logLevel=Me.VERBOSE,bd=mc.log.bind(mc)},Ln=function(...t){if(JS===!0&&(JS=!1,bd===null&&aG.get("logging_enabled")===!0&&cG()),bd){const e=Vh.apply(null,t);bd(e)}},jh=function(t){return function(...e){Ln(t,...e)}},aw=function(...t){const e="FIREBASE INTERNAL ERROR: "+Vh(...t);mc.error(e)},Xi=function(...t){const e=`FIREBASE FATAL ERROR: ${Vh(...t)}`;throw mc.error(e),new Error(e)},Pr=function(...t){const e="FIREBASE WARNING: "+Vh(...t);mc.warn(e)},uG=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Pr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},CO=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},dG=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Gc="[MIN_NAME]",ol="[MAX_NAME]",gu=function(t,e){if(t===e)return 0;if(t===Gc||e===ol)return-1;if(e===Gc||t===ol)return 1;{const n=ZS(t),r=ZS(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},hG=function(t,e){return t===e?0:t<e?-1:1},$u=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+vn(e))},nT=function(t){if(typeof t!="object"||t===null)return vn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=vn(e[r]),n+=":",n+=nT(t[e[r]]);return n+="}",n},RO=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Zr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const AO=function(t){ie(!CO(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,l;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(s?1:0),c.reverse();const d=c.join("");let h="";for(l=0;l<64;l+=8){let f=parseInt(d.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},fG=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},pG=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},mG=new RegExp("^-?(0*)\\d{1,10}$"),gG=-2147483648,yG=2147483647,ZS=function(t){if(mG.test(t)){const e=Number(t);if(e>=gG&&e<=yG)return e}return null},Uh=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Pr("Exception was thrown by user callback.",n),e},Math.floor(0))}},vG=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},xd=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _G{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Yn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Pr(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wG{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ln("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pr(e)}}class pp{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}pp.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="5",kO="v",PO="s",NO="r",DO="f",OO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,LO="ls",MO="p",lw="ac",FO="websocket",VO="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,n,r,s,i=!1,o="",a=!1,l=!1,c=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ma.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ma.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function EG(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function UO(t,e,n){ie(typeof e=="string","typeof type must == string"),ie(typeof n=="object","typeof params must == object");let r;if(e===FO)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===VO)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);EG(t)&&(n.ns=t.namespace);const s=[];return Zr(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TG{constructor(){this.counters_={}}incrementCounter(e,n=1){to(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return D9(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv={},sv={};function sT(t){const e=t.toString();return rv[e]||(rv[e]=new TG),rv[e]}function bG(t,e){const n=t.toString();return sv[n]||(sv[n]=e()),sv[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xG{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Uh(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="start",SG="close",IG="pLPCommand",CG="pRTLPCB",zO="id",$O="pw",BO="ser",RG="cb",AG="seg",kG="ts",PG="d",NG="dframe",WO=1870,HO=30,DG=WO-HO,OG=25e3,LG=3e4;class ec{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=jh(e),this.stats_=sT(n),this.urlFn=l=>(this.appCheckToken&&(l[lw]=this.appCheckToken),UO(n,VO,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new xG(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(LG)),dG(()=>{if(this.isClosed_)return;this.scriptTagHolder=new iT((...i)=>{const[o,a,l,c,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===eI)this.id=a,this.password=l;else if(o===SG)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[eI]="t",r[BO]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[RG]=this.scriptTagHolder.uniqueCallbackIdentifier),r[kO]=rT,this.transportSessionId&&(r[PO]=this.transportSessionId),this.lastSessionId&&(r[LO]=this.lastSessionId),this.applicationId&&(r[MO]=this.applicationId),this.appCheckToken&&(r[lw]=this.appCheckToken),typeof location<"u"&&location.hostname&&OO.test(location.hostname)&&(r[NO]=DO);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ec.forceAllow_=!0}static forceDisallow(){ec.forceDisallow_=!0}static isAvailable(){return ec.forceAllow_?!0:!ec.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!fG()&&!pG()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=vn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=_P(n),s=RO(r,DG);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[NG]="t",r[zO]=e,r[$O]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=vn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class iT{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=lG(),window[IG+this.uniqueCallbackIdentifier]=e,window[CG+this.uniqueCallbackIdentifier]=n,this.myIFrame=iT.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ln("frame writing exception"),a.stack&&Ln(a.stack),Ln(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ln("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[zO]=this.myID,e[$O]=this.myPW,e[BO]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+HO+r.length<=WO;){const o=this.pendingSegs.shift();r=r+"&"+AG+s+"="+o.seg+"&"+kG+s+"="+o.ts+"&"+PG+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(OG)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ln("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MG=16384,FG=45e3;let xm=null;typeof MozWebSocket<"u"?xm=MozWebSocket:typeof WebSocket<"u"&&(xm=WebSocket);class ys{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=jh(this.connId),this.stats_=sT(n),this.connURL=ys.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[kO]=rT,typeof location<"u"&&location.hostname&&OO.test(location.hostname)&&(o[NO]=DO),n&&(o[PO]=n),r&&(o[LO]=r),s&&(o[lw]=s),i&&(o[MO]=i),UO(e,FO,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ma.set("previous_websocket_failure",!0);try{let r;IP(),this.mySock=new xm(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){ys.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&xm!==null&&!ys.forceDisallow_}static previouslyFailed(){return Ma.isInMemoryStorage||Ma.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ma.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Jd(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ie(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=vn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=RO(n,MG);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(FG))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ys.responsesRequiredToBeHealthy=2;ys.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{static get ALL_TRANSPORTS(){return[ec,ys]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=ys&&ys.isAvailable();let r=n&&!ys.previouslyFailed();if(e.webSocketOnly&&(n||Pr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ys];else{const s=this.transports_=[];for(const i of ch.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);ch.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ch.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VG=6e4,jG=5e3,UG=10*1024,zG=100*1024,iv="t",tI="d",$G="s",nI="r",BG="e",rI="o",sI="a",iI="n",oI="p",WG="h";class HG{constructor(e,n,r,s,i,o,a,l,c,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=jh("c:"+this.id+":"),this.transportManager_=new ch(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=xd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>zG?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>UG?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(iv in e){const n=e[iv];n===sI?this.upgradeIfSecondaryHealthy_():n===nI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===rI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=$u("t",e),r=$u("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:oI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:sI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:iI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=$u("t",e),r=$u("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=$u(iv,e);if(tI in e){const r=e[tI];if(n===WG){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===iI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===$G?this.onConnectionShutdown_(r):n===nI?this.onReset_(r):n===BG?aw("Server Error: "+r):n===rI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):aw("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),rT!==r&&Pr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),xd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(VG))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(jG))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:oI,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ma.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.allowedEvents_=e,this.listeners_={},ie(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){ie(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm extends GO{static getInstance(){return new Sm}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!tE()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ie(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=32,lI=768;class Ct{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function at(){return new Ct("")}function qe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ua(t){return t.pieces_.length-t.pieceNum_}function xt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ct(t.pieces_,e)}function KO(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function qG(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function QO(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function YO(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ct(e,0)}function fn(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ct)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Ct(n,0)}function $e(t){return t.pieceNum_>=t.pieces_.length}function Hr(t,e){const n=qe(t),r=qe(e);if(n===null)return e;if(n===r)return Hr(xt(t),xt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function XO(t,e){if(ua(t)!==ua(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ws(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ua(t)>ua(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class GG{constructor(e,n){this.errorPrefix_=n,this.parts_=QO(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=pg(this.parts_[r]);JO(this)}}function KG(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=pg(e),JO(t)}function QG(t){const e=t.parts_.pop();t.byteLength_-=pg(e),t.parts_.length>0&&(t.byteLength_-=1)}function JO(t){if(t.byteLength_>lI)throw new Error(t.errorPrefix_+"has a key path longer than "+lI+" bytes ("+t.byteLength_+").");if(t.parts_.length>aI)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+aI+") or object contains a cycle "+Ia(t))}function Ia(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT extends GO{static getInstance(){return new oT}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return ie(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu=1e3,YG=60*5*1e3,cI=30*1e3,XG=1.3,JG=3e4,ZG="server_kill",uI=3;class Mi extends qO{constructor(e,n,r,s,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Mi.nextPersistentConnectionId_++,this.log_=jh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Bu,this.maxReconnectDelay_=YG,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!IP())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");oT.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Sm.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(vn(i)),ie(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Z0,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ie(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ie(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,c=a.s;Mi.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&to(e,"w")){const r=Vc(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Pr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Y9(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=cI)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Q9(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),ie(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+vn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):aw("Unrecognized action received from server: "+vn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ie(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Bu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Bu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>JG&&(this.reconnectDelay_=Bu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*XG)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Mi.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(h){ie(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?Ln("getToken() completed but was canceled"):(Ln("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new HG(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,p=>{Pr(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(ZG)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Pr(h),l())}}}interrupt(e){Ln("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ln("Resuming connection for reason: "+e),delete this.interruptReasons_[e],N_(this.interruptReasons_)&&(this.reconnectDelay_=Bu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>nT(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Ct(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Ln("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=uI&&(this.reconnectDelay_=cI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ln("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=uI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+xO.replace(/\./g,"-")]=1,tE()?e["framework.cordova"]=1:SP()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Sm.getInstance().currentlyOnline();return N_(this.interruptReasons_)&&e}}Mi.nextPersistentConnectionId_=0;Mi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ge(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ge(Gc,e),s=new Ge(Gc,n);return this.compare(r,s)!==0}minPost(){return Ge.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf;class ZO extends $g{static get __EMPTY_NODE(){return Mf}static set __EMPTY_NODE(e){Mf=e}compare(e,n){return gu(e.name,n.name)}isDefinedOn(e){throw su("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ge.MIN}maxPost(){return new Ge(ol,Mf)}makePost(e,n){return ie(typeof e=="string","KeyIndex indexValue must always be a string."),new Ge(e,Mf)}toString(){return".key"}}const gc=new ZO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class dn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??dn.RED,this.left=s??ur.EMPTY_NODE,this.right=i??ur.EMPTY_NODE}copy(e,n,r,s,i){return new dn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ur.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ur.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}dn.RED=!0;dn.BLACK=!1;class eK{copy(e,n,r,s,i){return this}insert(e,n,r){return new dn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ur{constructor(e,n=ur.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ur(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,dn.BLACK,null,null))}remove(e){return new ur(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,dn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ff(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ff(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ff(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ff(this.root_,null,this.comparator_,!0,e)}}ur.EMPTY_NODE=new eK;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tK(t,e){return gu(t.name,e.name)}function aT(t,e){return gu(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cw;function nK(t){cw=t}const e2=function(t){return typeof t=="number"?"number:"+AO(t):"string:"+t},t2=function(t){if(t.isLeafNode()){const e=t.val();ie(typeof e=="string"||typeof e=="number"||typeof e=="object"&&to(e,".sv"),"Priority must be a string or number.")}else ie(t===cw||t.isEmpty(),"priority of unexpected type.");ie(t===cw||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dI;class ln{static set __childrenNodeConstructor(e){dI=e}static get __childrenNodeConstructor(){return dI}constructor(e,n=ln.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ie(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),t2(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ln(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ln.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return $e(e)?this:qe(e)===".priority"?this.priorityNode_:ln.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ln.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=qe(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ie(r!==".priority"||ua(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ln.__childrenNodeConstructor.EMPTY_NODE.updateChild(xt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+e2(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=AO(this.value_):e+=this.value_,this.lazyHash_=IO(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ln.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ln.__childrenNodeConstructor?-1:(ie(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=ln.VALUE_TYPE_ORDER.indexOf(n),i=ln.VALUE_TYPE_ORDER.indexOf(r);return ie(s>=0,"Unknown leaf type: "+n),ie(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ln.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n2,r2;function rK(t){n2=t}function sK(t){r2=t}class iK extends $g{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?gu(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ge.MIN}maxPost(){return new Ge(ol,new ln("[PRIORITY-POST]",r2))}makePost(e,n){const r=n2(e);return new Ge(n,new ln("[PRIORITY-POST]",r))}toString(){return".priority"}}const Fn=new iK;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oK=Math.log(2);class aK{constructor(e){const n=i=>parseInt(Math.log(i)/oK,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Im=function(t,e,n,r){t.sort(e);const s=function(l,c){const d=c-l;let h,f;if(d===0)return null;if(d===1)return h=t[l],f=n?n(h):h,new dn(f,h.node,dn.BLACK,null,null);{const p=parseInt(d/2,10)+l,T=s(l,p),y=s(p+1,c);return h=t[p],f=n?n(h):h,new dn(f,h.node,dn.BLACK,T,y)}},i=function(l){let c=null,d=null,h=t.length;const f=function(T,y){const w=h-T,E=h;h-=T;const v=s(w+1,E),S=t[w],C=n?n(S):S;p(new dn(C,S.node,y,null,v))},p=function(T){c?(c.left=T,c=T):(d=T,c=T)};for(let T=0;T<l.count;++T){const y=l.nextBitIsOne(),w=Math.pow(2,l.count-(T+1));y?f(w,dn.BLACK):(f(w,dn.BLACK),f(w,dn.RED))}return d},o=new aK(t.length),a=i(o);return new ur(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ov;const Nl={};class Ai{static get Default(){return ie(Nl&&Fn,"ChildrenNode.ts has not been loaded"),ov=ov||new Ai({".priority":Nl},{".priority":Fn}),ov}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Vc(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ur?n:null}hasIndex(e){return to(this.indexSet_,e.toString())}addIndex(e,n){ie(e!==gc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Ge.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=Im(r,e.getCompare()):a=Nl;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new Ai(d,c)}addToIndexes(e,n){const r=tm(this.indexes_,(s,i)=>{const o=Vc(this.indexSet_,i);if(ie(o,"Missing index implementation for "+i),s===Nl)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Ge.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Im(a,o.getCompare())}else return Nl;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new Ge(e.name,a))),l.insert(e,e.node)}});return new Ai(r,this.indexSet_)}removeFromIndexes(e,n){const r=tm(this.indexes_,s=>{if(s===Nl)return s;{const i=n.get(e.name);return i?s.remove(new Ge(e.name,i)):s}});return new Ai(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wu;class nt{static get EMPTY_NODE(){return Wu||(Wu=new nt(new ur(aT),null,Ai.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&t2(this.priorityNode_),this.children_.isEmpty()&&ie(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Wu}updatePriority(e){return this.children_.isEmpty()?this:new nt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Wu:n}}getChild(e){const n=qe(e);return n===null?this:this.getImmediateChild(n).getChild(xt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ie(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ge(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Wu:this.priorityNode_;return new nt(s,o,i)}}updateChild(e,n){const r=qe(e);if(r===null)return n;{ie(qe(e)!==".priority"||ua(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(xt(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Fn,(o,a)=>{n[o]=a.val(e),r++,i&&nt.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+e2(this.getPriority().val())+":"),this.forEachChild(Fn,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":IO(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Ge(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ge(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ge(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Ge.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Ge.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===zh?-1:0}withIndex(e){if(e===gc||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new nt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===gc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Fn),s=n.getIterator(Fn);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===gc?null:this.indexMap_.get(e.toString())}}nt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class lK extends nt{constructor(){super(new ur(aT),nt.EMPTY_NODE,Ai.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return nt.EMPTY_NODE}isEmpty(){return!1}}const zh=new lK;Object.defineProperties(Ge,{MIN:{value:new Ge(Gc,nt.EMPTY_NODE)},MAX:{value:new Ge(ol,zh)}});ZO.__EMPTY_NODE=nt.EMPTY_NODE;ln.__childrenNodeConstructor=nt;nK(zh);sK(zh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cK=!0;function Mn(t,e=null){if(t===null)return nt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ie(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ln(n,Mn(e))}if(!(t instanceof Array)&&cK){const n=[];let r=!1;if(Zr(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Mn(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Ge(o,l)))}}),n.length===0)return nt.EMPTY_NODE;const i=Im(n,tK,o=>o.name,aT);if(r){const o=Im(n,Fn.getCompare());return new nt(i,Mn(e),new Ai({".priority":o},{".priority":Fn}))}else return new nt(i,Mn(e),Ai.Default)}else{let n=nt.EMPTY_NODE;return Zr(t,(r,s)=>{if(to(t,r)&&r.substring(0,1)!=="."){const i=Mn(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Mn(e))}}rK(Mn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uK extends $g{constructor(e){super(),this.indexPath_=e,ie(!$e(e)&&qe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?gu(e.name,n.name):i}makePost(e,n){const r=Mn(e),s=nt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ge(n,s)}maxPost(){const e=nt.EMPTY_NODE.updateChild(this.indexPath_,zh);return new Ge(ol,e)}toString(){return QO(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dK extends $g{compare(e,n){const r=e.node.compareTo(n.node);return r===0?gu(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ge.MIN}maxPost(){return Ge.MAX}makePost(e,n){const r=Mn(e);return new Ge(n,r)}toString(){return".value"}}const hK=new dK;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fK(t){return{type:"value",snapshotNode:t}}function pK(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function mK(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function hI(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function gK(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ie(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ie(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Gc}hasEnd(){return this.endSet_}getIndexEndValue(){return ie(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ie(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ol}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ie(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fn}copy(){const e=new lT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function fI(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Fn?n="$priority":t.index_===hK?n="$value":t.index_===gc?n="$key":(ie(t.index_ instanceof uK,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=vn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=vn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+vn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=vn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+vn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function pI(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Fn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm extends qO{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ie(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=jh("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Cm.getListenId_(e,r),a={};this.listens_[o]=a;const l=fI(e._queryParams);this.restRequest_(i+".json",l,(c,d)=>{let h=d;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(i,h,!1,r),Vc(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",s(f,null)}})}unlisten(e,n){const r=Cm.getListenId_(e,n);delete this.listens_[r]}get(e){const n=fI(e._queryParams),r=e._path.toString(),s=new Z0;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+iu(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Jd(a.responseText)}catch{Pr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Pr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yK{constructor(){this.rootNode_=nt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(){return{value:null,children:new Map}}function s2(t,e,n){if($e(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=qe(e);t.children.has(r)||t.children.set(r,Rm());const s=t.children.get(r);e=xt(e),s2(s,e,n)}}function uw(t,e,n){t.value!==null?n(e,t.value):vK(t,(r,s)=>{const i=new Ct(e.toString()+"/"+r);uw(s,i,n)})}function vK(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _K{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Zr(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=10*1e3,wK=30*1e3,EK=5*60*1e3;class TK{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new _K(e);const r=mI+(wK-mI)*Math.random();xd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Zr(e,(s,i)=>{i>0&&to(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),xd(this.reportStats_.bind(this),Math.floor(Math.random()*2*EK))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qs;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Qs||(Qs={}));function i2(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function o2(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function a2(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Qs.ACK_USER_WRITE,this.source=i2()}operationForChild(e){if($e(this.path)){if(this.affectedTree.value!=null)return ie(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ct(e));return new Am(at(),n,this.revert)}}else return ie(qe(this.path)===e,"operationForChild called for unrelated child."),new Am(xt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Qs.OVERWRITE}operationForChild(e){return $e(this.path)?new al(this.source,at(),this.snap.getImmediateChild(e)):new al(this.source,xt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Qs.MERGE}operationForChild(e){if($e(this.path)){const n=this.children.subtree(new Ct(e));return n.isEmpty()?null:n.value?new al(this.source,at(),n.value):new uh(this.source,at(),n)}else return ie(qe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new uh(this.source,xt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($e(e))return this.isFullyInitialized()&&!this.filtered_;const n=qe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function bK(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(gK(o.childName,o.snapshotNode))}),Hu(t,s,"child_removed",e,r,n),Hu(t,s,"child_added",e,r,n),Hu(t,s,"child_moved",i,r,n),Hu(t,s,"child_changed",e,r,n),Hu(t,s,"value",e,r,n),s}function Hu(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,l)=>SK(t,a,l)),o.forEach(a=>{const l=xK(t,a,i);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function xK(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function SK(t,e,n){if(e.childName==null||n.childName==null)throw su("Should only compare child_ events.");const r=new Ge(e.childName,e.snapshotNode),s=new Ge(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(t,e){return{eventCache:t,serverCache:e}}function Sd(t,e,n,r){return l2(new cT(e,n,r),t.serverCache)}function c2(t,e,n,r){return l2(t.eventCache,new cT(e,n,r))}function dw(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ll(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let av;const IK=()=>(av||(av=new ur(hG)),av);class bt{static fromObject(e){let n=new bt(null);return Zr(e,(r,s)=>{n=n.set(new Ct(r),s)}),n}constructor(e,n=IK()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:at(),value:this.value};if($e(e))return null;{const r=qe(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(xt(e),n);return i!=null?{path:fn(new Ct(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($e(e))return this;{const n=qe(e),r=this.children.get(n);return r!==null?r.subtree(xt(e)):new bt(null)}}set(e,n){if($e(e))return new bt(n,this.children);{const r=qe(e),i=(this.children.get(r)||new bt(null)).set(xt(e),n),o=this.children.insert(r,i);return new bt(this.value,o)}}remove(e){if($e(e))return this.children.isEmpty()?new bt(null):new bt(null,this.children);{const n=qe(e),r=this.children.get(n);if(r){const s=r.remove(xt(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new bt(null):new bt(this.value,i)}else return this}}get(e){if($e(e))return this.value;{const n=qe(e),r=this.children.get(n);return r?r.get(xt(e)):null}}setTree(e,n){if($e(e))return n;{const r=qe(e),i=(this.children.get(r)||new bt(null)).setTree(xt(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new bt(this.value,o)}}fold(e){return this.fold_(at(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(fn(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,at(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if($e(e))return null;{const i=qe(e),o=this.children.get(i);return o?o.findOnPath_(xt(e),fn(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,at(),n)}foreachOnPath_(e,n,r){if($e(e))return this;{this.value&&r(n,this.value);const s=qe(e),i=this.children.get(s);return i?i.foreachOnPath_(xt(e),fn(n,s),r):new bt(null)}}foreach(e){this.foreach_(at(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(fn(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this.writeTree_=e}static empty(){return new Cs(new bt(null))}}function Id(t,e,n){if($e(e))return new Cs(new bt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Hr(s,e);return i=i.updateChild(o,n),new Cs(t.writeTree_.set(s,i))}else{const s=new bt(n),i=t.writeTree_.setTree(e,s);return new Cs(i)}}}function gI(t,e,n){let r=t;return Zr(n,(s,i)=>{r=Id(r,fn(e,s),i)}),r}function yI(t,e){if($e(e))return Cs.empty();{const n=t.writeTree_.setTree(e,new bt(null));return new Cs(n)}}function hw(t,e){return _l(t,e)!=null}function _l(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Hr(n.path,e)):null}function vI(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Fn,(r,s)=>{e.push(new Ge(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Ge(r,s.value))}),e}function Zo(t,e){if($e(e))return t;{const n=_l(t,e);return n!=null?new Cs(new bt(n)):new Cs(t.writeTree_.subtree(e))}}function fw(t){return t.writeTree_.isEmpty()}function Kc(t,e){return u2(at(),t.writeTree_,e)}function u2(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(ie(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=u2(fn(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(fn(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(t,e){return g2(e,t)}function CK(t,e,n,r,s){ie(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Id(t.visibleWrites,e,n)),t.lastWriteId=r}function RK(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function AK(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ie(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&kK(a,r.path)?s=!1:ws(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return PK(t),!0;if(r.snap)t.visibleWrites=yI(t.visibleWrites,r.path);else{const a=r.children;Zr(a,l=>{t.visibleWrites=yI(t.visibleWrites,fn(r.path,l))})}return!0}else return!1}function kK(t,e){if(t.snap)return ws(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ws(fn(t.path,n),e))return!0;return!1}function PK(t){t.visibleWrites=h2(t.allWrites,NK,at()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function NK(t){return t.visible}function h2(t,e,n){let r=Cs.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)ws(n,o)?(a=Hr(n,o),r=Id(r,a,i.snap)):ws(o,n)&&(a=Hr(o,n),r=Id(r,at(),i.snap.getChild(a)));else if(i.children){if(ws(n,o))a=Hr(n,o),r=gI(r,a,i.children);else if(ws(o,n))if(a=Hr(o,n),$e(a))r=gI(r,at(),i.children);else{const l=Vc(i.children,qe(a));if(l){const c=l.getChild(xt(a));r=Id(r,at(),c)}}}else throw su("WriteRecord should have .snap or .children")}}return r}function f2(t,e,n,r,s){if(!r&&!s){const i=_l(t.visibleWrites,e);if(i!=null)return i;{const o=Zo(t.visibleWrites,e);if(fw(o))return n;if(n==null&&!hw(o,at()))return null;{const a=n||nt.EMPTY_NODE;return Kc(o,a)}}}else{const i=Zo(t.visibleWrites,e);if(!s&&fw(i))return n;if(!s&&n==null&&!hw(i,at()))return null;{const o=function(c){return(c.visible||s)&&(!r||!~r.indexOf(c.writeId))&&(ws(c.path,e)||ws(e,c.path))},a=h2(t.allWrites,o,e),l=n||nt.EMPTY_NODE;return Kc(a,l)}}}function DK(t,e,n){let r=nt.EMPTY_NODE;const s=_l(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Fn,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Zo(t.visibleWrites,e);return n.forEachChild(Fn,(o,a)=>{const l=Kc(Zo(i,new Ct(o)),a);r=r.updateImmediateChild(o,l)}),vI(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Zo(t.visibleWrites,e);return vI(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function OK(t,e,n,r,s){ie(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=fn(e,n);if(hw(t.visibleWrites,i))return null;{const o=Zo(t.visibleWrites,i);return fw(o)?s.getChild(n):Kc(o,s.getChild(n))}}function LK(t,e,n,r){const s=fn(e,n),i=_l(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Zo(t.visibleWrites,s);return Kc(o,r.getNode().getImmediateChild(n))}else return null}function MK(t,e){return _l(t.visibleWrites,e)}function FK(t,e,n,r,s,i,o){let a;const l=Zo(t.visibleWrites,e),c=_l(l,at());if(c!=null)a=c;else if(n!=null)a=Kc(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],h=o.getCompare(),f=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let p=f.getNext();for(;p&&d.length<s;)h(p,r)!==0&&d.push(p),p=f.getNext();return d}else return[]}function VK(){return{visibleWrites:Cs.empty(),allWrites:[],lastWriteId:-1}}function pw(t,e,n,r){return f2(t.writeTree,t.treePath,e,n,r)}function p2(t,e){return DK(t.writeTree,t.treePath,e)}function _I(t,e,n,r){return OK(t.writeTree,t.treePath,e,n,r)}function km(t,e){return MK(t.writeTree,fn(t.treePath,e))}function jK(t,e,n,r,s,i){return FK(t.writeTree,t.treePath,e,n,r,s,i)}function uT(t,e,n){return LK(t.writeTree,t.treePath,e,n)}function m2(t,e){return g2(fn(t.treePath,e),t.writeTree)}function g2(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UK{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ie(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ie(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,hI(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,mK(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,pK(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,hI(r,e.snapshotNode,s.oldSnap));else throw su("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zK{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const y2=new zK;class dT{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new cT(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return uT(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ll(this.viewCache_),i=jK(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}function $K(t,e){ie(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ie(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function BK(t,e,n,r,s){const i=new UK;let o,a;if(n.type===Qs.OVERWRITE){const c=n;c.source.fromUser?o=mw(t,e,c.path,c.snap,r,s,i):(ie(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!$e(c.path),o=Pm(t,e,c.path,c.snap,r,s,a,i))}else if(n.type===Qs.MERGE){const c=n;c.source.fromUser?o=HK(t,e,c.path,c.children,r,s,i):(ie(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=gw(t,e,c.path,c.children,r,s,a,i))}else if(n.type===Qs.ACK_USER_WRITE){const c=n;c.revert?o=KK(t,e,c.path,r,s,i):o=qK(t,e,c.path,c.affectedTree,r,s,i)}else if(n.type===Qs.LISTEN_COMPLETE)o=GK(t,e,n.path,r,i);else throw su("Unknown operation type: "+n.type);const l=i.getChanges();return WK(e,o,l),{viewCache:o,changes:l}}function WK(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=dw(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(fK(dw(e)))}}function v2(t,e,n,r,s,i){const o=e.eventCache;if(km(r,n)!=null)return e;{let a,l;if($e(n))if(ie(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=ll(e),d=c instanceof nt?c:nt.EMPTY_NODE,h=p2(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const c=pw(r,ll(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const c=qe(n);if(c===".priority"){ie(ua(n)===1,"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const h=_I(r,n,d,l);h!=null?a=t.filter.updatePriority(d,h):a=o.getNode()}else{const d=xt(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=_I(r,n,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(c).updateChild(d,f):h=o.getNode().getImmediateChild(c)}else h=uT(r,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,d,s,i):a=o.getNode()}}return Sd(e,a,o.isFullyInitialized()||$e(n),t.filter.filtersNodes())}}function Pm(t,e,n,r,s,i,o,a){const l=e.serverCache;let c;const d=o?t.filter:t.filter.getIndexedFilter();if($e(n))c=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(n,r);c=d.updateFullNode(l.getNode(),p,null)}else{const p=qe(n);if(!l.isCompleteForPath(n)&&ua(n)>1)return e;const T=xt(n),w=l.getNode().getImmediateChild(p).updateChild(T,r);p===".priority"?c=d.updatePriority(l.getNode(),w):c=d.updateChild(l.getNode(),p,w,T,y2,null)}const h=c2(e,c,l.isFullyInitialized()||$e(n),d.filtersNodes()),f=new dT(s,h,i);return v2(t,h,n,s,f,a)}function mw(t,e,n,r,s,i,o){const a=e.eventCache;let l,c;const d=new dT(s,e,i);if($e(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Sd(e,c,!0,t.filter.filtersNodes());else{const h=qe(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Sd(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=xt(n),p=a.getNode().getImmediateChild(h);let T;if($e(f))T=r;else{const y=d.getCompleteChild(h);y!=null?KO(f)===".priority"&&y.getChild(YO(f)).isEmpty()?T=y:T=y.updateChild(f,r):T=nt.EMPTY_NODE}if(p.equals(T))l=e;else{const y=t.filter.updateChild(a.getNode(),h,T,f,d,o);l=Sd(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function wI(t,e){return t.eventCache.isCompleteForChild(e)}function HK(t,e,n,r,s,i,o){let a=e;return r.foreach((l,c)=>{const d=fn(n,l);wI(e,qe(d))&&(a=mw(t,a,d,c,s,i,o))}),r.foreach((l,c)=>{const d=fn(n,l);wI(e,qe(d))||(a=mw(t,a,d,c,s,i,o))}),a}function EI(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function gw(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;$e(n)?c=r:c=new bt(null).setTree(n,r);const d=e.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const p=e.serverCache.getNode().getImmediateChild(h),T=EI(t,p,f);l=Pm(t,l,new Ct(h),T,s,i,o,a)}}),c.children.inorderTraversal((h,f)=>{const p=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!p){const T=e.serverCache.getNode().getImmediateChild(h),y=EI(t,T,f);l=Pm(t,l,new Ct(h),y,s,i,o,a)}}),l}function qK(t,e,n,r,s,i,o){if(km(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if($e(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Pm(t,e,n,l.getNode().getChild(n),s,i,a,o);if($e(n)){let c=new bt(null);return l.getNode().forEachChild(gc,(d,h)=>{c=c.set(new Ct(d),h)}),gw(t,e,n,c,s,i,a,o)}else return e}else{let c=new bt(null);return r.foreach((d,h)=>{const f=fn(n,d);l.isCompleteForPath(f)&&(c=c.set(d,l.getNode().getChild(f)))}),gw(t,e,n,c,s,i,a,o)}}function GK(t,e,n,r,s){const i=e.serverCache,o=c2(e,i.getNode(),i.isFullyInitialized()||$e(n),i.isFiltered());return v2(t,o,n,r,y2,s)}function KK(t,e,n,r,s,i){let o;if(km(r,n)!=null)return e;{const a=new dT(r,e,s),l=e.eventCache.getNode();let c;if($e(n)||qe(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=pw(r,ll(e));else{const h=e.serverCache.getNode();ie(h instanceof nt,"serverChildren would be complete if leaf node"),d=p2(r,h)}d=d,c=t.filter.updateFullNode(l,d,i)}else{const d=qe(n);let h=uT(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=l.getImmediateChild(d)),h!=null?c=t.filter.updateChild(l,d,h,xt(n),a,i):e.eventCache.getNode().hasChild(d)?c=t.filter.updateChild(l,d,nt.EMPTY_NODE,xt(n),a,i):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=pw(r,ll(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,i)))}return o=e.serverCache.isFullyInitialized()||km(r,at())!=null,Sd(e,c,o,t.filter.filtersNodes())}}function QK(t,e){const n=ll(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!$e(e)&&!n.getImmediateChild(qe(e)).isEmpty())?n.getChild(e):null}function TI(t,e,n,r){e.type===Qs.MERGE&&e.source.queryId!==null&&(ie(ll(t.viewCache_),"We should always have a full cache before handling merges"),ie(dw(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=BK(t.processor_,s,e,n,r);return $K(t.processor_,i.viewCache),ie(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,YK(t,i.changes,i.viewCache.eventCache.getNode())}function YK(t,e,n,r){const s=t.eventRegistrations_;return bK(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bI;function XK(t){ie(!bI,"__referenceConstructor has already been defined"),bI=t}function hT(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return ie(i!=null,"SyncTree gave us an op for an invalid query."),TI(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(TI(o,e,n,r));return i}}function fT(t,e){let n=null;for(const r of t.views.values())n=n||QK(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xI;function JK(t){ie(!xI,"__referenceConstructor has already been defined"),xI=t}class SI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new bt(null),this.pendingWriteTree_=VK(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ZK(t,e,n,r,s){return CK(t.pendingWriteTree_,e,n,r,s),s?Wg(t,new al(i2(),e,n)):[]}function tc(t,e,n=!1){const r=RK(t.pendingWriteTree_,e);if(AK(t.pendingWriteTree_,e)){let i=new bt(null);return r.snap!=null?i=i.set(at(),!0):Zr(r.children,o=>{i=i.set(new Ct(o),!0)}),Wg(t,new Am(r.path,i,n))}else return[]}function Bg(t,e,n){return Wg(t,new al(o2(),e,n))}function eQ(t,e,n){const r=bt.fromObject(n);return Wg(t,new uh(o2(),e,r))}function tQ(t,e,n,r){const s=T2(t,r);if(s!=null){const i=b2(s),o=i.path,a=i.queryId,l=Hr(o,e),c=new al(a2(a),l,n);return x2(t,o,c)}else return[]}function nQ(t,e,n,r){const s=T2(t,r);if(s){const i=b2(s),o=i.path,a=i.queryId,l=Hr(o,e),c=bt.fromObject(n),d=new uh(a2(a),l,c);return x2(t,o,d)}else return[]}function _2(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Hr(o,e),c=fT(a,l);if(c)return c});return f2(s,e,i,n,!0)}function Wg(t,e){return w2(e,t.syncPointTree_,null,d2(t.pendingWriteTree_,at()))}function w2(t,e,n,r){if($e(t.path))return E2(t,e,n,r);{const s=e.get(at());n==null&&s!=null&&(n=fT(s,at()));let i=[];const o=qe(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,d=m2(r,o);i=i.concat(w2(a,l,c,d))}return s&&(i=i.concat(hT(s,t,r,n))),i}}function E2(t,e,n,r){const s=e.get(at());n==null&&s!=null&&(n=fT(s,at()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=m2(r,o),d=t.operationForChild(o);d&&(i=i.concat(E2(d,a,l,c)))}),s&&(i=i.concat(hT(s,t,r,n))),i}function T2(t,e){return t.tagToQueryMap.get(e)}function b2(t){const e=t.indexOf("$");return ie(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ct(t.substr(0,e))}}function x2(t,e,n){const r=t.syncPointTree_.get(e);ie(r,"Missing sync point for query tag that we're tracking");const s=d2(t.pendingWriteTree_,e);return hT(r,n,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new pT(n)}node(){return this.node_}}class mT{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=fn(this.path_,e);return new mT(this.syncTree_,n)}node(){return _2(this.syncTree_,this.path_)}}const rQ=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},II=function(t,e,n){if(!t||typeof t!="object")return t;if(ie(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return sQ(t[".sv"],e,n);if(typeof t[".sv"]=="object")return iQ(t[".sv"],e);ie(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},sQ=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ie(!1,"Unexpected server value: "+t)}},iQ=function(t,e,n){t.hasOwnProperty("increment")||ie(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ie(!1,"Unexpected increment value: "+r);const s=e.node();if(ie(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},oQ=function(t,e,n,r){return gT(e,new mT(n,t),r)},aQ=function(t,e,n){return gT(t,new pT(e),n)};function gT(t,e,n){const r=t.getPriority().val(),s=II(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=II(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new ln(a,Mn(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new ln(s))),o.forEachChild(Fn,(a,l)=>{const c=gT(l,e.getImmediateChild(a),n);c!==l&&(i=i.updateImmediateChild(a,c))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function vT(t,e){let n=e instanceof Ct?e:new Ct(e),r=t,s=qe(n);for(;s!==null;){const i=Vc(r.node.children,s)||{children:{},childCount:0};r=new yT(s,r,i),n=xt(n),s=qe(n)}return r}function yu(t){return t.node.value}function S2(t,e){t.node.value=e,yw(t)}function I2(t){return t.node.childCount>0}function lQ(t){return yu(t)===void 0&&!I2(t)}function Hg(t,e){Zr(t.node.children,(n,r)=>{e(new yT(n,t,r))})}function C2(t,e,n,r){n&&!r&&e(t),Hg(t,s=>{C2(s,e,!0,r)}),n&&r&&e(t)}function cQ(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function $h(t){return new Ct(t.parent===null?t.name:$h(t.parent)+"/"+t.name)}function yw(t){t.parent!==null&&uQ(t.parent,t.name,t)}function uQ(t,e,n){const r=lQ(n),s=to(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,yw(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,yw(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dQ=/[\[\].#$\/\u0000-\u001F\u007F]/,hQ=/[\[\].#$\u0000-\u001F\u007F]/,lv=10*1024*1024,R2=function(t){return typeof t=="string"&&t.length!==0&&!dQ.test(t)},fQ=function(t){return typeof t=="string"&&t.length!==0&&!hQ.test(t)},pQ=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),fQ(t)},A2=function(t,e,n){const r=n instanceof Ct?new GG(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ia(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ia(r)+" with contents = "+e.toString());if(CO(e))throw new Error(t+"contains "+e.toString()+" "+Ia(r));if(typeof e=="string"&&e.length>lv/3&&pg(e)>lv)throw new Error(t+"contains a string greater than "+lv+" utf8 bytes "+Ia(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Zr(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!R2(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ia(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);KG(r,o),A2(t,a,r),QG(r)}),s&&i)throw new Error(t+' contains ".value" child '+Ia(r)+" in addition to actual children.")}},mQ=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!R2(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!pQ(n))throw new Error(tz(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gQ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function yQ(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!XO(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function wl(t,e,n){yQ(t,n),vQ(t,r=>ws(r,e)||ws(e,r))}function vQ(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(_Q(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function _Q(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();bd&&Ln("event: "+n.toString()),Uh(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wQ="repo_interrupt",EQ=25;class TQ{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new gQ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Rm(),this.transactionQueueTree_=new yT,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function bQ(t,e,n){if(t.stats_=sT(t.repoInfo_),t.forceRestClient_||vG())t.server_=new Cm(t.repoInfo_,(r,s,i,o)=>{CI(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>RI(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{vn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Mi(t.repoInfo_,e,(r,s,i,o)=>{CI(t,r,s,i,o)},r=>{RI(t,r)},r=>{SQ(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=bG(t.repoInfo_,()=>new TK(t.stats_,t.server_)),t.infoData_=new yK,t.infoSyncTree_=new SI({startListening:(r,s,i,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Bg(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),_T(t,"connected",!1),t.serverSyncTree_=new SI({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,l)=>{const c=o(a,l);wl(t.eventQueue_,r._path,c)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function xQ(t){const n=t.infoData_.getNode(new Ct(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function k2(t){return rQ({timestamp:xQ(t)})}function CI(t,e,n,r,s){t.dataUpdateCount++;const i=new Ct(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const l=tm(n,c=>Mn(c));o=nQ(t.serverSyncTree_,i,l,s)}else{const l=Mn(n);o=tQ(t.serverSyncTree_,i,l,s)}else if(r){const l=tm(n,c=>Mn(c));o=eQ(t.serverSyncTree_,i,l)}else{const l=Mn(n);o=Bg(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=ET(t,i)),wl(t.eventQueue_,a,o)}function RI(t,e){_T(t,"connected",e),e===!1&&CQ(t)}function SQ(t,e){Zr(e,(n,r)=>{_T(t,n,r)})}function _T(t,e,n){const r=new Ct("/.info/"+e),s=Mn(n);t.infoData_.updateSnapshot(r,s);const i=Bg(t.infoSyncTree_,r,s);wl(t.eventQueue_,r,i)}function IQ(t){return t.nextWriteId_++}function CQ(t){P2(t,"onDisconnectEvents");const e=k2(t),n=Rm();uw(t.onDisconnect_,at(),(s,i)=>{const o=oQ(s,i,t.serverSyncTree_,e);s2(n,s,o)});let r=[];uw(n,at(),(s,i)=>{r=r.concat(Bg(t.serverSyncTree_,s,i));const o=PQ(t,s);ET(t,o)}),t.onDisconnect_=Rm(),wl(t.eventQueue_,at(),r)}function RQ(t){t.persistentConnection_&&t.persistentConnection_.interrupt(wQ)}function P2(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ln(n,...e)}function N2(t,e,n){return _2(t.serverSyncTree_,e,n)||nt.EMPTY_NODE}function wT(t,e=t.transactionQueueTree_){if(e||qg(t,e),yu(e)){const n=O2(t,e);ie(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&AQ(t,$h(e),n)}else I2(e)&&Hg(e,n=>{wT(t,n)})}function AQ(t,e,n){const r=n.map(c=>c.currentWriteId),s=N2(t,e,r);let i=s;const o=s.hash();for(let c=0;c<n.length;c++){const d=n[c];ie(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=Hr(e,d.path);i=i.updateChild(h,d.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,c=>{P2(t,"transaction put response",{path:l.toString(),status:c});let d=[];if(c==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(tc(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();qg(t,vT(t.transactionQueueTree_,e)),wT(t,t.transactionQueueTree_),wl(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)Uh(h[f])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Pr("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}ET(t,e)}},o)}function ET(t,e){const n=D2(t,e),r=$h(n),s=O2(t,n);return kQ(t,s,r),r}function kQ(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Hr(n,l.path);let d=!1,h;if(ie(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,h=l.abortReason,s=s.concat(tc(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=EQ)d=!0,h="maxretry",s=s.concat(tc(t.serverSyncTree_,l.currentWriteId,!0));else{const f=N2(t,l.path,o);l.currentInputSnapshot=f;const p=e[a].update(f.val());if(p!==void 0){A2("transaction failed: Data returned ",p,l.path);let T=Mn(p);typeof p=="object"&&p!=null&&to(p,".priority")||(T=T.updatePriority(f.getPriority()));const w=l.currentWriteId,E=k2(t),v=aQ(T,f,E);l.currentOutputSnapshotRaw=T,l.currentOutputSnapshotResolved=v,l.currentWriteId=IQ(t),o.splice(o.indexOf(w),1),s=s.concat(ZK(t.serverSyncTree_,l.path,v,l.currentWriteId,l.applyLocally)),s=s.concat(tc(t.serverSyncTree_,w,!0))}else d=!0,h="nodata",s=s.concat(tc(t.serverSyncTree_,l.currentWriteId,!0))}wl(t.eventQueue_,n,s),s=[],d&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}qg(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Uh(r[a]);wT(t,t.transactionQueueTree_)}function D2(t,e){let n,r=t.transactionQueueTree_;for(n=qe(e);n!==null&&yu(r)===void 0;)r=vT(r,n),e=xt(e),n=qe(e);return r}function O2(t,e){const n=[];return L2(t,e,n),n.sort((r,s)=>r.order-s.order),n}function L2(t,e,n){const r=yu(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Hg(e,s=>{L2(t,s,n)})}function qg(t,e){const n=yu(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,S2(e,n.length>0?n:void 0)}Hg(e,r=>{qg(t,r)})}function PQ(t,e){const n=$h(D2(t,e)),r=vT(t.transactionQueueTree_,e);return cQ(r,s=>{cv(t,s)}),cv(t,r),C2(r,s=>{cv(t,s)}),n}function cv(t,e){const n=yu(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ie(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(ie(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(tc(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?S2(e,void 0):n.length=i+1,wl(t.eventQueue_,$h(e),s);for(let o=0;o<r.length;o++)Uh(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NQ(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function DQ(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Pr(`Invalid query segment '${n}' in query '${t}'`)}return e}const AI=function(t,e){const n=OQ(t),r=n.namespace;n.domain==="firebase.com"&&Xi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Xi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||uG();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new jO(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Ct(n.pathString)}},OQ=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(s=NQ(t.substring(d,h)));const f=DQ(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const T=e.indexOf(".");r=e.substring(0,T).toLowerCase(),n=e.substring(T+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return $e(this._path)?null:KO(this._path)}get ref(){return new vu(this._repo,this._path)}get _queryIdentifier(){const e=pI(this._queryParams),n=nT(e);return n==="{}"?"default":n}get _queryObject(){return pI(this._queryParams)}isEqual(e){if(e=et(e),!(e instanceof TT))return!1;const n=this._repo===e._repo,r=XO(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+qG(this._path)}}class vu extends TT{constructor(e,n){super(e,n,new lT,!1)}get parent(){const e=YO(this._path);return e===null?null:new vu(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}XK(vu);JK(vu);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LQ="FIREBASE_DATABASE_EMULATOR_HOST",vw={};let MQ=!1;function FQ(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=ai(i);t.repoInfo_=new jO(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function VQ(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Xi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ln("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=AI(i,s),a=o.repoInfo,l;typeof process<"u"&&QS&&(l=QS[LQ]),l?(i=`http://${l}?ns=${a.namespace}`,o=AI(i,s),a=o.repoInfo):o.repoInfo.secure;const c=new wG(t.name,t.options,e);mQ("Invalid Firebase Database URL",o),$e(o.path)||Xi("Database URL must point to the root of a Firebase Database (not including a child path).");const d=UQ(a,t,c,new _G(t,n));return new zQ(d,t)}function jQ(t,e){const n=vw[e];(!n||n[t.key]!==t)&&Xi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),RQ(t),delete n[t.key]}function UQ(t,e,n,r){let s=vw[e.name];s||(s={},vw[e.name]=s);let i=s[t.toURLString()];return i&&Xi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new TQ(t,MQ,n,r),s[t.toURLString()]=i,i}class zQ{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(bQ(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vu(this._repo,at())),this._rootInternal}_delete(){return this._rootInternal!==null&&(jQ(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Xi("Cannot call "+e+" on a deleted database.")}}function kI(t=bh(),e){const n=no(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=J0("database");r&&$Q(n,...r)}return n}function $Q(t,e,n,r={}){t=et(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&Hi(r,i.repoInfo_.emulatorOptions))return;Xi("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Xi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new pp(pp.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:eE(r.mockUserToken,t.app.options.projectId);o=new pp(a)}ai(e)&&(hg(e),fg("Database",!0)),FQ(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BQ(t){sG(ga),Xr(new Dr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return VQ(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Vn(YS,XS,t),Vn(YS,XS,"esm2017")}Mi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Mi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};BQ();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="firebasestorage.googleapis.com",F2="storageBucket",WQ=2*60*1e3,HQ=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn extends es{constructor(e,n,r=0){super(uv(e),`Firebase Storage: ${n} (${uv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,bn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return uv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Tn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Tn||(Tn={}));function uv(t){return"storage/"+t}function qQ(){const t="An unknown error occurred, please check the error payload for server response.";return new bn(Tn.UNKNOWN,t)}function GQ(t){return new bn(Tn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function KQ(t){return new bn(Tn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function QQ(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new bn(Tn.UNAUTHENTICATED,t)}function YQ(){return new bn(Tn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function XQ(t){return new bn(Tn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function JQ(){return new bn(Tn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ZQ(){return new bn(Tn.CANCELED,"User canceled the upload/download.")}function eY(t){return new bn(Tn.INVALID_URL,"Invalid URL '"+t+"'.")}function tY(t){return new bn(Tn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function nY(){return new bn(Tn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+F2+"' property when initializing the app?")}function _w(t){return new bn(Tn.INVALID_ARGUMENT,t)}function V2(){return new bn(Tn.APP_DELETED,"The Firebase app was deleted.")}function rY(t){return new bn(Tn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qu(t){throw new bn(Tn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=qr.makeFromUrl(e,n)}catch{return new qr(e,"")}if(r.path==="")return r;throw tY(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(C){C.path_=decodeURIComponent(C.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),T={bucket:1,path:3},y=n===M2?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",E=new RegExp(`^https?://${y}/${s}/${w}`,"i"),S=[{regex:a,indices:l,postModify:i},{regex:p,indices:T,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let C=0;C<S.length;C++){const O=S[C],M=O.regex.exec(e);if(M){const b=M[O.indices.bucket];let I=M[O.indices.path];I||(I=""),r=new qr(b,I),O.postModify(r);break}}if(r==null)throw eY(e);return r}}class sY{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iY(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...w){c||(c=!0,e.apply(null,w))}function h(w){s=setTimeout(()=>{s=null,t(p,l())},w)}function f(){i&&clearTimeout(i)}function p(w,...E){if(c){f();return}if(w){f(),d.call(null,w,...E);return}if(l()||o){f(),d.call(null,w,...E);return}r<64&&(r*=2);let S;a===1?(a=2,S=0):S=(r+Math.random())*1e3,h(S)}let T=!1;function y(w){T||(T=!0,f(),!c&&(s!==null?(w||(a=2),clearTimeout(s),h(0)):w||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,y(!0)},n),y}function oY(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aY(t){return t!==void 0}function PI(t,e,n,r){if(r<e)throw _w(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw _w(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lY(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function cY(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ha;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ha||(Ha={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uY(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dY{constructor(e,n,r,s,i,o,a,l,c,d,h,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,y)=>{this.resolve_=T,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Vf(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Ha.NO_ERROR,l=i.getStatus();if(!a||uY(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Ha.ABORT;r(!1,new Vf(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Vf(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());aY(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=qQ();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?V2():ZQ();o(l)}else{const l=JQ();o(l)}};this.canceled_?n(!1,new Vf(!1,null,!0)):this.backoffId_=iY(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&oY(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Vf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function hY(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function fY(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function pY(t,e){e&&(t["X-Firebase-GMPID"]=e)}function mY(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function gY(t,e,n,r,s,i,o=!0,a=!1){const l=cY(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return pY(d,e),hY(d,n),fY(d,i),mY(d,r),new dY(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yY(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function vY(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function _Y(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class wY{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function EY(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=YQ():s=QQ():n.getStatus()===402?s=KQ(t.bucket):n.getStatus()===403?s=XQ(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function TY(t){const e=EY(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=GQ(t.path)),i.serverResponse=s.serverResponse,i}return n}function bY(t,e){const n=e.fullServerUrl(),r=lY(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new wY(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=TY(e),a}class xY{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ha.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ha.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ha.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw qu("cannot .send() more than once");if(ai(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw qu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class SY extends xY{initXhr(){this.xhr_.responseType="text"}}function IY(){return new SY}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n){this._service=e,n instanceof qr?this._location=n:this._location=qr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new cl(e,n)}get root(){const e=new qr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _Y(this._location.path)}get storage(){return this._service}get parent(){const e=yY(this._location.path);if(e===null)return null;const n=new qr(this._location.bucket,e);return new cl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw rY(e)}}function CY(t){t._throwIfRoot("deleteObject");const e=bY(t.storage,t._location);return t.storage.makeRequestWithTokens(e,IY)}function RY(t,e){const n=vY(t._location.path,e),r=new qr(t._location.bucket,n);return new cl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AY(t){return/^[A-Za-z]+:\/\//.test(t)}function kY(t,e){return new cl(t,e)}function j2(t,e){if(t instanceof bT){const n=t;if(n._bucket==null)throw nY();const r=new cl(n,n._bucket);return e!=null?j2(r,e):r}else return e!==void 0?RY(t,e):t}function PY(t,e){if(e&&AY(e)){if(t instanceof bT)return kY(t,e);throw _w("To use ref(service, url), the first argument must be a Storage instance.")}else return j2(t,e)}function NI(t,e){const n=e==null?void 0:e[F2];return n==null?null:qr.makeFromBucketSpec(n,t)}function NY(t,e,n,r={}){t.host=`${e}:${n}`;const s=ai(e);s&&(hg(`https://${t.host}/b`),fg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:eE(i,t.app.options.projectId))}class bT{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=M2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=WQ,this._maxUploadRetryTime=HQ,this._requests=new Set,s!=null?this._bucket=qr.makeFromBucketSpec(s,this._host):this._bucket=NI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qr.makeFromBucketSpec(this._url,e):this._bucket=NI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){PI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){PI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cl(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new sY(V2());{const o=gY(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const DI="@firebase/storage",OI="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2="storage";function zZ(t){return t=et(t),CY(t)}function $Z(t,e){return t=et(t),PY(t,e)}function LI(t=bh(),e){t=et(t);const r=no(t,U2).getImmediate({identifier:e}),s=J0("storage");return s&&DY(r,...s),r}function DY(t,e,n,r={}){NY(t,e,n,r)}function OY(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new bT(n,r,s,e,ga)}function LY(){Xr(new Dr(U2,OY,"PUBLIC").setMultipleInstances(!0)),Vn(DI,OI,""),Vn(DI,OI,"esm2017")}LY();const MI={apiKey:"AIzaSyCloqjpaVe56iwMq_J7QFtkw9r8t9Z7tIk",authDomain:"revpad-15232.firebaseapp.com",projectId:"revpad-15232",storageBucket:"revpad-15232.firebasestorage.app",messagingSenderId:"189145988180",appId:"1:189145988180:web:e4a3078221072432a001c1",measurementId:"G-EREJTZ924E",databaseURL:""},MY=t=>t.includes(".firebasestorage.app")?t.replace(".firebasestorage.app",".appspot.com"):t,Cd={...MI,storageBucket:MY(MI.storageBucket)},FY=Cd.apiKey&&Cd.projectId;let wr,z2=null,Te=null,ww=null,dt=null,Ew=null;if(y1().length===0)try{if(!FY)console.warn("  Firebase balatlamad - config eksik, uygulama snrl modda alacak");else{if(wr=DP(Cd),typeof window<"u")try{z2=eG(wr)}catch{}try{if(Te=Ky(wr),!Te)throw new Error("Firebase Auth instance oluturulamad")}catch{Te=null}if(Cd.databaseURL)try{ww=kI(wr)}catch{}try{dt=sw(wr)}catch{}try{Ew=LI(wr)}catch{}}}catch{}else{const t=y1();if(t.length>0){wr=t[0];try{Te=Ky(wr),Te||(Te=Ky(wr))}catch{Te=null}if(Cd.databaseURL)try{ww=kI(wr)}catch{}try{dt=sw(wr)}catch{}try{Ew=LI(wr)}catch{}}}const St=dt,VY=Object.freeze(Object.defineProperty({__proto__:null,get analytics(){return z2},get app(){return wr},get auth(){return Te},get database(){return ww},db:St,get firestore(){return dt},get storage(){return Ew}},Symbol.toStringTag,{value:"Module"})),Fi="departments",Bh=async()=>{var t;try{if(!St)throw new Error("Firebase Firestore balatlamad. Ltfen .env dosyasnda Firebase yaplandrmasn kontrol edin.");let e;try{const r=Zn(St,Fi);e=await Or(r)}catch{return[]}const n=[];for(const r of e.docs){const s=r.data(),i={id:r.id,...s};if(i.managerId)try{const{getUserProfile:o}=await tt(async()=>{const{getUserProfile:l}=await Promise.resolve().then(()=>GY);return{getUserProfile:l}},void 0),a=await o(i.managerId,!1);a&&!a.deleted?i.managerName=a.fullName||a.displayName||a.email:(i.managerName=void 0,$n(Bt(St,Fi,r.id),{managerId:null,updatedAt:Le.now()}).catch(l=>{console.error("Error clearing deleted manager:",l)}))}catch(o){(t=o.message)!=null&&t.includes("silinmi")&&(i.managerName=void 0,$n(Bt(St,Fi,r.id),{managerId:null,updatedAt:Le.now()}).catch(a=>{console.error("Error clearing deleted manager:",a)}))}try{const o=Zn(St,"users"),a=Qn(o,Li("departmentId","==",r.id)),l=await Or(a);i.userCount=l.size}catch{i.userCount=0}n.push(i)}return n}catch{return[]}},jY=async t=>{var e;try{if(!St)throw new Error("Firebase Firestore balatlamad. Ltfen .env dosyasnda Firebase yaplandrmasn kontrol edin.");const n=Bt(St,Fi,t),r=await pu(n);if(!r.exists())return null;const s=r.data(),i={id:r.id,...s};if(i.managerId)try{const o=await si(i.managerId,!1);if(o&&!o.deleted)i.managerName=o.fullName||o.displayName||o.email;else{i.managerName=void 0;try{await $n(Bt(St,Fi,t),{managerId:null,updatedAt:Le.now()})}catch(a){console.error("Error clearing deleted manager:",a)}}}catch(o){if((e=o.message)!=null&&e.includes("silinmi")){i.managerName=void 0;try{await $n(Bt(St,Fi,t),{managerId:null,updatedAt:Le.now()})}catch(a){console.error("Error clearing deleted manager:",a)}}else console.error("Error fetching manager:",o)}return i}catch(n){throw console.error("Error getting department:",n),new Error(n.message||"Departman yklenemedi")}},$2=async(t,e=null,n=null)=>{try{if(!St)throw new Error("Firebase Firestore balatlamad. Ltfen .env dosyasnda Firebase yaplandrmasn kontrol edin.");const r=Zn(St,Fi),s={name:t,description:e,managerId:n,createdAt:Le.now(),updatedAt:Le.now()};return(await YE(r,s)).id}catch(r){throw console.error("Error creating department:",r),new Error(r.message||"Departman oluturulamad")}},B2=async(t,e)=>{try{if(!St)throw new Error("Firebase Firestore balatlamad. Ltfen .env dosyasnda Firebase yaplandrmasn kontrol edin.");const n=Bt(St,Fi,t);await $n(n,{...e,updatedAt:Le.now()})}catch(n){throw console.error("Error updating department:",n),new Error(n.message||"Departman gncellenemedi")}},UY=async t=>{try{if(!St)throw new Error("Firebase Firestore balatlamad. Ltfen .env dosyasnda Firebase yaplandrmasn kontrol edin.");const e=Bt(St,Fi,t);await JD(e)}catch(e){throw console.error("Error deleting department:",e),new Error(e.message||"Departman silinemedi")}},zY=async()=>{try{const t=[{name:"Elektrik Ekibi",description:"Elektrik Departman"},{name:"Mekanik Ekip",description:"Mekanik Departman"},{name:"Yazlm Ekibi",description:"Yazlm Departman"},{name:"Ynetim",description:"Ynetim Departman"}],n=(await Bh()).map(r=>r.name);for(const r of t)n.includes(r.name)||await $2(r.name,r.description,null)}catch(t){throw console.error("Error creating default departments:",t),new Error(t.message||"Varsaylan departmanlar oluturulamad")}},dv=Object.freeze(Object.defineProperty({__proto__:null,createDefaultDepartments:zY,createDepartment:$2,deleteDepartment:UY,getDepartmentById:jY,getDepartments:Bh,updateDepartment:B2},Symbol.toStringTag,{value:"Module"})),Qc="audit_logs",W2=async(t,e,n,r=null,s=null,i=null)=>{try{const o=Zn(St,Qc),a={userId:i,action:t,tableName:e,recordId:n,oldData:r,newData:s,createdAt:Le.now()};return(await YE(o,a)).id}catch(o){return console.error("Error creating audit log:",o),""}},H2=async t=>{var e;try{const n=Zn(St,Qc);let r=Qn(n,qc("createdAt","desc"));const s=(t==null?void 0:t.limit)||100;r=Qn(r,Em(s)),t!=null&&t.action&&(r=Qn(r,Li("action","==",t.action))),t!=null&&t.tableName&&(r=Qn(r,Li("tableName","==",t.tableName))),t!=null&&t.userId&&(r=Qn(r,Li("userId","==",t.userId)));const i=await Or(r),o=[],a=new Set;for(const c of i.docs){const d=c.data(),h={id:c.id,...d};h.userId&&a.add(h.userId),o.push(h)}const l=new Map;if(a.size>0)try{(await qa()).forEach(d=>{a.has(d.id)&&l.set(d.id,{fullName:d.fullName||d.displayName,email:d.email})})}catch(c){console.error("Error fetching users:",c)}return o.forEach(c=>{if(c.userId){const d=l.get(c.userId);d&&(c.userName=d.fullName||d.email,c.userEmail=d.email)}}),o}catch(n){if((n==null?void 0:n.code)==="failed-precondition"||(e=n==null?void 0:n.message)!=null&&e.includes("index")){console.warn("Audit logs index bulunamad, basit query kullanlyor");try{const r=(t==null?void 0:t.limit)||100,s=Qn(Zn(St,Qc),qc("createdAt","desc"),Em(r));let o=(await Or(s)).docs.map(c=>{const d=c.data();return{id:c.id,...d}});t!=null&&t.action&&(o=o.filter(c=>c.action===t.action)),t!=null&&t.tableName&&(o=o.filter(c=>c.tableName===t.tableName)),t!=null&&t.userId&&(o=o.filter(c=>c.userId===t.userId)),o.sort((c,d)=>{var p,T;const h=((p=c.createdAt)==null?void 0:p.toMillis())||0;return(((T=d.createdAt)==null?void 0:T.toMillis())||0)-h});const a=new Set(o.map(c=>c.userId).filter(Boolean)),l=new Map;if(a.size>0)try{(await qa()).forEach(d=>{a.has(d.id)&&l.set(d.id,{fullName:d.fullName||d.displayName,email:d.email})})}catch(c){console.error("Error fetching users:",c)}return o.forEach(c=>{if(c.userId){const d=l.get(c.userId);d&&(c.userName=d.fullName||d.email,c.userEmail=d.email)}}),o}catch(r){return console.error("Fallback query de baarsz:",r),[]}}throw console.error("Error getting audit logs:",n),new Error(n.message||"Audit loglar yklenemedi")}},$Y=async()=>H2({limit:10}),BY=async t=>{var e;try{const[n,r]=await Promise.all([Bh(),qa()]),s=n.filter(d=>d.managerId===t),i={managedTeams:s.map(d=>({id:d.id,name:d.name})),teamMembers:[]};if(s.length===0)return{logs:[],teamInfo:i};const o=s.map(d=>d.id),a=r.filter(d=>{const h=d.approvedTeams||[],f=d.pendingTeams||[];return[...h,...f].some(p=>o.includes(p))});i.teamMembers=a.map(d=>({id:d.id,name:d.fullName||d.email,email:d.email}));const c=[...a.map(d=>d.id),t];try{const d=Zn(St,Qc),h=await Or(Qn(d,qc("createdAt","desc"),Em(500))),f=[],p=new Set;for(const y of h.docs){const w=y.data();if(w.userId&&c.includes(w.userId)){const E={id:y.id,...w};E.userId&&p.add(E.userId),f.push(E)}}const T=new Map;if(p.size>0)try{(await qa()).forEach(w=>{p.has(w.id)&&T.set(w.id,{fullName:w.fullName||w.displayName,email:w.email})})}catch(y){console.error("Error fetching users:",y)}return f.forEach(y=>{if(y.userId){const w=T.get(y.userId);w&&(y.userName=w.fullName||w.email,y.userEmail=w.email)}}),{logs:f,teamInfo:i}}catch(d){if((d==null?void 0:d.code)==="failed-precondition"||(e=d==null?void 0:d.message)!=null&&e.includes("index")){console.warn("Team member logs index bulunamad, basit query kullanlyor");try{const h=Qn(Zn(St,Qc),qc("createdAt","desc"));let p=(await Or(h)).docs.map(w=>{const E=w.data();return{id:w.id,...E}}).filter(w=>w.userId&&c.includes(w.userId));p.sort((w,E)=>{var C,O;const v=((C=w.createdAt)==null?void 0:C.toMillis())||0;return(((O=E.createdAt)==null?void 0:O.toMillis())||0)-v});const T=new Set(p.map(w=>w.userId).filter(Boolean)),y=new Map;if(T.size>0)try{(await qa()).forEach(E=>{T.has(E.id)&&y.set(E.id,{fullName:E.fullName||E.displayName,email:E.email})})}catch(w){console.error("Error fetching users:",w)}return p.forEach(w=>{if(w.userId){const E=y.get(w.userId);E&&(w.userName=E.fullName||E.email,w.userEmail=E.email)}}),{logs:p,teamInfo:i}}catch(h){return console.error("Fallback query de baarsz:",h),{logs:[],teamInfo:i}}}throw d}}catch(n){return console.error("Error getting team member logs:",n),{logs:[],teamInfo:{managedTeams:[],teamMembers:[]}}}},WY=async t=>{try{const e=Zn(St,Qc),n=Qn(e,Li("userId","==",t)),r=await Or(n),s=500,i=r.docs;for(let o=0;o<i.length;o+=s){const a=tO(St);i.slice(o,o+s).forEach(c=>{a.delete(c.ref)}),await a.commit()}}catch(e){throw console.error("Error deleting user logs:",e),e}},FI=Object.freeze(Object.defineProperty({__proto__:null,createAuditLog:W2,deleteUserLogs:WY,getAuditLogs:H2,getRecentActivities:$Y,getTeamMemberLogs:BY},Symbol.toStringTag,{value:"Module"})),xT=async(t,e,n,r,s=null,i=null)=>{try{await W2(t,e,n,s,i,r)}catch(o){console.warn("Audit log oluturulamad:",o)}},q2=async(t,e,n,r,s,i)=>{var o,a,l;try{if(!Te)throw new Error("Firebase Auth is not initialized");const d=(await vB(Te,t,e)).user;if(dt)try{const p=Zn(dt,"users"),T=Qn(p,Li("email","==",t)),y=await Or(T);if(!y.empty&&y.docs[0].data().deleted===!0){try{await bB(d)}catch(E){console.error("Kullanc silinirken hata:",E)}throw new Error("Bu e-posta adresi ile kaytl bir hesap silinmi. Yeni bir hesap oluturamazsnz.")}}catch(p){console.warn("Silinmi kullanc kontrol yaplamad:",(p==null?void 0:p.message)||p)}const h=d.uid,f={email:t,displayName:n,fullName:n,role:["viewer"],emailVerified:d.emailVerified,createdAt:_s(),updatedAt:_s(),pendingTeams:i?[i]:[],approvedTeams:[]};if(r&&r.trim()!==""&&(f.phone=r.trim()),s&&s.trim()!==""&&(f.dateOfBirth=s.trim()),!dt)throw new Error("Firestore is not initialized");return(!Te.currentUser||Te.currentUser.uid!==h)&&await new Promise((p,T)=>{let y=null,w=null,E=!1,v=!1;const S=()=>{w&&(clearTimeout(w),w=null),y&&(y(),y=null)};w=setTimeout(()=>{E||(S(),T(new Error("Auth state gncellenmesi iin timeout (3 saniye)")))},3e3),y=oN(Te,C=>{if(!v){if(v=!0,C&&C.uid===h){E=!0,S(),p();return}return}E||C&&C.uid===h&&(E=!0,S(),p())})}),await QE(Bt(dt,"users",h),f),n&&await iN(d,{displayName:n}),await sN(d),{success:!0,message:"Kayt baarl! Ltfen e-posta adresinize gnderilen dorulama balantsna tklayarak hesabnz aktifletirin.",user:{id:h,email:t,displayName:n,fullName:n,phone:r||void 0,dateOfBirth:s||void 0,role:["viewer"],pendingTeams:i?[i]:[],approvedTeams:[],emailVerified:!1,createdAt:new Date,updatedAt:new Date}}}catch(c){let d="Kayt baarsz";const h=["auth/email-already-in-use","auth/invalid-email","auth/weak-password","auth/operation-not-allowed"].includes(c.code);return c.code==="auth/email-already-in-use"?d="Bu e-posta adresi zaten kaytl. Ltfen giri yapmay deneyin. Eer ifrenizi unuttuysanz, ifre sfrlama zelliini kullanabilirsiniz.":c.code==="auth/invalid-email"?d="Geersiz e-posta adresi. Ltfen geerli bir e-posta adresi girin.":c.code==="auth/weak-password"?d="ifre ok zayf. ifre en az 6 karakter olmaldr.":c.code==="auth/operation-not-allowed"?d="E-posta/ifre ile kayt u anda devre d. Ltfen yneticiye bavurun.":c.code==="permission-denied"||(o=c.message)!=null&&o.includes("permissions")?d="Firestore izin hatas. Ltfen Firebase Console'da Security Rules'u kontrol edin. Detaylar: "+(c.message||"zin reddedildi"):(a=c.message)!=null&&a.includes("Unsupported field value: undefined")?d="Form verilerinde eksik veya geersiz alanlar var. Ltfen tm zorunlu alanlar doldurun ve tekrar deneyin.":(l=c.message)!=null&&l.includes("invalid data")?d="Gnderilen veriler geersiz. Ltfen tm alanlar kontrol edip tekrar deneyin.":c.message&&(d=c.message),h||console.error("Register error:",c),{success:!1,message:d,user:null}}},G2=async(t,e)=>{var n,r;try{if(!Te||!dt)throw new Error("Firebase is not initialized");const i=(await _B(Te,t,e)).user;try{const o=await pu(Bt(dt,"users",i.uid));if(o.exists()&&o.data().deleted===!0){try{await xs(Te)}catch(l){console.error("k yaplrken hata:",l)}return{success:!1,message:"Bu hesap silinmi. Giri yapamazsnz.",user:null}}}catch(o){console.error("Kullanc kontrol hatas:",o)}try{let o=await si(i.uid);if(!o){try{await xs(Te)}catch(a){console.error("k yaplrken hata:",a)}return{success:!1,message:"Bu hesap silinmi. Giri yapamazsnz.",user:null}}try{const a=o.lastLoginAt;await $n(Bt(dt,"users",i.uid),{lastLoginAt:_s()}),await new Promise(c=>setTimeout(c,100));const l=await si(i.uid);l&&(o=l);try{const c=new Date().toISOString();await xT("UPDATE","user_logins",i.uid,i.uid,{lastLoginAt:a?a instanceof Le?a.toDate().toISOString():String(a):null},{lastLoginAt:c,action:"LOGIN",method:"EMAIL",email:t,userId:i.uid,timestamp:c})}catch(c){console.error("Giri logu kaydedilirken hata:",c)}}catch(a){console.error("Son giri zaman gncellenirken hata:",a)}return{success:!0,user:o}}catch(o){if((n=o.message)!=null&&n.includes("silinmi")){try{await xs(Te)}catch(a){console.error("k yaplrken hata:",a)}return{success:!1,message:"Bu hesap silinmi. Giri yapamazsnz.",user:null}}throw o}}catch(s){if(console.error("Login error:",s),(r=s.message)!=null&&r.includes("silinmi"))return{success:!1,message:"Bu hesap silinmi. Giri yapamazsnz.",user:null};let i="Giri baarsz";return s.code==="auth/user-not-found"?i="Bu e-posta adresi kaytl deil. Ltfen kayt olun.":s.code==="auth/wrong-password"||s.code==="auth/invalid-credential"?i="E-posta adresi veya ifre hatal. Ltfen bilgilerinizi kontrol edip tekrar deneyin.":s.code==="auth/invalid-email"?i="Geersiz e-posta adresi. Ltfen geerli bir e-posta adresi girin.":s.code==="auth/user-disabled"?i="Bu hesap devre d braklm. Ltfen yneticiye bavurun.":s.code==="auth/too-many-requests"?i="ok fazla baarsz giri denemesi. Ltfen birka dakika sonra tekrar deneyin.":s.code==="auth/network-request-failed"?i="nternet balantnz kontrol edin ve tekrar deneyin.":s.message&&(i=s.message),{success:!1,message:i,user:null}}},K2=async()=>{var t,e;try{if(!Te)return{success:!1,message:"Firebase Auth is not initialized"};const n=(t=Te.currentUser)==null?void 0:t.uid,r=(e=Te.currentUser)==null?void 0:e.email;if(n)try{const s=new Date().toISOString();await xT("UPDATE","user_logins",n,n,{},{action:"LOGOUT",timestamp:s,email:r||null,userId:n})}catch(s){console.error("k logu kaydedilirken hata:",s)}return await xs(Te),{success:!0}}catch(n){return console.error("Logout error:",n),{success:!1,message:n.message||"k baarsz"}}},Q2=async t=>{try{if(!Te)throw new Error("Firebase Auth is not initialized");return await gB(Te,t),{success:!0,message:"ifre sfrlama e-postas gnderildi"}}catch(e){console.error("Reset password error:",e);let n="ifre sfrlama baarsz";return e.code==="auth/user-not-found"?n="Bu e-posta adresi kaytl deil":e.code==="auth/invalid-email"?n="Geersiz e-posta adresi":e.message&&(n=e.message),{success:!1,message:n}}},si=async(t,e=!1)=>{var n;try{if(!dt)return console.error("Firestore is not initialized"),null;const r=await pu(Bt(dt,"users",t));if(!r.exists())return null;const s=r.data(),i=(Te==null?void 0:Te.currentUser)||null;if(s.deleted===!0){if(e)return{id:t,email:s.email||"",displayName:"Silinmi Kullanc",fullName:"Silinmi Kullanc",phone:null,dateOfBirth:null,role:[],departmentId:null,emailVerified:!1,createdAt:s.createdAt,updatedAt:s.updatedAt};if(i&&i.uid===t&&Te)try{await xs(Te)}catch(f){console.error("k yaplrken hata:",f)}throw new Error("Bu hesap silinmi. Giri yapamazsnz.")}const{getRoles:o}=await tt(async()=>{const{getRoles:f}=await import("./rolePermissionsService-CoZ8Qmsy.js");return{getRoles:f}},[]),a=await o(),l=new Set(a.map(f=>f.key)),c=s.role||[],d=c.filter(f=>l.has(f)),h=d.length>0?d:["personnel"];return JSON.stringify(c)!==JSON.stringify(h)&&await $n(r.ref,{role:h}),{id:t,email:s.email||(i==null?void 0:i.email)||"",displayName:s.displayName||(i==null?void 0:i.displayName)||"",fullName:s.fullName,phone:s.phone,dateOfBirth:s.dateOfBirth,role:h,departmentId:s.departmentId,emailVerified:s.emailVerified||(i==null?void 0:i.emailVerified)||!1,createdAt:s.createdAt,updatedAt:s.updatedAt,lastLoginAt:s.lastLoginAt}}catch(r){return console.error("Get user profile error:",r),(r.code==="permission-denied"||(n=r.message)!=null&&n.includes("permissions"))&&(console.warn(" Firestore permissions hatas! Firebase Console'da Security Rules'u kontrol edin:"),console.warn("   https://console.firebase.google.com/project/revpad-15232/firestore/rules"),console.warn("   Geici zm iin test mode kurallar kullann:"),console.warn("   match /{document=**} { allow read, write: if request.auth != null; }")),null}},Y2=async(t,e)=>{try{if(!dt)throw new Error("Firestore is not initialized");const n={updatedAt:_s()};return Object.keys(e).forEach(r=>{const s=e[r];s!==void 0&&(n[r]=s)}),await $n(Bt(dt,"users",t),n),e.displayName&&(Te!=null&&Te.currentUser)&&await iN(Te.currentUser,{displayName:e.displayName}),{success:!0}}catch(n){return console.error("Update user profile error:",n),{success:!1,message:n.message||"Profil gncellenemedi"}}},HY=Y2;let VI=new Map;const X2=t=>Te?oN(Te,async e=>{var n;if(e){if(dt)try{const r=await pu(Bt(dt,"users",e.uid));if(r.exists()&&r.data().deleted===!0){try{await xs(Te)}catch(i){console.error("k yaplrken hata:",i)}t(null);return}}catch(r){console.error("Kullanc kontrol hatas:",r)}try{let r=await si(e.uid);if(!r){try{await xs(Te)}catch(a){console.error("k yaplrken hata:",a)}t(null);return}const s=Date.now(),i=VI.get(e.uid)||0;if(s-i>1*60*1e3||i===0)try{const a=r.lastLoginAt;let l=!1;if(!a)l=!0;else try{let c;if(a instanceof Le)c=a.toDate();else if(a&&typeof a=="object"&&"toDate"in a)c=a.toDate();else if(a&&typeof a=="object"&&"_seconds"in a){const d=Number(a._seconds),h=Number(a._nanoseconds)||0;c=new Le(d,h).toDate()}else l=!0;!l&&c&&Math.floor((s-c.getTime())/6e4)>30&&(l=!0)}catch{l=!0}if(l){await $n(Bt(dt,"users",e.uid),{lastLoginAt:_s()}),VI.set(e.uid,s),await new Promise(d=>setTimeout(d,200));const c=await si(e.uid);c&&(r=c)}}catch(a){console.error("Son giri zaman gncellenirken hata (onAuthChange):",a)}t(r)}catch(r){if((n=r.message)!=null&&n.includes("silinmi")){try{await xs(Te)}catch(s){console.error("k yaplrken hata:",s)}t(null)}else t(null)}}else t(null)}):(console.error("Firebase Auth is not initialized"),t(null),()=>{}),qa=async()=>{var t,e;try{if(!dt)throw new Error("Firestore is not initialized");const{getRoles:n}=await tt(async()=>{const{getRoles:i}=await import("./rolePermissionsService-CoZ8Qmsy.js");return{getRoles:i}},[]),r=await n(),s=new Set(r.map(i=>i.key));try{const i=Qn(Zn(dt,"users"),qc("displayName","asc"));return(await Or(i)).docs.map(l=>{const c=l.data();if(c.deleted===!0)return null;const d=c.role||[],h=d.filter(p=>s.has(p)),f=h.length>0?h:["personnel"];return JSON.stringify(d)!==JSON.stringify(f)&&$n(l.ref,{role:f}).catch(p=>{console.error(`Error syncing roles for user ${l.id}:`,p)}),{id:l.id,email:c.email||"",displayName:c.displayName||c.fullName||"",fullName:c.fullName||c.displayName||"",phone:c.phone||"",dateOfBirth:c.dateOfBirth||"",role:f,departmentId:c.departmentId||"",pendingTeams:c.pendingTeams||[],approvedTeams:c.approvedTeams||[],teamLeaderIds:c.teamLeaderIds||[],emailVerified:c.emailVerified||!1,createdAt:c.createdAt||null,updatedAt:c.updatedAt||null,lastLoginAt:c.lastLoginAt||null}}).filter(l=>l!==null&&!!l.id&&!!(l.displayName||l.fullName||l.email))}catch(i){console.warn("OrderBy failed, fetching without order:",(i==null?void 0:i.message)||i);const{getRoles:o}=await tt(async()=>{const{getRoles:h}=await import("./rolePermissionsService-CoZ8Qmsy.js");return{getRoles:h}},[]),a=await o(),l=new Set(a.map(h=>h.key));return(await Or(Zn(dt,"users"))).docs.map(h=>{const f=h.data();if(f.deleted===!0)return null;const p=f.role||[],T=p.filter(w=>l.has(w)),y=T.length>0?T:["personnel"];return JSON.stringify(p)!==JSON.stringify(y)&&$n(h.ref,{role:y}).catch(w=>{console.error(`Error syncing roles for user ${h.id}:`,w)}),{id:h.id,email:f.email||"",displayName:f.displayName||f.fullName||"",fullName:f.fullName||f.displayName||"",phone:f.phone||"",dateOfBirth:f.dateOfBirth||"",role:y,departmentId:f.departmentId||"",pendingTeams:f.pendingTeams||[],approvedTeams:f.approvedTeams||[],teamLeaderIds:f.teamLeaderIds||[],emailVerified:f.emailVerified||!1,createdAt:f.createdAt||null,updatedAt:f.updatedAt||null,lastLoginAt:f.lastLoginAt||null}}).filter(h=>h!==null&&!!h.id&&!!(h.displayName||h.fullName||h.email)).sort((h,f)=>{const p=(h.displayName||h.fullName||"").toLowerCase(),T=(f.displayName||f.fullName||"").toLowerCase();return p.localeCompare(T,"tr")})}}catch(n){return console.error("Get all users error:",n),n.code==="permission-denied"||(t=n.message)!=null&&t.includes("permissions")?(console.error(" Firestore permissions hatas! Kullanc listesi alnamyor."),console.error(" Firebase Console'da Security Rules'u kontrol edin:"),console.error("   https://console.firebase.google.com/project/revpad-15232/firestore/rules"),console.error("   Users collection iin read izni olmal: allow read: if request.auth != null;")):n.code==="unavailable"||(e=n.message)!=null&&e.includes("network")?console.error(" Firestore balant hatas! nternet balantnz kontrol edin."):console.error(" Kullanc listesi alnamad:",n.message||n),[]}},J2=async()=>{var t;try{if(!Te)throw new Error("Firebase Auth is not initialized");const e=new xi;e.addScope("https://www.googleapis.com/auth/drive.file");const r=(await BB(Te,e)).user;try{const s=await pu(Bt(dt,"users",r.uid));if(s.exists()&&s.data().deleted===!0){try{await xs(Te)}catch(o){console.error("k yaplrken hata:",o)}return{success:!1,message:"Bu hesap silinmi. Giri yapamazsnz.",user:null}}}catch(s){console.error("Kullanc kontrol hatas:",s)}try{let s=await si(r.uid);if(!s){try{await xs(Te)}catch(a){console.error("k yaplrken hata:",a)}return{success:!1,message:"Bu hesap silinmi. Giri yapamazsnz.",user:null}}const i=s.lastLoginAt;await $n(Bt(dt,"users",r.uid),{displayName:r.displayName,fullName:r.displayName,emailVerified:r.emailVerified,updatedAt:_s(),lastLoginAt:_s()}),await new Promise(a=>setTimeout(a,100));const o=await si(r.uid);o&&(s=o);try{const a=new Date().toISOString();await xT("UPDATE","user_logins",r.uid,r.uid,{lastLoginAt:i?i instanceof Le?i.toDate().toISOString():String(i):null},{lastLoginAt:a,action:"LOGIN",method:"GOOGLE",email:r.email,userId:r.uid,timestamp:a})}catch(a){console.error("Giri logu kaydedilirken hata:",a)}return{success:!0,user:s}}catch(s){if((t=s.message)!=null&&t.includes("silinmi")){try{await xs(Te)}catch(o){console.error("k yaplrken hata:",o)}return{success:!1,message:"Bu hesap silinmi. Giri yapamazsnz.",user:null}}const i={id:r.uid,email:r.email||"",displayName:r.displayName||"",fullName:r.displayName||"",role:["viewer"],emailVerified:r.emailVerified,createdAt:_s(),updatedAt:_s(),pendingTeams:[],approvedTeams:[]};return await QE(Bt(dt,"users",r.uid),i),{success:!0,user:i}}}catch(e){console.error("Google Sign-In error:",e);let n="Google ile giri baarsz";return e.code==="auth/popup-closed-by-user"?n="Google giri penceresi kapatld.":e.message&&(n=e.message),{success:!1,message:n,user:null}}},Z2=async()=>{try{if(!Te)return{success:!1,message:"Firebase Auth is not initialized"};const t=Te.currentUser;return t?(await sN(t),{success:!0,message:"Dorulama e-postas gnderildi"}):{success:!1,message:"Kullanc oturum amam"}}catch(t){return{success:!1,message:t.message||"Dorulama e-postas gnderilemedi"}}},qY=async(t,e)=>{var n,r;try{if(!Te||!dt)throw new Error("Firebase is not initialized");const s=await si(t);if(!s)throw new Error("Kullanc bulunamad");const i=await si(e);if(!i||!((n=i.role)!=null&&n.includes("super_admin"))&&!((r=i.role)!=null&&r.includes("main_admin")))throw new Error("Kullanc silme yetkiniz yok. Sadece ana yneticiler kullanc silebilir.");if(t===e)throw new Error("Kendi hesabnz silemezsiniz.");const{removeUserFromAllTasks:o}=await tt(async()=>{const{removeUserFromAllTasks:d}=await import("./taskService-CQO0i9v5.js").then(h=>h.W);return{removeUserFromAllTasks:d}},[]);await o(t);const{deleteUserLogs:a}=await tt(async()=>{const{deleteUserLogs:d}=await Promise.resolve().then(()=>FI);return{deleteUserLogs:d}},void 0);await a(t);const l=Bt(dt,"users",t);await $n(l,{deleted:!0,deletedAt:_s(),deletedBy:e,email:`deleted_${Date.now()}_${s.email}`,displayName:"Silinmi Kullanc",fullName:"Silinmi Kullanc",phone:null,role:[],departmentId:null,pendingTeams:[],approvedTeams:[],teamLeaderIds:[]});const{createAuditLog:c}=await tt(async()=>{const{createAuditLog:d}=await Promise.resolve().then(()=>FI);return{createAuditLog:d}},void 0);await c("DELETE","users",t,s,{deleted:!0,deletedAt:new Date,deletedBy:e},e)}catch(s){throw console.error("Delete user error:",s),s}},GY=Object.freeze(Object.defineProperty({__proto__:null,deleteUser:qY,getAllUsers:qa,getUserProfile:si,login:G2,logout:K2,onAuthChange:X2,register:q2,resetPassword:Q2,sendVerificationEmail:Z2,signInWithGoogle:J2,updateFirebaseUserProfile:HY,updateUserProfile:Y2},Symbol.toStringTag,{value:"Module"})),eL=_.createContext(void 0),KY=({children:t})=>{const[e,n]=_.useState(null),[r,s]=_.useState(!1),[i,o]=_.useState(!1),[a,l]=_.useState(!1),[c,d]=_.useState(!0),h=v=>{o(v.includes("super_admin")),s(v.includes("admin")||v.includes("super_admin")),l(v.includes("team_leader")||v.includes("admin")||v.includes("super_admin"))},f=v=>v?{id:v.id,email:v.email,emailVerified:v.emailVerified,fullName:v.fullName||v.displayName,phone:v.phone,dateOfBirth:v.dateOfBirth,roles:v.role||[],lastLoginAt:v.lastLoginAt}:null;_.useEffect(()=>{const v=X2(async S=>{if(S){const C=f(S);n(C),C!=null&&C.roles&&h(C.roles);try{const{getDepartments:O}=await tt(async()=>{const{getDepartments:I}=await Promise.resolve().then(()=>dv);return{getDepartments:I}},void 0);(await O()).some(I=>I.managerId===S.id)&&l(!0)}catch(O){console.error("Ekip lideri kontrol hatas:",O)}}else n(null),s(!1),o(!1),l(!1);d(!1)});return()=>v()},[]);const p=async(v,S)=>{try{const C=await G2(v,S);if(C.success&&C.user){const O=f(C.user);n(O),O!=null&&O.roles&&h(O.roles);try{const{getDepartments:b}=await tt(async()=>{const{getDepartments:R}=await Promise.resolve().then(()=>dv);return{getDepartments:R}},void 0);(await b()).some(R=>{var N;return R.managerId===((N=C.user)==null?void 0:N.id)})&&l(!0)}catch(b){console.error("Ekip lideri kontrol hatas:",b)}return!1&&O&&O.emailVerified,window.location.href="/",{success:!0}}else return{success:!1,message:C.message||"Giri baarsz"}}catch(C){return{success:!1,message:C.message||"Giri baarsz"}}},T=async()=>{try{const v=await J2();if(v.success&&v.user){const S=f(v.user);n(S),S!=null&&S.roles&&h(S.roles);try{const{getDepartments:C}=await tt(async()=>{const{getDepartments:b}=await Promise.resolve().then(()=>dv);return{getDepartments:b}},void 0);(await C()).some(b=>{var I;return b.managerId===((I=v.user)==null?void 0:I.id)})&&l(!0)}catch(C){console.error("Ekip lideri kontrol hatas:",C)}return window.location.href="/",{success:!0}}else return{success:!1,message:v.message||"Google ile giri baarsz"}}catch(v){return{success:!1,message:v.message||"Google ile giri baarsz"}}},y=async(v,S,C,O,M,b)=>{try{const I=await q2(v,S,C,O,M,b);if(I.success&&I.user){const A=f(I.user);return{success:!0,message:I.message||"Kayt baarl! Ltfen e-posta adresinize gnderilen dorulama balantsna tklayn.",user:A}}else return{success:!1,message:I.message||"Kayt baarsz",user:null}}catch(I){return{success:!1,message:I.message||"Kayt baarsz",user:null}}},w=async()=>{try{await K2()}catch{}finally{n(null),s(!1),o(!1),l(!1),window.location.href="/auth"}},E=async v=>{try{return await Q2(v)}catch(S){return{success:!1,message:S.message||"ifre sfrlama baarsz"}}};return m.jsx(eL.Provider,{value:{user:e,isAdmin:r,isSuperAdmin:i,isTeamLeader:a,signIn:p,signInWithGoogle:T,signUp:y,signOut:w,resetPassword:E,loading:c},children:t})},Gg=()=>{const t=_.useContext(eL);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},en=({children:t})=>{const{user:e,loading:n}=Gg(),r=ml();return _.useEffect(()=>{!n&&!e?r("/auth"):e&&!e.emailVerified&&r("/verify-email-prompt")},[e,n,r]),n?m.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:m.jsxs("div",{className:"flex flex-col items-center gap-4",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Ykleniyor..."})]})}):e&&!e.emailVerified?null:e?m.jsx(m.Fragment,{children:t}):null},QY=({children:t})=>{const{user:e,loading:n,isAdmin:r}=Gg();return n?m.jsx("div",{className:"flex items-center justify-center h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e?r?m.jsx(m.Fragment,{children:t}):(nn.error("Bu sayfaya eriim yetkiniz yok"),m.jsx(s1,{to:"/",replace:!0})):m.jsx(s1,{to:"/auth",replace:!0})},YY=N0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-60 disabled:cursor-not-allowed [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 touch-manipulation",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 active:bg-primary/95 active:scale-[0.98] shadow-sm hover:shadow-md",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 active:bg-destructive/95 active:scale-[0.98] shadow-sm hover:shadow-md",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground active:bg-accent/80 active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 active:bg-secondary/70 active:scale-[0.98]",ghost:"hover:bg-accent hover:text-accent-foreground active:bg-accent/80 active:scale-[0.98]",link:"text-primary underline-offset-4 hover:underline active:opacity-80"},size:{default:"h-11 sm:h-10 px-4 sm:px-3 py-2.5 sm:py-2 min-h-[44px] sm:min-h-0 text-sm sm:text-sm",sm:"h-10 sm:h-9 rounded-md px-3 sm:px-2.5 min-h-[44px] sm:min-h-0 text-xs sm:text-xs",lg:"h-12 sm:h-11 rounded-md px-8 sm:px-6 min-h-[44px] sm:min-h-0 text-base sm:text-sm",icon:"h-11 w-11 sm:h-10 sm:w-10 min-h-[44px] min-w-[44px] sm:min-h-0 sm:min-w-0 p-0"}},defaultVariants:{variant:"default",size:"default"}}),rn=_.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?wj:"button";return m.jsx(o,{className:lt(YY({variant:e,size:n,className:t})),ref:i,...s})});rn.displayName="Button";const El=_.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:lt("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));El.displayName="Card";const Tl=_.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:lt("flex flex-col space-y-1 sm:space-y-1.5 p-2 sm:p-3 md:p-4 lg:p-6",t),...e}));Tl.displayName="CardHeader";const bl=_.forwardRef(({className:t,...e},n)=>m.jsx("h3",{ref:n,className:lt("text-base sm:text-lg md:text-xl lg:text-2xl font-semibold leading-none tracking-tight",t),...e}));bl.displayName="CardTitle";const Wh=_.forwardRef(({className:t,...e},n)=>m.jsx("p",{ref:n,className:lt("text-xs sm:text-sm text-muted-foreground",t),...e}));Wh.displayName="CardDescription";const xl=_.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:lt("p-2 sm:p-3 md:p-4 lg:p-6 pt-0",t),...e}));xl.displayName="CardContent";const XY=_.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:lt("flex items-center p-3 sm:p-4 md:p-6 pt-0 gap-2 sm:gap-3",t),...e}));XY.displayName="CardFooter";class JY extends _.Component{constructor(n){super(n);sf(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});sf(this,"handleReload",()=>{window.location.reload()});sf(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){this.setState({error:n,errorInfo:r}),console.error("Uygulama hatas:",n.message)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:m.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 relative overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[m.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-blue-200/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"0s"}}),m.jsx("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-indigo-200/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),m.jsxs(El,{className:"w-full max-w-2xl border-2 shadow-2xl bg-background/98 backdrop-blur-sm relative z-10 max-h-[95vh] flex flex-col",children:[m.jsxs(Tl,{className:"text-center pb-3 flex-shrink-0",children:[m.jsx("div",{className:"flex justify-center mb-3",children:m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"rounded-full p-6 bg-gradient-to-br from-blue-100 via-indigo-100 to-slate-100 dark:from-blue-900/30 dark:via-indigo-900/30 dark:to-slate-900/30 border-4 border-blue-200/50 dark:border-blue-800/50 shadow-lg",children:m.jsx(nk,{className:"h-12 w-12 text-orange-500 dark:text-orange-400"})}),m.jsx("div",{className:"absolute -top-1 -right-1",children:m.jsx("div",{className:"rounded-full p-1.5 bg-yellow-100 dark:bg-yellow-900/30 shadow-md",children:m.jsx(lc,{className:"h-4 w-4 text-yellow-500 animate-pulse"})})})]})}),m.jsx(bl,{className:"text-2xl sm:text-3xl font-extrabold mb-2 bg-gradient-to-r from-blue-600 via-indigo-600 to-slate-600 bg-clip-text text-transparent",children:"Oops! Bir eyler ters gitti"}),m.jsx(Wh,{className:"text-sm sm:text-base text-muted-foreground",children:"React component'lerimiz biraz yorulmu olabilir. Endielenme, hemen dzeltiyoruz!"})]}),m.jsxs(xl,{className:"space-y-3 flex-1 overflow-y-auto min-h-0",children:[this.state.error&&m.jsxs("div",{className:"bg-muted/60 border-2 border-border rounded-xl p-4 shadow-sm",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("div",{className:"rounded-full p-1.5 bg-primary/10",children:m.jsx(lc,{className:"h-4 w-4 text-primary"})}),m.jsx("p",{className:"text-sm font-bold text-foreground",children:"Hata Detaylar:"})]}),m.jsxs("div",{className:"space-y-2 mb-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-xs font-semibold text-foreground min-w-[80px]",children:"Hata Ad:"}),m.jsx("span",{className:"text-xs font-mono text-destructive bg-destructive/10 px-2 py-0.5 rounded",children:this.state.error.name})]}),m.jsxs("div",{className:"flex items-start gap-2",children:[m.jsx("span",{className:"text-xs font-semibold text-foreground min-w-[80px]",children:"Hata Mesaj:"}),m.jsx("span",{className:"text-xs text-muted-foreground flex-1 break-words line-clamp-2",children:this.state.error.message})]})]}),this.state.error.stack&&m.jsxs("div",{className:"space-y-1 pt-2 border-t border-border/50",children:[m.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Stack Trace:"}),m.jsx("pre",{className:"text-xs font-mono text-muted-foreground bg-background/80 p-2 rounded border break-words line-clamp-4",children:this.state.error.stack})]}),this.state.errorInfo&&m.jsxs("div",{className:"space-y-1 pt-2 border-t border-border/50",children:[m.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Component Stack:"}),m.jsx("pre",{className:"text-xs font-mono text-muted-foreground bg-background/80 p-2 rounded border break-words line-clamp-4",children:this.state.errorInfo.componentStack})]})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-2 flex-shrink-0",children:[m.jsxs(rn,{onClick:this.handleGoHome,className:"flex-1 gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 active:scale-95",size:"default",children:[m.jsx(ZA,{className:"h-4 w-4"}),m.jsx("span",{className:"font-semibold text-sm",children:"Ana Sayfaya Dn"}),m.jsx(tk,{className:"h-3 w-3 animate-bounce"})]}),m.jsxs(rn,{onClick:this.handleReset,variant:"outline",className:"flex-1 gap-2 border-2 border-blue-300 hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-950/20 transition-all duration-300 transform hover:scale-105 active:scale-95",size:"default",children:[m.jsx(y_,{className:"h-4 w-4"}),m.jsx("span",{className:"font-semibold text-sm",children:"Tekrar Dene"})]}),m.jsxs(rn,{onClick:this.handleReload,variant:"outline",className:"flex-1 gap-2 border-2 border-blue-300 hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-950/20 transition-all duration-300 transform hover:scale-105 active:scale-95",size:"default",children:[m.jsx(ek,{className:"h-4 w-4 animate-spin",style:{animationDuration:"2s"}}),m.jsx("span",{className:"font-semibold text-sm",children:"Sayfay Yenile"})]})]}),m.jsx("div",{className:"bg-gradient-to-r from-blue-50 via-indigo-50 to-slate-50 dark:from-blue-900/20 dark:via-indigo-900/20 dark:to-slate-900/20 rounded-xl p-4 border-2 border-dashed border-blue-200 dark:border-blue-800 shadow-sm",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"rounded-full p-2 bg-blue-100 dark:bg-blue-900/30 shadow-sm flex-shrink-0",children:m.jsx(YA,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),m.jsx("div",{className:"flex-1",children:m.jsxs("p",{className:"text-sm font-semibold text-foreground leading-relaxed",children:["Bu sayfann ekran grntsn ",m.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"Ayenur Aslan"}),"'a gndermelisin. Yukardaki ",m.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"detayl hata bilgileri"})," sayesinde sorunu hzlca zebilir! "]})})]})}),m.jsx("div",{className:"text-center pt-2 flex-shrink-0",children:m.jsxs("div",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200/50 dark:border-blue-800/50",children:[m.jsx(y_,{className:"h-3 w-3 text-blue-500 animate-pulse"}),m.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Teknik ekibimiz sorunu zyor! "}),m.jsx(lc,{className:"h-3 w-3 text-yellow-500 animate-pulse"})]})})]})]})]}):this.props.children}}const gt=()=>{var a;const t=fP(),e=ml();let n="Oops! Bir eyler ters gitti",r="Beklenmedik bir hata olutu. Endielenme, hemen dzeltiyoruz!",s=null;qo(t)?(t.status===404?(n="404 - Sayfa Bulunamad",r="Aradn sayfa burada deil. Belki tanm olabilir?"):t.status===403?(n="403 - Eriim Reddedildi",r="Bu sayfaya eriim yetkin yok. Gerekli izinlere sahip deilsin."):t.status===500?(n="500 - Sunucu Hatas",r="Sunucu biraz yorulmu gibi grnyor. Biraz bekleyip tekrar deneyebilirsin!"):(n=`${t.status} - Hata Olutu`,r=t.statusText||"Bir eyler ters gitti. Teknik ekibimiz devrede!"),s=((a=t.data)==null?void 0:a.message)||t.statusText):t instanceof Error&&(s=t.message);const i=()=>{e("/")},o=()=>{window.location.reload()};return m.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 relative overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[m.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-blue-200/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"0s"}}),m.jsx("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-indigo-200/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),m.jsxs(El,{className:"w-full max-w-2xl border-2 shadow-2xl bg-background/98 backdrop-blur-sm relative z-10 max-h-[95vh] flex flex-col",children:[m.jsxs(Tl,{className:"text-center pb-3 flex-shrink-0",children:[m.jsx("div",{className:"flex justify-center mb-3",children:m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"rounded-full p-6 bg-gradient-to-br from-blue-100 via-indigo-100 to-slate-100 dark:from-blue-900/30 dark:via-indigo-900/30 dark:to-slate-900/30 border-4 border-blue-200/50 dark:border-blue-800/50 shadow-lg",children:m.jsx(nk,{className:"h-12 w-12 text-orange-500 dark:text-orange-400"})}),m.jsx("div",{className:"absolute -top-1 -right-1",children:m.jsx("div",{className:"rounded-full p-1.5 bg-yellow-100 dark:bg-yellow-900/30 shadow-md",children:m.jsx(lc,{className:"h-4 w-4 text-yellow-500 animate-pulse"})})})]})}),m.jsx(bl,{className:"text-2xl sm:text-3xl font-extrabold mb-2 bg-gradient-to-r from-blue-600 via-indigo-600 to-slate-600 bg-clip-text text-transparent",children:n}),m.jsx(Wh,{className:"text-sm sm:text-base text-muted-foreground",children:r})]}),m.jsxs(xl,{className:"space-y-3 flex-1 overflow-y-auto min-h-0",children:[m.jsxs("div",{className:"bg-muted/60 border-2 border-border rounded-xl p-4 shadow-sm",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("div",{className:"rounded-full p-1.5 bg-primary/10",children:m.jsx(lc,{className:"h-4 w-4 text-primary"})}),m.jsx("p",{className:"text-sm font-bold text-foreground",children:"Hata Detaylar:"})]}),qo(t)&&m.jsxs("div",{className:"space-y-2 mb-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-xs font-semibold text-foreground min-w-[80px]",children:"Hata Kodu:"}),m.jsx("span",{className:"text-xs font-mono text-destructive bg-destructive/10 px-2 py-0.5 rounded",children:t.status}),m.jsx("span",{className:"text-xs text-muted-foreground",children:t.statusText})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-xs font-semibold text-foreground min-w-[80px]",children:"Hata Tr:"}),m.jsx("span",{className:"text-xs text-muted-foreground",children:t.status===404?"Sayfa Bulunamad":t.status===403?"Eriim Reddedildi":t.status===500?"Sunucu Hatas":"Bilinmeyen Hata"})]}),t.data&&m.jsxs("div",{className:"flex items-start gap-2",children:[m.jsx("span",{className:"text-xs font-semibold text-foreground min-w-[80px]",children:"Ek Bilgi:"}),m.jsx("span",{className:"text-xs text-muted-foreground flex-1 break-words line-clamp-2",children:JSON.stringify(t.data)})]})]}),s&&m.jsxs("div",{className:"space-y-1 mb-3",children:[m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Hata Mesaj:"})}),m.jsx("div",{className:"text-xs font-mono text-muted-foreground bg-background/80 p-2 rounded border break-words line-clamp-3",children:s})]}),t instanceof Error&&m.jsxs("div",{className:"space-y-2 pt-2 border-t border-border/50",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-xs font-semibold text-foreground min-w-[80px]",children:"Hata Ad:"}),m.jsx("span",{className:"text-xs font-mono text-destructive bg-destructive/10 px-2 py-0.5 rounded",children:t.name})]}),t.stack&&m.jsxs("div",{className:"space-y-1",children:[m.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Stack Trace:"}),m.jsx("pre",{className:"text-xs font-mono text-muted-foreground bg-background/80 p-2 rounded border break-words line-clamp-4",children:t.stack})]})]}),!s&&!qo(t)&&!(t instanceof Error)&&m.jsx("div",{className:"text-xs text-muted-foreground italic",children:"Hata detay mevcut deil."})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-2 flex-shrink-0",children:[m.jsxs(rn,{onClick:i,className:"flex-1 gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 active:scale-95",size:"default",children:[m.jsx(ZA,{className:"h-4 w-4"}),m.jsx("span",{className:"font-semibold text-sm",children:"Ana Sayfaya Dn"}),m.jsx(tk,{className:"h-3 w-3 animate-bounce"})]}),m.jsxs(rn,{onClick:o,variant:"outline",className:"flex-1 gap-2 border-2 border-blue-300 hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-950/20 transition-all duration-300 transform hover:scale-105 active:scale-95",size:"default",children:[m.jsx(ek,{className:"h-4 w-4 animate-spin",style:{animationDuration:"2s"}}),m.jsx("span",{className:"font-semibold text-sm",children:"Sayfay Yenile"})]})]}),m.jsx("div",{className:"bg-gradient-to-r from-blue-50 via-indigo-50 to-slate-50 dark:from-blue-900/20 dark:via-indigo-900/20 dark:to-slate-900/20 rounded-xl p-4 border-2 border-dashed border-blue-200 dark:border-blue-800 shadow-sm",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"rounded-full p-2 bg-blue-100 dark:bg-blue-900/30 shadow-sm flex-shrink-0",children:m.jsx(YA,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),m.jsx("div",{className:"flex-1",children:m.jsxs("p",{className:"text-sm font-semibold text-foreground leading-relaxed",children:["Bu sayfann ekran grntsn ",m.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"Ayenur Aslan"}),"'a gndermelisin. Yukardaki ",m.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"detayl hata bilgileri"})," sayesinde sorunu hzlca zebilir! "]})})]})}),m.jsx("div",{className:"text-center pt-2 flex-shrink-0",children:m.jsxs("div",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200/50 dark:border-blue-800/50",children:[m.jsx(y_,{className:"h-3 w-3 text-blue-500 animate-pulse"}),m.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Teknik ekibimiz sorunu zyor! "}),m.jsx(lc,{className:"h-3 w-3 text-yellow-500 animate-pulse"})]})})]})]})]})},Ti=_.forwardRef(({className:t,type:e,...n},r)=>m.jsx("input",{type:e,className:lt("flex h-11 sm:h-10 w-full rounded-md border border-input bg-background px-4 sm:px-3 py-3 sm:py-2 text-base sm:text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-60 touch-manipulation transition-all duration-200 hover:border-input/80 min-h-[44px] sm:min-h-0",t),ref:r,...n}));Ti.displayName="Input";const dh=_.forwardRef(({className:t,...e},n)=>{const[r,s]=_.useState(!1);return m.jsxs("div",{className:"relative",children:[m.jsx(Ti,{type:r?"text":"password",className:lt("pr-10",t),ref:n,...e}),m.jsxs(rn,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>s(!r),disabled:e.disabled,children:[r?m.jsx(g4,{className:"h-4 w-4 text-muted-foreground"}):m.jsx(y4,{className:"h-4 w-4 text-muted-foreground"}),m.jsx("span",{className:"sr-only",children:r?"ifreyi gizle":"ifreyi gster"})]})]})});dh.displayName="PasswordInput";var ZY="Label",tL=_.forwardRef((t,e)=>m.jsx(Be.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));tL.displayName=ZY;var nL=tL;const eX=N0("text-sm sm:text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",{variants:{showRequired:{true:"after:ml-0.5 after:text-destructive after:content-['*']",false:""}},defaultVariants:{showRequired:!1}}),Er=_.forwardRef(({className:t,showRequired:e,...n},r)=>m.jsx(nL,{ref:r,className:lt(eX({showRequired:e}),t),...n}));Er.displayName=nL.displayName;var tX=_.createContext(void 0);function ST(t){const e=_.useContext(tX);return t||e||"ltr"}var hv="rovingFocusGroup.onEntryFocus",nX={bubbles:!1,cancelable:!0},Hh="RovingFocusGroup",[Tw,rL,rX]=C0(Hh),[sX,sL]=pl(Hh,[rX]),[iX,oX]=sX(Hh),iL=_.forwardRef((t,e)=>m.jsx(Tw.Provider,{scope:t.__scopeRovingFocusGroup,children:m.jsx(Tw.Slot,{scope:t.__scopeRovingFocusGroup,children:m.jsx(aX,{...t,ref:e})})}));iL.displayName=Hh;var aX=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...h}=t,f=_.useRef(null),p=Mt(e,f),T=ST(i),[y,w]=Dc({prop:o,defaultProp:a??null,onChange:l,caller:Hh}),[E,v]=_.useState(!1),S=Yr(c),C=rL(n),O=_.useRef(!1),[M,b]=_.useState(0);return _.useEffect(()=>{const I=f.current;if(I)return I.addEventListener(hv,S),()=>I.removeEventListener(hv,S)},[S]),m.jsx(iX,{scope:n,orientation:r,dir:T,loop:s,currentTabStopId:y,onItemFocus:_.useCallback(I=>w(I),[w]),onItemShiftTab:_.useCallback(()=>v(!0),[]),onFocusableItemAdd:_.useCallback(()=>b(I=>I+1),[]),onFocusableItemRemove:_.useCallback(()=>b(I=>I-1),[]),children:m.jsx(Be.div,{tabIndex:E||M===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:Se(t.onMouseDown,()=>{O.current=!0}),onFocus:Se(t.onFocus,I=>{const A=!O.current;if(I.target===I.currentTarget&&A&&!E){const R=new CustomEvent(hv,nX);if(I.currentTarget.dispatchEvent(R),!R.defaultPrevented){const N=C().filter(Q=>Q.focusable),D=N.find(Q=>Q.active),P=N.find(Q=>Q.id===y),se=[D,P,...N].filter(Boolean).map(Q=>Q.ref.current);lL(se,d)}}O.current=!1}),onBlur:Se(t.onBlur,()=>v(!1))})})}),oL="RovingFocusGroupItem",aL=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...a}=t,l=eu(),c=i||l,d=oX(oL,n),h=d.currentTabStopId===c,f=rL(n),{onFocusableItemAdd:p,onFocusableItemRemove:T,currentTabStopId:y}=d;return _.useEffect(()=>{if(r)return p(),()=>T()},[r,p,T]),m.jsx(Tw.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:m.jsx(Be.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:Se(t.onMouseDown,w=>{r?d.onItemFocus(c):w.preventDefault()}),onFocus:Se(t.onFocus,()=>d.onItemFocus(c)),onKeyDown:Se(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const E=uX(w,d.orientation,d.dir);if(E!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let S=f().filter(C=>C.focusable).map(C=>C.ref.current);if(E==="last")S.reverse();else if(E==="prev"||E==="next"){E==="prev"&&S.reverse();const C=S.indexOf(w.currentTarget);S=d.loop?dX(S,C+1):S.slice(C+1)}setTimeout(()=>lL(S))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:y!=null}):o})})});aL.displayName=oL;var lX={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function cX(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function uX(t,e,n){const r=cX(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return lX[r]}function lL(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function dX(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var hX=iL,fX=aL,Kg="Tabs",[pX,BZ]=pl(Kg,[sL]),cL=sL(),[mX,IT]=pX(Kg),uL=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,d=ST(a),[h,f]=Dc({prop:r,onChange:s,defaultProp:i??"",caller:Kg});return m.jsx(mX,{scope:n,baseId:eu(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:l,children:m.jsx(Be.div,{dir:d,"data-orientation":o,...c,ref:e})})});uL.displayName=Kg;var dL="TabsList",hL=_.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=IT(dL,n),o=cL(n);return m.jsx(hX,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:m.jsx(Be.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});hL.displayName=dL;var fL="TabsTrigger",pL=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=IT(fL,n),a=cL(n),l=yL(o.baseId,r),c=vL(o.baseId,r),d=r===o.value;return m.jsx(fX,{asChild:!0,...a,focusable:!s,active:d,children:m.jsx(Be.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:Se(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:Se(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:Se(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(r)})})})});pL.displayName=fL;var mL="TabsContent",gL=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,a=IT(mL,n),l=yL(a.baseId,r),c=vL(a.baseId,r),d=r===a.value,h=_.useRef(d);return _.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),m.jsx(Ym,{present:s||d,children:({present:f})=>m.jsx(Be.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});gL.displayName=mL;function yL(t,e){return`${t}-trigger-${e}`}function vL(t,e){return`${t}-content-${e}`}var gX=uL,_L=hL,wL=pL,EL=gL;const yX=gX,TL=_.forwardRef(({className:t,...e},n)=>m.jsx(_L,{ref:n,className:lt("inline-flex h-10 sm:h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground gap-1","overflow-x-auto -webkit-overflow-scrolling-touch scrollbar-hide",t),...e}));TL.displayName=_L.displayName;const bw=_.forwardRef(({className:t,...e},n)=>m.jsx(wL,{ref:n,className:lt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 sm:px-3 py-2 sm:py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 touch-manipulation min-h-[44px] sm:min-h-0",t),...e}));bw.displayName=wL.displayName;const mp=_.forwardRef(({className:t,...e},n)=>m.jsx(EL,{ref:n,className:lt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));mp.displayName=EL.displayName;function jI(t,[e,n]){return Math.min(n,Math.max(e,t))}var fv=0;function vX(){_.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??UI()),document.body.insertAdjacentElement("beforeend",t[1]??UI()),fv++,()=>{fv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),fv--}},[])}function UI(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var pv="focusScope.autoFocusOnMount",mv="focusScope.autoFocusOnUnmount",zI={bubbles:!1,cancelable:!0},_X="FocusScope",bL=_.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=_.useState(null),c=Yr(s),d=Yr(i),h=_.useRef(null),f=Mt(e,y=>l(y)),p=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let y=function(S){if(p.paused||!a)return;const C=S.target;a.contains(C)?h.current=C:wo(h.current,{select:!0})},w=function(S){if(p.paused||!a)return;const C=S.relatedTarget;C!==null&&(a.contains(C)||wo(h.current,{select:!0}))},E=function(S){if(document.activeElement===document.body)for(const O of S)O.removedNodes.length>0&&wo(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const v=new MutationObserver(E);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),v.disconnect()}}},[r,a,p.paused]),_.useEffect(()=>{if(a){BI.add(p);const y=document.activeElement;if(!a.contains(y)){const E=new CustomEvent(pv,zI);a.addEventListener(pv,c),a.dispatchEvent(E),E.defaultPrevented||(wX(SX(xL(a)),{select:!0}),document.activeElement===y&&wo(a))}return()=>{a.removeEventListener(pv,c),setTimeout(()=>{const E=new CustomEvent(mv,zI);a.addEventListener(mv,d),a.dispatchEvent(E),E.defaultPrevented||wo(y??document.body,{select:!0}),a.removeEventListener(mv,d),BI.remove(p)},0)}}},[a,c,d,p]);const T=_.useCallback(y=>{if(!n&&!r||p.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,E=document.activeElement;if(w&&E){const v=y.currentTarget,[S,C]=EX(v);S&&C?!y.shiftKey&&E===C?(y.preventDefault(),n&&wo(S,{select:!0})):y.shiftKey&&E===S&&(y.preventDefault(),n&&wo(C,{select:!0})):E===v&&y.preventDefault()}},[n,r,p.paused]);return m.jsx(Be.div,{tabIndex:-1,...o,ref:f,onKeyDown:T})});bL.displayName=_X;function wX(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(wo(r,{select:e}),document.activeElement!==n)return}function EX(t){const e=xL(t),n=$I(e,t),r=$I(e.reverse(),t);return[n,r]}function xL(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function $I(t,e){for(const n of t)if(!TX(n,{upTo:e}))return n}function TX(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function bX(t){return t instanceof HTMLInputElement&&"select"in t}function wo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&bX(t)&&e&&t.select()}}var BI=xX();function xX(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=WI(t,e),t.unshift(e)},remove(e){var n;t=WI(t,e),(n=t[0])==null||n.resume()}}}function WI(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function SX(t){return t.filter(e=>e.tagName!=="A")}function IX(t){const e=_.useRef({value:t,previous:t});return _.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var CX=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Dl=new WeakMap,jf=new WeakMap,Uf={},gv=0,SL=function(t){return t&&(t.host||SL(t.parentNode))},RX=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=SL(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},AX=function(t,e,n,r){var s=RX(e,Array.isArray(t)?t:[t]);Uf[n]||(Uf[n]=new WeakMap);var i=Uf[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var p=f.getAttribute(r),T=p!==null&&p!=="false",y=(Dl.get(f)||0)+1,w=(i.get(f)||0)+1;Dl.set(f,y),i.set(f,w),o.push(f),y===1&&T&&jf.set(f,!0),w===1&&f.setAttribute(n,"true"),T||f.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",f,E)}})};return d(e),a.clear(),gv++,function(){o.forEach(function(h){var f=Dl.get(h)-1,p=i.get(h)-1;Dl.set(h,f),i.set(h,p),f||(jf.has(h)||h.removeAttribute(r),jf.delete(h)),p||h.removeAttribute(n)}),gv--,gv||(Dl=new WeakMap,Dl=new WeakMap,jf=new WeakMap,Uf={})}},kX=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=CX(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),AX(r,s,n,"aria-hidden")):function(){return null}},gp="right-scroll-bar-position",yp="width-before-scroll-bar",PX="with-scroll-bars-hidden",NX="--removed-body-scroll-bar-size";function yv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function DX(t,e){var n=_.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var OX=typeof window<"u"?_.useLayoutEffect:_.useEffect,HI=new WeakMap;function LX(t,e){var n=DX(null,function(r){return t.forEach(function(s){return yv(s,r)})});return OX(function(){var r=HI.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||yv(a,null)}),i.forEach(function(a){s.has(a)||yv(a,o)})}HI.set(n,t)},[t]),n}function MX(t){return t}function FX(t,e){e===void 0&&(e=MX);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function VX(t){t===void 0&&(t={});var e=FX(null);return e.options=Gs({async:!0,ssr:!1},t),e}var IL=function(t){var e=t.sideCar,n=xh(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,Gs({},n))};IL.isSideCarExport=!0;function jX(t,e){return t.useMedium(e),IL}var CL=VX(),vv=function(){},Qg=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:vv,onWheelCapture:vv,onTouchMoveCapture:vv}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,T=t.noIsolation,y=t.inert,w=t.allowPinchZoom,E=t.as,v=E===void 0?"div":E,S=t.gapMode,C=xh(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=f,M=LX([n,e]),b=Gs(Gs({},C),s);return _.createElement(_.Fragment,null,d&&_.createElement(O,{sideCar:CL,removeScrollBar:c,shards:h,noRelative:p,noIsolation:T,inert:y,setCallbacks:i,allowPinchZoom:!!w,lockRef:n,gapMode:S}),o?_.cloneElement(_.Children.only(a),Gs(Gs({},b),{ref:M})):_.createElement(v,Gs({},b,{className:l,ref:M}),a))});Qg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Qg.classNames={fullWidth:yp,zeroRight:gp};var UX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function zX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=UX();return e&&t.setAttribute("nonce",e),t}function $X(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function BX(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var WX=function(){var t=0,e=null;return{add:function(n){t==0&&(e=zX())&&($X(e,n),BX(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},HX=function(){var t=WX();return function(e,n){_.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},RL=function(){var t=HX(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},qX={left:0,top:0,right:0,gap:0},_v=function(t){return parseInt(t||"",10)||0},GX=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[_v(n),_v(r),_v(s)]},KX=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return qX;var e=GX(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},QX=RL(),yc="data-scroll-locked",YX=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(PX,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(yc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(gp,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(yp,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(gp," .").concat(gp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(yp," .").concat(yp,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(yc,`] {
    `).concat(NX,": ").concat(a,`px;
  }
`)},qI=function(){var t=parseInt(document.body.getAttribute(yc)||"0",10);return isFinite(t)?t:0},XX=function(){_.useEffect(function(){return document.body.setAttribute(yc,(qI()+1).toString()),function(){var t=qI()-1;t<=0?document.body.removeAttribute(yc):document.body.setAttribute(yc,t.toString())}},[])},JX=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;XX();var i=_.useMemo(function(){return KX(s)},[s]);return _.createElement(QX,{styles:YX(i,!e,s,n?"":"!important")})},xw=!1;if(typeof window<"u")try{var zf=Object.defineProperty({},"passive",{get:function(){return xw=!0,!0}});window.addEventListener("test",zf,zf),window.removeEventListener("test",zf,zf)}catch{xw=!1}var Ol=xw?{passive:!1}:!1,ZX=function(t){return t.tagName==="TEXTAREA"},AL=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!ZX(t)&&n[e]==="visible")},eJ=function(t){return AL(t,"overflowY")},tJ=function(t){return AL(t,"overflowX")},GI=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=kL(t,r);if(s){var i=PL(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},nJ=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},rJ=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},kL=function(t,e){return t==="v"?eJ(e):tJ(e)},PL=function(t,e){return t==="v"?nJ(e):rJ(e)},sJ=function(t,e){return t==="h"&&e==="rtl"?-1:1},iJ=function(t,e,n,r,s){var i=sJ(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,f=0;do{if(!a)break;var p=PL(t,a),T=p[0],y=p[1],w=p[2],E=y-w-i*T;(T||E)&&kL(t,a)&&(h+=E,f+=T);var v=a.parentNode;a=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(f)<1||!s))&&(c=!0),c},$f=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},KI=function(t){return[t.deltaX,t.deltaY]},QI=function(t){return t&&"current"in t?t.current:t},oJ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},aJ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},lJ=0,Ll=[];function cJ(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),s=_.useState(lJ++)[0],i=_.useState(RL)[0],o=_.useRef(t);_.useEffect(function(){o.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=p$([t.lockRef.current],(t.shards||[]).map(QI),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=_.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var E=$f(y),v=n.current,S="deltaX"in y?y.deltaX:v[0]-E[0],C="deltaY"in y?y.deltaY:v[1]-E[1],O,M=y.target,b=Math.abs(S)>Math.abs(C)?"h":"v";if("touches"in y&&b==="h"&&M.type==="range")return!1;var I=GI(b,M);if(!I)return!0;if(I?O=b:(O=b==="v"?"h":"v",I=GI(b,M)),!I)return!1;if(!r.current&&"changedTouches"in y&&(S||C)&&(r.current=O),!O)return!0;var A=r.current||O;return iJ(A,w,y,A==="h"?S:C,!0)},[]),l=_.useCallback(function(y){var w=y;if(!(!Ll.length||Ll[Ll.length-1]!==i)){var E="deltaY"in w?KI(w):$f(w),v=e.current.filter(function(O){return O.name===w.type&&(O.target===w.target||w.target===O.shadowParent)&&oJ(O.delta,E)})[0];if(v&&v.should){w.cancelable&&w.preventDefault();return}if(!v){var S=(o.current.shards||[]).map(QI).filter(Boolean).filter(function(O){return O.contains(w.target)}),C=S.length>0?a(w,S[0]):!o.current.noIsolation;C&&w.cancelable&&w.preventDefault()}}},[]),c=_.useCallback(function(y,w,E,v){var S={name:y,delta:w,target:E,should:v,shadowParent:uJ(E)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(C){return C!==S})},1)},[]),d=_.useCallback(function(y){n.current=$f(y),r.current=void 0},[]),h=_.useCallback(function(y){c(y.type,KI(y),y.target,a(y,t.lockRef.current))},[]),f=_.useCallback(function(y){c(y.type,$f(y),y.target,a(y,t.lockRef.current))},[]);_.useEffect(function(){return Ll.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Ol),document.addEventListener("touchmove",l,Ol),document.addEventListener("touchstart",d,Ol),function(){Ll=Ll.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,Ol),document.removeEventListener("touchmove",l,Ol),document.removeEventListener("touchstart",d,Ol)}},[]);var p=t.removeScrollBar,T=t.inert;return _.createElement(_.Fragment,null,T?_.createElement(i,{styles:aJ(s)}):null,p?_.createElement(JX,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function uJ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const dJ=jX(CL,cJ);var NL=_.forwardRef(function(t,e){return _.createElement(Qg,Gs({},t,{ref:e,sideCar:dJ}))});NL.classNames=Qg.classNames;var hJ=[" ","Enter","ArrowUp","ArrowDown"],fJ=[" ","Enter"],ul="Select",[Yg,Xg,pJ]=C0(ul),[_u,WZ]=pl(ul,[pJ,ng]),Jg=ng(),[mJ,_a]=_u(ul),[gJ,yJ]=_u(ul),DL=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:d,autoComplete:h,disabled:f,required:p,form:T}=t,y=Jg(e),[w,E]=_.useState(null),[v,S]=_.useState(null),[C,O]=_.useState(!1),M=ST(c),[b,I]=Dc({prop:r,defaultProp:s??!1,onChange:i,caller:ul}),[A,R]=Dc({prop:o,defaultProp:a,onChange:l,caller:ul}),N=_.useRef(null),D=w?T||!!w.closest("form"):!0,[P,B]=_.useState(new Set),se=Array.from(P).map(Q=>Q.props.value).join(";");return m.jsx(Ok,{...y,children:m.jsxs(mJ,{required:p,scope:e,trigger:w,onTriggerChange:E,valueNode:v,onValueNodeChange:S,valueNodeHasChildren:C,onValueNodeHasChildrenChange:O,contentId:eu(),value:A,onValueChange:R,open:b,onOpenChange:I,dir:M,triggerPointerDownPosRef:N,disabled:f,children:[m.jsx(Yg.Provider,{scope:e,children:m.jsx(gJ,{scope:t.__scopeSelect,onNativeOptionAdd:_.useCallback(Q=>{B(oe=>new Set(oe).add(Q))},[]),onNativeOptionRemove:_.useCallback(Q=>{B(oe=>{const j=new Set(oe);return j.delete(Q),j})},[]),children:n})}),D?m.jsxs(rM,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:A,onChange:Q=>R(Q.target.value),disabled:f,form:T,children:[A===void 0?m.jsx("option",{value:""}):null,Array.from(P)]},se):null]})})};DL.displayName=ul;var OL="SelectTrigger",LL=_.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Jg(n),o=_a(OL,n),a=o.disabled||r,l=Mt(e,o.onTriggerChange),c=Xg(n),d=_.useRef("touch"),[h,f,p]=iM(y=>{const w=c().filter(S=>!S.disabled),E=w.find(S=>S.value===o.value),v=oM(w,y,E);v!==void 0&&o.onValueChange(v.value)}),T=y=>{a||(o.onOpenChange(!0),p()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return m.jsx(Lk,{asChild:!0,...i,children:m.jsx(Be.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":sM(o.value)?"":void 0,...s,ref:l,onClick:Se(s.onClick,y=>{y.currentTarget.focus(),d.current!=="mouse"&&T(y)}),onPointerDown:Se(s.onPointerDown,y=>{d.current=y.pointerType;const w=y.target;w.hasPointerCapture(y.pointerId)&&w.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(T(y),y.preventDefault())}),onKeyDown:Se(s.onKeyDown,y=>{const w=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&f(y.key),!(w&&y.key===" ")&&hJ.includes(y.key)&&(T(),y.preventDefault())})})})});LL.displayName=OL;var ML="SelectValue",FL=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,l=_a(ML,n),{onValueNodeHasChildrenChange:c}=l,d=i!==void 0,h=Mt(e,l.onValueNodeChange);return En(()=>{c(d)},[c,d]),m.jsx(Be.span,{...a,ref:h,style:{pointerEvents:"none"},children:sM(l.value)?m.jsx(m.Fragment,{children:o}):i})});FL.displayName=ML;var vJ="SelectIcon",VL=_.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return m.jsx(Be.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});VL.displayName=vJ;var _J="SelectPortal",jL=t=>m.jsx(R0,{asChild:!0,...t});jL.displayName=_J;var dl="SelectContent",UL=_.forwardRef((t,e)=>{const n=_a(dl,t.__scopeSelect),[r,s]=_.useState();if(En(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?pa.createPortal(m.jsx(zL,{scope:t.__scopeSelect,children:m.jsx(Yg.Slot,{scope:t.__scopeSelect,children:m.jsx("div",{children:t.children})})}),i):null}return m.jsx($L,{...t,ref:e})});UL.displayName=dl;var cs=10,[zL,wa]=_u(dl),wJ="SelectContentImpl",EJ=Hd("SelectContent.RemoveScroll"),$L=_.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:T,hideWhenDetached:y,avoidCollisions:w,...E}=t,v=_a(dl,n),[S,C]=_.useState(null),[O,M]=_.useState(null),b=Mt(e,X=>C(X)),[I,A]=_.useState(null),[R,N]=_.useState(null),D=Xg(n),[P,B]=_.useState(!1),se=_.useRef(!1);_.useEffect(()=>{if(S)return kX(S)},[S]),vX();const Q=_.useCallback(X=>{const[Ve,...ht]=D().map(ge=>ge.ref.current),[Oe]=ht.slice(-1),ke=document.activeElement;for(const ge of X)if(ge===ke||(ge==null||ge.scrollIntoView({block:"nearest"}),ge===Ve&&O&&(O.scrollTop=0),ge===Oe&&O&&(O.scrollTop=O.scrollHeight),ge==null||ge.focus(),document.activeElement!==ke))return},[D,O]),oe=_.useCallback(()=>Q([I,S]),[Q,I,S]);_.useEffect(()=>{P&&oe()},[P,oe]);const{onOpenChange:j,triggerPointerDownPosRef:$}=v;_.useEffect(()=>{if(S){let X={x:0,y:0};const Ve=Oe=>{var ke,ge;X={x:Math.abs(Math.round(Oe.pageX)-(((ke=$.current)==null?void 0:ke.x)??0)),y:Math.abs(Math.round(Oe.pageY)-(((ge=$.current)==null?void 0:ge.y)??0))}},ht=Oe=>{X.x<=10&&X.y<=10?Oe.preventDefault():S.contains(Oe.target)||j(!1),document.removeEventListener("pointermove",Ve),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",Ve),document.addEventListener("pointerup",ht,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ve),document.removeEventListener("pointerup",ht,{capture:!0})}}},[S,j,$]),_.useEffect(()=>{const X=()=>j(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[j]);const[Z,pe]=iM(X=>{const Ve=D().filter(ke=>!ke.disabled),ht=Ve.find(ke=>ke.ref.current===document.activeElement),Oe=oM(Ve,X,ht);Oe&&setTimeout(()=>Oe.ref.current.focus())}),te=_.useCallback((X,Ve,ht)=>{const Oe=!se.current&&!ht;(v.value!==void 0&&v.value===Ve||Oe)&&(A(X),Oe&&(se.current=!0))},[v.value]),Y=_.useCallback(()=>S==null?void 0:S.focus(),[S]),ye=_.useCallback((X,Ve,ht)=>{const Oe=!se.current&&!ht;(v.value!==void 0&&v.value===Ve||Oe)&&N(X)},[v.value]),Ce=r==="popper"?Sw:BL,Qe=Ce===Sw?{side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:T,hideWhenDetached:y,avoidCollisions:w}:{};return m.jsx(zL,{scope:n,content:S,viewport:O,onViewportChange:M,itemRefCallback:te,selectedItem:I,onItemLeave:Y,itemTextRefCallback:ye,focusSelectedItem:oe,selectedItemText:R,position:r,isPositioned:P,searchRef:Z,children:m.jsx(NL,{as:EJ,allowPinchZoom:!0,children:m.jsx(bL,{asChild:!0,trapped:v.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:Se(s,X=>{var Ve;(Ve=v.trigger)==null||Ve.focus({preventScroll:!0}),X.preventDefault()}),children:m.jsx(Qm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:m.jsx(Ce,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:X=>X.preventDefault(),...E,...Qe,onPlaced:()=>B(!0),ref:b,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:Se(E.onKeyDown,X=>{const Ve=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!Ve&&X.key.length===1&&pe(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let Oe=D().filter(ke=>!ke.disabled).map(ke=>ke.ref.current);if(["ArrowUp","End"].includes(X.key)&&(Oe=Oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const ke=X.target,ge=Oe.indexOf(ke);Oe=Oe.slice(ge+1)}setTimeout(()=>Q(Oe)),X.preventDefault()}})})})})})})});$L.displayName=wJ;var TJ="SelectItemAlignedPosition",BL=_.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=_a(dl,n),o=wa(dl,n),[a,l]=_.useState(null),[c,d]=_.useState(null),h=Mt(e,b=>d(b)),f=Xg(n),p=_.useRef(!1),T=_.useRef(!0),{viewport:y,selectedItem:w,selectedItemText:E,focusSelectedItem:v}=o,S=_.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&y&&w&&E){const b=i.trigger.getBoundingClientRect(),I=c.getBoundingClientRect(),A=i.valueNode.getBoundingClientRect(),R=E.getBoundingClientRect();if(i.dir!=="rtl"){const ke=R.left-I.left,ge=A.left-ke,ct=b.left-ge,Jt=b.width+ct,mr=Math.max(Jt,I.width),Zt=window.innerWidth-cs,ts=jI(ge,[cs,Math.max(cs,Zt-mr)]);a.style.minWidth=Jt+"px",a.style.left=ts+"px"}else{const ke=I.right-R.right,ge=window.innerWidth-A.right-ke,ct=window.innerWidth-b.right-ge,Jt=b.width+ct,mr=Math.max(Jt,I.width),Zt=window.innerWidth-cs,ts=jI(ge,[cs,Math.max(cs,Zt-mr)]);a.style.minWidth=Jt+"px",a.style.right=ts+"px"}const N=f(),D=window.innerHeight-cs*2,P=y.scrollHeight,B=window.getComputedStyle(c),se=parseInt(B.borderTopWidth,10),Q=parseInt(B.paddingTop,10),oe=parseInt(B.borderBottomWidth,10),j=parseInt(B.paddingBottom,10),$=se+Q+P+j+oe,Z=Math.min(w.offsetHeight*5,$),pe=window.getComputedStyle(y),te=parseInt(pe.paddingTop,10),Y=parseInt(pe.paddingBottom,10),ye=b.top+b.height/2-cs,Ce=D-ye,Qe=w.offsetHeight/2,X=w.offsetTop+Qe,Ve=se+Q+X,ht=$-Ve;if(Ve<=ye){const ke=N.length>0&&w===N[N.length-1].ref.current;a.style.bottom="0px";const ge=c.clientHeight-y.offsetTop-y.offsetHeight,ct=Math.max(Ce,Qe+(ke?Y:0)+ge+oe),Jt=Ve+ct;a.style.height=Jt+"px"}else{const ke=N.length>0&&w===N[0].ref.current;a.style.top="0px";const ct=Math.max(ye,se+y.offsetTop+(ke?te:0)+Qe)+ht;a.style.height=ct+"px",y.scrollTop=Ve-ye+y.offsetTop}a.style.margin=`${cs}px 0`,a.style.minHeight=Z+"px",a.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,a,c,y,w,E,i.dir,r]);En(()=>S(),[S]);const[C,O]=_.useState();En(()=>{c&&O(window.getComputedStyle(c).zIndex)},[c]);const M=_.useCallback(b=>{b&&T.current===!0&&(S(),v==null||v(),T.current=!1)},[S,v]);return m.jsx(xJ,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:M,children:m.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:m.jsx(Be.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});BL.displayName=TJ;var bJ="SelectPopperPosition",Sw=_.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=cs,...i}=t,o=Jg(n);return m.jsx(Mk,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Sw.displayName=bJ;var[xJ,CT]=_u(dl,{}),Iw="SelectViewport",WL=_.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=wa(Iw,n),o=CT(Iw,n),a=Mt(e,i.onViewportChange),l=_.useRef(0);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),m.jsx(Yg.Slot,{scope:n,children:m.jsx(Be.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Se(s.onScroll,c=>{const d=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const p=Math.abs(l.current-d.scrollTop);if(p>0){const T=window.innerHeight-cs*2,y=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),E=Math.max(y,w);if(E<T){const v=E+p,S=Math.min(T,v),C=v-S;h.style.height=S+"px",h.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});WL.displayName=Iw;var HL="SelectGroup",[SJ,IJ]=_u(HL),CJ=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=eu();return m.jsx(SJ,{scope:n,id:s,children:m.jsx(Be.div,{role:"group","aria-labelledby":s,...r,ref:e})})});CJ.displayName=HL;var qL="SelectLabel",GL=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=IJ(qL,n);return m.jsx(Be.div,{id:s.id,...r,ref:e})});GL.displayName=qL;var Nm="SelectItem",[RJ,KL]=_u(Nm),QL=_.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=_a(Nm,n),l=wa(Nm,n),c=a.value===r,[d,h]=_.useState(i??""),[f,p]=_.useState(!1),T=Mt(e,v=>{var S;return(S=l.itemRefCallback)==null?void 0:S.call(l,v,r,s)}),y=eu(),w=_.useRef("touch"),E=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return m.jsx(RJ,{scope:n,value:r,disabled:s,textId:y,isSelected:c,onItemTextChange:_.useCallback(v=>{h(S=>S||((v==null?void 0:v.textContent)??"").trim())},[]),children:m.jsx(Yg.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:m.jsx(Be.div,{role:"option","aria-labelledby":y,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:T,onFocus:Se(o.onFocus,()=>p(!0)),onBlur:Se(o.onBlur,()=>p(!1)),onClick:Se(o.onClick,()=>{w.current!=="mouse"&&E()}),onPointerUp:Se(o.onPointerUp,()=>{w.current==="mouse"&&E()}),onPointerDown:Se(o.onPointerDown,v=>{w.current=v.pointerType}),onPointerMove:Se(o.onPointerMove,v=>{var S;w.current=v.pointerType,s?(S=l.onItemLeave)==null||S.call(l):w.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Se(o.onPointerLeave,v=>{var S;v.currentTarget===document.activeElement&&((S=l.onItemLeave)==null||S.call(l))}),onKeyDown:Se(o.onKeyDown,v=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&v.key===" "||(fJ.includes(v.key)&&E(),v.key===" "&&v.preventDefault())})})})})});QL.displayName=Nm;var rd="SelectItemText",YL=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=_a(rd,n),a=wa(rd,n),l=KL(rd,n),c=yJ(rd,n),[d,h]=_.useState(null),f=Mt(e,E=>h(E),l.onItemTextChange,E=>{var v;return(v=a.itemTextRefCallback)==null?void 0:v.call(a,E,l.value,l.disabled)}),p=d==null?void 0:d.textContent,T=_.useMemo(()=>m.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:y,onNativeOptionRemove:w}=c;return En(()=>(y(T),()=>w(T)),[y,w,T]),m.jsxs(m.Fragment,{children:[m.jsx(Be.span,{id:l.textId,...i,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?pa.createPortal(i.children,o.valueNode):null]})});YL.displayName=rd;var XL="SelectItemIndicator",JL=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return KL(XL,n).isSelected?m.jsx(Be.span,{"aria-hidden":!0,...r,ref:e}):null});JL.displayName=XL;var Cw="SelectScrollUpButton",ZL=_.forwardRef((t,e)=>{const n=wa(Cw,t.__scopeSelect),r=CT(Cw,t.__scopeSelect),[s,i]=_.useState(!1),o=Mt(e,r.onScrollButtonChange);return En(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?m.jsx(tM,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});ZL.displayName=Cw;var Rw="SelectScrollDownButton",eM=_.forwardRef((t,e)=>{const n=wa(Rw,t.__scopeSelect),r=CT(Rw,t.__scopeSelect),[s,i]=_.useState(!1),o=Mt(e,r.onScrollButtonChange);return En(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;i(d)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?m.jsx(tM,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});eM.displayName=Rw;var tM=_.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=wa("SelectScrollButton",n),o=_.useRef(null),a=Xg(n),l=_.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return _.useEffect(()=>()=>l(),[l]),En(()=>{var d;const c=a().find(h=>h.ref.current===document.activeElement);(d=c==null?void 0:c.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),m.jsx(Be.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Se(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Se(s.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Se(s.onPointerLeave,()=>{l()})})}),AJ="SelectSeparator",nM=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return m.jsx(Be.div,{"aria-hidden":!0,...r,ref:e})});nM.displayName=AJ;var Aw="SelectArrow",kJ=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Jg(n),i=_a(Aw,n),o=wa(Aw,n);return i.open&&o.position==="popper"?m.jsx(Fk,{...s,...r,ref:e}):null});kJ.displayName=Aw;var PJ="SelectBubbleInput",rM=_.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=_.useRef(null),i=Mt(r,s),o=IX(e);return _.useEffect(()=>{const a=s.current;if(!a)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(a,e),a.dispatchEvent(h)}},[o,e]),m.jsx(Be.select,{...n,style:{...CA,...n.style},ref:i,defaultValue:e})});rM.displayName=PJ;function sM(t){return t===""||t===void 0}function iM(t){const e=Yr(t),n=_.useRef(""),r=_.useRef(0),s=_.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=_.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function oM(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=NJ(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function NJ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var DJ=DL,aM=LL,OJ=FL,LJ=VL,MJ=jL,lM=UL,FJ=WL,cM=GL,uM=QL,VJ=YL,jJ=JL,dM=ZL,hM=eM,fM=nM;const UJ=DJ,zJ=OJ,pM=_.forwardRef(({className:t,children:e,...n},r)=>m.jsxs(aM,{ref:r,className:lt("flex h-11 sm:h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2.5 sm:py-2 text-base sm:text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-60 [&>span]:line-clamp-1 touch-manipulation min-h-[44px] sm:min-h-0 transition-all duration-200 hover:border-input/80 pointer-events-auto cursor-pointer",t),...n,children:[e,m.jsx(LJ,{asChild:!0,children:m.jsx(XA,{className:"h-4 w-4 opacity-50"})})]}));pM.displayName=aM.displayName;const mM=_.forwardRef(({className:t,...e},n)=>m.jsx(dM,{ref:n,className:lt("flex cursor-default items-center justify-center py-1",t),...e,children:m.jsx(p4,{className:"h-4 w-4"})}));mM.displayName=dM.displayName;const gM=_.forwardRef(({className:t,...e},n)=>m.jsx(hM,{ref:n,className:lt("flex cursor-default items-center justify-center py-1",t),...e,children:m.jsx(XA,{className:"h-4 w-4"})}));gM.displayName=hM.displayName;const yM=_.forwardRef(({className:t,children:e,position:n="popper",side:r="bottom",sideOffset:s=4,...i},o)=>m.jsx(MJ,{children:m.jsxs(lM,{ref:o,side:r,sideOffset:s,collisionPadding:16,avoidCollisions:!1,className:lt("z-[10005] min-w-[8rem] overflow-hidden rounded-lg border-2 border-border/50 bg-popover text-popover-foreground shadow-xl data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1",t),position:n,...i,children:[m.jsx(mM,{}),m.jsx(FJ,{className:lt("p-1 !overflow-y-auto !overflow-x-hidden",n==="popper"?"w-full min-w-[var(--radix-select-trigger-width)]":""),style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pinch-zoom",overscrollBehavior:"contain",overscrollBehaviorY:"contain",overscrollBehaviorX:"contain",scrollbarWidth:"thin",scrollbarColor:"rgba(0, 0, 0, 0.2) transparent",paddingBottom:"0px",scrollPaddingBottom:"0px",height:"auto",maxHeight:n==="popper"?"300px":"85vh"},children:e}),m.jsx(gM,{})]})}));yM.displayName=lM.displayName;const $J=_.forwardRef(({className:t,...e},n)=>m.jsx(cM,{ref:n,className:lt("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));$J.displayName=cM.displayName;const kw=_.forwardRef(({className:t,children:e,...n},r)=>m.jsxs(uM,{ref:r,className:lt("relative flex w-full cursor-pointer select-none items-center rounded-md py-2 pl-8 pr-3 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",t),...n,children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(jJ,{children:m.jsx(f4,{className:"h-4 w-4"})})}),m.jsx(VJ,{children:e})]}));kw.displayName=uM.displayName;const BJ=_.forwardRef(({className:t,...e},n)=>m.jsx(fM,{ref:n,className:lt("-mx-1 my-1 h-px bg-muted",t),...e}));BJ.displayName=fM.displayName;const WJ="/assets/images/rev-logo-Vh07wiRv.png",vM=t=>{if(!t)return null;const e=t.replace(/\D/g,"");if(e.length===0)return null;let n=e;if(n.startsWith("0")&&(n=n.substring(1)),n.startsWith("90")&&n.length>=12&&(n=n.substring(2)),n.length===10&&n.startsWith("5"))return`+90${n}`;if(t.trim().startsWith("+90")&&e.length>=12){const r=e.substring(2);if(r.length===10&&r.startsWith("5"))return`+90${r}`}return null},HZ=t=>{if(!t)return"";const e=t.replace(/\D/g,"");if(t.startsWith("+90")&&e.length===12){const n=e.substring(2);return`+90 ${n.substring(0,3)} ${n.substring(3,6)} ${n.substring(6,8)} ${n.substring(8,10)}`}if(e.startsWith("90")&&e.length===12){const n=e.substring(2);return`+90 ${n.substring(0,3)} ${n.substring(3,6)} ${n.substring(6,8)} ${n.substring(8,10)}`}if(e.length===10&&e.startsWith("5"))return`+90 ${e.substring(0,3)} ${e.substring(3,6)} ${e.substring(6,8)} ${e.substring(8,10)}`;if(e.length===11&&e.startsWith("0")){const n=e.substring(1);return`+90 ${n.substring(0,3)} ${n.substring(3,6)} ${n.substring(6,8)} ${n.substring(8,10)}`}return t},qZ=t=>{if(!t)return"";const e=vM(t);return e||t},HJ=t=>{const e=t.replace(/\D/g,"");if(e.length===0)return"";let n="+90 ",r=e;if(e.startsWith("90")&&e.length>2?r=e.substring(2):e.startsWith("0")&&e.length>1&&(r=e.substring(1)),r.length>0&&!r.startsWith("5"))return"+90 5";const i=r.substring(0,10);return i.length<=3?n+=i:i.length<=6?n+=`${i.substring(0,3)} ${i.substring(3)}`:i.length<=8?n+=`${i.substring(0,3)} ${i.substring(3,6)} ${i.substring(6)}`:n+=`${i.substring(0,3)} ${i.substring(3,6)} ${i.substring(6,8)} ${i.substring(8,10)}`,n},qJ=()=>{const{signIn:t,signInWithGoogle:e,signUp:n,resetPassword:r}=Gg(),[s,i]=_.useState("signin"),[o,a]=_.useState(!1),[l,c]=_.useState(!1),[d,h]=_.useState(!1),[f,p]=_.useState(!1),[T,y]=_.useState(null),[w,E]=_.useState(null),[v,S]=_.useState(null),[C,O]=_.useState([]),[M,b]=_.useState("");_.useEffect(()=>{(async()=>{try{const D=await Bh();D.length>0?O(D.map(P=>({id:P.id,name:P.name}))):O([{id:"mechanic",name:"Mekanik Ekip"},{id:"electric",name:"Elektrik Ekibi"},{id:"software",name:"Yazlm Ekibi"}])}catch{O([{id:"mechanic",name:"Mekanik Ekip"},{id:"electric",name:"Elektrik Ekibi"},{id:"software",name:"Yazlm Ekibi"}])}})()},[]),_.useEffect(()=>(document.body.style.overflow="auto",document.body.style.height="auto",document.documentElement.style.overflow="auto",document.documentElement.style.height="auto",()=>{document.body.style.overflow="",document.body.style.height="",document.documentElement.style.overflow="",document.documentElement.style.height=""}),[]);const I=async N=>{N.preventDefault(),a(!0),y(null);const D=new FormData(N.currentTarget),P=D.get("email"),B=D.get("password"),se=await t(P,B);if(se.success)nn.success("Ho geldiniz!");else{const Q=se.message||"Giri yaplamad. Ltfen bilgilerinizi kontrol edin.";Q.includes("dorulanmam")||Q.includes("dorulama")?y(Q+" E-posta adresinize gnderilen dorulama balantsna tklayn. Ltfen spam kutunuzu da kontrol ediniz."):y(Q),(Q.includes("Firestore izin hatas")||Q.includes("permissions"))&&nn.error("Firestore Security Rules hatas! Ltfen Firebase Console'da Rules'u gncelleyin.",{duration:1e4})}a(!1)},A=async N=>{N.preventDefault(),c(!0),E(null);const D=new FormData(N.currentTarget),P=D.get("email"),B=D.get("password"),se=D.get("fullName");if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(B)){E("ifre en az 8 karakter, 1 byk harf, 1 kk harf ve 1 rakam iermelidir"),c(!1);return}const oe=D.get("phone"),j=D.get("birthDate"),$=oe&&oe.trim()!==""?vM(oe.trim()):void 0,Z=j&&j.trim()!==""?j.trim():void 0,pe=M&&M.trim()!==""?M.trim():void 0,te=await n(P,B,se,$,Z,pe);if(te.success){E(null);try{const Y=N.currentTarget;Y&&Y.reset()}catch(Y){console.warn("Form reset hatas:",Y)}nn.success("Kayt baarl! E-posta adresinize gnderilen dorulama balantsna tklayn. Ltfen spam kutunuzu da kontrol ediniz.",{duration:8e3}),nn.info("E-posta adresinize gnderilen dorulama balantsna tklayarak hesabnz aktifletirin. Ltfen spam kutunuzu da kontrol ediniz. Dorulama yapmadan giri yapamazsnz.",{duration:1e4}),setTimeout(()=>{i("signin"),y(null),setTimeout(()=>{y("E-posta adresinizi dorulamadan giri yapamazsnz. Ltfen e-postanz (spam kutusu dahil) kontrol edin ve dorulama balantsna tklayn.")},300)},1500)}else{let Y=te.message||"Kayt olurken bir hata olutu";Y.includes("Unsupported field value: undefined")||Y.includes("invalid data")?Y="Form verilerinde eksik veya geersiz alanlar var. Ltfen tm zorunlu alanlar (Ad Soyad, E-posta, ifre) doldurun ve tekrar deneyin.":Y.includes("Form verilerinde eksik")||(Y.includes("Firestore izin hatas")||Y.includes("permissions")?Y="Veritaban izin hatas. Ltfen yneticiye bavurun veya Firebase Console'da Security Rules'u kontrol edin.":(Y.includes("zaten kaytl")||Y.includes("zaten kullanlyor"))&&(Y=Y+" Giri sayfasna gemek iin 'Zaten hesabnz var m?' linkine tklayn.")),E(Y),(Y.includes("Firestore izin hatas")||Y.includes("permissions")||Y.includes("Veritaban izin hatas"))&&nn.error("Firestore Security Rules hatas! Ltfen Firebase Console'da Rules'u gncelleyin.",{duration:1e4})}c(!1)},R=async N=>{N.preventDefault(),h(!0),S(null);const P=new FormData(N.currentTarget).get("reset-email");try{const B=await r(P);B.success?(p(!0),nn.success("ifre sfrlama balants e-posta adresinize gnderildi.")):S(B.message||"ifre sfrlama e-postas gnderilemedi")}catch(B){S(B.message||"ifre sfrlama baarsz")}h(!1)};return m.jsx("div",{className:"min-h-screen w-full flex items-start sm:items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50/30 to-slate-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 p-4 sm:p-6",children:m.jsx("div",{className:"w-full max-w-md my-4 sm:my-auto py-4 sm:py-6",children:m.jsxs(El,{className:"shadow-2xl border-0 bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm",children:[m.jsxs(Tl,{className:"text-center px-6 pt-6 sm:pt-8 pb-4 sm:pb-6 space-y-4",children:[m.jsx("div",{className:"flex justify-center",children:m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-primary/20 rounded-full blur-xl animate-pulse"}),m.jsx("div",{className:"relative p-4 rounded-full bg-gradient-to-br from-primary/10 to-primary/5 border-2 border-primary/20",children:m.jsx("img",{src:WJ,alt:"Revium ERP",className:"h-16 w-16 sm:h-20 sm:w-20 rounded-full object-contain bg-white dark:bg-slate-800 p-2 shadow-lg"})})]})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(bl,{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Revium ERP"}),m.jsx(Wh,{className:"text-base text-muted-foreground",children:"irket ii ynetim sistemi"})]})]}),m.jsx(xl,{className:"px-6 pb-6 sm:pb-8",children:m.jsxs(yX,{value:s,onValueChange:N=>i(N),className:"w-full",children:[m.jsxs(TL,{className:"grid w-full grid-cols-2 h-12 bg-muted/50 rounded-lg p-1",children:[m.jsx(bw,{value:"signin",className:"text-sm font-medium touch-manipulation min-h-[44px] data-[state=active]:bg-white dark:data-[state=active]:bg-slate-700 data-[state=active]:shadow-sm transition-all",children:"Giri Yap"}),m.jsx(bw,{value:"signup",className:"text-sm font-medium touch-manipulation min-h-[44px] data-[state=active]:bg-white dark:data-[state=active]:bg-slate-700 data-[state=active]:shadow-sm transition-all",children:"Kayt Ol"})]}),m.jsx(mp,{value:"signin",className:"mt-6 space-y-5",children:m.jsxs("form",{onSubmit:I,className:"space-y-5",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs(Er,{htmlFor:"signin-email",className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(Jl,{className:"h-4 w-4 text-muted-foreground"}),"E-posta ",m.jsx("span",{className:"text-destructive",children:"*"})]}),m.jsx(Ti,{id:"signin-email",name:"email",type:"email",placeholder:"ornek@reviumtech.com",required:!0,autoComplete:"email",className:"h-11"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs(Er,{htmlFor:"signin-password",className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(g_,{className:"h-4 w-4 text-muted-foreground"}),"ifre ",m.jsx("span",{className:"text-destructive",children:"*"})]}),m.jsx(dh,{id:"signin-password",name:"password",placeholder:"",required:!0,autoComplete:"current-password",className:"h-11"})]}),T&&m.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-destructive/10 border border-destructive/20",children:[m.jsx(pd,{className:"h-4 w-4 text-destructive mt-0.5 flex-shrink-0"}),m.jsx("p",{className:"text-sm text-destructive flex-1",children:T})]}),m.jsx(rn,{type:"submit",className:"w-full h-11 text-base font-medium shadow-sm",disabled:o,children:o?m.jsxs(m.Fragment,{children:[m.jsx(Ho,{className:"mr-2 h-4 w-4 animate-spin"}),"Giri yaplyor..."]}):"Giri Yap"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("span",{className:"w-full border-t"})}),m.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:m.jsx("span",{className:"bg-white dark:bg-slate-800 px-2 text-muted-foreground",children:"veya"})})]}),m.jsxs(rn,{type:"button",variant:"outline",className:"w-full h-11 text-base font-medium",onClick:async()=>{a(!0),y(null);const N=await e();N.success||(y(N.message||"Google ile giri baarsz oldu"),a(!1))},disabled:o,children:[m.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[m.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),m.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),m.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),m.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google ile Giri Yap"]}),m.jsx("button",{type:"button",className:"text-sm text-primary hover:text-primary/80 underline-offset-4 hover:underline touch-manipulation min-h-[44px] w-full text-center transition-colors",onClick:()=>{i("forgot"),p(!1),S(null)},children:"ifremi Unuttum"})]})}),m.jsx(mp,{value:"signup",className:"mt-6 space-y-5",children:m.jsxs("form",{onSubmit:A,className:"space-y-5",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs(Er,{htmlFor:"signup-name",className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(_4,{className:"h-4 w-4 text-muted-foreground"}),"Ad Soyad ",m.jsx("span",{className:"text-destructive",children:"*"})]}),m.jsx(Ti,{id:"signup-name",name:"fullName",type:"text",placeholder:"Ad - Soyad",required:!0,autoComplete:"name",className:"h-11"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs(Er,{htmlFor:"signup-email",className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(Jl,{className:"h-4 w-4 text-muted-foreground"}),"E-posta ",m.jsx("span",{className:"text-destructive",children:"*"})]}),m.jsx(Ti,{id:"signup-email",name:"email",type:"email",placeholder:"ornek@reviumtech.com",required:!0,autoComplete:"email",className:"h-11"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs(Er,{htmlFor:"signup-password",className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(g_,{className:"h-4 w-4 text-muted-foreground"}),"ifre ",m.jsx("span",{className:"text-destructive",children:"*"})]}),m.jsx(dh,{id:"signup-password",name:"password",placeholder:"",required:!0,minLength:8,pattern:"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).{8,}$",title:"ifre en az 8 karakter, 1 byk harf, 1 kk harf ve 1 rakam iermelidir",autoComplete:"new-password",className:"h-11"}),m.jsx("p",{className:"text-xs text-muted-foreground px-1",children:"En az 8 karakter, 1 byk harf, 1 kk harf ve 1 rakam"})]}),m.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs(Er,{htmlFor:"signup-phone",className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(v4,{className:"h-4 w-4 text-muted-foreground"}),"Telefon"]}),m.jsx(Ti,{id:"signup-phone",name:"phone",type:"tel",placeholder:"+90 5XX XXX XX XX",autoComplete:"tel",className:"h-11",onChange:N=>{const D=N.target,P=D.selectionStart||0,B=D.value;B.replace(/\D/g,"");const se=B.substring(0,P).replace(/\D/g,"").length,Q=HJ(D.value);D.value=Q,setTimeout(()=>{let oe=Q.length;if(se>0){let j=0;for(let $=0;$<Q.length;$++)if(/\d/.test(Q[$])&&(j++,j>=se)){oe=$+1;break}}D.setSelectionRange(oe,oe)},0)}})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs(Er,{htmlFor:"signup-birthdate",className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(h4,{className:"h-4 w-4 text-muted-foreground"}),"Doum Tarihi"]}),m.jsx(Ti,{id:"signup-birthdate",name:"birthDate",type:"date",autoComplete:"bday",className:"h-11",max:`${new Date().getFullYear()}-12-31`,min:"1900-01-01",onInput:N=>{const D=N.target,P=D.value;if(P&&P.length>=4){const B=P.substring(0,4);if(B.length>4){const se=B.substring(0,4).replace(/\D/g,"");if(se.length===4){const Q=P.substring(4);D.value=se+Q}}}}})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs(Er,{htmlFor:"signup-team",className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(w4,{className:"h-4 w-4 text-muted-foreground"}),"Ekip"]}),m.jsxs(UJ,{value:M||"none",onValueChange:N=>b(N==="none"?"":N),children:[m.jsx(pM,{id:"signup-team",className:"h-11",children:m.jsx(zJ,{placeholder:"Ekip seiniz (opsiyonel)"})}),m.jsxs(yM,{side:"bottom",avoidCollisions:!1,position:"popper",children:[m.jsx(kw,{value:"none",children:"Ekip seilmedi"}),C.map(N=>m.jsx(kw,{value:N.id,children:N.name},N.id))]})]}),m.jsx("p",{className:"text-xs text-muted-foreground px-1",children:"Setiiniz ekip lideri tarafndan onaylanmanz gerekecektir"})]}),w&&m.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-destructive/10 border border-destructive/20",children:[m.jsx(pd,{className:"h-4 w-4 text-destructive mt-0.5 flex-shrink-0"}),m.jsx("p",{className:"text-sm text-destructive flex-1",children:w})]}),m.jsx(rn,{type:"submit",className:"w-full h-11 text-base font-medium shadow-sm",disabled:l,children:l?m.jsxs(m.Fragment,{children:[m.jsx(Ho,{className:"mr-2 h-4 w-4 animate-spin"}),"Kayt olunuyor..."]}):"Kayt Ol"})]})}),m.jsx(mp,{value:"forgot",className:"mt-6 space-y-5",children:f?m.jsxs("div",{className:"space-y-5 text-center",children:[m.jsx("div",{className:"flex justify-center",children:m.jsx("div",{className:"p-3 rounded-full bg-green-100 dark:bg-green-900/20",children:m.jsx(JA,{className:"h-8 w-8 text-green-600 dark:text-green-400"})})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("h3",{className:"font-semibold text-lg",children:"E-posta Gnderildi"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"ifre sfrlama balants e-posta adresine gnderildi. Gelen kutunu ve spam klasrn kontrol etmeyi unutma."})]}),m.jsxs(rn,{variant:"outline",onClick:()=>i("signin"),className:"w-full",children:[m.jsx(wx,{className:"mr-2 h-4 w-4"}),"Giri sayfasna dn"]})]}):m.jsxs("form",{onSubmit:R,className:"space-y-5",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs(Er,{htmlFor:"reset-email",className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(Jl,{className:"h-4 w-4 text-muted-foreground"}),"E-posta ",m.jsx("span",{className:"text-destructive",children:"*"})]}),m.jsx(Ti,{id:"reset-email",name:"reset-email",type:"email",placeholder:"ornek@reviumtech.com",required:!0,autoComplete:"email",className:"h-11"}),m.jsx("p",{className:"text-xs text-muted-foreground px-1",children:"ifre sfrlama balants e-posta adresinize gnderilecektir."})]}),v&&m.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-destructive/10 border border-destructive/20",children:[m.jsx(pd,{className:"h-4 w-4 text-destructive mt-0.5 flex-shrink-0"}),m.jsx("p",{className:"text-sm text-destructive flex-1",children:v})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsxs(rn,{type:"button",variant:"outline",onClick:()=>i("signin"),className:"flex-1",children:[m.jsx(wx,{className:"mr-2 h-4 w-4"}),"Geri"]}),m.jsx(rn,{type:"submit",className:"flex-1 h-11 font-medium shadow-sm",disabled:d,children:d?m.jsxs(m.Fragment,{children:[m.jsx(Ho,{className:"mr-2 h-4 w-4 animate-spin"}),"Gnderiliyor..."]}):m.jsxs(m.Fragment,{children:[m.jsx(Jl,{className:"mr-2 h-4 w-4"}),"Gnder"]})})]})]})})]})})]})})})},GJ=()=>{const t=eo();return _.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),m.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),m.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),m.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},KJ=()=>{const[t]=gP(),e=ml(),n=t.get("token"),r=t.get("userId"),[s,i]=_.useState("loading"),[o,a]=_.useState("Balant dorulanyor...");return _.useEffect(()=>{if(!n||!r){i("error"),a("Dorulama token veya kullanc ID bulunamad.");return}i("success"),a("E-posta adresiniz onayland. Giri sayfasna ynlendiriliyorsunuz..."),setTimeout(()=>{e("/auth")},2e3)},[n,r,e]),m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30 p-4",children:m.jsxs(El,{className:"max-w-md w-full text-center",children:[m.jsx(Tl,{children:m.jsx(bl,{children:"E-posta Dorulama"})}),m.jsxs(xl,{className:"space-y-4",children:[s==="loading"&&m.jsxs("div",{className:"flex flex-col items-center gap-3 text-muted-foreground",children:[m.jsx(Ho,{className:"h-8 w-8 animate-spin"}),m.jsx("p",{children:o})]}),s==="success"&&m.jsxs("div",{className:"flex flex-col items-center gap-3 text-green-600",children:[m.jsx(JA,{className:"h-10 w-10"}),m.jsx("p",{children:o}),m.jsxs("div",{className:"flex flex-col items-center gap-2",children:[m.jsx(Ho,{className:"h-5 w-5 animate-spin"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Ynlendiriliyorsunuz..."})]})]}),s==="error"&&m.jsxs("div",{className:"flex flex-col items-center gap-3 text-destructive",children:[m.jsx(m4,{className:"h-10 w-10"}),m.jsx("p",{className:"text-sm",children:o}),m.jsx(rn,{asChild:!0,variant:"outline",children:m.jsx(Jp,{to:"/auth",children:"Giri Sayfasna Dn"})})]})]})]})})},QJ=()=>{var f,p;const{user:t,signOut:e}=Gg(),n=ml(),r=eo();_.useState(!1);const[s,i]=_.useState(!1),[o,a]=_.useState(null),l=(f=r.state)==null?void 0:f.email,c=(p=r.state)==null?void 0:p.message;_.useEffect(()=>{if(c&&(a(c),nn.info(c)),!t){n("/auth");return}if(t.emailVerified){n("/");return}},[t,n,c]);const d=async()=>{if(t){i(!0);try{await Z2(),nn.success("Dorulama e-postas tekrar gnderildi. Ltfen e-posta kutunuzu kontrol edin."),a(null)}catch(T){nn.error("E-posta gnderilemedi: "+T.message)}finally{i(!1)}}},h=async()=>{await e(),n("/auth")};return!t||t.emailVerified?null:m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30 p-4",children:m.jsxs(El,{className:"max-w-md w-full",children:[m.jsxs(Tl,{className:"text-center",children:[m.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-primary/10",children:m.jsx(Jl,{className:"h-8 w-8 text-primary"})}),m.jsx(bl,{children:"E-posta Dorulamas Gerekli"}),m.jsx(Wh,{children:"Hesabnz kullanmaya devam etmek iin e-posta adresinizi dorulamanz gerekiyor."})]}),m.jsxs(xl,{className:"space-y-4",children:[o&&m.jsx("div",{className:"rounded-lg bg-blue-50 border border-blue-200 p-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(pd,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),m.jsx("p",{className:"text-sm text-blue-900",children:o})]})}),m.jsx("div",{className:"rounded-lg bg-muted p-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(pd,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0"}),m.jsxs("div",{className:"flex-1 space-y-1",children:[m.jsx("p",{className:"text-sm font-medium",children:"E-posta adresinize gnderilen dorulama balantsna tklayn."}),m.jsxs("p",{className:"text-xs text-muted-foreground",children:["E-posta adresi: ",m.jsx("span",{className:"font-medium",children:l||(t==null?void 0:t.email)})]})]})]})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(rn,{onClick:d,disabled:s,className:"w-full",children:s?m.jsxs(m.Fragment,{children:[m.jsx(Ho,{className:"mr-2 h-4 w-4 animate-spin"}),"Gnderiliyor..."]}):m.jsxs(m.Fragment,{children:[m.jsx(Jl,{className:"mr-2 h-4 w-4"}),"Dorulama E-postasn Tekrar Gnder"]})}),m.jsx(rn,{variant:"outline",onClick:h,className:"w-full",children:"k Yap"})]}),m.jsx("div",{className:"pt-4 border-t",children:m.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"E-postay bulamadnz m? Spam klasrn kontrol edin veya yukardaki butona tklayarak tekrar gnderin."})})]})]})})},YJ=()=>{const[t]=gP(),e=t.get("token"),n=t.get("userId"),[r,s]=_.useState(!0),[i,o]=_.useState(null),[a,l]=_.useState(""),[c,d]=_.useState(""),[h,f]=_.useState(!1),[p,T]=_.useState(null),[y,w]=_.useState(!1);_.useEffect(()=>{(async()=>{if(!e||!n){T("Geersiz balant - token veya kullanc ID bulunamad"),s(!1);return}try{o("E-posta adresi"),s(!1)}catch{T("Bu balant geersiz veya sresi dolmu."),s(!1)}})()},[e,n]);const E=async v=>{if(v.preventDefault(),!e){nn.error("Geersiz token");return}if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(a)){nn.error("ifre en az 8 karakter, 1 byk harf, 1 kk harf ve 1 rakam iermelidir");return}if(a!==c){nn.error("ifreler uyumuyor");return}f(!0);try{await yB(Te,e,a),w(!0),nn.success("ifreniz gncellendi")}catch(C){nn.error("ifre sfrlanamad: "+C.message)}f(!1)};return m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30 p-4",children:m.jsxs(El,{className:"max-w-md w-full",children:[m.jsxs(Tl,{className:"text-center",children:[m.jsx("div",{className:"flex justify-center mb-2",children:m.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:m.jsx(g_,{className:"h-6 w-6 text-primary"})})}),m.jsx(bl,{children:"ifre Sfrlama"})]}),m.jsx(xl,{children:r?m.jsxs("div",{className:"flex flex-col items-center gap-3 text-muted-foreground py-6",children:[m.jsx(Ho,{className:"h-6 w-6 animate-spin"}),m.jsx("p",{children:"Balant dorulanyor..."})]}):p?m.jsxs("div",{className:"text-center space-y-4",children:[m.jsx("p",{className:"text-sm text-destructive",children:p}),m.jsx(rn,{asChild:!0,variant:"outline",children:m.jsx(Jp,{to:"/auth",children:"Giri sayfasna dn"})})]}):y?m.jsxs("div",{className:"text-center space-y-4",children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"ifreniz gncellendi. Yeni ifrenizle giri yapabilirsiniz."}),m.jsx(rn,{asChild:!0,children:m.jsx(Jp,{to:"/auth",children:"Giri Yap"})})]}):m.jsxs("form",{className:"space-y-4",onSubmit:E,children:[m.jsxs("div",{children:[m.jsx(Er,{children:"E-posta"}),m.jsx(Ti,{value:i??"",disabled:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Er,{children:"Yeni ifre"}),m.jsx(dh,{value:a,minLength:8,pattern:"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).{8,}$",title:"ifre en az 8 karakter, 1 byk harf, 1 kk harf ve 1 rakam iermelidir",onChange:v=>l(v.target.value),required:!0}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"En az 8 karakter, 1 byk harf, 1 kk harf ve 1 rakam"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Er,{children:"Yeni ifre (Tekrar)"}),m.jsx(dh,{value:c,minLength:8,onChange:v=>d(v.target.value),required:!0})]}),m.jsx(rn,{type:"submit",className:"w-full",disabled:h,children:h?"Gncelleniyor...":"ifreyi Gncelle"})]})})]})})},an=t=>_.lazy(async()=>{let e;for(let r=0;r<2;r++)try{return await t()}catch(s){e=s,console.error(`Lazy loading error (attempt ${r+1}/2):`,s),r<1&&await new Promise(i=>setTimeout(i,1e3*(r+1)))}throw console.error("Lazy loading failed after all retries:",e),e}),XJ=an(()=>tt(()=>import("./Dashboard-Cd021t-a.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),JJ=an(()=>tt(()=>import("./Production-BO_DC2gN.js"),__vite__mapDeps([9,1,2,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),YI=an(()=>tt(()=>import("./Tasks-j5VmRSrX.js"),__vite__mapDeps([27,1,2,28,10,29,13,30,6,7,31,32,16,33,34,19,25,35,36,37,38,39,40,22,41,42,43,44,45,46,24,47]))),ZJ=an(()=>tt(()=>import("./TaskDetail-ar69kH0H.js"),__vite__mapDeps([48,1,2,28,49,41]))),eZ=an(()=>tt(()=>import("./TaskPool-CTAdN623.js"),__vite__mapDeps([50,1,2,10,13,30,6,7,31,32,16,28,33,34,19,25,35,36,37,38,39,40,22,41,42,43,44]))),tZ=an(()=>tt(()=>import("./TasksArchive-DOMiRHnq.js"),__vite__mapDeps([51,1,2,28,10,26,52,33,34,20,21,22,18,23,24,25,53,32,16,19,38,36,37,46,45,40,41,13]))),nZ=an(()=>tt(()=>import("./Customers-CUOT9w7t.js"),__vite__mapDeps([54,1,2,10,13,17,18,55,49,5,6,7,21,22,4,56,57,19,38,41,58,11,59,12,60,26,40]))),rZ=an(()=>tt(()=>import("./Products-CD-v0evj.js"),__vite__mapDeps([61,1,2,10,13,18,62,8,11,21,22,19,58,59,12,60,4,26,40,56]))),sZ=an(()=>tt(()=>import("./Orders-ByhjdmG5.js"),__vite__mapDeps([63,1,2,10,11,13,64,15,16,17,18,19,49,43,41,65,44,47,55,5,6,7,21,22,4,56,57,38,12,23,24,26,66]))),iZ=an(()=>tt(()=>import("./Reports-Bblk1VGx.js"),__vite__mapDeps([67,1,2,68,11,57,4,36,59,8,66,15,16,17,18,19,12,22]))),oZ=an(()=>tt(()=>import("./RawMaterials-BAsM9hfQ.js"),__vite__mapDeps([69,1,2,10,53,8,70,12,18,11,62,21,22,19,58,59,60,4,26,13]))),aZ=an(()=>tt(()=>import("./Settings-DBQkX1YU.js"),__vite__mapDeps([71,1,2,41,72,7,26]))),lZ=an(()=>tt(()=>import("./Profile-DQuLyO5P.js"),__vite__mapDeps([73,1,2,11,74,68,57,75,43,41,65,44,42]))),cZ=an(()=>tt(()=>import("./Admin-0Fo3q3pj.js"),__vite__mapDeps([76,1,2,28,10,11,13,34,75,43,41,65,44,42,22,19,36,64,15,16,17,18,49,47,55,5,6,7,21,4,56,57,38,12,72,31,77,53,74,3,52,33,20,23,24,25,32,37,46,45,40,14,60,68]))),uZ=an(()=>tt(()=>import("./TeamManagement-DvELcpKp.js"),__vite__mapDeps([78,1,2,13,28,30,6,7,31,32,16,33,34,19,25,39,46,47,41,44,68,10,11,4,57,77,53,74,60,65,36]))),dZ=an(()=>tt(()=>import("./Projects-CCMlHBeL.js"),__vite__mapDeps([79,1,2,10,33,34,13,30,6,7,31,32,16,28,19,25,26,21,22,18]))),hZ=an(()=>tt(()=>import("./Warranty-EX25GULt.js"),__vite__mapDeps([80,1,2,10,13,26,19,21,22,18]))),fZ=an(()=>tt(()=>import("./Requests-CGC9XHEO.js"),__vite__mapDeps([81,1,2,11,29,12,18,13,19,22,41]))),pZ=an(()=>tt(()=>import("./Notifications-k-mcjnZU.js"),__vite__mapDeps([82,1,2]))),Ht=()=>m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:m.jsxs("div",{className:"flex flex-col items-center gap-4",children:[m.jsx(Ho,{className:"h-8 w-8 animate-spin text-primary"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Sayfa ykleniyor..."})]})}),mZ=new q6({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5*60*1e3,gcTime:10*60*1e3}}}),gZ=()=>m.jsx(KY,{children:m.jsx(i9,{})}),yZ=p9([{element:m.jsx(gZ,{}),errorElement:m.jsx(gt,{}),children:[{path:"/verify-email",element:m.jsx(KJ,{}),errorElement:m.jsx(gt,{})},{path:"/verify-email-prompt",element:m.jsx(QJ,{}),errorElement:m.jsx(gt,{})},{path:"/reset-password",element:m.jsx(YJ,{}),errorElement:m.jsx(gt,{})},{path:"/auth",element:m.jsx(qJ,{}),errorElement:m.jsx(gt,{})},{path:"/",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(XJ,{})})}),errorElement:m.jsx(gt,{})},{path:"/production",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(JJ,{})})}),errorElement:m.jsx(gt,{})},{path:"/tasks",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(YI,{})})}),errorElement:m.jsx(gt,{})},{path:"/tasks/:id",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(ZJ,{})})}),errorElement:m.jsx(gt,{})},{path:"/tasks/archive",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(tZ,{})})}),errorElement:m.jsx(gt,{})},{path:"/task-pool",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(eZ,{})})}),errorElement:m.jsx(gt,{})},{path:"/projects",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(dZ,{})})}),errorElement:m.jsx(gt,{})},{path:"/projects/:projectId/tasks",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(YI,{})})}),errorElement:m.jsx(gt,{})},{path:"/customers",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(nZ,{})})}),errorElement:m.jsx(gt,{})},{path:"/products",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(rZ,{})})}),errorElement:m.jsx(gt,{})},{path:"/orders",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(sZ,{})})}),errorElement:m.jsx(gt,{})},{path:"/requests",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(fZ,{})})}),errorElement:m.jsx(gt,{})},{path:"/reports",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(iZ,{})})}),errorElement:m.jsx(gt,{})},{path:"/raw-materials",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(oZ,{})})}),errorElement:m.jsx(gt,{})},{path:"/warranty",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(hZ,{})})}),errorElement:m.jsx(gt,{})},{path:"/admin",element:m.jsx(QY,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(cZ,{})})}),errorElement:m.jsx(gt,{})},{path:"/team-management",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(uZ,{})})}),errorElement:m.jsx(gt,{})},{path:"/settings",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(aZ,{})})}),errorElement:m.jsx(gt,{})},{path:"/profile",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(lZ,{})})}),errorElement:m.jsx(gt,{})},{path:"/notifications",element:m.jsx(en,{children:m.jsx(_.Suspense,{fallback:m.jsx(Ht,{}),children:m.jsx(pZ,{})})}),errorElement:m.jsx(gt,{})},{path:"*",element:m.jsx(GJ,{}),errorElement:m.jsx(gt,{})}]}],{future:{v7_startTransition:!0,v7_relativeSplatPath:!0}}),vZ=()=>m.jsx(JY,{children:m.jsx(G6,{client:mZ,children:m.jsxs(T6,{children:[m.jsx(rU,{}),m.jsx(LU,{}),m.jsx(T9,{router:yZ})]})})}),_Z=async(t,e)=>{try{const r=(await qa()).find(a=>a.email.toLowerCase()===t.toLowerCase());if(!r)return{success:!1,message:`Kullanc bulunamad: ${t}`};const s=await Bh();if(s.length===0)return{success:!1,message:"Hi departman bulunamad. nce departman oluturun."};let i=e?s.find(a=>a.id===e):s[0];if(!i)return{success:!1,message:`Departman bulunamad: ${e}`};await B2(i.id,{managerId:r.id});const o=r.role||[];if(!o.includes("team_leader")&&!o.includes("super_admin")){const{updateDoc:a,doc:l}=await tt(async()=>{const{updateDoc:h,doc:f}=await Promise.resolve().then(()=>MH);return{updateDoc:h,doc:f}},void 0),{db:c}=await tt(async()=>{const{db:h}=await Promise.resolve().then(()=>VY);return{db:h}},void 0),d=l(c,"users",r.id);await a(d,{role:[...o,"team_leader"]})}return{success:!0,message:`${r.fullName||r.email} kullancs "${i.name}" ekibinin lideri olarak atand ve rol gncellendi.`}}catch(n){return console.error("Set team leader error:",n),{success:!1,message:n.message||"Ekip lideri atanrken hata olutu"}}},wZ=async t=>{try{console.log(` Kullanc aranyor: ${t}`);const e=Zn(St,"users"),n=Qn(e,Li("email","==",t)),r=await Or(n);if(r.empty){console.error(" Kullanc bulunamad!");return}const s=r.docs[0],i=s.data(),o=i.role||["viewer"];if(console.log(` Kullanc bulundu: ${i.displayName||t}`),console.log(` Mevcut Roller: ${o.join(", ")}`),o.includes("admin"))console.log(" Bu kullanc zaten admin yetkisine sahip.");else{const a=[...o,"admin"];await $n(Bt(St,"users",s.id),{role:a}),console.log(` BAARILI: ${t} kullancsna 'admin' rol eklendi.`),console.log(` Yeni Roller: ${a.join(", ")}`),console.log(" Deiikliin etkili olmas iin kullancnn k yapp tekrar girmesi gerekebilir.")}}catch(e){console.error(" Hata olutu:",e)}},EZ=async t=>{try{const e=Zn(dt,"users"),n=Qn(e,Li("email","==",t)),r=await Or(n);if(r.empty){nn.error(`Kullanc bulunamad: ${t}`),console.error(`Kullanc bulunamad: ${t}`);return}const s=r.docs[0],o=s.data().role||[];if(o.includes("super_admin")){nn.info(`${t} zaten sper ynetici rolne sahip.`),console.log(`${t} zaten sper ynetici rolne sahip.`);return}await $n(s.ref,{role:[...o,"super_admin"]}),nn.success(`${t} kullancs sper ynetici olarak ayarland.`),console.log(`${t} kullancs sper ynetici olarak ayarland.`)}catch(e){console.error("Sper ynetici atama hatas:",e),nn.error(`Sper ynetici atama hatas: ${e.message}`)}},_M=async t=>{let e="http://localhost:3000/api/send-email";!e||e.includes("localhost")||e.includes("127.0.0.1")?e="http://localhost:3000/api/send-email":!e.endsWith("/send-email")&&!e.endsWith("/send-email/")&&(e=e.replace(/\/$/,"")+"/send-email");const n="https://revpad.net/api/send-email",r=(s,i,o=8e3)=>Promise.race([fetch(s,{...i,headers:{...i.headers,Accept:"application/json"},mode:"cors"}).catch(a=>{const l=(a==null?void 0:a.message)||String(a);return l.includes("CORS")||l.includes("Failed to fetch")||l.includes("ERR_")?Promise.reject(new Error("NetworkError")):Promise.reject(a)}),new Promise((a,l)=>setTimeout(()=>l(new Error("Timeout")),o))]);if(e)try{const s=await r(e,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({to:t.to,subject:t.subject,html:t.html})});if(s.ok){const i=s.headers.get("content-type");if(i&&i.includes("application/json")&&(await s.json()).success)return{success:!0}}}catch{}try{const s=await r(n,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({to:t.to,subject:t.subject,html:t.html})}),i=s.headers.get("content-type");if(!i||!i.includes("application/json")){const a=await s.text().catch(()=>"");return{success:!1,error:"E-posta servisi u an megul"}}const o=await s.json().catch(()=>({}));return s.ok&&o.success?{success:!0}:{success:!1,error:o.error||`E-posta servisi yant vermedi (${s.status})`}}catch(s){let i=(s==null?void 0:s.message)||String(s)||"E-posta gnderilemedi";return i.includes("CORS")||i.includes("Access-Control-Allow-Origin")||i.includes("ERR_CONNECTION_REFUSED")||i.includes("ERR_FAILED"),i.includes("Failed to fetch")||i.includes("NetworkError"),i.includes("Timeout"),{success:!1,error:"E-posta servisine eriilemedi"}}},XI=async t=>{if(!t||!t.includes("@"))return{success:!1,error:"Geerli bir e-posta adresi giriniz",details:{testEmail:t,timestamp:new Date().toISOString()}};try{const e="http://localhost:3000/api/send-email",n=e&&(e.includes("localhost")||e.includes("127.0.0.1"));let r;n?r="https://revpad.net/api/send-email":r="http://localhost:3000/api/send-email",console.log(" E-posta servisi test ediliyor..."),console.log(" Test e-postas:",t),console.log(" Primary URL:",e||"Yok"),console.log(" Fallback URL:",r),console.log(" Primary localhost mu?",n);const s=await _M({to:t,subject:"Revium ERP - E-posta Servisi Test",html:`
        <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 600px; margin: 0 auto;">
          <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="color: white; margin: 0; font-size: 24px;">Revium ERP Suite</h1>
          </div>
          <div style="background: #f9f9f9; padding: 30px; border-radius: 0 0 10px 10px; border: 1px solid #e0e0e0; border-top: none;">
            <h2 style="color: #333; margin-top: 0;"> E-posta Servisi Testi</h2>
            <p style="color: #666; font-size: 16px;">
              Bu bir test e-postasdr. Eer bu e-postay alyorsanz, e-posta servisi baaryla alyor!
            </p>
            <p style="color: #666; font-size: 14px; margin-top: 20px;">
              <strong>Test Zaman:</strong> ${new Date().toLocaleString("tr-TR")}
            </p>
            <p style="color: #666; font-size: 14px;">
              <strong>API Endpoint:</strong> ${e||r}
            </p>
          </div>
        </div>
      `});return s.success?console.log(" E-posta baaryla gnderildi! Ltfen e-posta kutunuzu kontrol edin."):console.error(" E-posta gnderilemedi:",s.error||"Bilinmeyen hata"),{success:s.success,error:s.error,details:{testEmail:t,timestamp:new Date().toISOString(),primaryUrl:e||"Yok",fallbackUrl:r,usedUrl:s.success?e||r:"Hibiri almad"}}}catch(e){const n=(e==null?void 0:e.message)||String(e)||"E-posta testi baarsz oldu";return console.error(" E-posta testi hatas:",n),{success:!1,error:n,details:{testEmail:t,timestamp:new Date().toISOString(),error:String(e)}}}},GZ=async(t,e,n,r,s)=>{const i="https://revpad.net";let o=`${i}/tasks`;s&&["task_assigned","task_updated","task_completed","task_created","task_approval"].includes(r)?o=`${i}/tasks?taskId=${s}`:s&&["order_created","order_updated"].includes(r)?o=`${i}/orders`:r==="role_changed"&&(o=`${i}/admin`);const a=`
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>${e}</title>
</head>
<body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">
  <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
    <h1 style="color: white; margin: 0; font-size: 24px;">Revium ERP Suite</h1>
  </div>
  <div style="background: #f9f9f9; padding: 30px; border-radius: 0 0 10px 10px; border: 1px solid #e0e0e0; border-top: none;">
    <h2 style="color: #333; margin-top: 0; font-size: 20px;">${e}</h2>
    <p style="color: #666; font-size: 16px; margin-bottom: 30px;">${n}</p>
    ${s?`
    <div style="text-align: center; margin: 30px 0;">
      <a href="${o}" style="display: inline-block; background: #667eea; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; font-weight: bold;">Detaylar Grntle</a>
    </div>
    `:""}
    <hr style="border: none; border-top: 1px solid #e0e0e0; margin: 30px 0;">
    <p style="color: #999; font-size: 12px; text-align: center; margin: 0;">
      Bu e-posta Revium ERP Suite tarafndan otomatik olarak gnderilmitir.<br>
      E-posta bildirimlerini ayarlardan ynetebilirsiniz.
    </p>
  </div>
</body>
</html>
  `.trim();return await _M({to:t,subject:`Revium ERP - ${e}`,html:a})};typeof window<"u"&&(window.setTeamLeader=_Z,window.setAdmin=wZ,window.setSuperAdmin=EZ,window.testEmail=XI,window.testEmailService=XI);try{const t=document.getElementById("root");if(!t)throw new Error("Root element not found");wA(t).render(m.jsx(vZ,{}))}catch(t){console.error("Failed to render app:",t),document.body.innerHTML=`
    <div style="display: flex; align-items: center; justify-content: center; height: 100vh; flex-direction: column; font-family: Arial, sans-serif;">
      <h1 style="color: red;">Uygulama Yklenemedi</h1>
      <p style="color: #666;">Ltfen sayfay yenileyin veya konsolu kontrol edin.</p>
      <pre style="background: #f5f5f5; padding: 20px; border-radius: 5px; margin-top: 20px; max-width: 800px; overflow: auto;">
        ${t instanceof Error?t.message:String(t)}
      </pre>
    </div>
  `}export{v4 as $,wx as A,rn as B,El as C,Li as D,Or as E,pu as F,Bt as G,YE as H,$n as I,JD as J,nk as K,Ho as L,dt as M,qc as N,Te as O,xT as P,_s as Q,Ti as R,UJ as S,Le as T,_4 as U,lt as V,AZ as W,E4 as X,kZ as Y,b6 as Z,tt as _,ml as a,C6 as a$,HZ as a0,Jl as a1,qZ as a2,Pt as a3,vM as a4,gP as a5,g_ as a6,p4 as a7,Bh as a8,si as a9,vX as aA,bL as aB,Qm as aC,Mk as aD,Fk as aE,Ok as aF,eu as aG,R0 as aH,Hd as aI,Tj as aJ,YY as aK,T6 as aL,Em as aM,LH as aN,GZ as aO,tO as aP,Yr as aQ,En as aR,Wh as aS,HJ as aT,HY as aU,N0 as aV,y4 as aW,WJ as aX,BJ as aY,og as aZ,O6 as a_,ek as aa,m4 as ab,QE as ac,Ew as ad,$Z as ae,zZ as af,xi as ag,BB as ah,s1 as ai,mp as aj,H2 as ak,Be as al,pl as am,Mt as an,Dc as ao,Se as ap,IX as aq,Y3 as ar,BY as as,XA as at,jY as au,Ym as av,ng as aw,Lk as ax,kX as ay,NL as az,nn as b,PZ as b0,S_ as b1,ds as b2,ag as b3,S6 as b4,I6 as b5,Kk as b6,j6 as b7,A6 as b8,Kn as b9,GY as bA,NZ as ba,LZ as bb,xZ as bc,eo as bd,VZ as be,C0 as bf,sL as bg,hX as bh,fX as bi,EA as bj,bA as bk,ST as bl,jI as bm,bZ as bn,aC as bo,qY as bp,B2 as bq,$2 as br,UY as bs,zY as bt,$Y as bu,KA as bv,J as bw,lc as bx,MH as by,dv as bz,Tl as c,bl as d,xl as e,h4 as f,qa as g,pd as h,JA as i,m as j,Gg as k,yX as l,TL as m,bw as n,w4 as o,pM as p,zJ as q,_ as r,yM as s,kw as t,MZ as u,f4 as v,Er as w,Zn as x,St as y,Qn as z};

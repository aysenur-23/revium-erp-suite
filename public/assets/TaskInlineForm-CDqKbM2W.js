const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/taskService-CQO0i9v5.js","assets/index-Xd90qdO9.js","assets/index-HS3kTX7E.css","assets/toastHelpers-I2G9dhou.js","assets/storageService-pEqhfEwa.js","assets/driveService-020R8zku.js"])))=>i.map(i=>d[i]);
import{a3 as ss,k as ts,r as d,a as is,_ as b,j as t,C as as,V as Ae,L as Ee,B as k,X as ue,v as De,w,R as U,S as rs,p as ns,q as ls,s as os,t as Le,a6 as cs,b as m,a8 as ds,T as he}from"./index-Xd90qdO9.js";import{uploadTaskAttachment as ms}from"./storageService-pEqhfEwa.js";import{T as us}from"./MainLayout-DW7UjMSA.js";import{C as J}from"./checkbox-BX7aNvy5.js";import{U as fs,P as Q}from"./UserMultiSelect-KlPlOKAA.js";import{canCreateTask as hs,canCreateProject as gs}from"./permissions-D79DzJt5.js";import{g as ps,a as xs,G as vs,H as ys,M as ks,N as ws,O as js,I as fe,J as bs,x as Ns,y as Ts,P as Ps,K as ze,T as _s,R as Ie,Q as Cs}from"./taskService-CQO0i9v5.js";import{P as Se}from"./plus-D9uLCipi.js";import{L as As}from"./list-checks-CkcaKLuC.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=ss("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),Es=N=>{if(!N)return"";if(N instanceof he)return N.toDate().toISOString().slice(0,10);if(N instanceof Date)return N.toISOString().slice(0,10);try{return new Date(N).toISOString().slice(0,10)}catch{return""}},Us=({mode:N,projectId:f,taskId:c,defaultStatus:Ge="pending",onCancel:ge,onSuccess:p,className:Re,isInPool:pe,showOnlyInMyTasks:xe=!1})=>{var _e,Ce;const u=N==="edit",{user:i,isAdmin:_,isSuperAdmin:X,isTeamLeader:Oe}=ts(),[M,Z]=d.useState(""),[ee,se]=d.useState(""),[te,ie]=d.useState(""),[T,ae]=d.useState([]),[C,P]=d.useState([]),[re,q]=d.useState(""),[S,A]=d.useState([]),[ne,K]=d.useState(""),[B,H]=d.useState(""),[Fe,le]=d.useState(u),[Y,G]=d.useState(!1),[E,W]=d.useState(null),[ve,ye]=d.useState([]),[ke,we]=d.useState(pe||!1),[R,z]=d.useState(!1),[j,Ve]=d.useState(!1),[je,Ue]=d.useState(void 0),[Ds,Me]=d.useState(void 0),[be,qe]=d.useState(void 0),[h,O]=d.useState(f||null),[x,y]=d.useState([]),[Ls,oe]=d.useState(!1),[Ke,ce]=d.useState(!1),$=d.useRef(null);d.useMemo(()=>u?"Görevi Düzenle":"Yeni Görev",[u]),d.useMemo(()=>u?"Başlık, açıklama, ekip ve ekleri aynı mini formdan düzenleyin.":"Minimal form ile görevi hızla ekleyin, dosya ve checklist ekleyin.",[u]),d.useEffect(()=>{(async()=>{if(!i){oe(!1),ce(!1);return}try{const s=await ds(),a={id:i.id,email:i.email,emailVerified:i.emailVerified,fullName:i.fullName,displayName:i.fullName,phone:i.phone,dateOfBirth:i.dateOfBirth,role:i.roles,createdAt:null,updatedAt:null},[l,o]=await Promise.all([hs(a,s),gs(a,s)]);oe(l),ce(l||o||_)}catch(s){console.error("Permission check error:",s),oe(!1),ce(!1)}})()},[i,_]);const D=u&&!_&&(i==null?void 0:i.id)!==be,He=is(),de=()=>{Z(""),se(""),ie(""),ae([]),P([]),q(""),A([]),K(""),H(""),W(null),ye([]),we(pe||!1),z(!1),O(f||null)},Ne=async e=>{le(!0);try{const[s,a,l,o]=await Promise.all([ps(e),xs(e),vs(e),ys(e)]);if(!s){m.error("Görev bulunamadı"),ge();return}Z(s.title),se(s.description||""),ie(Es(s.dueDate)),Ue(s.approvalStatus),Me(s.approvalRequestedBy),qe(s.createdBy),O(s.projectId||null),z(s.isPrivate||!1);const r=a.filter(n=>n.status!=="rejected");if(ae(r.map(n=>n.assignedTo)),ye(a),l.length>0){const n=l[0];W(n.id),P(n.items.map(g=>({id:g.id,text:g.text,completed:g.completed})))}else P([]),W(null);A(o.map(n=>({id:n.id,attachmentId:n.id,label:n.name,url:n.driveLink||n.url,type:n.attachmentType==="file"||n.type==="file"?"file":"drive_link"})))}catch(s){console.error("Inline form load error:",s),m.error((s==null?void 0:s.message)||"Görev verileri yüklenemedi")}finally{le(!1)}};d.useEffect(()=>{u&&c?Ne(c):(de(),le(!1))},[u,c]);const I=d.useCallback(async()=>{try{const{getProjects:e,getProjectById:s}=await b(async()=>{const{getProjects:r,getProjectById:n}=await import("./taskService-CQO0i9v5.js").then(g=>g.V);return{getProjects:r,getProjectById:n}},__vite__mapDeps([0,1,2]));if(f&&!u)try{const r=await s(f);if(!r){y([]);return}if(r.isPrivate){if(X){y([r]);return}if(i!=null&&i.id&&r.createdBy===i.id){y([r]);return}if(i!=null&&i.id)try{const{getTasks:n,getTaskAssignments:g}=await b(async()=>{const{getTasks:v,getTaskAssignments:F}=await import("./taskService-CQO0i9v5.js").then(V=>V.W);return{getTasks:v,getTaskAssignments:F}},__vite__mapDeps([0,1,2])),me=await n({projectId:f});for(const v of me){if(v.createdBy===i.id){y([r]);return}if(v.assignedUsers&&v.assignedUsers.includes(i.id)){y([r]);return}if((await g(v.id)).some(L=>L.assignedTo===i.id&&(L.status==="accepted"||L.status==="pending"))){y([r]);return}}}catch(n){console.error("Error checking project tasks:",n)}y([]);return}else{y([r]);return}}catch(r){console.error("Proje yüklenemedi",r),y([]);return}const a=await e({status:"active"});if(f&&!u){const r=a.find(n=>n.id===f);if(r!=null&&r.isPrivate){y([r]);return}}const l=await Promise.all(a.map(async r=>{if(f&&!u){const n=a.find(g=>g.id===f);if(n!=null&&n.isPrivate&&r.isPrivate&&r.id!==f)return null}if(!r.isPrivate||X||i!=null&&i.id&&r.createdBy===i.id)return r;if(i!=null&&i.id)try{const{getTasks:n,getTaskAssignments:g}=await b(async()=>{const{getTasks:v,getTaskAssignments:F}=await import("./taskService-CQO0i9v5.js").then(V=>V.W);return{getTasks:v,getTaskAssignments:F}},__vite__mapDeps([0,1,2])),me=await n({projectId:r.id});for(const v of me)if(v.createdBy===i.id||v.assignedUsers&&v.assignedUsers.includes(i.id)||(await g(v.id)).some(L=>L.assignedTo===i.id&&(L.status==="accepted"||L.status==="pending")))return r}catch(n){console.error("Error checking project tasks:",n)}return null})),o=Array.from(new Map(l.map(r=>[r.id,r])).values());y(o)}catch(e){console.error("Projeler yüklenemedi",e)}},[u,X,i,f]);d.useEffect(()=>{I()},[I]),d.useEffect(()=>{if(h){const e=x.find(s=>s.id===h);e!=null&&e.isPrivate&&I()}},[h]),d.useEffect(()=>{if(!u&&x.length>0){const e=h||f;if(e){const s=x.find(a=>a.id===e);s!=null&&s.isPrivate&&z(!0)}}},[h,f,x,u]);const Te=async()=>{if(!re.trim())return;if(u&&c&&!(_||(i==null?void 0:i.id)&&T.includes(i.id))){const{showPermissionErrorToast:a}=await b(async()=>{const{showPermissionErrorToast:l}=await import("./toastHelpers-I2G9dhou.js");return{showPermissionErrorToast:l}},__vite__mapDeps([3,1,2,0]));a("interact","checklist");return}const e={id:`${Date.now()}`,text:re.trim(),completed:!1};if(u&&c&&E)try{await ks(c,E,e.text),await Ne(c),q(""),m.success("Checklist maddesi eklendi");return}catch(s){console.error("Inline checklist add error:",s),m.error((s==null?void 0:s.message)||"Checklist maddesi eklenemedi");return}P(s=>[...s,e]),q("")},Ye=async e=>{if(u&&c&&E){const s=C.find(a=>a.id===e);if(!s)return;try{await ws(c,E,e,!s.completed,i==null?void 0:i.id),P(a=>a.map(l=>l.id===e?{...l,completed:!l.completed}:l))}catch(a){console.error("Inline checklist toggle error:",a),m.error((a==null?void 0:a.message)||"Checklist güncellenemedi")}return}P(s=>s.map(a=>a.id===e?{...a,completed:!a.completed}:a))},We=async e=>{if(u&&c&&!(_||(i==null?void 0:i.id)&&T.includes(i.id))){const{showPermissionErrorToast:a}=await b(async()=>{const{showPermissionErrorToast:l}=await import("./toastHelpers-I2G9dhou.js");return{showPermissionErrorToast:l}},__vite__mapDeps([3,1,2,0]));a("delete","checklist");return}if(u&&c&&E){try{await js(c,E,e),P(s=>s.filter(a=>a.id!==e)),m.success("Checklist maddesi silindi")}catch(s){console.error("Inline checklist delete error:",s),m.error((s==null?void 0:s.message)||"Checklist maddesi silinemedi")}return}P(s=>s.filter(a=>a.id!==e))},Pe=async()=>{if(B.trim()){if(u&&c){if(!(i!=null&&i.id)){m.error("Kullanıcı oturumu bulunamadı");return}try{const e=await fe(c,{name:ne.trim()||"Dosya Linki",url:B.trim(),type:"drive_link",attachmentType:"drive_link",driveLink:B.trim(),size:0,uploadedBy:i.id});A(s=>[...s,{id:e.id,attachmentId:e.id,label:e.name,url:e.driveLink||e.url,type:"drive_link"}]),K(""),H(""),m.success("Link eklendi");return}catch(e){console.error("Inline link add error:",e),m.error((e==null?void 0:e.message)||"Link eklenemedi");return}}A(e=>[...e,{id:`${Date.now()}`,label:ne.trim()||"Dosya Linki",url:B.trim(),type:"drive_link"}]),K(""),H("")}},$e=async e=>{var l;const s=(l=e.target.files)==null?void 0:l[0];if(!s)return;if(!u||!c){m.info("Dosya yüklemek için önce görevi oluşturmalısınız.");return}if(!(i!=null&&i.id)){m.error("Kullanıcı oturumu bulunamadı");return}const a=m.loading("Dosya yükleniyor...");try{const o=await ms(s,c),r=await fe(c,{name:s.name,url:o.url,type:s.type,attachmentType:o.provider==="google_drive"?"drive_link":"file",size:s.size,storageProvider:o.provider,driveLink:o.webViewLink||o.webContentLink||o.url,driveFileId:o.fileId,uploadedBy:i.id});A(n=>[...n,{id:r.id,attachmentId:r.id,label:r.name,url:r.url,type:r.attachmentType==="drive_link"?"drive_link":"file",storageProvider:r.storageProvider,driveFileId:r.driveFileId}]),m.success("Dosya başarıyla yüklendi",{id:a})}catch(o){console.error("File upload error:",o),m.error((o==null?void 0:o.message)||"Dosya yüklenemedi",{id:a})}finally{$.current&&($.current.value="")}},Je=async e=>{const s=S.find(a=>a.id===e);if(u&&c&&(s!=null&&s.attachmentId)){try{if(s.storageProvider==="google_drive"&&s.driveFileId){const{deleteFile:a}=await b(async()=>{const{deleteFile:l}=await import("./storageService-pEqhfEwa.js");return{deleteFile:l}},__vite__mapDeps([4,1,2,5]));await a(s.url,{provider:"google_drive",fileId:s.driveFileId})}else if(s.type!=="drive_link"){const{deleteFile:a}=await b(async()=>{const{deleteFile:l}=await import("./storageService-pEqhfEwa.js");return{deleteFile:l}},__vite__mapDeps([4,1,2,5]));await a(s.url)}await bs(c,s.attachmentId),A(a=>a.filter(l=>l.id!==e)),m.success("Ek kaldırıldı")}catch(a){console.error("Inline attachment delete error:",a),m.error((a==null?void 0:a.message)||"Ek kaldırılamadı")}return}A(a=>a.filter(l=>l.id!==e))},Qe=async e=>{if(!(i!=null&&i.id))return;const s=ve.filter(o=>o.status!=="rejected").map(o=>o.assignedTo),a=T.filter(o=>!s.includes(o)),l=s.filter(o=>!T.includes(o));a.length===0&&l.length===0||(await Promise.all(a.map(o=>Ie(e,o,i.id))),await Promise.all(l.map(async o=>{const r=ve.find(n=>n.assignedTo===o&&n.status!=="rejected");r&&await Cs(e,r.id,i==null?void 0:i.id)})))},Xe=async()=>{if(!(!c||!(i!=null&&i.id)))try{await Ns(c,i.id),m.success("Görev onaylandı ve tamamlandı"),p==null||p(c)}catch(e){m.error("Onaylama işlemi başarısız: "+e.message)}},Ze=async()=>{if(!(!c||!(i!=null&&i.id)))try{await Ts(c,i.id),m.success("Görev onayı reddedildi"),p==null||p(c)}catch(e){m.error("Reddetme işlemi başarısız: "+e.message)}},es=async()=>{if(!(i!=null&&i.id)){m.error("Kullanıcı oturumu bulunamadı");return}if(!M.trim()){m.error("Görev başlığı gereklidir");return}G(!0);try{const e=te?he.fromDate(new Date(te)):null;let s=h||f||null;f&&!h&&!j&&(s=f);let a=R;if(s){const r=x.find(n=>n.id===s);r!=null&&r.isPrivate&&!R&&!j&&(a=!0)}if(a){if(!s){m.error("Gizli görevler için bir gizli proje seçmelisiniz. Lütfen önce bir gizli proje oluşturun."),G(!1);return}const r=x.find(n=>n.id===s);if(r&&!r.isPrivate){m.error("Gizli görevler sadece gizli projelere atanabilir. Lütfen bir gizli proje seçin."),G(!1);return}}if((!s||s==="general")&&!R&&!j&&!f){m.error("Lütfen bir proje seçin. Her görevin bir projesi olmalıdır."),G(!1);return}if(u){if(!c)throw new Error("Görev seçilemedi");if(await Ps(c,{title:M.trim(),description:ee.trim()||null,dueDate:e,projectId:s||null,isPrivate:a},i.id),await Qe(c),!E&&C.length>0)if(_||(i==null?void 0:i.id)&&T.includes(i.id)){const n=await ze(c,"Checklist",C.map(g=>({text:g.text,completed:!!g.completed,updatedAt:he.now()})));W(n.id)}else{const{showPermissionErrorToast:n}=await b(async()=>{const{showPermissionErrorToast:g}=await import("./toastHelpers-I2G9dhou.js");return{showPermissionErrorToast:g}},__vite__mapDeps([3,1,2,0]));n("create","checklist")}m.success("Görev güncellendi"),p==null||p(c);return}const l=await _s({title:M.trim(),description:ee.trim()||null,status:Ge,priority:2,dueDate:e,labels:null,projectId:j?null:s||null,productionOrderId:null,productionProcessId:null,createdBy:i.id,isInPool:ke,poolRequests:[],isPrivate:j?!0:a,onlyInMyTasks:j});if(!(l!=null&&l.id))throw new Error("Görev oluşturulamadı");const o=l.id;if(T.length>0&&await Promise.all(T.map(r=>Ie(o,r,i.id))),C.length>0&&await ze(o,"Checklist",C.map(r=>({text:r.text}))),S.length>0){const r=S.filter(n=>n.type==="drive_link");r.length>0&&await Promise.all(r.map(n=>fe(o,{name:n.label,url:n.url,type:"drive_link",attachmentType:"drive_link",driveLink:n.url,size:0,uploadedBy:i.id})))}m.success("Görev oluşturuldu"),de(),p==null||p(o)}catch(e){console.error("Task inline form submit error:",e),m.error((e==null?void 0:e.message)||"Görev kaydedilirken hata oluştu")}finally{G(!1)}};return t.jsxs(as,{className:Ae("w-full border-primary/30 bg-muted/20 p-4 sm:p-6 space-y-4 shadow-sm",Re),children:[t.jsx("div",{className:"flex flex-col gap-2",children:Y&&t.jsx("div",{className:"flex justify-end mb-2",children:t.jsx(Ee,{className:"h-5 w-5 animate-spin text-primary"})})}),Fe?t.jsxs("div",{className:"flex h-32 items-center justify-center text-muted-foreground",children:[t.jsx(Ee,{className:"h-5 w-5 animate-spin mr-2"}),"Form verileri yükleniyor..."]}):t.jsxs(t.Fragment,{children:[je==="pending"&&t.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-yellow-900",children:"Onay Bekliyor"}),t.jsx("p",{className:"text-sm text-yellow-700",children:"Bu görev tamamlandı olarak işaretlendi ve onayınızı bekliyor."})]}),(_||Oe||(i==null?void 0:i.id)&&be===i.id)&&t.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[t.jsxs(k,{size:"sm",variant:"outline",className:"flex-1 sm:flex-none border-yellow-300 text-yellow-900 hover:bg-yellow-100",onClick:Ze,children:[t.jsx(ue,{className:"h-4 w-4 mr-1"}),"Reddet"]}),t.jsxs(k,{size:"sm",className:"flex-1 sm:flex-none bg-yellow-600 hover:bg-yellow-700 text-white border-none",onClick:Xe,children:[t.jsx(De,{className:"h-4 w-4 mr-1"}),"Onayla"]})]})]})}),t.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(w,{className:"text-sm sm:text-base",children:"Görev Başlığı *"}),t.jsx(U,{placeholder:"Görev başlığı",value:M,onChange:e=>Z(e.target.value),disabled:D})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(w,{className:"text-sm sm:text-base",children:"Bitiş Tarihi"}),t.jsx(U,{type:"date",value:te,onChange:e=>ie(e.target.value),disabled:D})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(w,{className:"text-sm sm:text-base",children:["Proje ",!xe&&t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsxs(rs,{value:h||"",onValueChange:async e=>{if(e==="__create_project__"){const a=window.location.pathname,l=window.location.search;He("/projects?returnTo="+encodeURIComponent(a+l));return}O(e);const s=x.find(a=>a.id===e);s!=null&&s.isPrivate&&z(!0),I()},disabled:D||!u&&!Ke||j,children:[t.jsx(ns,{children:t.jsx(ls,{placeholder:"Proje seçiniz"})}),t.jsx(os,{children:(()=>{const e=h?x.find(a=>a.id===h):null;let s=x;return R?(s=x.filter(a=>a.isPrivate),s.length===0&&(e!=null&&e.isPrivate)&&(s=[e])):e!=null&&e.isPrivate&&(s=x.filter(a=>a.isPrivate)),t.jsxs("div",{className:"max-h-[300px] overflow-y-auto overflow-x-hidden scroll-smooth",style:{height:"auto",maxHeight:"300px",scrollPaddingBlock:"10px"},children:[s.map(a=>t.jsx(Le,{value:a.id,children:a.name},a.id)),t.jsx("div",{className:"border-t border-border mt-1 pt-1",children:t.jsxs(Le,{value:"__create_project__",className:"text-primary font-medium cursor-pointer",children:[t.jsx(Se,{className:"h-4 w-4 mr-2 inline"}),"Yeni Proje Ekle"]})})]})})()})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(w,{className:"text-sm sm:text-base",children:"Açıklama"}),t.jsx(us,{rows:3,placeholder:"Görev açıklaması",value:ee,onChange:e=>se(e.target.value),disabled:D})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(w,{className:"text-sm sm:text-base",children:"Görev Üyeleri"}),t.jsx(fs,{selectedUsers:T,onSelectionChange:ae,disabled:D}),t.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[!u&&t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(J,{id:"pool-mode",checked:ke,onCheckedChange:e=>we(e)}),t.jsx(w,{htmlFor:"pool-mode",className:"text-sm font-normal cursor-pointer text-muted-foreground",children:"Bu görevi Görev Havuzuna gönder (Atama yapılsa bile havuzda görünür)"})]}),xe&&!u&&t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(J,{id:"only-my-tasks-inline",checked:j,onCheckedChange:e=>{Ve(e),e&&(O(null),z(!0))}}),t.jsx(w,{htmlFor:"only-my-tasks-inline",className:"text-sm font-normal cursor-pointer text-muted-foreground",children:'Sadece "Benim Görevlerim" sayfasında göster (Sadece ben görebilirim)'})]}),!j&&t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(J,{id:"private-task-inline",checked:R,disabled:h&&((_e=x.find(e=>e.id===h))==null?void 0:_e.isPrivate),onCheckedChange:async e=>{const s=h?x.find(a=>a.id===h):null;s!=null&&s.isPrivate||(z(e),e&&h&&!(s!=null&&s.isPrivate)&&(O(null),I()))}}),t.jsxs(w,{htmlFor:"private-task-inline",className:Ae("text-sm font-normal text-muted-foreground flex items-center gap-1",h&&((Ce=x.find(e=>e.id===h))!=null&&Ce.isPrivate)?"cursor-default":"cursor-pointer"),children:[t.jsx(cs,{className:"h-3 w-3"}),"Gizli Görev (Sadece atanan kişiler görebilir)"]})]})})]})]}),D&&!je&&t.jsx("div",{className:"flex justify-end mb-4",children:t.jsxs(k,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 hover:bg-green-100",onClick:async()=>{if(!(!c||!(i!=null&&i.id)))try{const{requestTaskApproval:e}=await b(async()=>{const{requestTaskApproval:s}=await import("./taskService-CQO0i9v5.js").then(a=>a.W);return{requestTaskApproval:s}},__vite__mapDeps([0,1,2]));await e(c,i.id),m.success("Görev tamamlandı olarak işaretlendi ve onay için yöneticiye gönderildi."),p==null||p(c)}catch(e){m.error("İşlem başarısız: "+e.message)}},children:[t.jsx(De,{className:"h-4 w-4 mr-2"}),"Görevi Tamamla (Onay İste)"]})}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs(w,{className:"flex items-center gap-2 text-sm sm:text-base",children:[t.jsx(As,{className:"h-4 w-4"}),"Checklist"]}),t.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[t.jsx(U,{placeholder:"Checklist maddesi",value:re,onChange:e=>q(e.target.value),onKeyDown:e=>{e.key==="Enter"&&(e.preventDefault(),Te())},className:"flex-1"}),t.jsx(k,{type:"button",onClick:Te,children:t.jsx(Se,{className:"h-4 w-4"})})]}),C.length>0&&t.jsx("div",{className:"space-y-2",children:C.map(e=>t.jsxs("div",{className:"flex items-center justify-between rounded-md border px-3 py-2",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(J,{checked:!!e.completed,onCheckedChange:()=>Ye(e.id)}),t.jsx("span",{className:"text-sm",children:e.text})]}),t.jsx(k,{variant:"ghost",size:"sm",onClick:()=>We(e.id),children:t.jsx(ue,{className:"h-4 w-4"})})]},e.id))})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs(w,{className:"flex items-center gap-2 text-sm sm:text-base",children:[t.jsx(Q,{className:"h-4 w-4"}),"Ekler (Dosya & Link)"]}),t.jsxs("div",{className:"grid gap-2 sm:grid-cols-3",children:[t.jsx(U,{placeholder:"Link adı",value:ne,onChange:e=>K(e.target.value)}),t.jsx(U,{placeholder:"https://...",className:"sm:col-span-2",value:B,onChange:e=>H(e.target.value),onKeyDown:e=>{e.key==="Enter"&&(e.preventDefault(),Pe())}})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(k,{type:"button",variant:"outline",size:"sm",onClick:Pe,children:[t.jsx(Be,{className:"h-4 w-4 mr-1"}),"Link Ekle"]}),u&&t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"file",ref:$,className:"hidden",onChange:$e}),t.jsxs(k,{type:"button",variant:"outline",size:"sm",onClick:()=>{var e;return(e=$.current)==null?void 0:e.click()},children:[t.jsx(Q,{className:"h-4 w-4 mr-1"}),"Dosya Yükle"]})]}),!u&&t.jsx("div",{title:"Dosya yüklemek için önce görevi oluşturmalısınız",className:"cursor-not-allowed opacity-50",children:t.jsxs(k,{type:"button",variant:"outline",size:"sm",disabled:!0,children:[t.jsx(Q,{className:"h-4 w-4 mr-1"}),"Dosya Yükle"]})})]}),S.length>0&&t.jsx("div",{className:"space-y-2",children:S.map(e=>t.jsxs("div",{className:"flex items-center justify-between rounded-md border px-3 py-2 text-sm",children:[t.jsxs("div",{className:"truncate flex items-center",children:[e.type==="file"?t.jsx(Q,{className:"h-3 w-3 mr-2 text-muted-foreground"}):t.jsx(Be,{className:"h-3 w-3 mr-2 text-muted-foreground"}),t.jsx("span",{className:"font-medium",children:e.label}),t.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground ml-2 truncate inline-block max-w-[220px] align-middle hover:text-primary hover:underline",children:e.type==="file"?"Dosyayı Aç":e.url})]}),t.jsx(k,{variant:"ghost",size:"sm",onClick:()=>Je(e.id),children:t.jsx(ue,{className:"h-4 w-4"})})]},e.id))})]}),t.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-end",children:[t.jsx(k,{variant:"ghost",onClick:()=>{ge(),u||de()},disabled:Y,children:"Vazgeç"}),!D&&t.jsx(k,{onClick:es,disabled:Y,children:Y?"Kaydediliyor...":u?"Güncelle":"Görevi Oluştur"})]})]})]})};export{Us as T};

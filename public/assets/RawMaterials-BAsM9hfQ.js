import{k as Ie,r as c,j as e,B as w,X as ge,L as me,C as V,c as ve,d as Ne,e as q,w as m,R as N,S as P,p as R,q as K,s as L,t as r,b as v,l as Ue,m as Ye,n as Se,aj as Ce,a as Ge,K as Qe,h as $e,V as Q,aL as Z,W as J,Y as ee,Z as se,U as We}from"./index-Xd90qdO9.js";import{D as fe,a as ke,b as be,P as I,c as ye,T as Me,g as Xe,B as pe,M as Ze}from"./MainLayout-DW7UjMSA.js";import{S as Je}from"./search-input-QX7HVhJf.js";import{P as es}from"./progress-DSBhhNxd.js";import{c as ss,u as as,d as De,g as ts}from"./materialService-fdlP1ZS7.js";import{handleErrorToast as ls}from"./toastHelpers-I2G9dhou.js";import{D as de,a as Te,C as Ae}from"./currency-BpxR3_y8.js";import{S as _e}from"./save-Bgz0wbo5.js";import{T as Fe,a as Pe,b as xe,c as b,d as Re,e as y}from"./table-CHpYTcky.js";import{g as rs,d as is,a as ns}from"./recipeService-CoAKsRoE.js";import{S as Ke}from"./square-pen-zeHrcQ7c.js";import{T as je}from"./trash-2-DlZRXDqX.js";import{P as Le}from"./plus-D9uLCipi.js";import{D as cs}from"./DetailedValueReportModal-Hb3qQukI.js";import{L as os}from"./loading-state-CyTUOPV3.js";import{A as ms,a as ds,b as xs,c as hs,d as us,e as ps,f as js,g as gs}from"./alert-dialog-BVp-ELLM.js";import{T as vs}from"./trending-up-DyiN6Ad2.js";import{C as Ns}from"./chart-column-tcYl_7Fa.js";import"./taskService-CQO0i9v5.js";import"./exchangeRateService-Cpnvl6ZU.js";const fs=({open:p,onOpenChange:C,onSuccess:l})=>{const{user:T}=Ie(),[j,S]=c.useState(!1),[a,n]=c.useState({name:"",sku:"",category:"other",stock:"0",min_stock:"0",max_stock:"",unit:"Adet",cost:"0",currency:de,supplier:"",description:"",location:""}),A=async t=>{t&&t.preventDefault(),S(!0);try{if(!T){v.error("Oturumunuz sona erdi. Lütfen tekrar giriş yapın."),S(!1);return}await ss({name:a.name,code:a.sku||null,unit:a.unit,currentStock:parseInt(a.stock)||0,minStock:parseInt(a.min_stock)||0,maxStock:a.max_stock?parseInt(a.max_stock):null,unitPrice:parseFloat(a.cost)||null,currencies:[a.currency],supplier:a.supplier||null,notes:a.description||null}),v.success("Hammadde başarıyla eklendi"),l(),C(!1),n({name:"",sku:"",category:"other",stock:"0",min_stock:"0",max_stock:"",unit:"Adet",cost:"0",currency:de,supplier:"",description:"",location:""})}catch(k){ls(k,"Hammadde eklenirken hata oluştu")}finally{S(!1)}};return e.jsx(fe,{open:p,onOpenChange:C,children:e.jsx(ke,{className:"!max-w-[100vw] sm:!max-w-[95vw] !w-[100vw] sm:!w-[95vw] !h-[100vh] sm:!h-[90vh] !max-h-[100vh] sm:!max-h-[90vh] !left-0 sm:!left-[2.5vw] !top-0 sm:!top-[5vh] !right-0 sm:!right-auto !bottom-0 sm:!bottom-auto !translate-x-0 !translate-y-0 overflow-hidden !p-0 gap-0 bg-white flex flex-col !m-0 !rounded-none sm:!rounded-lg !border-0 sm:!border",children:e.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[e.jsx(be,{className:"p-3 sm:p-4 border-b bg-white flex-shrink-0 relative pr-12 sm:pr-16",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-lg bg-primary/10 flex items-center justify-center border border-primary/20 flex-shrink-0",children:e.jsx(I,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),e.jsx(ye,{className:"text-lg sm:text-xl font-semibold text-foreground truncate",children:"Yeni Hammadde Ekle"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 flex-shrink-0",children:[e.jsxs(w,{variant:"outline",size:"sm",className:"border-primary/20 hover:bg-primary/5 rounded-lg px-3 py-1.5 font-medium text-xs sm:text-sm flex-shrink-0",onClick:()=>C(!1),disabled:j,children:[e.jsx(ge,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1.5 flex-shrink-0"}),"İptal"]}),e.jsxs(w,{variant:"default",size:"sm",className:"bg-primary hover:bg-primary/90 rounded-lg px-3 py-1.5 font-medium text-xs sm:text-sm flex-shrink-0 text-white",onClick:A,disabled:j,children:[j?e.jsx(me,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1.5 flex-shrink-0 animate-spin"}):e.jsx(_e,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1.5 flex-shrink-0"}),"Kaydet"]})]})]})}),e.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50/50 p-3 sm:p-4 min-h-0",children:e.jsx("div",{className:"max-w-full mx-auto h-full overflow-y-auto",children:e.jsx("form",{onSubmit:t=>{t.preventDefault(),A(t)},className:"space-y-4 sm:space-y-6",children:e.jsxs(V,{children:[e.jsx(ve,{children:e.jsx(Ne,{className:"text-lg sm:text-xl",children:"Temel Bilgiler"})}),e.jsxs(q,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"name",className:"text-sm sm:text-base",children:"Hammadde Adı"}),e.jsx(N,{id:"name",value:a.name,onChange:t=>n({...a,name:t.target.value}),className:"min-h-[44px] sm:min-h-0",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"sku",className:"text-sm sm:text-base",children:"SKU"}),e.jsx(N,{id:"sku",value:a.sku,onChange:t=>n({...a,sku:t.target.value}),className:"min-h-[44px] sm:min-h-0",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"category",className:"text-sm sm:text-base",children:"Kategori"}),e.jsxs(P,{value:a.category,onValueChange:t=>n({...a,category:t}),children:[e.jsx(R,{className:"min-h-[44px] sm:min-h-0",children:e.jsx(K,{})}),e.jsxs(L,{children:[e.jsx(r,{value:"chemical",children:"Kimyasal"}),e.jsx(r,{value:"metal",children:"Metal"}),e.jsx(r,{value:"plastic",children:"Plastik"}),e.jsx(r,{value:"electronic",children:"Elektronik"}),e.jsx(r,{value:"packaging",children:"Ambalaj"}),e.jsx(r,{value:"other",children:"Diğer"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"unit",className:"text-sm sm:text-base",children:"Birim"}),e.jsxs(P,{value:a.unit,onValueChange:t=>n({...a,unit:t}),children:[e.jsx(R,{className:"min-h-[44px] sm:min-h-0",children:e.jsx(K,{placeholder:"Birim seçin"})}),e.jsxs(L,{children:[e.jsx(r,{value:"Adet",children:"Adet"}),e.jsx(r,{value:"Kg",children:"Kg"}),e.jsx(r,{value:"Gram",children:"Gram"}),e.jsx(r,{value:"Litre",children:"Litre"}),e.jsx(r,{value:"Metre",children:"Metre"}),e.jsx(r,{value:"Cm",children:"Cm"}),e.jsx(r,{value:"M²",children:"M²"}),e.jsx(r,{value:"M³",children:"M³"}),e.jsx(r,{value:"Paket",children:"Paket"}),e.jsx(r,{value:"Kutu",children:"Kutu"}),e.jsx(r,{value:"Palet",children:"Palet"}),e.jsx(r,{value:"Ton",children:"Ton"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"stock",className:"text-sm sm:text-base",children:"Mevcut Stok"}),e.jsx(N,{id:"stock",type:"number",step:"1",min:"0",value:a.stock,onChange:t=>n({...a,stock:t.target.value}),className:"min-h-[44px] sm:min-h-0",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"min_stock",className:"text-sm sm:text-base",children:"Minimum Stok"}),e.jsx(N,{id:"min_stock",type:"number",step:"1",min:"0",value:a.min_stock,onChange:t=>n({...a,min_stock:t.target.value}),className:"min-h-[44px] sm:min-h-0",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"max_stock",className:"text-sm sm:text-base",children:"Maksimum Stok"}),e.jsx(N,{id:"max_stock",type:"number",step:"1",min:"0",value:a.max_stock,onChange:t=>n({...a,max_stock:t.target.value}),className:"min-h-[44px] sm:min-h-0"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{className:"text-sm sm:text-base",children:"Para Birimi"}),e.jsxs(P,{value:a.currency,onValueChange:t=>n({...a,currency:t}),children:[e.jsx(R,{className:"min-h-[44px] sm:min-h-0",children:e.jsx(K,{})}),e.jsx(L,{children:Te.map(t=>e.jsx(r,{value:t.value,children:t.label},t.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"cost",className:"text-sm sm:text-base",children:["Birim Maliyet (",Ae[a.currency],")"]}),e.jsx(N,{id:"cost",type:"number",step:"0.01",value:a.cost,onChange:t=>n({...a,cost:t.target.value}),className:"min-h-[44px] sm:min-h-0",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"supplier",className:"text-sm sm:text-base",children:"Tedarikçi"}),e.jsx(N,{id:"supplier",value:a.supplier,onChange:t=>n({...a,supplier:t.target.value}),className:"min-h-[44px] sm:min-h-0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"location",className:"text-sm sm:text-base",children:"Depo Konumu"}),e.jsx(N,{id:"location",value:a.location,onChange:t=>n({...a,location:t.target.value}),className:"min-h-[44px] sm:min-h-0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"description",className:"text-sm sm:text-base",children:"Açıklama"}),e.jsx(Me,{id:"description",value:a.description,onChange:t=>n({...a,description:t.target.value}),rows:3,className:"min-h-[44px] sm:min-h-0"})]})]})]})})})})]})})})},ks=({open:p,onOpenChange:C,material:l,onSuccess:T})=>{const[j,S]=c.useState(!1),[a,n]=c.useState({name:"",sku:"",category:"other",stock:"0",min_stock:"0",max_stock:"",unit:"Adet",cost:"0",currency:de,supplier:"",description:"",location:""});c.useEffect(()=>{var t,k,M,U;l&&n({name:l.name||"",sku:l.code||"",category:"other",stock:((t=l.currentStock)==null?void 0:t.toString())||"0",min_stock:((k=l.minStock)==null?void 0:k.toString())||"0",max_stock:((M=l.maxStock)==null?void 0:M.toString())||"",unit:l.unit||"Adet",cost:((U=l.unitPrice)==null?void 0:U.toString())||"0",currency:l.currencies&&l.currencies.length>0?l.currencies[0]:de,supplier:l.supplier||"",description:l.notes||"",location:""})},[l]);const A=async t=>{t&&t.preventDefault(),S(!0);try{await as(l.id,{name:a.name,code:a.sku||null,unit:a.unit,currentStock:parseInt(a.stock)||0,minStock:parseInt(a.min_stock)||0,maxStock:a.max_stock?parseInt(a.max_stock):null,unitPrice:parseFloat(a.cost)||null,currencies:[a.currency],supplier:a.supplier||null,notes:a.description||null}),v.success("Hammadde başarıyla güncellendi"),T()}catch(k){console.error("Update material error:",k),v.error(k.message||"Hammadde güncellenirken hata oluştu")}finally{S(!1)}};return e.jsx(fe,{open:p,onOpenChange:C,children:e.jsx(ke,{className:"!max-w-[100vw] sm:!max-w-[95vw] !w-[100vw] sm:!w-[95vw] !h-[100vh] sm:!h-[90vh] !max-h-[100vh] sm:!max-h-[90vh] !left-0 sm:!left-[2.5vw] !top-0 sm:!top-[5vh] !right-0 sm:!right-auto !bottom-0 sm:!bottom-auto !translate-x-0 !translate-y-0 overflow-hidden !p-0 gap-0 bg-white flex flex-col !m-0 !rounded-none sm:!rounded-lg !border-0 sm:!border",children:e.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[e.jsx(be,{className:"p-3 sm:p-4 border-b bg-white flex-shrink-0 relative pr-12 sm:pr-16",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-lg bg-primary/10 flex items-center justify-center border border-primary/20 flex-shrink-0",children:e.jsx(I,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),e.jsx(ye,{className:"text-lg sm:text-xl font-semibold text-foreground truncate",children:"Hammadde Düzenle"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 flex-shrink-0",children:[e.jsxs(w,{variant:"outline",size:"sm",className:"border-primary/20 hover:bg-primary/5 rounded-lg px-3 py-1.5 font-medium text-xs sm:text-sm flex-shrink-0",onClick:()=>C(!1),disabled:j,children:[e.jsx(ge,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1.5 flex-shrink-0"}),"İptal"]}),e.jsxs(w,{variant:"default",size:"sm",className:"bg-primary hover:bg-primary/90 rounded-lg px-3 py-1.5 font-medium text-xs sm:text-sm flex-shrink-0 text-white",onClick:A,disabled:j,children:[j?e.jsx(me,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1.5 flex-shrink-0 animate-spin"}):e.jsx(_e,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1.5 flex-shrink-0"}),"Kaydet"]})]})]})}),e.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50/50 p-3 sm:p-4 min-h-0",children:e.jsx("div",{className:"max-w-full mx-auto h-full overflow-y-auto",children:e.jsx("form",{onSubmit:t=>{t.preventDefault(),A(t)},className:"space-y-4 sm:space-y-6",children:e.jsxs(V,{children:[e.jsx(ve,{children:e.jsx(Ne,{className:"text-lg sm:text-xl",children:"Temel Bilgiler"})}),e.jsxs(q,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"name",className:"text-sm sm:text-base",children:"Hammadde Adı"}),e.jsx(N,{id:"name",value:a.name,onChange:t=>n({...a,name:t.target.value}),className:"min-h-[44px] sm:min-h-0",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"sku",className:"text-sm sm:text-base",children:"SKU"}),e.jsx(N,{id:"sku",value:a.sku,onChange:t=>n({...a,sku:t.target.value}),className:"min-h-[44px] sm:min-h-0",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"category",className:"text-sm sm:text-base",children:"Kategori"}),e.jsxs(P,{value:a.category,onValueChange:t=>n({...a,category:t}),children:[e.jsx(R,{className:"min-h-[44px] sm:min-h-0",children:e.jsx(K,{})}),e.jsxs(L,{children:[e.jsx(r,{value:"chemical",children:"Kimyasal"}),e.jsx(r,{value:"metal",children:"Metal"}),e.jsx(r,{value:"plastic",children:"Plastik"}),e.jsx(r,{value:"electronic",children:"Elektronik"}),e.jsx(r,{value:"packaging",children:"Ambalaj"}),e.jsx(r,{value:"other",children:"Diğer"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"unit",className:"text-sm sm:text-base",children:"Birim"}),e.jsxs(P,{value:a.unit,onValueChange:t=>n({...a,unit:t}),children:[e.jsx(R,{className:"min-h-[44px] sm:min-h-0",children:e.jsx(K,{placeholder:"Birim seçin"})}),e.jsxs(L,{children:[e.jsx(r,{value:"Adet",children:"Adet"}),e.jsx(r,{value:"Kg",children:"Kg"}),e.jsx(r,{value:"Gram",children:"Gram"}),e.jsx(r,{value:"Litre",children:"Litre"}),e.jsx(r,{value:"Metre",children:"Metre"}),e.jsx(r,{value:"Cm",children:"Cm"}),e.jsx(r,{value:"M²",children:"M²"}),e.jsx(r,{value:"M³",children:"M³"}),e.jsx(r,{value:"Paket",children:"Paket"}),e.jsx(r,{value:"Kutu",children:"Kutu"}),e.jsx(r,{value:"Palet",children:"Palet"}),e.jsx(r,{value:"Ton",children:"Ton"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"stock",className:"text-sm sm:text-base",children:"Mevcut Stok"}),e.jsx(N,{id:"stock",type:"number",step:"1",min:"0",value:a.stock,onChange:t=>n({...a,stock:t.target.value}),className:"min-h-[44px] sm:min-h-0",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"min_stock",className:"text-sm sm:text-base",children:"Minimum Stok"}),e.jsx(N,{id:"min_stock",type:"number",step:"1",min:"0",value:a.min_stock,onChange:t=>n({...a,min_stock:t.target.value}),className:"min-h-[44px] sm:min-h-0",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"max_stock",className:"text-sm sm:text-base",children:"Maksimum Stok"}),e.jsx(N,{id:"max_stock",type:"number",step:"1",min:"0",value:a.max_stock,onChange:t=>n({...a,max_stock:t.target.value}),className:"min-h-[44px] sm:min-h-0"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{className:"text-sm sm:text-base",children:"Para Birimi"}),e.jsxs(P,{value:a.currency,onValueChange:t=>n({...a,currency:t}),children:[e.jsx(R,{className:"min-h-[44px] sm:min-h-0",children:e.jsx(K,{})}),e.jsx(L,{children:Te.map(t=>e.jsx(r,{value:t.value,children:t.label},t.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"cost",className:"text-sm sm:text-base",children:["Birim Maliyet (",Ae[a.currency],")"]}),e.jsx(N,{id:"cost",type:"number",step:"0.01",value:a.cost,onChange:t=>n({...a,cost:t.target.value}),className:"min-h-[44px] sm:min-h-0",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"supplier",className:"text-sm sm:text-base",children:"Tedarikçi"}),e.jsx(N,{id:"supplier",value:a.supplier,onChange:t=>n({...a,supplier:t.target.value}),className:"min-h-[44px] sm:min-h-0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"location",className:"text-sm sm:text-base",children:"Depo Konumu"}),e.jsx(N,{id:"location",value:a.location,onChange:t=>n({...a,location:t.target.value}),className:"min-h-[44px] sm:min-h-0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"description",className:"text-sm sm:text-base",children:"Açıklama"}),e.jsx(Me,{id:"description",value:a.description,onChange:t=>n({...a,description:t.target.value}),rows:3,className:"min-h-[44px] sm:min-h-0"})]})]})]})})})})]})})})},bs=({open:p,onOpenChange:C,material:l,onEdit:T,onDelete:j})=>{const[S,a]=c.useState(!1),[n,A]=c.useState([]),[t,k]=c.useState(!1),[M,U]=c.useState("details"),[Y,$]=c.useState([]),[ae,te]=c.useState(!1),[H,_]=c.useState(""),[F,G]=c.useState(""),he=async()=>{var i,g;if(confirm("Bu hammaddeyi silmek istediğinizden emin misiniz?")){a(!0);try{await De(l.id),v.success("Hammadde başarıyla silindi"),j()}catch(ie){v.error("Hata: "+(((g=(i=ie.response)==null?void 0:i.data)==null?void 0:g.message)||ie.message))}finally{a(!1)}}},W=i=>({chemical:"Kimyasal",metal:"Metal",plastic:"Plastik",electronic:"Elektronik",packaging:"Ambalaj",other:"Diğer"})[i]||i,z=(i,g)=>i===0?{label:"Tükendi",variant:"destructive"}:i<g?{label:"Düşük",variant:"secondary"}:{label:"Normal",variant:"default"};c.useEffect(()=>{p&&(l!=null&&l.id)&&M==="recipes"&&(X(),le())},[p,l,M]);const le=async()=>{te(!0);try{const i=await Xe();$(i)}catch(i){console.error("Fetch products error:",i),v.error("Ürün listesi alınamadı.")}finally{te(!1)}},X=async()=>{if(l!=null&&l.id){k(!0);try{const i=await rs(l.id);A(i)}catch(i){v.error("Reçeteler yüklenemedi: "+i.message)}finally{k(!1)}}},re=async i=>{if(confirm("Bu reçeteyi silmek istediğinizden emin misiniz?"))try{await is(i),v.success("Reçete silindi"),X()}catch(g){v.error("Hata: "+g.message)}},E=async()=>{if(!H||!F||!(l!=null&&l.id)){v.error("Lütfen ürün ve miktar seçin");return}const i=parseFloat(F);if(isNaN(i)||i<=0){v.error("Geçerli bir miktar girin");return}k(!0);try{await ns(H,l.id,i),v.success("Reçete eklendi"),X(),_(""),G("")}catch(g){v.error("Hata: "+g.message)}finally{k(!1)}};if(!l)return null;const D=z(l.currentStock||l.stock||0,l.minStock||l.min_stock||0);return e.jsx(e.Fragment,{children:e.jsx(fe,{open:p,onOpenChange:C,children:e.jsx(ke,{className:"!max-w-[100vw] sm:!max-w-[95vw] !w-[100vw] sm:!w-[95vw] !h-[100vh] sm:!h-[90vh] !max-h-[100vh] sm:!max-h-[90vh] !left-0 sm:!left-[2.5vw] !top-0 sm:!top-[5vh] !right-0 sm:!right-auto !bottom-0 sm:!bottom-auto !translate-x-0 !translate-y-0 overflow-hidden !p-0 gap-0 bg-white flex flex-col !m-0 !rounded-none sm:!rounded-lg !border-0 sm:!border",children:e.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[e.jsx(be,{className:"p-3 sm:p-4 border-b bg-white flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-lg bg-primary/10 flex items-center justify-center border border-primary/20 flex-shrink-0",children:e.jsx(I,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),e.jsx(ye,{className:"text-lg sm:text-xl font-semibold text-foreground truncate",children:l.name})]}),e.jsx("div",{className:"flex flex-wrap gap-2 flex-shrink-0 relative z-10 pr-10 sm:pr-12",children:e.jsx(pe,{variant:D.variant,className:"text-xs px-2 sm:px-3 py-1 relative z-10",children:D.label})})]})}),e.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50/50 p-3 sm:p-4 min-h-0",children:e.jsx("div",{className:"max-w-full mx-auto h-full overflow-y-auto",children:e.jsxs(Ue,{value:M,onValueChange:U,className:"w-full",children:[e.jsxs(Ye,{className:"grid w-full grid-cols-2 mb-4 sm:mb-6 min-h-[44px] sm:min-h-0",children:[e.jsx(Se,{value:"details",className:"text-sm sm:text-base",children:"Detaylar"}),e.jsx(Se,{value:"recipes",className:"text-sm sm:text-base",children:"Reçete"})]}),e.jsxs(Ce,{value:"details",className:"space-y-4 sm:space-y-6 mt-0",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"SKU"}),e.jsx("p",{className:"font-medium",children:l.code||l.sku||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Kategori"}),e.jsx("p",{className:"font-medium",children:W(l.category||"other")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Mevcut Stok"}),e.jsxs("p",{className:"font-medium text-lg",children:[l.currentStock!==void 0?l.currentStock:l.stock||0," ",l.unit||"Adet"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Minimum Stok"}),e.jsxs("p",{className:"font-medium",children:[l.minStock!==void 0?l.minStock:l.min_stock||0," ",l.unit||"Adet"]})]}),l.maxStock!==void 0&&l.maxStock!==null||l.max_stock?e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Maksimum Stok"}),e.jsxs("p",{className:"font-medium",children:[l.maxStock!==void 0?l.maxStock:l.max_stock||0," ",l.unit||"Adet"]})]}):null,e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Birim Maliyet"}),e.jsxs("p",{className:"font-medium",children:["₺",l.unitPrice!==void 0?l.unitPrice:l.cost||0]})]}),(l.supplier||l.supplier)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Tedarikçi"}),e.jsx("p",{className:"font-medium",children:l.supplier||"-"})]})]}),(l.notes||l.description)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Açıklama"}),e.jsx("p",{className:"text-sm",children:l.notes||l.description||""})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 border-t",children:[e.jsxs(w,{variant:"outline",onClick:T,className:"min-h-[44px] sm:min-h-0",children:[e.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Düzenle"]}),e.jsxs(w,{variant:"destructive",onClick:he,disabled:S,className:"min-h-[44px] sm:min-h-0",children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),S?"Siliniyor...":"Sil"]})]})]}),e.jsx(Ce,{value:"recipes",className:"space-y-4 sm:space-y-6 mt-0",children:e.jsxs(V,{children:[e.jsx(ve,{children:e.jsx(Ne,{className:"text-lg sm:text-xl",children:"Reçete Yönetimi"})}),e.jsxs(q,{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg border bg-muted/30 p-4 sm:p-6",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold mb-4",children:"Yeni Reçete Ekle"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"product-select",className:"text-sm sm:text-base",children:"Ürün"}),e.jsxs(P,{value:H,onValueChange:_,disabled:ae,children:[e.jsx(R,{id:"product-select",className:"min-h-[44px] sm:min-h-0",children:e.jsx(K,{placeholder:"Ürün seçin"})}),e.jsx(L,{children:Y.map(i=>e.jsxs(r,{value:i.id,children:[i.name," ",i.sku?`(${i.sku})`:""]},i.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"quantity-input",className:"text-sm sm:text-base",children:"Miktar"}),e.jsx(N,{id:"quantity-input",type:"number",step:"0.01",min:"0.01",value:F,onChange:i=>G(i.target.value),placeholder:"Miktar",className:"min-h-[44px] sm:min-h-0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{className:"text-sm sm:text-base opacity-0",children:"Ekle"}),e.jsxs(w,{onClick:E,disabled:t||!H||!F,className:"w-full min-h-[44px] sm:min-h-0",children:[t?e.jsx(me,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Ekle"]})]})]})]}),t?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(me,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):n.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(I,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-sm sm:text-base",children:"Bu hammadde henüz hiçbir üründe kullanılmamış"})]}):e.jsx("div",{className:"rounded-lg border bg-white overflow-hidden",children:e.jsxs(Fe,{children:[e.jsx(Pe,{children:e.jsxs(xe,{children:[e.jsx(b,{className:"text-sm sm:text-base",children:"Ürün Adı"}),e.jsx(b,{className:"text-sm sm:text-base",children:"SKU"}),e.jsx(b,{className:"text-sm sm:text-base",children:"Miktar"}),e.jsx(b,{className:"text-sm sm:text-base text-right",children:"İşlemler"})]})}),e.jsx(Re,{children:n.map(i=>{const g=i.product;return e.jsxs(xe,{children:[e.jsx(y,{className:"font-medium",children:(g==null?void 0:g.name)||"Silinmiş Ürün"}),e.jsx(y,{className:"text-muted-foreground font-mono text-xs sm:text-sm",children:(g==null?void 0:g.sku)||"-"}),e.jsxs(y,{children:[e.jsx("span",{className:"font-medium",children:i.quantityPerUnit}),e.jsx("span",{className:"text-sm text-muted-foreground ml-1",children:l.unit||"Adet"})]}),e.jsx(y,{className:"text-right",children:e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>re(i.id),className:"h-8 w-8 p-0 text-destructive hover:text-destructive min-h-[44px] sm:min-h-0",children:e.jsx(je,{className:"h-4 w-4"})})})]},i.id)})})]})})]})]})})]})})})]})})})})},qs=()=>{Ge();const[p,C]=c.useState([]),[l,T]=c.useState(""),[j,S]=c.useState("all"),[a,n]=c.useState("all"),[A,t]=c.useState(!1),[k,M]=c.useState(!1),[U,Y]=c.useState(!1),[$,ae]=c.useState(null),[te,H]=c.useState(!0),[_,F]=c.useState(1),[G]=c.useState(50),[he,W]=c.useState(!1),[z,le]=c.useState(null),[X,re]=c.useState(!1),[E,D]=c.useState(null);c.useEffect(()=>{i()},[]);const i=async()=>{H(!0);try{const s=await ts();C(s)}catch(s){console.error("Fetch materials error:",s),v.error(s.message||"Hammaddeler yüklenirken hata oluştu"),C([])}finally{H(!1)}},g=s=>({chemical:"Kimyasal",metal:"Metal",plastic:"Plastik",electronic:"Elektronik",packaging:"Ambalaj",other:"Diğer"})[s]||s,ie=(s,u)=>{const x=Number(s)||0,f=Number(u)||0;return isNaN(x)||isNaN(f)?{label:"Bilinmiyor",variant:"outline",color:"text-gray-600",bgColor:"bg-gray-50"}:x===0?{label:"Tükendi",variant:"destructive",color:"text-red-600",bgColor:"bg-red-50"}:x<f?{label:"Düşük",variant:"secondary",color:"text-yellow-600",bgColor:"bg-yellow-50"}:{label:"Normal",variant:"default",color:"text-green-600",bgColor:"bg-green-50"}},He=(s,u)=>{const x=Number(s)||0,f=Number(u)||0,h=x===0,d=x>0&&x<f;return{isOut:h,isLow:d,isNormal:!h&&!d}},ue=c.useMemo(()=>Array.isArray(p)?p.filter(s=>{var o,O;const u=Number(s.currentStock!==void 0?s.currentStock:s.stock)||0,x=Number(s.minStock!==void 0?s.minStock:s.min_stock)||0,{isLow:f,isOut:h,isNormal:d}=He(u,x);if(a==="low"&&!f||a==="out"&&!h||a==="normal"&&!d||j!=="all"&&s.category!==j)return!1;if(l){const ce=l.toLowerCase(),oe=((o=s.name)==null?void 0:o.toLowerCase().includes(ce))||!1,qe=((O=s.sku||s.code)==null?void 0:O.toLowerCase().includes(ce))||!1;if(!oe&&!qe)return!1}return!0}):[],[p,l,j,a]),B=c.useMemo(()=>{if(!Array.isArray(p))return{total:0,lowStock:0,outOfStock:0,normalStock:0,totalValue:0};const s=p.length,u=p.filter(d=>{const o=Number(d.currentStock!==void 0?d.currentStock:d.stock)||0,O=Number(d.minStock!==void 0?d.minStock:d.min_stock)||0;return!isNaN(o)&&!isNaN(O)&&o<O&&o>0}).length,x=p.filter(d=>{const o=Number(d.currentStock!==void 0?d.currentStock:d.stock)||0;return!isNaN(o)&&o===0}).length,f=s-u-x,h=p.reduce((d,o)=>{const O=Number(o.currentStock!==void 0?o.currentStock:o.stock)||0,ce=Number(o.unitPrice!==void 0?o.unitPrice:o.cost)||0,oe=O*ce;return d+(isNaN(oe)?0:oe)},0);return{total:s,lowStock:u,outOfStock:x,normalStock:f,totalValue:h}},[p]),ze=c.useMemo(()=>{var s,u;try{return`₺${new Intl.NumberFormat("tr-TR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(B.totalValue||0)}`}catch{return`₺${((u=(s=B.totalValue)==null?void 0:s.toFixed)==null?void 0:u.call(s,0))??"0"}`}},[B.totalValue]),Ee=[{key:"total-materials",label:"Toplam Hammadde",value:B.total,accent:"bg-blue-100 text-blue-700",icon:I,description:"Tüm kayıtlar",onClick:()=>{n("all"),S("all"),T(""),D("total-materials")},isActive:E==="total-materials"},{key:"normal-stock",label:"Normal Stok",value:B.normalStock,accent:"bg-green-100 text-green-700",icon:vs,description:"Stok seviyesi yeterli",onClick:()=>{n("normal"),D("normal-stock")},isActive:E==="normal-stock"},{key:"low-stock",label:"Düşük Stok",value:B.lowStock,accent:"bg-yellow-100 text-yellow-700",icon:Qe,description:"Min seviyenin altında",onClick:()=>{n("low"),D("low-stock")},isActive:E==="low-stock"},{key:"out-stock",label:"Tükenen",value:B.outOfStock,accent:"bg-red-100 text-red-700",icon:$e,description:"Stoğu sıfırlananlar",onClick:()=>{n("out"),D("out-stock")},isActive:E==="out-stock"},{key:"total-value",label:"Toplam Değer",value:ze,accent:"bg-purple-100 text-purple-700",icon:Ns,description:"Detaylı raporlar",onClick:()=>{D("total-value"),re(!0)},isActive:E==="total-value"}],ne=Math.ceil(ue.length/G),we=ue.slice((_-1)*G,_*G),Be=s=>{le(s),W(!0)},Oe=async()=>{if(z)try{await De(z.id),v.success("Hammadde silindi"),i(),W(!1),le(null)}catch(s){console.error("Delete material error:",s),v.error(s.message||"Hammadde silinirken hata oluştu")}};c.useEffect(()=>{F(1)},[l,j,a]);const Ve=(s,u,x)=>{const f=Number(s)||0,h=Number(u)||0,d=x?Number(x)||0:void 0;if(isNaN(f)||isNaN(h))return 0;if(d&&!isNaN(d)&&d>0){const o=f/d*100;return isNaN(o)?0:Math.min(100,Math.max(0,o))}if(h>0){const o=f/(h*2)*100;return isNaN(o)?0:Math.min(100,Math.max(0,o))}return f>0?50:0};return e.jsx(Ze,{children:e.jsxs("div",{className:"space-y-3 sm:space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-foreground break-words",children:"Hammadde Yönetimi"}),e.jsx("p",{className:"text-muted-foreground mt-0.5 sm:mt-1 text-xs sm:text-sm",children:"Hammadde stoklarını yönetin ve takip edin"})]}),e.jsxs(w,{className:"gap-2 w-full sm:w-auto min-h-[44px] sm:min-h-0",onClick:()=>t(!0),children:[e.jsx(Le,{className:"h-4 w-4"}),"Yeni Hammadde"]})]}),e.jsx(V,{children:e.jsx(q,{className:"pt-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:Ee.map(s=>{const u=s.icon;return e.jsx(V,{className:Q("border border-border/60 shadow-none cursor-pointer transition-all hover:shadow-md focus-within:ring-2 focus-within:ring-primary/40 h-full flex flex-col",s.isActive&&"border-primary shadow-lg ring-2 ring-primary/20"),role:"button",tabIndex:0,onClick:s.onClick,onKeyDown:x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),s.onClick())},"aria-label":`${s.label} kartı`,children:e.jsxs(q,{className:"p-4 flex items-center gap-4 flex-1",children:[e.jsx("div",{className:Q("h-12 w-12 rounded-2xl flex items-center justify-center flex-shrink-0",s.accent),children:e.jsx(u,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:s.label}),e.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:s.value}),e.jsx("p",{className:"text-[11px] text-muted-foreground mt-0.5",children:s.description})]})]})},s.key)})})})}),e.jsx(V,{children:e.jsx(q,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px] sm:min-w-[250px]",children:e.jsx(Je,{placeholder:"Ara (isim, SKU)...",className:"w-full h-10",value:l,onChange:s=>T(s.target.value)})}),e.jsx("div",{className:"w-full sm:w-auto sm:min-w-[180px]",children:e.jsxs(P,{value:j,onValueChange:s=>{S(s),D(null)},children:[e.jsx(R,{className:"w-full h-10",children:e.jsx(K,{placeholder:"Kategori"})}),e.jsxs(L,{children:[e.jsx(r,{value:"all",children:"Tüm Kategoriler"}),e.jsx(r,{value:"chemical",children:"Kimyasal"}),e.jsx(r,{value:"metal",children:"Metal"}),e.jsx(r,{value:"plastic",children:"Plastik"}),e.jsx(r,{value:"electronic",children:"Elektronik"}),e.jsx(r,{value:"packaging",children:"Ambalaj"}),e.jsx(r,{value:"other",children:"Diğer"})]})]})}),(l||j!=="all"||a!=="all")&&e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>{T(""),S("all"),n("all"),D(null)},className:"h-10",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"Temizle"]})]})})}),e.jsx(V,{children:e.jsx(q,{className:"p-0",children:te?e.jsx(os,{message:"Hammaddeler yükleniyor..."}):we.length===0?e.jsx("div",{className:"text-center py-12 bg-muted/30 rounded-lg border border-dashed",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-muted p-4",children:e.jsx(I,{className:"h-12 w-12 text-muted-foreground/50"})}),e.jsx("p",{className:"text-muted-foreground font-medium text-base",children:l||j!=="all"||a!=="all"?"Arama sonucu bulunamadı":"Henüz hammadde bulunmuyor"}),e.jsx("p",{className:"text-sm text-muted-foreground/70 max-w-md",children:l||j!=="all"||a!=="all"?"Filtreleri değiştirerek tekrar deneyin":"Yeni hammadde eklemek için yukarıdaki butona tıklayın"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto -mx-4 sm:mx-0",children:e.jsx("div",{className:"inline-block min-w-full align-middle px-4 sm:px-0",children:e.jsxs(Fe,{className:"w-full",children:[e.jsx(Pe,{children:e.jsxs(xe,{children:[e.jsx(b,{className:"w-auto",children:"Hammadde"}),e.jsx(b,{className:"w-auto whitespace-nowrap",children:"SKU"}),e.jsx(b,{className:"w-auto whitespace-nowrap",children:"Kategori"}),e.jsx(b,{className:"w-auto text-right whitespace-nowrap",children:"Stok Durumu"}),e.jsx(b,{className:"w-auto text-right whitespace-nowrap",children:"Mevcut"}),e.jsx(b,{className:"w-auto text-right whitespace-nowrap",children:"Min. Stok"}),e.jsx(b,{className:"w-auto whitespace-nowrap",children:"Tedarikçi"}),e.jsx(b,{className:"w-auto whitespace-nowrap",children:"Ekleyen"}),e.jsx(b,{className:"w-auto whitespace-nowrap",children:"Durum"}),e.jsx(b,{className:"w-auto text-right whitespace-nowrap",children:"İşlemler"})]})}),e.jsx(Re,{children:we.map(s=>{const u=Number(s.currentStock!==void 0?s.currentStock:s.stock)||0,x=Number(s.minStock!==void 0?s.minStock:s.min_stock)||0,f=s.maxStock!==void 0?s.maxStock:s.max_stock,h=ie(u,x),d=Ve(u,x,f);return e.jsxs(xe,{className:Q("cursor-pointer hover:bg-muted/50 transition-colors",h.bgColor),onClick:()=>{ae(s),Y(!0)},children:[e.jsx(y,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(I,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsx(Z,{children:e.jsxs(J,{children:[e.jsx(ee,{asChild:!0,children:e.jsx("span",{className:"truncate max-w-[180px]",title:s.name,children:s.name})}),e.jsx(se,{children:e.jsx("p",{children:s.name})})]})})]})}),e.jsx(y,{children:e.jsx("span",{className:"text-sm text-muted-foreground font-mono bg-muted px-2 py-1 rounded whitespace-nowrap",children:s.sku||s.code||"-"})}),e.jsx(y,{children:e.jsx(pe,{variant:"outline",className:"font-normal whitespace-nowrap",children:g(s.category)})}),e.jsx(y,{className:"text-right whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx(es,{value:d,className:Q("h-2 w-20",h.variant==="destructive"&&"[&>div]:bg-red-500",h.variant==="secondary"&&"[&>div]:bg-yellow-500",h.variant==="default"&&"[&>div]:bg-green-500")}),e.jsxs("span",{className:Q("text-xs font-medium",h.color),children:[isNaN(d)?"0":d.toFixed(0),"%"]})]})}),e.jsx(y,{className:"text-right font-semibold whitespace-nowrap",children:e.jsxs("span",{className:h.color,children:[u," ",s.unit]})}),e.jsxs(y,{className:"text-right text-muted-foreground whitespace-nowrap",children:[x," ",s.unit]}),e.jsx(y,{children:e.jsx(Z,{children:e.jsxs(J,{children:[e.jsx(ee,{asChild:!0,children:e.jsx("span",{className:"text-sm truncate max-w-[120px] block",title:s.supplier||"-",children:s.supplier||"-"})}),s.supplier&&e.jsx(se,{children:e.jsx("p",{children:s.supplier})})]})})}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}),e.jsx(Z,{children:e.jsxs(J,{children:[e.jsx(ee,{asChild:!0,children:e.jsx("span",{className:"text-sm truncate max-w-[80px]",title:s.created_by_name||"-",children:s.created_by_name||"-"})}),s.created_by_name&&e.jsx(se,{children:e.jsx("p",{children:s.created_by_name})})]})})]})}),e.jsx(y,{children:e.jsx(pe,{variant:h.variant,className:Q("font-medium",h.variant==="destructive"&&"bg-red-500 hover:bg-red-600 text-white",h.variant==="secondary"&&"bg-yellow-500 hover:bg-yellow-600 text-white",h.variant==="default"&&"bg-green-500 hover:bg-green-600 text-white"),children:h.label})}),e.jsx(y,{className:"text-right whitespace-nowrap",onClick:o=>o.stopPropagation(),children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(Z,{children:e.jsxs(J,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(w,{variant:"outline",size:"sm",onClick:o=>{o.stopPropagation(),ae(s),M(!0)},children:e.jsx(Ke,{className:"h-4 w-4"})})}),e.jsx(se,{children:e.jsx("p",{children:"Düzenle"})})]})}),e.jsx(Z,{children:e.jsxs(J,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(w,{variant:"outline",size:"sm",onClick:o=>{o.stopPropagation(),Be(s)},className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsx(se,{children:e.jsx("p",{children:"Sil"})})]})})]})})]},s.id)})})]})})}),ne>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 p-4 border-t",children:[e.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground text-center sm:text-left",children:["Toplam ",ue.length," hammadde gösteriliyor"]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto justify-center sm:justify-end",children:[e.jsx(w,{variant:"outline",size:"sm",onClick:()=>F(s=>Math.max(1,s-1)),disabled:_===1,children:"Önceki"}),e.jsxs("span",{className:"text-sm text-muted-foreground px-3",children:["Sayfa ",_," / ",ne]}),e.jsx(w,{variant:"outline",size:"sm",onClick:()=>F(s=>Math.min(ne,s+1)),disabled:_===ne,children:"Sonraki"})]})]})]})})}),e.jsx(fs,{open:A,onOpenChange:t,onSuccess:i}),$&&e.jsxs(e.Fragment,{children:[e.jsx(ks,{open:k,onOpenChange:M,material:$,onSuccess:()=>{i(),M(!1)}}),e.jsx(bs,{open:U,onOpenChange:Y,material:$,onEdit:()=>{Y(!1),M(!0)},onDelete:()=>{i(),Y(!1)}})]}),e.jsx(ms,{open:he,onOpenChange:W,children:e.jsxs(ds,{children:[e.jsxs(xs,{children:[e.jsx(hs,{children:"Hammadde Sil"}),e.jsxs(us,{children:['"',z==null?void 0:z.name,'" hammaddesini silmek istediğinize emin misiniz? Bu işlem geri alınamaz.']})]}),e.jsxs(ps,{children:[e.jsx(js,{children:"İptal"}),e.jsx(gs,{onClick:Oe,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sil"})]})]})}),e.jsx(cs,{open:X,onOpenChange:re,title:"Hammadde Değer Raporu",type:"rawMaterials",data:p})]})})};export{qs as default};

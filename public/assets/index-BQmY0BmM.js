const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/rolePermissionsService-BQ7cNajw.js","assets/lucide-react-CAeuRJQk.js","assets/Dashboard-leWEM6OP.js","assets/MainLayout-Dv9j77B5.js","assets/taskService-CI62TrOj.js","assets/StatCard-qsBkiUPn.js","assets/reportService-yUgxtgcG.js","assets/storageService-BUAGZT8Z.js","assets/driveService-ChwQKMyd.js","assets/materialService-BHW8dEom.js","assets/Production-Ds8dXTpq.js","assets/search-input-DCf0xYml.js","assets/table-zhTdMUM_.js","assets/currency-BpxR3_y8.js","assets/alert-dialog-vDPnsgl6.js","assets/CreateOrderDialog-C62L0stY.js","assets/CustomerCombobox-LwAUFZox.js","assets/popover-Bq_PZ6uK.js","assets/CreateCustomerDialog-C7Uvoya8.js","assets/OrderDetailModal-BnPVxs_W.js","assets/loading-state-BC76X596.js","assets/Tasks-CkJtzJaY.js","assets/avatar-CROuoa6p.js","assets/requestService-BTFAUymV.js","assets/TaskInlineForm-BjPlHrJk.js","assets/checkbox-DKBysPlW.js","assets/UserMultiSelect-BycFT8u0.js","assets/permissions-gaCIgPOa.js","assets/TaskBoard-BI6dI0L7.js","assets/format-CN3feEER.js","assets/isToday-imnuOj2q.js","assets/isSameDay-CbFR9PGK.js","assets/addDays-DpNspVkx.js","assets/isBefore-DY2_5hKP.js","assets/TaskDetail-CuRZUy-b.js","assets/separator-C1rUq6WW.js","assets/TaskPool-BH52gMfq.js","assets/TasksArchive-Nwo1H-U5.js","assets/TaskDetailModal-Bwb1Je3g.js","assets/progress-DCzQFBA2.js","assets/Customers-D_wHKmvX.js","assets/CustomerDetailModal-DKJKtFVM.js","assets/DetailedValueReportModal-BRj7dqdh.js","assets/exchangeRateService-Ba2gZPdu.js","assets/Products-BpS_Hh3O.js","assets/recipeService-B644vMa2.js","assets/Orders-DGg9ENAG.js","assets/CreateOrderDialog-BMioWDNS.js","assets/subDays-DIU4Ell8.js","assets/Reports-DVW0fROy.js","assets/pdfGenerator-CpYttanq.js","assets/RawMaterials-D-hG636A.js","assets/toastHelpers-DkuKGmwM.js","assets/Settings-DSbQg3ek.js","assets/switch-CUw8XPh6.js","assets/Profile-D3uSTI2i.js","assets/skeleton-jcdN6-ik.js","assets/formatLastLogin-BEZSaV0P.js","assets/Admin-BRZE4rHI.js","assets/DepartmentDetailModal-CjqXK3b9.js","assets/warrantyService-BpM1Aiia.js","assets/TeamManagement-D6To5UvI.js","assets/Projects-a9Z7ut5S.js","assets/Warranty-BZnZOps6.js","assets/Requests-D2rFGBYl.js","assets/Notifications-Bjwjam8f.js"])))=>i.map(i=>d[i]);
var w2=Object.defineProperty,E2=Object.defineProperties;var T2=Object.getOwnPropertyDescriptors;var af=Object.getOwnPropertySymbols,b2=Object.getPrototypeOf,ZT=Object.prototype.hasOwnProperty,eb=Object.prototype.propertyIsEnumerable,x2=Reflect.get;var tb=t=>{throw TypeError(t)},nb=Math.pow,sy=(t,e,n)=>e in t?w2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,M=(t,e)=>{for(var n in e||(e={}))ZT.call(e,n)&&sy(t,n,e[n]);if(af)for(var n of af(e))eb.call(e,n)&&sy(t,n,e[n]);return t},W=(t,e)=>E2(t,T2(e));var re=(t,e)=>{var n={};for(var r in t)ZT.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&af)for(var r of af(t))e.indexOf(r)<0&&eb.call(t,r)&&(n[r]=t[r]);return n};var lf=(t,e,n)=>sy(t,typeof e!="symbol"?e+"":e,n),iy=(t,e,n)=>e.has(t)||tb("Cannot "+n);var K=(t,e,n)=>(iy(t,e,"read from private field"),n?n.call(t):e.get(t)),rt=(t,e,n)=>e.has(t)?tb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Oe=(t,e,n,r)=>(iy(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),kn=(t,e,n)=>(iy(t,e,"access private method"),n);var cf=(t,e,n,r)=>({set _(s){Oe(t,e,s,n)},get _(){return K(t,e,r)}}),Sa=(t,e,n)=>x2(b2(t),n,e);var A=(t,e,n)=>new Promise((r,s)=>{var i=l=>{try{a(n.next(l))}catch(c){s(c)}},o=l=>{try{a(n.throw(l))}catch(c){s(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,o);a((n=n.apply(t,e)).next())});import{r as _,aF as S2,aJ as se,aN as Nw,X as I2,s as rC,aK as sc,aO as sC,aP as iC,aQ as wv,a6 as oC,aR as aC,aS as C2,ao as R2,a2 as lC,a0 as A2,n as k2,N as Bl,L as Ev,j as od,m as jo,l as P2,K as N2,k as D2,U as O2,i as cC,b as rb,B as L2}from"./lucide-react-CAeuRJQk.js";function M2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var uC={exports:{}},Dm={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F2=_,V2=Symbol.for("react.element"),j2=Symbol.for("react.fragment"),U2=Object.prototype.hasOwnProperty,z2=F2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,B2={key:!0,ref:!0,__self:!0,__source:!0};function dC(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)U2.call(e,r)&&!B2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:V2,type:t,key:i,ref:o,props:s,_owner:z2.current}}Dm.Fragment=j2;Dm.jsx=dC;Dm.jsxs=dC;uC.exports=Dm;var m=uC.exports,hC={exports:{}},Fr={},fC={exports:{}},pC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,$){var X=U.length;U.push($);e:for(;0<X;){var ie=X-1>>>1,J=U[ie];if(0<s(J,$))U[ie]=$,U[X]=J,X=ie;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var $=U[0],X=U.pop();if(X!==$){U[0]=X;e:for(var ie=0,J=U.length,ae=J>>>1;ie<ae;){var ye=2*(ie+1)-1,le=U[ye],Ue=ye+1,Ee=U[Ue];if(0>s(le,X))Ue<J&&0>s(Ee,le)?(U[ie]=Ee,U[Ue]=X,ie=Ue):(U[ie]=le,U[ye]=X,ie=ye);else if(Ue<J&&0>s(Ee,X))U[ie]=Ee,U[Ue]=X,ie=Ue;else break e}}return $}function s(U,$){var X=U.sortIndex-$.sortIndex;return X!==0?X:U.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,T=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(U){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=U)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function C(U){if(v=!1,x(U),!T)if(n(l)!==null)T=!0,Y(D);else{var $=n(c);$!==null&&te(C,$.startTime-U)}}function D(U,$){T=!1,v&&(v=!1,E(I),I=-1),p=!0;var X=f;try{for(x($),h=n(l);h!==null&&(!(h.expirationTime>$)||U&&!O());){var ie=h.callback;if(typeof ie=="function"){h.callback=null,f=h.priorityLevel;var J=ie(h.expirationTime<=$);$=t.unstable_now(),typeof J=="function"?h.callback=J:h===n(l)&&r(l),x($)}else r(l);h=n(l)}if(h!==null)var ae=!0;else{var ye=n(c);ye!==null&&te(C,ye.startTime-$),ae=!1}return ae}finally{h=null,f=X,p=!1}}var V=!1,S=null,I=-1,R=5,P=-1;function O(){return!(t.unstable_now()-P<R)}function L(){if(S!==null){var U=t.unstable_now();P=U;var $=!0;try{$=S(!0,U)}finally{$?k():(V=!1,S=null)}}else V=!1}var k;if(typeof y=="function")k=function(){y(L)};else if(typeof MessageChannel!="undefined"){var ee=new MessageChannel,q=ee.port2;ee.port1.onmessage=L,k=function(){q.postMessage(null)}}else k=function(){w(L,0)};function Y(U){S=U,V||(V=!0,k())}function te(U,$){I=w(function(){U(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){T||p||(T=!0,Y(D))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var X=f;f=$;try{return U()}finally{f=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var X=f;f=U;try{return $()}finally{f=X}},t.unstable_scheduleCallback=function(U,$,X){var ie=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ie+X:ie):X=ie,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=X+J,U={id:d++,callback:$,priorityLevel:U,startTime:X,expirationTime:J,sortIndex:-1},X>ie?(U.sortIndex=X,e(c,U),n(l)===null&&U===n(c)&&(v?(E(I),I=-1):v=!0,te(C,X-ie))):(U.sortIndex=J,e(l,U),T||p||(T=!0,Y(D))),U},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(U){var $=f;return function(){var X=f;f=$;try{return U.apply(this,arguments)}finally{f=X}}}})(pC);fC.exports=pC;var $2=fC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W2=_,Or=$2;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mC=new Set,Pd={};function ml(t,e){Ac(t,e),Ac(t+"Capture",e)}function Ac(t,e){for(Pd[t]=e,t=0;t<e.length;t++)mC.add(e[t])}var zi=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Tv=Object.prototype.hasOwnProperty,H2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sb={},ib={};function q2(t){return Tv.call(ib,t)?!0:Tv.call(sb,t)?!1:H2.test(t)?ib[t]=!0:(sb[t]=!0,!1)}function G2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function K2(t,e,n,r){if(e===null||typeof e=="undefined"||G2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){bn[t]=new rr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];bn[e]=new rr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){bn[t]=new rr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){bn[t]=new rr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){bn[t]=new rr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){bn[t]=new rr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){bn[t]=new rr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){bn[t]=new rr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){bn[t]=new rr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dw=/[\-:]([a-z])/g;function Ow(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Dw,Ow);bn[e]=new rr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Dw,Ow);bn[e]=new rr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Dw,Ow);bn[e]=new rr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){bn[t]=new rr(t,1,!1,t.toLowerCase(),null,!1,!1)});bn.xlinkHref=new rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){bn[t]=new rr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lw(t,e,n,r){var s=bn.hasOwnProperty(e)?bn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(K2(e,n,s,r)&&(n=null),r||s===null?q2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var to=W2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uf=Symbol.for("react.element"),$l=Symbol.for("react.portal"),Wl=Symbol.for("react.fragment"),Mw=Symbol.for("react.strict_mode"),bv=Symbol.for("react.profiler"),gC=Symbol.for("react.provider"),yC=Symbol.for("react.context"),Fw=Symbol.for("react.forward_ref"),xv=Symbol.for("react.suspense"),Sv=Symbol.for("react.suspense_list"),Vw=Symbol.for("react.memo"),bo=Symbol.for("react.lazy"),vC=Symbol.for("react.offscreen"),ob=Symbol.iterator;function Pu(t){return t===null||typeof t!="object"?null:(t=ob&&t[ob]||t["@@iterator"],typeof t=="function"?t:null)}var Vt=Object.assign,oy;function Qu(t){if(oy===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);oy=e&&e[1]||""}return`
`+oy+t}var ay=!1;function ly(t,e){if(!t||ay)return"";ay=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ay=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qu(t):""}function Q2(t){switch(t.tag){case 5:return Qu(t.type);case 16:return Qu("Lazy");case 13:return Qu("Suspense");case 19:return Qu("SuspenseList");case 0:case 2:case 15:return t=ly(t.type,!1),t;case 11:return t=ly(t.type.render,!1),t;case 1:return t=ly(t.type,!0),t;default:return""}}function Iv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wl:return"Fragment";case $l:return"Portal";case bv:return"Profiler";case Mw:return"StrictMode";case xv:return"Suspense";case Sv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yC:return(t.displayName||"Context")+".Consumer";case gC:return(t._context.displayName||"Context")+".Provider";case Fw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vw:return e=t.displayName||null,e!==null?e:Iv(t.type)||"Memo";case bo:e=t._payload,t=t._init;try{return Iv(t(e))}catch(n){}}return null}function Y2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Iv(e);case 8:return e===Mw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function na(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _C(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function X2(t){var e=_C(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function df(t){t._valueTracker||(t._valueTracker=X2(t))}function wC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_C(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vp(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Cv(t,e){var n=e.checked;return Vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function ab(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=na(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function EC(t,e){e=e.checked,e!=null&&Lw(t,"checked",e,!1)}function Rv(t,e){EC(t,e);var n=na(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Av(t,e.type,n):e.hasOwnProperty("defaultValue")&&Av(t,e.type,na(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Av(t,e,n){(e!=="number"||vp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yu=Array.isArray;function ic(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+na(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function kv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Vt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ne(92));if(Yu(n)){if(1<n.length)throw Error(ne(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:na(n)}}function TC(t,e){var n=na(e.value),r=na(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ub(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hf,xC=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(hf=hf||document.createElement("div"),hf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Nd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ad={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},J2=["Webkit","ms","Moz","O"];Object.keys(ad).forEach(function(t){J2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ad[e]=ad[t]})});function SC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ad.hasOwnProperty(t)&&ad[t]?(""+e).trim():e+"px"}function IC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=SC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Z2=Vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nv(t,e){if(e){if(Z2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function Dv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ov=null;function jw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lv=null,oc=null,ac=null;function db(t){if(t=_h(t)){if(typeof Lv!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=Vm(e),Lv(t.stateNode,t.type,e))}}function CC(t){oc?ac?ac.push(t):ac=[t]:oc=t}function RC(){if(oc){var t=oc,e=ac;if(ac=oc=null,db(t),e)for(t=0;t<e.length;t++)db(e[t])}}function AC(t,e){return t(e)}function kC(){}var cy=!1;function PC(t,e,n){if(cy)return t(e,n);cy=!0;try{return AC(t,e,n)}finally{cy=!1,(oc!==null||ac!==null)&&(kC(),RC())}}function Dd(t,e){var n=t.stateNode;if(n===null)return null;var r=Vm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ne(231,e,typeof n));return n}var Mv=!1;if(zi)try{var Nu={};Object.defineProperty(Nu,"passive",{get:function(){Mv=!0}}),window.addEventListener("test",Nu,Nu),window.removeEventListener("test",Nu,Nu)}catch(t){Mv=!1}function eF(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ld=!1,_p=null,wp=!1,Fv=null,tF={onError:function(t){ld=!0,_p=t}};function nF(t,e,n,r,s,i,o,a,l){ld=!1,_p=null,eF.apply(tF,arguments)}function rF(t,e,n,r,s,i,o,a,l){if(nF.apply(this,arguments),ld){if(ld){var c=_p;ld=!1,_p=null}else throw Error(ne(198));wp||(wp=!0,Fv=c)}}function gl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function NC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hb(t){if(gl(t)!==t)throw Error(ne(188))}function sF(t){var e=t.alternate;if(!e){if(e=gl(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return hb(s),t;if(i===r)return hb(s),e;i=i.sibling}throw Error(ne(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?t:e}function DC(t){return t=sF(t),t!==null?OC(t):null}function OC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=OC(t);if(e!==null)return e;t=t.sibling}return null}var LC=Or.unstable_scheduleCallback,fb=Or.unstable_cancelCallback,iF=Or.unstable_shouldYield,oF=Or.unstable_requestPaint,Gt=Or.unstable_now,aF=Or.unstable_getCurrentPriorityLevel,Uw=Or.unstable_ImmediatePriority,MC=Or.unstable_UserBlockingPriority,Ep=Or.unstable_NormalPriority,lF=Or.unstable_LowPriority,FC=Or.unstable_IdlePriority,Om=null,Zs=null;function cF(t){if(Zs&&typeof Zs.onCommitFiberRoot=="function")try{Zs.onCommitFiberRoot(Om,t,void 0,(t.current.flags&128)===128)}catch(e){}}var xs=Math.clz32?Math.clz32:hF,uF=Math.log,dF=Math.LN2;function hF(t){return t>>>=0,t===0?32:31-(uF(t)/dF|0)|0}var ff=64,pf=4194304;function Xu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Xu(a):(i&=o,i!==0&&(r=Xu(i)))}else o=n&~s,o!==0?r=Xu(o):i!==0&&(r=Xu(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xs(e),s=1<<n,r|=t[n],e&=~s;return r}function fF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-xs(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=fF(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Vv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function VC(){var t=ff;return ff<<=1,!(ff&4194240)&&(ff=64),t}function uy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xs(e),t[e]=n}function mF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-xs(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function zw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xs(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ut=0;function jC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UC,Bw,zC,BC,$C,jv=!1,mf=[],Uo=null,zo=null,Bo=null,Od=new Map,Ld=new Map,So=[],gF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pb(t,e){switch(t){case"focusin":case"focusout":Uo=null;break;case"dragenter":case"dragleave":zo=null;break;case"mouseover":case"mouseout":Bo=null;break;case"pointerover":case"pointerout":Od.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ld.delete(e.pointerId)}}function Du(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=_h(e),e!==null&&Bw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function yF(t,e,n,r,s){switch(e){case"focusin":return Uo=Du(Uo,t,e,n,r,s),!0;case"dragenter":return zo=Du(zo,t,e,n,r,s),!0;case"mouseover":return Bo=Du(Bo,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Od.set(i,Du(Od.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ld.set(i,Du(Ld.get(i)||null,t,e,n,r,s)),!0}return!1}function WC(t){var e=Na(t.target);if(e!==null){var n=gl(e);if(n!==null){if(e=n.tag,e===13){if(e=NC(n),e!==null){t.blockedOn=e,$C(t.priority,function(){zC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Uv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ov=r,n.target.dispatchEvent(r),Ov=null}else return e=_h(n),e!==null&&Bw(e),t.blockedOn=n,!1;e.shift()}return!0}function mb(t,e,n){Hf(t)&&n.delete(e)}function vF(){jv=!1,Uo!==null&&Hf(Uo)&&(Uo=null),zo!==null&&Hf(zo)&&(zo=null),Bo!==null&&Hf(Bo)&&(Bo=null),Od.forEach(mb),Ld.forEach(mb)}function Ou(t,e){t.blockedOn===e&&(t.blockedOn=null,jv||(jv=!0,Or.unstable_scheduleCallback(Or.unstable_NormalPriority,vF)))}function Md(t){function e(s){return Ou(s,t)}if(0<mf.length){Ou(mf[0],t);for(var n=1;n<mf.length;n++){var r=mf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Uo!==null&&Ou(Uo,t),zo!==null&&Ou(zo,t),Bo!==null&&Ou(Bo,t),Od.forEach(e),Ld.forEach(e),n=0;n<So.length;n++)r=So[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<So.length&&(n=So[0],n.blockedOn===null);)WC(n),n.blockedOn===null&&So.shift()}var lc=to.ReactCurrentBatchConfig,bp=!0;function _F(t,e,n,r){var s=ut,i=lc.transition;lc.transition=null;try{ut=1,$w(t,e,n,r)}finally{ut=s,lc.transition=i}}function wF(t,e,n,r){var s=ut,i=lc.transition;lc.transition=null;try{ut=4,$w(t,e,n,r)}finally{ut=s,lc.transition=i}}function $w(t,e,n,r){if(bp){var s=Uv(t,e,n,r);if(s===null)wy(t,e,r,xp,n),pb(t,r);else if(yF(s,t,e,n,r))r.stopPropagation();else if(pb(t,r),e&4&&-1<gF.indexOf(t)){for(;s!==null;){var i=_h(s);if(i!==null&&UC(i),i=Uv(t,e,n,r),i===null&&wy(t,e,r,xp,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else wy(t,e,r,null,n)}}var xp=null;function Uv(t,e,n,r){if(xp=null,t=jw(r),t=Na(t),t!==null)if(e=gl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=NC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xp=t,null}function HC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aF()){case Uw:return 1;case MC:return 4;case Ep:case lF:return 16;case FC:return 536870912;default:return 16}default:return 16}}var Lo=null,Ww=null,qf=null;function qC(){if(qf)return qf;var t,e=Ww,n=e.length,r,s="value"in Lo?Lo.value:Lo.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return qf=s.slice(t,1<r?1-r:void 0)}function Gf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gf(){return!0}function gb(){return!1}function Vr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?gf:gb,this.isPropagationStopped=gb,this}return Vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gf)},persist:function(){},isPersistent:gf}),e}var Zc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hw=Vr(Zc),vh=Vt({},Zc,{view:0,detail:0}),EF=Vr(vh),dy,hy,Lu,Lm=Vt({},vh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lu&&(Lu&&t.type==="mousemove"?(dy=t.screenX-Lu.screenX,hy=t.screenY-Lu.screenY):hy=dy=0,Lu=t),dy)},movementY:function(t){return"movementY"in t?t.movementY:hy}}),yb=Vr(Lm),TF=Vt({},Lm,{dataTransfer:0}),bF=Vr(TF),xF=Vt({},vh,{relatedTarget:0}),fy=Vr(xF),SF=Vt({},Zc,{animationName:0,elapsedTime:0,pseudoElement:0}),IF=Vr(SF),CF=Vt({},Zc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RF=Vr(CF),AF=Vt({},Zc,{data:0}),vb=Vr(AF),kF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NF[t])?!!e[t]:!1}function qw(){return DF}var OF=Vt({},vh,{key:function(t){if(t.key){var e=kF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qw,charCode:function(t){return t.type==="keypress"?Gf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LF=Vr(OF),MF=Vt({},Lm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_b=Vr(MF),FF=Vt({},vh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qw}),VF=Vr(FF),jF=Vt({},Zc,{propertyName:0,elapsedTime:0,pseudoElement:0}),UF=Vr(jF),zF=Vt({},Lm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),BF=Vr(zF),$F=[9,13,27,32],Gw=zi&&"CompositionEvent"in window,cd=null;zi&&"documentMode"in document&&(cd=document.documentMode);var WF=zi&&"TextEvent"in window&&!cd,GC=zi&&(!Gw||cd&&8<cd&&11>=cd),wb=" ",Eb=!1;function KC(t,e){switch(t){case"keyup":return $F.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hl=!1;function HF(t,e){switch(t){case"compositionend":return QC(e);case"keypress":return e.which!==32?null:(Eb=!0,wb);case"textInput":return t=e.data,t===wb&&Eb?null:t;default:return null}}function qF(t,e){if(Hl)return t==="compositionend"||!Gw&&KC(t,e)?(t=qC(),qf=Ww=Lo=null,Hl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return GC&&e.locale!=="ko"?null:e.data;default:return null}}var GF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!GF[t.type]:e==="textarea"}function YC(t,e,n,r){CC(r),e=Sp(e,"onChange"),0<e.length&&(n=new Hw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ud=null,Fd=null;function KF(t){aR(t,0)}function Mm(t){var e=Kl(t);if(wC(e))return t}function QF(t,e){if(t==="change")return e}var XC=!1;if(zi){var py;if(zi){var my="oninput"in document;if(!my){var bb=document.createElement("div");bb.setAttribute("oninput","return;"),my=typeof bb.oninput=="function"}py=my}else py=!1;XC=py&&(!document.documentMode||9<document.documentMode)}function xb(){ud&&(ud.detachEvent("onpropertychange",JC),Fd=ud=null)}function JC(t){if(t.propertyName==="value"&&Mm(Fd)){var e=[];YC(e,Fd,t,jw(t)),PC(KF,e)}}function YF(t,e,n){t==="focusin"?(xb(),ud=e,Fd=n,ud.attachEvent("onpropertychange",JC)):t==="focusout"&&xb()}function XF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mm(Fd)}function JF(t,e){if(t==="click")return Mm(e)}function ZF(t,e){if(t==="input"||t==="change")return Mm(e)}function eV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ps=typeof Object.is=="function"?Object.is:eV;function Vd(t,e){if(Ps(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Tv.call(e,s)||!Ps(t[s],e[s]))return!1}return!0}function Sb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ib(t,e){var n=Sb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sb(n)}}function ZC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ZC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function eR(){for(var t=window,e=vp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch(r){n=!1}if(n)t=e.contentWindow;else break;e=vp(t.document)}return e}function Kw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tV(t){var e=eR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ZC(n.ownerDocument.documentElement,n)){if(r!==null&&Kw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ib(n,i);var o=Ib(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nV=zi&&"documentMode"in document&&11>=document.documentMode,ql=null,zv=null,dd=null,Bv=!1;function Cb(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bv||ql==null||ql!==vp(r)||(r=ql,"selectionStart"in r&&Kw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dd&&Vd(dd,r)||(dd=r,r=Sp(zv,"onSelect"),0<r.length&&(e=new Hw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ql)))}function yf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gl={animationend:yf("Animation","AnimationEnd"),animationiteration:yf("Animation","AnimationIteration"),animationstart:yf("Animation","AnimationStart"),transitionend:yf("Transition","TransitionEnd")},gy={},tR={};zi&&(tR=document.createElement("div").style,"AnimationEvent"in window||(delete Gl.animationend.animation,delete Gl.animationiteration.animation,delete Gl.animationstart.animation),"TransitionEvent"in window||delete Gl.transitionend.transition);function Fm(t){if(gy[t])return gy[t];if(!Gl[t])return t;var e=Gl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tR)return gy[t]=e[n];return t}var nR=Fm("animationend"),rR=Fm("animationiteration"),sR=Fm("animationstart"),iR=Fm("transitionend"),oR=new Map,Rb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fa(t,e){oR.set(t,e),ml(e,[t])}for(var yy=0;yy<Rb.length;yy++){var vy=Rb[yy],rV=vy.toLowerCase(),sV=vy[0].toUpperCase()+vy.slice(1);fa(rV,"on"+sV)}fa(nR,"onAnimationEnd");fa(rR,"onAnimationIteration");fa(sR,"onAnimationStart");fa("dblclick","onDoubleClick");fa("focusin","onFocus");fa("focusout","onBlur");fa(iR,"onTransitionEnd");Ac("onMouseEnter",["mouseout","mouseover"]);Ac("onMouseLeave",["mouseout","mouseover"]);Ac("onPointerEnter",["pointerout","pointerover"]);Ac("onPointerLeave",["pointerout","pointerover"]);ml("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ml("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ml("onBeforeInput",["compositionend","keypress","textInput","paste"]);ml("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ml("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ml("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ju));function Ab(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,rF(r,e,void 0,t),t.currentTarget=null}function aR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Ab(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Ab(s,a,c),i=l}}}if(wp)throw t=Fv,wp=!1,Fv=null,t}function St(t,e){var n=e[Gv];n===void 0&&(n=e[Gv]=new Set);var r=t+"__bubble";n.has(r)||(lR(e,t,2,!1),n.add(r))}function _y(t,e,n){var r=0;e&&(r|=4),lR(n,t,r,e)}var vf="_reactListening"+Math.random().toString(36).slice(2);function jd(t){if(!t[vf]){t[vf]=!0,mC.forEach(function(n){n!=="selectionchange"&&(iV.has(n)||_y(n,!1,t),_y(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vf]||(e[vf]=!0,_y("selectionchange",!1,e))}}function lR(t,e,n,r){switch(HC(e)){case 1:var s=_F;break;case 4:s=wF;break;default:s=$w}n=s.bind(null,e,n,t),s=void 0,!Mv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function wy(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Na(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}PC(function(){var c=i,d=jw(n),h=[];e:{var f=oR.get(t);if(f!==void 0){var p=Hw,T=t;switch(t){case"keypress":if(Gf(n)===0)break e;case"keydown":case"keyup":p=LF;break;case"focusin":T="focus",p=fy;break;case"focusout":T="blur",p=fy;break;case"beforeblur":case"afterblur":p=fy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=yb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=bF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=VF;break;case nR:case rR:case sR:p=IF;break;case iR:p=UF;break;case"scroll":p=EF;break;case"wheel":p=BF;break;case"copy":case"cut":case"paste":p=RF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=_b}var v=(e&4)!==0,w=!v&&t==="scroll",E=v?f!==null?f+"Capture":null:f;v=[];for(var y=c,x;y!==null;){x=y;var C=x.stateNode;if(x.tag===5&&C!==null&&(x=C,E!==null&&(C=Dd(y,E),C!=null&&v.push(Ud(y,C,x)))),w)break;y=y.return}0<v.length&&(f=new p(f,T,null,n,d),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Ov&&(T=n.relatedTarget||n.fromElement)&&(Na(T)||T[Bi]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(T=n.relatedTarget||n.toElement,p=c,T=T?Na(T):null,T!==null&&(w=gl(T),T!==w||T.tag!==5&&T.tag!==6)&&(T=null)):(p=null,T=c),p!==T)){if(v=yb,C="onMouseLeave",E="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=_b,C="onPointerLeave",E="onPointerEnter",y="pointer"),w=p==null?f:Kl(p),x=T==null?f:Kl(T),f=new v(C,y+"leave",p,n,d),f.target=w,f.relatedTarget=x,C=null,Na(d)===c&&(v=new v(E,y+"enter",T,n,d),v.target=x,v.relatedTarget=w,C=v),w=C,p&&T)t:{for(v=p,E=T,y=0,x=v;x;x=Nl(x))y++;for(x=0,C=E;C;C=Nl(C))x++;for(;0<y-x;)v=Nl(v),y--;for(;0<x-y;)E=Nl(E),x--;for(;y--;){if(v===E||E!==null&&v===E.alternate)break t;v=Nl(v),E=Nl(E)}v=null}else v=null;p!==null&&kb(h,f,p,v,!1),T!==null&&w!==null&&kb(h,w,T,v,!0)}}e:{if(f=c?Kl(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var D=QF;else if(Tb(f))if(XC)D=ZF;else{D=XF;var V=YF}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=JF);if(D&&(D=D(t,c))){YC(h,D,n,d);break e}V&&V(t,f,c),t==="focusout"&&(V=f._wrapperState)&&V.controlled&&f.type==="number"&&Av(f,"number",f.value)}switch(V=c?Kl(c):window,t){case"focusin":(Tb(V)||V.contentEditable==="true")&&(ql=V,zv=c,dd=null);break;case"focusout":dd=zv=ql=null;break;case"mousedown":Bv=!0;break;case"contextmenu":case"mouseup":case"dragend":Bv=!1,Cb(h,n,d);break;case"selectionchange":if(nV)break;case"keydown":case"keyup":Cb(h,n,d)}var S;if(Gw)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Hl?KC(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(GC&&n.locale!=="ko"&&(Hl||I!=="onCompositionStart"?I==="onCompositionEnd"&&Hl&&(S=qC()):(Lo=d,Ww="value"in Lo?Lo.value:Lo.textContent,Hl=!0)),V=Sp(c,I),0<V.length&&(I=new vb(I,t,null,n,d),h.push({event:I,listeners:V}),S?I.data=S:(S=QC(n),S!==null&&(I.data=S)))),(S=WF?HF(t,n):qF(t,n))&&(c=Sp(c,"onBeforeInput"),0<c.length&&(d=new vb("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}aR(h,e)})}function Ud(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sp(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Dd(t,n),i!=null&&r.unshift(Ud(t,i,s)),i=Dd(t,e),i!=null&&r.push(Ud(t,i,s))),t=t.return}return r}function Nl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kb(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Dd(n,i),l!=null&&o.unshift(Ud(n,l,a))):s||(l=Dd(n,i),l!=null&&o.push(Ud(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var oV=/\r\n?/g,aV=/\u0000|\uFFFD/g;function Pb(t){return(typeof t=="string"?t:""+t).replace(oV,`
`).replace(aV,"")}function _f(t,e,n){if(e=Pb(e),Pb(t)!==e&&n)throw Error(ne(425))}function Ip(){}var $v=null,Wv=null;function Hv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qv=typeof setTimeout=="function"?setTimeout:void 0,lV=typeof clearTimeout=="function"?clearTimeout:void 0,Nb=typeof Promise=="function"?Promise:void 0,cV=typeof queueMicrotask=="function"?queueMicrotask:typeof Nb!="undefined"?function(t){return Nb.resolve(null).then(t).catch(uV)}:qv;function uV(t){setTimeout(function(){throw t})}function Ey(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Md(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Md(e)}function $o(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Db(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var eu=Math.random().toString(36).slice(2),Qs="__reactFiber$"+eu,zd="__reactProps$"+eu,Bi="__reactContainer$"+eu,Gv="__reactEvents$"+eu,dV="__reactListeners$"+eu,hV="__reactHandles$"+eu;function Na(t){var e=t[Qs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Bi]||n[Qs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Db(t);t!==null;){if(n=t[Qs])return n;t=Db(t)}return e}t=n,n=t.parentNode}return null}function _h(t){return t=t[Qs]||t[Bi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Kl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function Vm(t){return t[zd]||null}var Kv=[],Ql=-1;function pa(t){return{current:t}}function At(t){0>Ql||(t.current=Kv[Ql],Kv[Ql]=null,Ql--)}function Et(t,e){Ql++,Kv[Ql]=t.current,t.current=e}var ra={},$n=pa(ra),fr=pa(!1),Ya=ra;function kc(t,e){var n=t.type.contextTypes;if(!n)return ra;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function pr(t){return t=t.childContextTypes,t!=null}function Cp(){At(fr),At($n)}function Ob(t,e,n){if($n.current!==ra)throw Error(ne(168));Et($n,e),Et(fr,n)}function cR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ne(108,Y2(t)||"Unknown",s));return Vt({},n,r)}function Rp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ra,Ya=$n.current,Et($n,t),Et(fr,fr.current),!0}function Lb(t,e,n){var r=t.stateNode;if(!r)throw Error(ne(169));n?(t=cR(t,e,Ya),r.__reactInternalMemoizedMergedChildContext=t,At(fr),At($n),Et($n,t)):At(fr),Et(fr,n)}var xi=null,jm=!1,Ty=!1;function uR(t){xi===null?xi=[t]:xi.push(t)}function fV(t){jm=!0,uR(t)}function ma(){if(!Ty&&xi!==null){Ty=!0;var t=0,e=ut;try{var n=xi;for(ut=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xi=null,jm=!1}catch(s){throw xi!==null&&(xi=xi.slice(t+1)),LC(Uw,ma),s}finally{ut=e,Ty=!1}}return null}var Yl=[],Xl=0,Ap=null,kp=0,Hr=[],qr=0,Xa=null,Ri=1,Ai="";function Ia(t,e){Yl[Xl++]=kp,Yl[Xl++]=Ap,Ap=t,kp=e}function dR(t,e,n){Hr[qr++]=Ri,Hr[qr++]=Ai,Hr[qr++]=Xa,Xa=t;var r=Ri;t=Ai;var s=32-xs(r)-1;r&=~(1<<s),n+=1;var i=32-xs(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ri=1<<32-xs(e)+s|n<<s|r,Ai=i+t}else Ri=1<<i|n<<s|r,Ai=t}function Qw(t){t.return!==null&&(Ia(t,1),dR(t,1,0))}function Yw(t){for(;t===Ap;)Ap=Yl[--Xl],Yl[Xl]=null,kp=Yl[--Xl],Yl[Xl]=null;for(;t===Xa;)Xa=Hr[--qr],Hr[qr]=null,Ai=Hr[--qr],Hr[qr]=null,Ri=Hr[--qr],Hr[qr]=null}var kr=null,Rr=null,Dt=!1,_s=null;function hR(t,e){var n=Gr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Mb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kr=t,Rr=$o(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kr=t,Rr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xa!==null?{id:Ri,overflow:Ai}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kr=t,Rr=null,!0):!1;default:return!1}}function Qv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yv(t){if(Dt){var e=Rr;if(e){var n=e;if(!Mb(t,e)){if(Qv(t))throw Error(ne(418));e=$o(n.nextSibling);var r=kr;e&&Mb(t,e)?hR(r,n):(t.flags=t.flags&-4097|2,Dt=!1,kr=t)}}else{if(Qv(t))throw Error(ne(418));t.flags=t.flags&-4097|2,Dt=!1,kr=t}}}function Fb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kr=t}function wf(t){if(t!==kr)return!1;if(!Dt)return Fb(t),Dt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hv(t.type,t.memoizedProps)),e&&(e=Rr)){if(Qv(t))throw fR(),Error(ne(418));for(;e;)hR(t,e),e=$o(e.nextSibling)}if(Fb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rr=$o(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rr=null}}else Rr=kr?$o(t.stateNode.nextSibling):null;return!0}function fR(){for(var t=Rr;t;)t=$o(t.nextSibling)}function Pc(){Rr=kr=null,Dt=!1}function Xw(t){_s===null?_s=[t]:_s.push(t)}var pV=to.ReactCurrentBatchConfig;function Mu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,t))}return t}function Ef(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vb(t){var e=t._init;return e(t._payload)}function pR(t){function e(E,y){if(t){var x=E.deletions;x===null?(E.deletions=[y],E.flags|=16):x.push(y)}}function n(E,y){if(!t)return null;for(;y!==null;)e(E,y),y=y.sibling;return null}function r(E,y){for(E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function s(E,y){return E=Go(E,y),E.index=0,E.sibling=null,E}function i(E,y,x){return E.index=x,t?(x=E.alternate,x!==null?(x=x.index,x<y?(E.flags|=2,y):x):(E.flags|=2,y)):(E.flags|=1048576,y)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,y,x,C){return y===null||y.tag!==6?(y=Ay(x,E.mode,C),y.return=E,y):(y=s(y,x),y.return=E,y)}function l(E,y,x,C){var D=x.type;return D===Wl?d(E,y,x.props.children,C,x.key):y!==null&&(y.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===bo&&Vb(D)===y.type)?(C=s(y,x.props),C.ref=Mu(E,y,x),C.return=E,C):(C=ep(x.type,x.key,x.props,null,E.mode,C),C.ref=Mu(E,y,x),C.return=E,C)}function c(E,y,x,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=ky(x,E.mode,C),y.return=E,y):(y=s(y,x.children||[]),y.return=E,y)}function d(E,y,x,C,D){return y===null||y.tag!==7?(y=Ga(x,E.mode,C,D),y.return=E,y):(y=s(y,x),y.return=E,y)}function h(E,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Ay(""+y,E.mode,x),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case uf:return x=ep(y.type,y.key,y.props,null,E.mode,x),x.ref=Mu(E,null,y),x.return=E,x;case $l:return y=ky(y,E.mode,x),y.return=E,y;case bo:var C=y._init;return h(E,C(y._payload),x)}if(Yu(y)||Pu(y))return y=Ga(y,E.mode,x,null),y.return=E,y;Ef(E,y)}return null}function f(E,y,x,C){var D=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return D!==null?null:a(E,y,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case uf:return x.key===D?l(E,y,x,C):null;case $l:return x.key===D?c(E,y,x,C):null;case bo:return D=x._init,f(E,y,D(x._payload),C)}if(Yu(x)||Pu(x))return D!==null?null:d(E,y,x,C,null);Ef(E,x)}return null}function p(E,y,x,C,D){if(typeof C=="string"&&C!==""||typeof C=="number")return E=E.get(x)||null,a(y,E,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case uf:return E=E.get(C.key===null?x:C.key)||null,l(y,E,C,D);case $l:return E=E.get(C.key===null?x:C.key)||null,c(y,E,C,D);case bo:var V=C._init;return p(E,y,x,V(C._payload),D)}if(Yu(C)||Pu(C))return E=E.get(x)||null,d(y,E,C,D,null);Ef(y,C)}return null}function T(E,y,x,C){for(var D=null,V=null,S=y,I=y=0,R=null;S!==null&&I<x.length;I++){S.index>I?(R=S,S=null):R=S.sibling;var P=f(E,S,x[I],C);if(P===null){S===null&&(S=R);break}t&&S&&P.alternate===null&&e(E,S),y=i(P,y,I),V===null?D=P:V.sibling=P,V=P,S=R}if(I===x.length)return n(E,S),Dt&&Ia(E,I),D;if(S===null){for(;I<x.length;I++)S=h(E,x[I],C),S!==null&&(y=i(S,y,I),V===null?D=S:V.sibling=S,V=S);return Dt&&Ia(E,I),D}for(S=r(E,S);I<x.length;I++)R=p(S,E,I,x[I],C),R!==null&&(t&&R.alternate!==null&&S.delete(R.key===null?I:R.key),y=i(R,y,I),V===null?D=R:V.sibling=R,V=R);return t&&S.forEach(function(O){return e(E,O)}),Dt&&Ia(E,I),D}function v(E,y,x,C){var D=Pu(x);if(typeof D!="function")throw Error(ne(150));if(x=D.call(x),x==null)throw Error(ne(151));for(var V=D=null,S=y,I=y=0,R=null,P=x.next();S!==null&&!P.done;I++,P=x.next()){S.index>I?(R=S,S=null):R=S.sibling;var O=f(E,S,P.value,C);if(O===null){S===null&&(S=R);break}t&&S&&O.alternate===null&&e(E,S),y=i(O,y,I),V===null?D=O:V.sibling=O,V=O,S=R}if(P.done)return n(E,S),Dt&&Ia(E,I),D;if(S===null){for(;!P.done;I++,P=x.next())P=h(E,P.value,C),P!==null&&(y=i(P,y,I),V===null?D=P:V.sibling=P,V=P);return Dt&&Ia(E,I),D}for(S=r(E,S);!P.done;I++,P=x.next())P=p(S,E,I,P.value,C),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?I:P.key),y=i(P,y,I),V===null?D=P:V.sibling=P,V=P);return t&&S.forEach(function(L){return e(E,L)}),Dt&&Ia(E,I),D}function w(E,y,x,C){if(typeof x=="object"&&x!==null&&x.type===Wl&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case uf:e:{for(var D=x.key,V=y;V!==null;){if(V.key===D){if(D=x.type,D===Wl){if(V.tag===7){n(E,V.sibling),y=s(V,x.props.children),y.return=E,E=y;break e}}else if(V.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===bo&&Vb(D)===V.type){n(E,V.sibling),y=s(V,x.props),y.ref=Mu(E,V,x),y.return=E,E=y;break e}n(E,V);break}else e(E,V);V=V.sibling}x.type===Wl?(y=Ga(x.props.children,E.mode,C,x.key),y.return=E,E=y):(C=ep(x.type,x.key,x.props,null,E.mode,C),C.ref=Mu(E,y,x),C.return=E,E=C)}return o(E);case $l:e:{for(V=x.key;y!==null;){if(y.key===V)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(E,y.sibling),y=s(y,x.children||[]),y.return=E,E=y;break e}else{n(E,y);break}else e(E,y);y=y.sibling}y=ky(x,E.mode,C),y.return=E,E=y}return o(E);case bo:return V=x._init,w(E,y,V(x._payload),C)}if(Yu(x))return T(E,y,x,C);if(Pu(x))return v(E,y,x,C);Ef(E,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(E,y.sibling),y=s(y,x),y.return=E,E=y):(n(E,y),y=Ay(x,E.mode,C),y.return=E,E=y),o(E)):n(E,y)}return w}var Nc=pR(!0),mR=pR(!1),Pp=pa(null),Np=null,Jl=null,Jw=null;function Zw(){Jw=Jl=Np=null}function e0(t){var e=Pp.current;At(Pp),t._currentValue=e}function Xv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function cc(t,e){Np=t,Jw=Jl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dr=!0),t.firstContext=null)}function Xr(t){var e=t._currentValue;if(Jw!==t)if(t={context:t,memoizedValue:e,next:null},Jl===null){if(Np===null)throw Error(ne(308));Jl=t,Np.dependencies={lanes:0,firstContext:t}}else Jl=Jl.next=t;return e}var Da=null;function t0(t){Da===null?Da=[t]:Da.push(t)}function gR(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,t0(e)):(n.next=s.next,s.next=n),e.interleaved=n,$i(t,r)}function $i(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xo=!1;function n0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Di(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ze&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,$i(t,n)}return s=r.interleaved,s===null?(e.next=e,t0(r)):(e.next=s.next,s.next=e),r.interleaved=e,$i(t,n)}function Kf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zw(t,n)}}function jb(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dp(t,e,n,r){var s=t.updateQueue;xo=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,v=a;switch(f=e,p=n,v.tag){case 1:if(T=v.payload,typeof T=="function"){h=T.call(p,h,f);break e}h=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=v.payload,f=typeof T=="function"?T.call(p,h,f):T,f==null)break e;h=Vt({},h,f);break e;case 2:xo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Za|=o,t.lanes=o,t.memoizedState=h}}function Ub(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ne(191,s));s.call(r)}}}var wh={},ei=pa(wh),Bd=pa(wh),$d=pa(wh);function Oa(t){if(t===wh)throw Error(ne(174));return t}function r0(t,e){switch(Et($d,e),Et(Bd,t),Et(ei,wh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Pv(e,t)}At(ei),Et(ei,e)}function Dc(){At(ei),At(Bd),At($d)}function vR(t){Oa($d.current);var e=Oa(ei.current),n=Pv(e,t.type);e!==n&&(Et(Bd,t),Et(ei,n))}function s0(t){Bd.current===t&&(At(ei),At(Bd))}var Lt=pa(0);function Op(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var by=[];function i0(){for(var t=0;t<by.length;t++)by[t]._workInProgressVersionPrimary=null;by.length=0}var Qf=to.ReactCurrentDispatcher,xy=to.ReactCurrentBatchConfig,Ja=0,Ft=null,sn=null,fn=null,Lp=!1,hd=!1,Wd=0,mV=0;function Pn(){throw Error(ne(321))}function o0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ps(t[n],e[n]))return!1;return!0}function a0(t,e,n,r,s,i){if(Ja=i,Ft=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qf.current=t===null||t.memoizedState===null?_V:wV,t=n(r,s),hd){i=0;do{if(hd=!1,Wd=0,25<=i)throw Error(ne(301));i+=1,fn=sn=null,e.updateQueue=null,Qf.current=EV,t=n(r,s)}while(hd)}if(Qf.current=Mp,e=sn!==null&&sn.next!==null,Ja=0,fn=sn=Ft=null,Lp=!1,e)throw Error(ne(300));return t}function l0(){var t=Wd!==0;return Wd=0,t}function Ws(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Ft.memoizedState=fn=t:fn=fn.next=t,fn}function Jr(){if(sn===null){var t=Ft.alternate;t=t!==null?t.memoizedState:null}else t=sn.next;var e=fn===null?Ft.memoizedState:fn.next;if(e!==null)fn=e,sn=t;else{if(t===null)throw Error(ne(310));sn=t,t={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},fn===null?Ft.memoizedState=fn=t:fn=fn.next=t}return fn}function Hd(t,e){return typeof e=="function"?e(t):e}function Sy(t){var e=Jr(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=sn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Ja&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ft.lanes|=d,Za|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Ps(r,e.memoizedState)||(dr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ft.lanes|=i,Za|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Iy(t){var e=Jr(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ps(i,e.memoizedState)||(dr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function _R(){}function wR(t,e){var n=Ft,r=Jr(),s=e(),i=!Ps(r.memoizedState,s);if(i&&(r.memoizedState=s,dr=!0),r=r.queue,c0(bR.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||fn!==null&&fn.memoizedState.tag&1){if(n.flags|=2048,qd(9,TR.bind(null,n,r,s,e),void 0,null),yn===null)throw Error(ne(349));Ja&30||ER(n,e,s)}return s}function ER(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ft.updateQueue,e===null?(e={lastEffect:null,stores:null},Ft.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function TR(t,e,n,r){e.value=n,e.getSnapshot=r,xR(e)&&SR(t)}function bR(t,e,n){return n(function(){xR(e)&&SR(t)})}function xR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ps(t,n)}catch(r){return!0}}function SR(t){var e=$i(t,1);e!==null&&Ss(e,t,1,-1)}function zb(t){var e=Ws();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hd,lastRenderedState:t},e.queue=t,t=t.dispatch=vV.bind(null,Ft,t),[e.memoizedState,t]}function qd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ft.updateQueue,e===null?(e={lastEffect:null,stores:null},Ft.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function IR(){return Jr().memoizedState}function Yf(t,e,n,r){var s=Ws();Ft.flags|=t,s.memoizedState=qd(1|e,n,void 0,r===void 0?null:r)}function Um(t,e,n,r){var s=Jr();r=r===void 0?null:r;var i=void 0;if(sn!==null){var o=sn.memoizedState;if(i=o.destroy,r!==null&&o0(r,o.deps)){s.memoizedState=qd(e,n,i,r);return}}Ft.flags|=t,s.memoizedState=qd(1|e,n,i,r)}function Bb(t,e){return Yf(8390656,8,t,e)}function c0(t,e){return Um(2048,8,t,e)}function CR(t,e){return Um(4,2,t,e)}function RR(t,e){return Um(4,4,t,e)}function AR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kR(t,e,n){return n=n!=null?n.concat([t]):null,Um(4,4,AR.bind(null,e,t),n)}function u0(){}function PR(t,e){var n=Jr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&o0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function NR(t,e){var n=Jr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&o0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function DR(t,e,n){return Ja&21?(Ps(n,e)||(n=VC(),Ft.lanes|=n,Za|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dr=!0),t.memoizedState=n)}function gV(t,e){var n=ut;ut=n!==0&&4>n?n:4,t(!0);var r=xy.transition;xy.transition={};try{t(!1),e()}finally{ut=n,xy.transition=r}}function OR(){return Jr().memoizedState}function yV(t,e,n){var r=qo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},LR(t))MR(e,n);else if(n=gR(t,e,n,r),n!==null){var s=er();Ss(n,t,r,s),FR(n,e,r)}}function vV(t,e,n){var r=qo(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(LR(t))MR(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ps(a,o)){var l=e.interleaved;l===null?(s.next=s,t0(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch(c){}finally{}n=gR(t,e,s,r),n!==null&&(s=er(),Ss(n,t,r,s),FR(n,e,r))}}function LR(t){var e=t.alternate;return t===Ft||e!==null&&e===Ft}function MR(t,e){hd=Lp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function FR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zw(t,n)}}var Mp={readContext:Xr,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},_V={readContext:Xr,useCallback:function(t,e){return Ws().memoizedState=[t,e===void 0?null:e],t},useContext:Xr,useEffect:Bb,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Yf(4194308,4,AR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Yf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yf(4,2,t,e)},useMemo:function(t,e){var n=Ws();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ws();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=yV.bind(null,Ft,t),[r.memoizedState,t]},useRef:function(t){var e=Ws();return t={current:t},e.memoizedState=t},useState:zb,useDebugValue:u0,useDeferredValue:function(t){return Ws().memoizedState=t},useTransition:function(){var t=zb(!1),e=t[0];return t=gV.bind(null,t[1]),Ws().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ft,s=Ws();if(Dt){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=e(),yn===null)throw Error(ne(349));Ja&30||ER(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Bb(bR.bind(null,r,i,t),[t]),r.flags|=2048,qd(9,TR.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ws(),e=yn.identifierPrefix;if(Dt){var n=Ai,r=Ri;n=(r&~(1<<32-xs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},wV={readContext:Xr,useCallback:PR,useContext:Xr,useEffect:c0,useImperativeHandle:kR,useInsertionEffect:CR,useLayoutEffect:RR,useMemo:NR,useReducer:Sy,useRef:IR,useState:function(){return Sy(Hd)},useDebugValue:u0,useDeferredValue:function(t){var e=Jr();return DR(e,sn.memoizedState,t)},useTransition:function(){var t=Sy(Hd)[0],e=Jr().memoizedState;return[t,e]},useMutableSource:_R,useSyncExternalStore:wR,useId:OR,unstable_isNewReconciler:!1},EV={readContext:Xr,useCallback:PR,useContext:Xr,useEffect:c0,useImperativeHandle:kR,useInsertionEffect:CR,useLayoutEffect:RR,useMemo:NR,useReducer:Iy,useRef:IR,useState:function(){return Iy(Hd)},useDebugValue:u0,useDeferredValue:function(t){var e=Jr();return sn===null?e.memoizedState=t:DR(e,sn.memoizedState,t)},useTransition:function(){var t=Iy(Hd)[0],e=Jr().memoizedState;return[t,e]},useMutableSource:_R,useSyncExternalStore:wR,useId:OR,unstable_isNewReconciler:!1};function fs(t,e){if(t&&t.defaultProps){e=Vt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Vt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zm={isMounted:function(t){return(t=t._reactInternals)?gl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=er(),s=qo(t),i=Di(r,s);i.payload=e,n!=null&&(i.callback=n),e=Wo(t,i,s),e!==null&&(Ss(e,t,s,r),Kf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=er(),s=qo(t),i=Di(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Wo(t,i,s),e!==null&&(Ss(e,t,s,r),Kf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=er(),r=qo(t),s=Di(n,r);s.tag=2,e!=null&&(s.callback=e),e=Wo(t,s,r),e!==null&&(Ss(e,t,r,n),Kf(e,t,r))}};function $b(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Vd(n,r)||!Vd(s,i):!0}function VR(t,e,n){var r=!1,s=ra,i=e.contextType;return typeof i=="object"&&i!==null?i=Xr(i):(s=pr(e)?Ya:$n.current,r=e.contextTypes,i=(r=r!=null)?kc(t,s):ra),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Wb(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zm.enqueueReplaceState(e,e.state,null)}function Zv(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},n0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Xr(i):(i=pr(e)?Ya:$n.current,s.context=kc(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Jv(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&zm.enqueueReplaceState(s,s.state,null),Dp(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Oc(t,e){try{var n="",r=e;do n+=Q2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Cy(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function e_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var TV=typeof WeakMap=="function"?WeakMap:Map;function jR(t,e,n){n=Di(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Vp||(Vp=!0,u_=r),e_(t,e)},n}function UR(t,e,n){n=Di(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){e_(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){e_(t,e),typeof r!="function"&&(Ho===null?Ho=new Set([this]):Ho.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Hb(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new TV;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=MV.bind(null,t,e,n),e.then(t,t))}function qb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gb(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Di(-1,1),e.tag=2,Wo(n,e,1))),n.lanes|=1),t)}var bV=to.ReactCurrentOwner,dr=!1;function Yn(t,e,n,r){e.child=t===null?mR(e,null,n,r):Nc(e,t.child,n,r)}function Kb(t,e,n,r,s){n=n.render;var i=e.ref;return cc(e,s),r=a0(t,e,n,r,i,s),n=l0(),t!==null&&!dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wi(t,e,s)):(Dt&&n&&Qw(e),e.flags|=1,Yn(t,e,r,s),e.child)}function Qb(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!v0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,zR(t,e,i,r,s)):(t=ep(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Vd,n(o,r)&&t.ref===e.ref)return Wi(t,e,s)}return e.flags|=1,t=Go(i,r),t.ref=e.ref,t.return=e,e.child=t}function zR(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Vd(i,r)&&t.ref===e.ref)if(dr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(dr=!0);else return e.lanes=t.lanes,Wi(t,e,s)}return t_(t,e,n,r,s)}function BR(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(ec,xr),xr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Et(ec,xr),xr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Et(ec,xr),xr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Et(ec,xr),xr|=r;return Yn(t,e,s,n),e.child}function $R(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function t_(t,e,n,r,s){var i=pr(n)?Ya:$n.current;return i=kc(e,i),cc(e,s),n=a0(t,e,n,r,i,s),r=l0(),t!==null&&!dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wi(t,e,s)):(Dt&&r&&Qw(e),e.flags|=1,Yn(t,e,n,s),e.child)}function Yb(t,e,n,r,s){if(pr(n)){var i=!0;Rp(e)}else i=!1;if(cc(e,s),e.stateNode===null)Xf(t,e),VR(e,n,r),Zv(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Xr(c):(c=pr(n)?Ya:$n.current,c=kc(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Wb(e,o,r,c),xo=!1;var f=e.memoizedState;o.state=f,Dp(e,r,o,s),l=e.memoizedState,a!==r||f!==l||fr.current||xo?(typeof d=="function"&&(Jv(e,n,d,r),l=e.memoizedState),(a=xo||$b(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,yR(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:fs(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Xr(l):(l=pr(n)?Ya:$n.current,l=kc(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&Wb(e,o,r,l),xo=!1,f=e.memoizedState,o.state=f,Dp(e,r,o,s);var T=e.memoizedState;a!==h||f!==T||fr.current||xo?(typeof p=="function"&&(Jv(e,n,p,r),T=e.memoizedState),(c=xo||$b(e,n,c,r,f,T,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return n_(t,e,n,r,i,s)}function n_(t,e,n,r,s,i){$R(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Lb(e,n,!1),Wi(t,e,i);r=e.stateNode,bV.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Nc(e,t.child,null,i),e.child=Nc(e,null,a,i)):Yn(t,e,a,i),e.memoizedState=r.state,s&&Lb(e,n,!0),e.child}function WR(t){var e=t.stateNode;e.pendingContext?Ob(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ob(t,e.context,!1),r0(t,e.containerInfo)}function Xb(t,e,n,r,s){return Pc(),Xw(s),e.flags|=256,Yn(t,e,n,r),e.child}var r_={dehydrated:null,treeContext:null,retryLane:0};function s_(t){return{baseLanes:t,cachePool:null,transitions:null}}function HR(t,e,n){var r=e.pendingProps,s=Lt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Et(Lt,s&1),t===null)return Yv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Wm(o,r,0,null),t=Ga(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=s_(n),e.memoizedState=r_,t):d0(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return xV(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Go(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Go(a,i):(i=Ga(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?s_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=r_,r}return i=t.child,t=i.sibling,r=Go(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function d0(t,e){return e=Wm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Tf(t,e,n,r){return r!==null&&Xw(r),Nc(e,t.child,null,n),t=d0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xV(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Cy(Error(ne(422))),Tf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Wm({mode:"visible",children:r.children},s,0,null),i=Ga(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Nc(e,t.child,null,o),e.child.memoizedState=s_(o),e.memoizedState=r_,i);if(!(e.mode&1))return Tf(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ne(419)),r=Cy(i,r,void 0),Tf(t,e,o,r)}if(a=(o&t.childLanes)!==0,dr||a){if(r=yn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$i(t,s),Ss(r,t,s,-1))}return y0(),r=Cy(Error(ne(421))),Tf(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=FV.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Rr=$o(s.nextSibling),kr=e,Dt=!0,_s=null,t!==null&&(Hr[qr++]=Ri,Hr[qr++]=Ai,Hr[qr++]=Xa,Ri=t.id,Ai=t.overflow,Xa=e),e=d0(e,r.children),e.flags|=4096,e)}function Jb(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Xv(t.return,e,n)}function Ry(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function qR(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Yn(t,e,r.children,n),r=Lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jb(t,n,e);else if(t.tag===19)Jb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Et(Lt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Op(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ry(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Op(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ry(e,!0,n,null,i);break;case"together":Ry(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Za|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,n=Go(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Go(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function SV(t,e,n){switch(e.tag){case 3:WR(e),Pc();break;case 5:vR(e);break;case 1:pr(e.type)&&Rp(e);break;case 4:r0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Et(Pp,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Et(Lt,Lt.current&1),e.flags|=128,null):n&e.child.childLanes?HR(t,e,n):(Et(Lt,Lt.current&1),t=Wi(t,e,n),t!==null?t.sibling:null);Et(Lt,Lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qR(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Et(Lt,Lt.current),r)break;return null;case 22:case 23:return e.lanes=0,BR(t,e,n)}return Wi(t,e,n)}var GR,i_,KR,QR;GR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};i_=function(){};KR=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Oa(ei.current);var i=null;switch(n){case"input":s=Cv(t,s),r=Cv(t,r),i=[];break;case"select":s=Vt({},s,{value:void 0}),r=Vt({},r,{value:void 0}),i=[];break;case"textarea":s=kv(t,s),r=kv(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ip)}Nv(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Pd.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Pd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&St("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};QR=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fu(t,e){if(!Dt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function IV(t,e,n){var r=e.pendingProps;switch(Yw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nn(e),null;case 1:return pr(e.type)&&Cp(),Nn(e),null;case 3:return r=e.stateNode,Dc(),At(fr),At($n),i0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(wf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_s!==null&&(f_(_s),_s=null))),i_(t,e),Nn(e),null;case 5:s0(e);var s=Oa($d.current);if(n=e.type,t!==null&&e.stateNode!=null)KR(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ne(166));return Nn(e),null}if(t=Oa(ei.current),wf(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Qs]=e,r[zd]=i,t=(e.mode&1)!==0,n){case"dialog":St("cancel",r),St("close",r);break;case"iframe":case"object":case"embed":St("load",r);break;case"video":case"audio":for(s=0;s<Ju.length;s++)St(Ju[s],r);break;case"source":St("error",r);break;case"img":case"image":case"link":St("error",r),St("load",r);break;case"details":St("toggle",r);break;case"input":ab(r,i),St("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},St("invalid",r);break;case"textarea":cb(r,i),St("invalid",r)}Nv(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&_f(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&_f(r.textContent,a,t),s=["children",""+a]):Pd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&St("scroll",r)}switch(n){case"input":df(r),lb(r,i,!0);break;case"textarea":df(r),ub(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ip)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Qs]=e,t[zd]=r,GR(t,e,!1,!1),e.stateNode=t;e:{switch(o=Dv(n,r),n){case"dialog":St("cancel",t),St("close",t),s=r;break;case"iframe":case"object":case"embed":St("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ju.length;s++)St(Ju[s],t);s=r;break;case"source":St("error",t),s=r;break;case"img":case"image":case"link":St("error",t),St("load",t),s=r;break;case"details":St("toggle",t),s=r;break;case"input":ab(t,r),s=Cv(t,r),St("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Vt({},r,{value:void 0}),St("invalid",t);break;case"textarea":cb(t,r),s=kv(t,r),St("invalid",t);break;default:s=r}Nv(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?IC(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&xC(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Nd(t,l):typeof l=="number"&&Nd(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Pd.hasOwnProperty(i)?l!=null&&i==="onScroll"&&St("scroll",t):l!=null&&Lw(t,i,l,o))}switch(n){case"input":df(t),lb(t,r,!1);break;case"textarea":df(t),ub(t);break;case"option":r.value!=null&&t.setAttribute("value",""+na(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ic(t,!!r.multiple,i,!1):r.defaultValue!=null&&ic(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ip)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nn(e),null;case 6:if(t&&e.stateNode!=null)QR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ne(166));if(n=Oa($d.current),Oa(ei.current),wf(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qs]=e,(i=r.nodeValue!==n)&&(t=kr,t!==null))switch(t.tag){case 3:_f(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_f(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qs]=e,e.stateNode=r}return Nn(e),null;case 13:if(At(Lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Dt&&Rr!==null&&e.mode&1&&!(e.flags&128))fR(),Pc(),e.flags|=98560,i=!1;else if(i=wf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ne(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ne(317));i[Qs]=e}else Pc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nn(e),i=!1}else _s!==null&&(f_(_s),_s=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Lt.current&1?ln===0&&(ln=3):y0())),e.updateQueue!==null&&(e.flags|=4),Nn(e),null);case 4:return Dc(),i_(t,e),t===null&&jd(e.stateNode.containerInfo),Nn(e),null;case 10:return e0(e.type._context),Nn(e),null;case 17:return pr(e.type)&&Cp(),Nn(e),null;case 19:if(At(Lt),i=e.memoizedState,i===null)return Nn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Fu(i,!1);else{if(ln!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Op(t),o!==null){for(e.flags|=128,Fu(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Et(Lt,Lt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Gt()>Lc&&(e.flags|=128,r=!0,Fu(i,!1),e.lanes=4194304)}else{if(!r)if(t=Op(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Dt)return Nn(e),null}else 2*Gt()-i.renderingStartTime>Lc&&n!==1073741824&&(e.flags|=128,r=!0,Fu(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Gt(),e.sibling=null,n=Lt.current,Et(Lt,r?n&1|2:n&1),e):(Nn(e),null);case 22:case 23:return g0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xr&1073741824&&(Nn(e),e.subtreeFlags&6&&(e.flags|=8192)):Nn(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function CV(t,e){switch(Yw(e),e.tag){case 1:return pr(e.type)&&Cp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Dc(),At(fr),At($n),i0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return s0(e),null;case 13:if(At(Lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));Pc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return At(Lt),null;case 4:return Dc(),null;case 10:return e0(e.type._context),null;case 22:case 23:return g0(),null;case 24:return null;default:return null}}var bf=!1,Mn=!1,RV=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Zl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Wt(t,e,r)}else n.current=null}function o_(t,e,n){try{n()}catch(r){Wt(t,e,r)}}var Zb=!1;function AV(t,e){if($v=bp,t=eR(),Kw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(C){n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wv={focusedElem:t,selectionRange:n},bp=!1,pe=e;pe!==null;)if(e=pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,pe=t;else for(;pe!==null;){e=pe;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var v=T.memoizedProps,w=T.memoizedState,E=e.stateNode,y=E.getSnapshotBeforeUpdate(e.elementType===e.type?v:fs(e.type,v),w);E.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(C){Wt(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,pe=t;break}pe=e.return}return T=Zb,Zb=!1,T}function fd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&o_(e,n,i)}s=s.next}while(s!==r)}}function Bm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function a_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function YR(t){var e=t.alternate;e!==null&&(t.alternate=null,YR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qs],delete e[zd],delete e[Gv],delete e[dV],delete e[hV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function XR(t){return t.tag===5||t.tag===3||t.tag===4}function ex(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||XR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function l_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ip));else if(r!==4&&(t=t.child,t!==null))for(l_(t,e,n),t=t.sibling;t!==null;)l_(t,e,n),t=t.sibling}function c_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(c_(t,e,n),t=t.sibling;t!==null;)c_(t,e,n),t=t.sibling}var wn=null,ys=!1;function go(t,e,n){for(n=n.child;n!==null;)JR(t,e,n),n=n.sibling}function JR(t,e,n){if(Zs&&typeof Zs.onCommitFiberUnmount=="function")try{Zs.onCommitFiberUnmount(Om,n)}catch(a){}switch(n.tag){case 5:Mn||Zl(n,e);case 6:var r=wn,s=ys;wn=null,go(t,e,n),wn=r,ys=s,wn!==null&&(ys?(t=wn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wn.removeChild(n.stateNode));break;case 18:wn!==null&&(ys?(t=wn,n=n.stateNode,t.nodeType===8?Ey(t.parentNode,n):t.nodeType===1&&Ey(t,n),Md(t)):Ey(wn,n.stateNode));break;case 4:r=wn,s=ys,wn=n.stateNode.containerInfo,ys=!0,go(t,e,n),wn=r,ys=s;break;case 0:case 11:case 14:case 15:if(!Mn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&o_(n,e,o),s=s.next}while(s!==r)}go(t,e,n);break;case 1:if(!Mn&&(Zl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Wt(n,e,a)}go(t,e,n);break;case 21:go(t,e,n);break;case 22:n.mode&1?(Mn=(r=Mn)||n.memoizedState!==null,go(t,e,n),Mn=r):go(t,e,n);break;default:go(t,e,n)}}function tx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new RV),e.forEach(function(r){var s=VV.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function us(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:wn=a.stateNode,ys=!1;break e;case 3:wn=a.stateNode.containerInfo,ys=!0;break e;case 4:wn=a.stateNode.containerInfo,ys=!0;break e}a=a.return}if(wn===null)throw Error(ne(160));JR(i,o,s),wn=null,ys=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Wt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ZR(e,t),e=e.sibling}function ZR(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(us(e,t),$s(t),r&4){try{fd(3,t,t.return),Bm(3,t)}catch(v){Wt(t,t.return,v)}try{fd(5,t,t.return)}catch(v){Wt(t,t.return,v)}}break;case 1:us(e,t),$s(t),r&512&&n!==null&&Zl(n,n.return);break;case 5:if(us(e,t),$s(t),r&512&&n!==null&&Zl(n,n.return),t.flags&32){var s=t.stateNode;try{Nd(s,"")}catch(v){Wt(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&EC(s,i),Dv(a,o);var c=Dv(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?IC(s,h):d==="dangerouslySetInnerHTML"?xC(s,h):d==="children"?Nd(s,h):Lw(s,d,h,c)}switch(a){case"input":Rv(s,i);break;case"textarea":TC(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ic(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?ic(s,!!i.multiple,i.defaultValue,!0):ic(s,!!i.multiple,i.multiple?[]:"",!1))}s[zd]=i}catch(v){Wt(t,t.return,v)}}break;case 6:if(us(e,t),$s(t),r&4){if(t.stateNode===null)throw Error(ne(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){Wt(t,t.return,v)}}break;case 3:if(us(e,t),$s(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Md(e.containerInfo)}catch(v){Wt(t,t.return,v)}break;case 4:us(e,t),$s(t);break;case 13:us(e,t),$s(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(p0=Gt())),r&4&&tx(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Mn=(c=Mn)||d,us(e,t),Mn=c):us(e,t),$s(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(pe=t,d=t.child;d!==null;){for(h=pe=d;pe!==null;){switch(f=pe,p=f.child,f.tag){case 0:case 11:case 14:case 15:fd(4,f,f.return);break;case 1:Zl(f,f.return);var T=f.stateNode;if(typeof T.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(v){Wt(r,n,v)}}break;case 5:Zl(f,f.return);break;case 22:if(f.memoizedState!==null){rx(h);continue}}p!==null?(p.return=f,pe=p):rx(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=SC("display",o))}catch(v){Wt(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){Wt(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:us(e,t),$s(t),r&4&&tx(t);break;case 21:break;default:us(e,t),$s(t)}}function $s(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(XR(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Nd(s,""),r.flags&=-33);var i=ex(t);c_(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ex(t);l_(t,a,o);break;default:throw Error(ne(161))}}catch(l){Wt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kV(t,e,n){pe=t,eA(t)}function eA(t,e,n){for(var r=(t.mode&1)!==0;pe!==null;){var s=pe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||bf;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Mn;a=bf;var c=Mn;if(bf=o,(Mn=l)&&!c)for(pe=s;pe!==null;)o=pe,l=o.child,o.tag===22&&o.memoizedState!==null?sx(s):l!==null?(l.return=o,pe=l):sx(s);for(;i!==null;)pe=i,eA(i),i=i.sibling;pe=s,bf=a,Mn=c}nx(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,pe=i):nx(t)}}function nx(t){for(;pe!==null;){var e=pe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mn||Bm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Mn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fs(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ub(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ub(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Md(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Mn||e.flags&512&&a_(e)}catch(f){Wt(e,e.return,f)}}if(e===t){pe=null;break}if(n=e.sibling,n!==null){n.return=e.return,pe=n;break}pe=e.return}}function rx(t){for(;pe!==null;){var e=pe;if(e===t){pe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,pe=n;break}pe=e.return}}function sx(t){for(;pe!==null;){var e=pe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bm(4,e)}catch(l){Wt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Wt(e,s,l)}}var i=e.return;try{a_(e)}catch(l){Wt(e,i,l)}break;case 5:var o=e.return;try{a_(e)}catch(l){Wt(e,o,l)}}}catch(l){Wt(e,e.return,l)}if(e===t){pe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,pe=a;break}pe=e.return}}var PV=Math.ceil,Fp=to.ReactCurrentDispatcher,h0=to.ReactCurrentOwner,Yr=to.ReactCurrentBatchConfig,Ze=0,yn=null,Zt=null,Tn=0,xr=0,ec=pa(0),ln=0,Gd=null,Za=0,$m=0,f0=0,pd=null,cr=null,p0=0,Lc=1/0,bi=null,Vp=!1,u_=null,Ho=null,xf=!1,Mo=null,jp=0,md=0,d_=null,Jf=-1,Zf=0;function er(){return Ze&6?Gt():Jf!==-1?Jf:Jf=Gt()}function qo(t){return t.mode&1?Ze&2&&Tn!==0?Tn&-Tn:pV.transition!==null?(Zf===0&&(Zf=VC()),Zf):(t=ut,t!==0||(t=window.event,t=t===void 0?16:HC(t.type)),t):1}function Ss(t,e,n,r){if(50<md)throw md=0,d_=null,Error(ne(185));yh(t,n,r),(!(Ze&2)||t!==yn)&&(t===yn&&(!(Ze&2)&&($m|=n),ln===4&&Io(t,Tn)),mr(t,r),n===1&&Ze===0&&!(e.mode&1)&&(Lc=Gt()+500,jm&&ma()))}function mr(t,e){var n=t.callbackNode;pF(t,e);var r=Tp(t,t===yn?Tn:0);if(r===0)n!==null&&fb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fb(n),e===1)t.tag===0?fV(ix.bind(null,t)):uR(ix.bind(null,t)),cV(function(){!(Ze&6)&&ma()}),n=null;else{switch(jC(r)){case 1:n=Uw;break;case 4:n=MC;break;case 16:n=Ep;break;case 536870912:n=FC;break;default:n=Ep}n=lA(n,tA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tA(t,e){if(Jf=-1,Zf=0,Ze&6)throw Error(ne(327));var n=t.callbackNode;if(uc()&&t.callbackNode!==n)return null;var r=Tp(t,t===yn?Tn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Up(t,r);else{e=r;var s=Ze;Ze|=2;var i=rA();(yn!==t||Tn!==e)&&(bi=null,Lc=Gt()+500,qa(t,e));do try{OV();break}catch(a){nA(t,a)}while(!0);Zw(),Fp.current=i,Ze=s,Zt!==null?e=0:(yn=null,Tn=0,e=ln)}if(e!==0){if(e===2&&(s=Vv(t),s!==0&&(r=s,e=h_(t,s))),e===1)throw n=Gd,qa(t,0),Io(t,r),mr(t,Gt()),n;if(e===6)Io(t,r);else{if(s=t.current.alternate,!(r&30)&&!NV(s)&&(e=Up(t,r),e===2&&(i=Vv(t),i!==0&&(r=i,e=h_(t,i))),e===1))throw n=Gd,qa(t,0),Io(t,r),mr(t,Gt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ne(345));case 2:Ca(t,cr,bi);break;case 3:if(Io(t,r),(r&130023424)===r&&(e=p0+500-Gt(),10<e)){if(Tp(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){er(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=qv(Ca.bind(null,t,cr,bi),e);break}Ca(t,cr,bi);break;case 4:if(Io(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-xs(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Gt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*PV(r/1960))-r,10<r){t.timeoutHandle=qv(Ca.bind(null,t,cr,bi),r);break}Ca(t,cr,bi);break;case 5:Ca(t,cr,bi);break;default:throw Error(ne(329))}}}return mr(t,Gt()),t.callbackNode===n?tA.bind(null,t):null}function h_(t,e){var n=pd;return t.current.memoizedState.isDehydrated&&(qa(t,e).flags|=256),t=Up(t,e),t!==2&&(e=cr,cr=n,e!==null&&f_(e)),t}function f_(t){cr===null?cr=t:cr.push.apply(cr,t)}function NV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ps(i(),s))return!1}catch(o){return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Io(t,e){for(e&=~f0,e&=~$m,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xs(e),r=1<<n;t[n]=-1,e&=~r}}function ix(t){if(Ze&6)throw Error(ne(327));uc();var e=Tp(t,0);if(!(e&1))return mr(t,Gt()),null;var n=Up(t,e);if(t.tag!==0&&n===2){var r=Vv(t);r!==0&&(e=r,n=h_(t,r))}if(n===1)throw n=Gd,qa(t,0),Io(t,e),mr(t,Gt()),n;if(n===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ca(t,cr,bi),mr(t,Gt()),null}function m0(t,e){var n=Ze;Ze|=1;try{return t(e)}finally{Ze=n,Ze===0&&(Lc=Gt()+500,jm&&ma())}}function el(t){Mo!==null&&Mo.tag===0&&!(Ze&6)&&uc();var e=Ze;Ze|=1;var n=Yr.transition,r=ut;try{if(Yr.transition=null,ut=1,t)return t()}finally{ut=r,Yr.transition=n,Ze=e,!(Ze&6)&&ma()}}function g0(){xr=ec.current,At(ec)}function qa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lV(n)),Zt!==null)for(n=Zt.return;n!==null;){var r=n;switch(Yw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cp();break;case 3:Dc(),At(fr),At($n),i0();break;case 5:s0(r);break;case 4:Dc();break;case 13:At(Lt);break;case 19:At(Lt);break;case 10:e0(r.type._context);break;case 22:case 23:g0()}n=n.return}if(yn=t,Zt=t=Go(t.current,null),Tn=xr=e,ln=0,Gd=null,f0=$m=Za=0,cr=pd=null,Da!==null){for(e=0;e<Da.length;e++)if(n=Da[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Da=null}return t}function nA(t,e){do{var n=Zt;try{if(Zw(),Qf.current=Mp,Lp){for(var r=Ft.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Lp=!1}if(Ja=0,fn=sn=Ft=null,hd=!1,Wd=0,h0.current=null,n===null||n.return===null){ln=1,Gd=e,Zt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Tn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=qb(o);if(p!==null){p.flags&=-257,Gb(p,o,a,i,e),p.mode&1&&Hb(i,c,e),e=p,l=c;var T=e.updateQueue;if(T===null){var v=new Set;v.add(l),e.updateQueue=v}else T.add(l);break e}else{if(!(e&1)){Hb(i,c,e),y0();break e}l=Error(ne(426))}}else if(Dt&&a.mode&1){var w=qb(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Gb(w,o,a,i,e),Xw(Oc(l,a));break e}}i=l=Oc(l,a),ln!==4&&(ln=2),pd===null?pd=[i]:pd.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=jR(i,l,e);jb(i,E);break e;case 1:a=l;var y=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ho===null||!Ho.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=UR(i,a,e);jb(i,C);break e}}i=i.return}while(i!==null)}iA(n)}catch(D){e=D,Zt===n&&n!==null&&(Zt=n=n.return);continue}break}while(!0)}function rA(){var t=Fp.current;return Fp.current=Mp,t===null?Mp:t}function y0(){(ln===0||ln===3||ln===2)&&(ln=4),yn===null||!(Za&268435455)&&!($m&268435455)||Io(yn,Tn)}function Up(t,e){var n=Ze;Ze|=2;var r=rA();(yn!==t||Tn!==e)&&(bi=null,qa(t,e));do try{DV();break}catch(s){nA(t,s)}while(!0);if(Zw(),Ze=n,Fp.current=r,Zt!==null)throw Error(ne(261));return yn=null,Tn=0,ln}function DV(){for(;Zt!==null;)sA(Zt)}function OV(){for(;Zt!==null&&!iF();)sA(Zt)}function sA(t){var e=aA(t.alternate,t,xr);t.memoizedProps=t.pendingProps,e===null?iA(t):Zt=e,h0.current=null}function iA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=CV(n,e),n!==null){n.flags&=32767,Zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ln=6,Zt=null;return}}else if(n=IV(n,e,xr),n!==null){Zt=n;return}if(e=e.sibling,e!==null){Zt=e;return}Zt=e=t}while(e!==null);ln===0&&(ln=5)}function Ca(t,e,n){var r=ut,s=Yr.transition;try{Yr.transition=null,ut=1,LV(t,e,n,r)}finally{Yr.transition=s,ut=r}return null}function LV(t,e,n,r){do uc();while(Mo!==null);if(Ze&6)throw Error(ne(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(mF(t,i),t===yn&&(Zt=yn=null,Tn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xf||(xf=!0,lA(Ep,function(){return uc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Yr.transition,Yr.transition=null;var o=ut;ut=1;var a=Ze;Ze|=4,h0.current=null,AV(t,n),ZR(n,t),tV(Wv),bp=!!$v,Wv=$v=null,t.current=n,kV(n),oF(),Ze=a,ut=o,Yr.transition=i}else t.current=n;if(xf&&(xf=!1,Mo=t,jp=s),i=t.pendingLanes,i===0&&(Ho=null),cF(n.stateNode),mr(t,Gt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Vp)throw Vp=!1,t=u_,u_=null,t;return jp&1&&t.tag!==0&&uc(),i=t.pendingLanes,i&1?t===d_?md++:(md=0,d_=t):md=0,ma(),null}function uc(){if(Mo!==null){var t=jC(jp),e=Yr.transition,n=ut;try{if(Yr.transition=null,ut=16>t?16:t,Mo===null)var r=!1;else{if(t=Mo,Mo=null,jp=0,Ze&6)throw Error(ne(331));var s=Ze;for(Ze|=4,pe=t.current;pe!==null;){var i=pe,o=i.child;if(pe.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(pe=c;pe!==null;){var d=pe;switch(d.tag){case 0:case 11:case 15:fd(8,d,i)}var h=d.child;if(h!==null)h.return=d,pe=h;else for(;pe!==null;){d=pe;var f=d.sibling,p=d.return;if(YR(d),d===c){pe=null;break}if(f!==null){f.return=p,pe=f;break}pe=p}}}var T=i.alternate;if(T!==null){var v=T.child;if(v!==null){T.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}pe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,pe=o;else e:for(;pe!==null;){if(i=pe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fd(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,pe=E;break e}pe=i.return}}var y=t.current;for(pe=y;pe!==null;){o=pe;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,pe=x;else e:for(o=y;pe!==null;){if(a=pe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Bm(9,a)}}catch(D){Wt(a,a.return,D)}if(a===o){pe=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,pe=C;break e}pe=a.return}}if(Ze=s,ma(),Zs&&typeof Zs.onPostCommitFiberRoot=="function")try{Zs.onPostCommitFiberRoot(Om,t)}catch(D){}r=!0}return r}finally{ut=n,Yr.transition=e}}return!1}function ox(t,e,n){e=Oc(n,e),e=jR(t,e,1),t=Wo(t,e,1),e=er(),t!==null&&(yh(t,1,e),mr(t,e))}function Wt(t,e,n){if(t.tag===3)ox(t,t,n);else for(;e!==null;){if(e.tag===3){ox(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ho===null||!Ho.has(r))){t=Oc(n,t),t=UR(e,t,1),e=Wo(e,t,1),t=er(),e!==null&&(yh(e,1,t),mr(e,t));break}}e=e.return}}function MV(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=er(),t.pingedLanes|=t.suspendedLanes&n,yn===t&&(Tn&n)===n&&(ln===4||ln===3&&(Tn&130023424)===Tn&&500>Gt()-p0?qa(t,0):f0|=n),mr(t,e)}function oA(t,e){e===0&&(t.mode&1?(e=pf,pf<<=1,!(pf&130023424)&&(pf=4194304)):e=1);var n=er();t=$i(t,e),t!==null&&(yh(t,e,n),mr(t,n))}function FV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),oA(t,n)}function VV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(e),oA(t,n)}var aA;aA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fr.current)dr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dr=!1,SV(t,e,n);dr=!!(t.flags&131072)}else dr=!1,Dt&&e.flags&1048576&&dR(e,kp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xf(t,e),t=e.pendingProps;var s=kc(e,$n.current);cc(e,n),s=a0(null,e,r,t,s,n);var i=l0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pr(r)?(i=!0,Rp(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,n0(e),s.updater=zm,e.stateNode=s,s._reactInternals=e,Zv(e,r,t,n),e=n_(null,e,r,!0,i,n)):(e.tag=0,Dt&&i&&Qw(e),Yn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xf(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=UV(r),t=fs(r,t),s){case 0:e=t_(null,e,r,t,n);break e;case 1:e=Yb(null,e,r,t,n);break e;case 11:e=Kb(null,e,r,t,n);break e;case 14:e=Qb(null,e,r,fs(r.type,t),n);break e}throw Error(ne(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),t_(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),Yb(t,e,r,s,n);case 3:e:{if(WR(e),t===null)throw Error(ne(387));r=e.pendingProps,i=e.memoizedState,s=i.element,yR(t,e),Dp(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Oc(Error(ne(423)),e),e=Xb(t,e,r,n,s);break e}else if(r!==s){s=Oc(Error(ne(424)),e),e=Xb(t,e,r,n,s);break e}else for(Rr=$o(e.stateNode.containerInfo.firstChild),kr=e,Dt=!0,_s=null,n=mR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pc(),r===s){e=Wi(t,e,n);break e}Yn(t,e,r,n)}e=e.child}return e;case 5:return vR(e),t===null&&Yv(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Hv(r,s)?o=null:i!==null&&Hv(r,i)&&(e.flags|=32),$R(t,e),Yn(t,e,o,n),e.child;case 6:return t===null&&Yv(e),null;case 13:return HR(t,e,n);case 4:return r0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Nc(e,null,r,n):Yn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),Kb(t,e,r,s,n);case 7:return Yn(t,e,e.pendingProps,n),e.child;case 8:return Yn(t,e,e.pendingProps.children,n),e.child;case 12:return Yn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Et(Pp,r._currentValue),r._currentValue=o,i!==null)if(Ps(i.value,o)){if(i.children===s.children&&!fr.current){e=Wi(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Di(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Xv(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ne(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Xv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Yn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,cc(e,n),s=Xr(s),r=r(s),e.flags|=1,Yn(t,e,r,n),e.child;case 14:return r=e.type,s=fs(r,e.pendingProps),s=fs(r.type,s),Qb(t,e,r,s,n);case 15:return zR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),Xf(t,e),e.tag=1,pr(r)?(t=!0,Rp(e)):t=!1,cc(e,n),VR(e,r,s),Zv(e,r,s,n),n_(null,e,r,!0,t,n);case 19:return qR(t,e,n);case 22:return BR(t,e,n)}throw Error(ne(156,e.tag))};function lA(t,e){return LC(t,e)}function jV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(t,e,n,r){return new jV(t,e,n,r)}function v0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function UV(t){if(typeof t=="function")return v0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fw)return 11;if(t===Vw)return 14}return 2}function Go(t,e){var n=t.alternate;return n===null?(n=Gr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ep(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")v0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Wl:return Ga(n.children,s,i,e);case Mw:o=8,s|=8;break;case bv:return t=Gr(12,n,e,s|2),t.elementType=bv,t.lanes=i,t;case xv:return t=Gr(13,n,e,s),t.elementType=xv,t.lanes=i,t;case Sv:return t=Gr(19,n,e,s),t.elementType=Sv,t.lanes=i,t;case vC:return Wm(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gC:o=10;break e;case yC:o=9;break e;case Fw:o=11;break e;case Vw:o=14;break e;case bo:o=16,r=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=Gr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ga(t,e,n,r){return t=Gr(7,t,r,e),t.lanes=n,t}function Wm(t,e,n,r){return t=Gr(22,t,r,e),t.elementType=vC,t.lanes=n,t.stateNode={isHidden:!1},t}function Ay(t,e,n){return t=Gr(6,t,null,e),t.lanes=n,t}function ky(t,e,n){return e=Gr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zV(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uy(0),this.expirationTimes=uy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uy(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _0(t,e,n,r,s,i,o,a,l){return t=new zV(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Gr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},n0(i),t}function BV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$l,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function cA(t){if(!t)return ra;t=t._reactInternals;e:{if(gl(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var n=t.type;if(pr(n))return cR(t,n,e)}return e}function uA(t,e,n,r,s,i,o,a,l){return t=_0(n,r,!0,t,s,i,o,a,l),t.context=cA(null),n=t.current,r=er(),s=qo(n),i=Di(r,s),i.callback=e!=null?e:null,Wo(n,i,s),t.current.lanes=s,yh(t,s,r),mr(t,r),t}function Hm(t,e,n,r){var s=e.current,i=er(),o=qo(s);return n=cA(n),e.context===null?e.context=n:e.pendingContext=n,e=Di(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Wo(s,e,o),t!==null&&(Ss(t,s,o,i),Kf(t,s,o)),o}function zp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ax(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function w0(t,e){ax(t,e),(t=t.alternate)&&ax(t,e)}function $V(){return null}var dA=typeof reportError=="function"?reportError:function(t){console.error(t)};function E0(t){this._internalRoot=t}qm.prototype.render=E0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));Hm(t,e,null,null)};qm.prototype.unmount=E0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;el(function(){Hm(null,t,null,null)}),e[Bi]=null}};function qm(t){this._internalRoot=t}qm.prototype.unstable_scheduleHydration=function(t){if(t){var e=BC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<So.length&&e!==0&&e<So[n].priority;n++);So.splice(n,0,t),n===0&&WC(t)}};function T0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lx(){}function WV(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=zp(o);i.call(c)}}var o=uA(e,r,t,0,null,!1,!1,"",lx);return t._reactRootContainer=o,t[Bi]=o.current,jd(t.nodeType===8?t.parentNode:t),el(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=zp(l);a.call(c)}}var l=_0(t,0,!1,null,null,!1,!1,"",lx);return t._reactRootContainer=l,t[Bi]=l.current,jd(t.nodeType===8?t.parentNode:t),el(function(){Hm(e,l,n,r)}),l}function Km(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=zp(o);a.call(l)}}Hm(e,o,t,s)}else o=WV(n,e,t,s,r);return zp(o)}UC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xu(e.pendingLanes);n!==0&&(zw(e,n|1),mr(e,Gt()),!(Ze&6)&&(Lc=Gt()+500,ma()))}break;case 13:el(function(){var r=$i(t,1);if(r!==null){var s=er();Ss(r,t,1,s)}}),w0(t,1)}};Bw=function(t){if(t.tag===13){var e=$i(t,134217728);if(e!==null){var n=er();Ss(e,t,134217728,n)}w0(t,134217728)}};zC=function(t){if(t.tag===13){var e=qo(t),n=$i(t,e);if(n!==null){var r=er();Ss(n,t,e,r)}w0(t,e)}};BC=function(){return ut};$C=function(t,e){var n=ut;try{return ut=t,e()}finally{ut=n}};Lv=function(t,e,n){switch(e){case"input":if(Rv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Vm(r);if(!s)throw Error(ne(90));wC(r),Rv(r,s)}}}break;case"textarea":TC(t,n);break;case"select":e=n.value,e!=null&&ic(t,!!n.multiple,e,!1)}};AC=m0;kC=el;var HV={usingClientEntryPoint:!1,Events:[_h,Kl,Vm,CC,RC,m0]},Vu={findFiberByHostInstance:Na,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qV={bundleType:Vu.bundleType,version:Vu.version,rendererPackageName:Vu.rendererPackageName,rendererConfig:Vu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:to.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=DC(t),t===null?null:t.stateNode},findFiberByHostInstance:Vu.findFiberByHostInstance||$V,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sf.isDisabled&&Sf.supportsFiber)try{Om=Sf.inject(qV),Zs=Sf}catch(t){}}Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HV;Fr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T0(e))throw Error(ne(200));return BV(t,e,null,n)};Fr.createRoot=function(t,e){if(!T0(t))throw Error(ne(299));var n=!1,r="",s=dA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=_0(t,1,!1,null,null,n,!1,r,s),t[Bi]=e.current,jd(t.nodeType===8?t.parentNode:t),new E0(e)};Fr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=DC(e),t=t===null?null:t.stateNode,t};Fr.flushSync=function(t){return el(t)};Fr.hydrate=function(t,e,n){if(!Gm(e))throw Error(ne(200));return Km(null,t,e,!0,n)};Fr.hydrateRoot=function(t,e,n){if(!T0(t))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=dA;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=uA(e,null,t,1,n!=null?n:null,s,!1,i,o),t[Bi]=e.current,jd(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new qm(e)};Fr.render=function(t,e,n){if(!Gm(e))throw Error(ne(200));return Km(null,t,e,!1,n)};Fr.unmountComponentAtNode=function(t){if(!Gm(t))throw Error(ne(40));return t._reactRootContainer?(el(function(){Km(null,null,t,!1,function(){t._reactRootContainer=null,t[Bi]=null})}),!0):!1};Fr.unstable_batchedUpdates=m0;Fr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Gm(n))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return Km(t,e,n,!1,r)};Fr.version="18.3.1-next-f1338f8080-20240426";function hA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hA)}catch(t){console.error(t)}}hA(),hC.exports=Fr;var ga=hC.exports;const b0=S2(ga),GV=M2({__proto__:null,default:b0},[ga]);var p_,cx=ga;p_=cx.createRoot,cx.hydrateRoot;const KV="modulepreload",QV=function(t){return"/"+t},ux={},it=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=QV(l),l in ux)return;ux[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":KV,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},YV=1,XV=1e6;let Py=0;function JV(){return Py=(Py+1)%Number.MAX_SAFE_INTEGER,Py.toString()}const Ny=new Map,dx=t=>{if(Ny.has(t))return;const e=setTimeout(()=>{Ny.delete(t),gd({type:"REMOVE_TOAST",toastId:t})},XV);Ny.set(t,e)},ZV=(t,e)=>{switch(e.type){case"ADD_TOAST":return W(M({},t),{toasts:[e.toast,...t.toasts].slice(0,YV)});case"UPDATE_TOAST":return W(M({},t),{toasts:t.toasts.map(n=>n.id===e.toast.id?M(M({},n),e.toast):n)});case"DISMISS_TOAST":{const{toastId:n}=e;return n?dx(n):t.toasts.forEach(r=>{dx(r.id)}),W(M({},t),{toasts:t.toasts.map(r=>r.id===n||n===void 0?W(M({},r),{open:!1}):r)})}case"REMOVE_TOAST":return e.toastId===void 0?W(M({},t),{toasts:[]}):W(M({},t),{toasts:t.toasts.filter(n=>n.id!==e.toastId)})}},tp=[];let np={toasts:[]};function gd(t){np=ZV(np,t),tp.forEach(e=>{e(np)})}function ej(e){var t=re(e,[]);const n=JV(),r=i=>gd({type:"UPDATE_TOAST",toast:W(M({},i),{id:n})}),s=()=>gd({type:"DISMISS_TOAST",toastId:n});return gd({type:"ADD_TOAST",toast:W(M({},t),{id:n,open:!0,onOpenChange:i=>{i||s()}})}),{id:n,dismiss:s,update:r}}function tj(){const[t,e]=_.useState(np);return _.useEffect(()=>(tp.push(e),()=>{const n=tp.indexOf(e);n>-1&&tp.splice(n,1)}),[]),W(M({},t),{toast:ej,dismiss:n=>gd({type:"DISMISS_TOAST",toastId:n})})}function Pe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function hx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function fA(...t){return e=>{let n=!1;const r=t.map(s=>{const i=hx(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():hx(t[s],null)}}}}function jt(...t){return _.useCallback(fA(...t),t)}function GJ(t,e){const n=_.createContext(e),r=i=>{const c=i,{children:o}=c,a=re(c,["children"]),l=_.useMemo(()=>a,Object.values(a));return m.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=_.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function yl(t,e=[]){let n=[];function r(i,o){const a=_.createContext(o),l=n.length;n=[...n,o];const c=h=>{var y;const E=h,{scope:f,children:p}=E,T=re(E,["scope","children"]),v=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,w=_.useMemo(()=>T,Object.values(T));return m.jsx(v.Provider,{value:w,children:p})};c.displayName=i+"Provider";function d(h,f){var v;const p=((v=f==null?void 0:f[t])==null?void 0:v[l])||a,T=_.useContext(p);if(T)return T;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>_.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return _.useMemo(()=>({[`__scope${t}`]:W(M({},a),{[t]:l})}),[a,l])}};return s.scopeName=t,[r,nj(s,...e)]}function nj(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return M(M({},a),h)},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Kd(t){const e=sj(t),n=_.forwardRef((r,s)=>{const c=r,{children:i}=c,o=re(c,["children"]),a=_.Children.toArray(i),l=a.find(oj);if(l){const d=l.props.children,h=a.map(f=>f===l?_.Children.count(d)>1?_.Children.only(null):_.isValidElement(d)?d.props.children:null:f);return m.jsx(e,W(M({},o),{ref:s,children:_.isValidElement(d)?_.cloneElement(d,void 0,h):null}))}return m.jsx(e,W(M({},o),{ref:s,children:i}))});return n.displayName=`${t}.Slot`,n}var rj=Kd("Slot");function sj(t){const e=_.forwardRef((n,r)=>{const o=n,{children:s}=o,i=re(o,["children"]);if(_.isValidElement(s)){const a=lj(s),l=aj(i,s.props);return s.type!==_.Fragment&&(l.ref=r?fA(r,a):a),_.cloneElement(s,l)}return _.Children.count(s)>1?_.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var pA=Symbol("radix.slottable");function ij(t){const e=({children:n})=>m.jsx(m.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=pA,e}function oj(t){return _.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===pA}function aj(t,e){const n=M({},e);for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]=M(M({},s),i):r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return M(M({},t),n)}function lj(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function x0(t){const e=t+"CollectionProvider",[n,r]=yl(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:w,children:E}=v,y=se.useRef(null),x=se.useRef(new Map).current;return m.jsx(s,{scope:w,itemMap:x,collectionRef:y,children:E})};o.displayName=e;const a=t+"CollectionSlot",l=Kd(a),c=se.forwardRef((v,w)=>{const{scope:E,children:y}=v,x=i(a,E),C=jt(w,x.collectionRef);return m.jsx(l,{ref:C,children:y})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=Kd(d),p=se.forwardRef((v,w)=>{const S=v,{scope:E,children:y}=S,x=re(S,["scope","children"]),C=se.useRef(null),D=jt(w,C),V=i(d,E);return se.useEffect(()=>(V.itemMap.set(C,M({ref:C},x)),()=>void V.itemMap.delete(C))),m.jsx(f,{[h]:"",ref:D,children:y})});p.displayName=d;function T(v){const w=i(t+"CollectionConsumer",v);return se.useCallback(()=>{const y=w.collectionRef.current;if(!y)return[];const x=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((V,S)=>x.indexOf(V.ref.current)-x.indexOf(S.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},T,r]}var cj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ke=cj.reduce((t,e)=>{const n=Kd(`Primitive.${e}`),r=_.forwardRef((s,i)=>{const c=s,{asChild:o}=c,a=re(c,["asChild"]),l=o?n:e;return typeof window!="undefined"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(l,W(M({},a),{ref:i}))});return r.displayName=`Primitive.${e}`,W(M({},t),{[e]:r})},{});function mA(t,e){t&&ga.flushSync(()=>t.dispatchEvent(e))}function Zr(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function uj(t,e=globalThis==null?void 0:globalThis.document){const n=Zr(t);_.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var dj="DismissableLayer",m_="dismissableLayer.update",hj="dismissableLayer.pointerDownOutside",fj="dismissableLayer.focusOutside",fx,gA=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Qm=_.forwardRef((t,e)=>{var I;const S=t,{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a}=S,l=re(S,["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"]),c=_.useContext(gA),[d,h]=_.useState(null),f=(I=d==null?void 0:d.ownerDocument)!=null?I:globalThis==null?void 0:globalThis.document,[,p]=_.useState({}),T=jt(e,R=>h(R)),v=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=v.indexOf(w),y=d?v.indexOf(d):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,C=y>=E,D=mj(R=>{const P=R.target,O=[...c.branches].some(L=>L.contains(P));!C||O||(s==null||s(R),o==null||o(R),R.defaultPrevented||a==null||a())},f),V=gj(R=>{const P=R.target;[...c.branches].some(L=>L.contains(P))||(i==null||i(R),o==null||o(R),R.defaultPrevented||a==null||a())},f);return uj(R=>{y===c.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&a&&(R.preventDefault(),a()))},f),_.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(fx=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),px(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=fx)}},[d,f,n,c]),_.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),px())},[d,c]),_.useEffect(()=>{const R=()=>p({});return document.addEventListener(m_,R),()=>document.removeEventListener(m_,R)},[]),m.jsx(Ke.div,W(M({},l),{ref:T,style:M({pointerEvents:x?C?"auto":"none":void 0},t.style),onFocusCapture:Pe(t.onFocusCapture,V.onFocusCapture),onBlurCapture:Pe(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:Pe(t.onPointerDownCapture,D.onPointerDownCapture)}))});Qm.displayName=dj;var pj="DismissableLayerBranch",yA=_.forwardRef((t,e)=>{const n=_.useContext(gA),r=_.useRef(null),s=jt(e,r);return _.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),m.jsx(Ke.div,W(M({},t),{ref:s}))});yA.displayName=pj;function mj(t,e=globalThis==null?void 0:globalThis.document){const n=Zr(t),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){vA(hj,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function gj(t,e=globalThis==null?void 0:globalThis.document){const n=Zr(t),r=_.useRef(!1);return _.useEffect(()=>{const s=i=>{i.target&&!r.current&&vA(fj,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function px(){const t=new CustomEvent(m_);document.dispatchEvent(t)}function vA(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?mA(s,i):s.dispatchEvent(i)}var yj=Qm,vj=yA,xn=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},_j="Portal",S0=_.forwardRef((t,e)=>{var l;const a=t,{container:n}=a,r=re(a,["container"]),[s,i]=_.useState(!1);xn(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?b0.createPortal(m.jsx(Ke.div,W(M({},r),{ref:e})),o):null});S0.displayName=_j;function wj(t,e){return _.useReducer((n,r)=>{const s=e[n][r];return s!=null?s:n},t)}var Ym=t=>{const{present:e,children:n}=t,r=Ej(e),s=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),i=jt(r.ref,Tj(s));return typeof n=="function"||r.isPresent?_.cloneElement(s,{ref:i}):null};Ym.displayName="Presence";function Ej(t){const[e,n]=_.useState(),r=_.useRef(null),s=_.useRef(t),i=_.useRef("none"),o=t?"mounted":"unmounted",[a,l]=wj(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const c=If(r.current);i.current=a==="mounted"?c:"none"},[a]),xn(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,p=If(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),xn(()=>{var c;if(e){let d;const h=(c=e.ownerDocument.defaultView)!=null?c:window,f=T=>{const w=If(r.current).includes(T.animationName);if(T.target===e&&w&&(l("ANIMATION_END"),!s.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},p=T=>{T.target===e&&(i.current=If(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:_.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function If(t){return(t==null?void 0:t.animationName)||"none"}function Tj(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var bj=Nw[" useInsertionEffect ".trim().toString()]||xn;function Mc({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=xj({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=_.useRef(t!==void 0);_.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=_.useCallback(d=>{var h;if(a){const f=Sj(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,c]}function xj({defaultProp:t,onChange:e}){const[n,r]=_.useState(t),s=_.useRef(n),i=_.useRef(e);return bj(()=>{i.current=e},[e]),_.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function Sj(t){return typeof t=="function"}var _A=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Ij="VisuallyHidden",Xm=_.forwardRef((t,e)=>m.jsx(Ke.span,W(M({},t),{ref:e,style:M(M({},_A),t.style)})));Xm.displayName=Ij;var Cj=Xm,I0="ToastProvider",[C0,Rj,Aj]=x0("Toast"),[wA,KJ]=yl("Toast",[Aj]),[kj,Jm]=wA(I0),EA=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=_.useState(null),[c,d]=_.useState(0),h=_.useRef(!1),f=_.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${I0}\`. Expected non-empty \`string\`.`),m.jsx(C0.Provider,{scope:e,children:m.jsx(kj,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:_.useCallback(()=>d(p=>p+1),[]),onToastRemove:_.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};EA.displayName=I0;var TA="ToastViewport",Pj=["F8"],g_="toast.viewportPause",y_="toast.viewportResume",bA=_.forwardRef((t,e)=>{const w=t,{__scopeToast:n,hotkey:r=Pj,label:s="Notifications ({hotkey})"}=w,i=re(w,["__scopeToast","hotkey","label"]),o=Jm(TA,n),a=Rj(n),l=_.useRef(null),c=_.useRef(null),d=_.useRef(null),h=_.useRef(null),f=jt(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=o.toastCount>0;_.useEffect(()=>{const E=y=>{var C;r.length!==0&&r.every(D=>y[D]||y.code===D)&&((C=h.current)==null||C.focus())};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),_.useEffect(()=>{const E=l.current,y=h.current;if(T&&E&&y){const x=()=>{if(!o.isClosePausedRef.current){const S=new CustomEvent(g_);y.dispatchEvent(S),o.isClosePausedRef.current=!0}},C=()=>{if(o.isClosePausedRef.current){const S=new CustomEvent(y_);y.dispatchEvent(S),o.isClosePausedRef.current=!1}},D=S=>{!E.contains(S.relatedTarget)&&C()},V=()=>{E.contains(document.activeElement)||C()};return E.addEventListener("focusin",x),E.addEventListener("focusout",D),E.addEventListener("pointermove",x),E.addEventListener("pointerleave",V),window.addEventListener("blur",x),window.addEventListener("focus",C),()=>{E.removeEventListener("focusin",x),E.removeEventListener("focusout",D),E.removeEventListener("pointermove",x),E.removeEventListener("pointerleave",V),window.removeEventListener("blur",x),window.removeEventListener("focus",C)}}},[T,o.isClosePausedRef]);const v=_.useCallback(({tabbingDirection:E})=>{const x=a().map(C=>{const D=C.ref.current,V=[D,...Wj(D)];return E==="forwards"?V:V.reverse()});return(E==="forwards"?x.reverse():x).flat()},[a]);return _.useEffect(()=>{const E=h.current;if(E){const y=x=>{var V,S,I;const C=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!C){const R=document.activeElement,P=x.shiftKey;if(x.target===E&&P){(V=c.current)==null||V.focus();return}const k=v({tabbingDirection:P?"backwards":"forwards"}),ee=k.findIndex(q=>q===R);Dy(k.slice(ee+1))?x.preventDefault():P?(S=c.current)==null||S.focus():(I=d.current)==null||I.focus()}};return E.addEventListener("keydown",y),()=>E.removeEventListener("keydown",y)}},[a,v]),m.jsxs(vj,{ref:l,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:T?void 0:"none"},children:[T&&m.jsx(v_,{ref:c,onFocusFromOutsideViewport:()=>{const E=v({tabbingDirection:"forwards"});Dy(E)}}),m.jsx(C0.Slot,{scope:n,children:m.jsx(Ke.ol,W(M({tabIndex:-1},i),{ref:f}))}),T&&m.jsx(v_,{ref:d,onFocusFromOutsideViewport:()=>{const E=v({tabbingDirection:"backwards"});Dy(E)}})]})});bA.displayName=TA;var xA="ToastFocusProxy",v_=_.forwardRef((t,e)=>{const o=t,{__scopeToast:n,onFocusFromOutsideViewport:r}=o,s=re(o,["__scopeToast","onFocusFromOutsideViewport"]),i=Jm(xA,n);return m.jsx(Xm,W(M({"aria-hidden":!0,tabIndex:0},s),{ref:e,style:{position:"fixed"},onFocus:a=>{var d;const l=a.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&r()}}))});v_.displayName=xA;var Eh="Toast",Nj="toast.swipeStart",Dj="toast.swipeMove",Oj="toast.swipeCancel",Lj="toast.swipeEnd",SA=_.forwardRef((t,e)=>{const c=t,{forceMount:n,open:r,defaultOpen:s,onOpenChange:i}=c,o=re(c,["forceMount","open","defaultOpen","onOpenChange"]),[a,l]=Mc({prop:r,defaultProp:s!=null?s:!0,onChange:i,caller:Eh});return m.jsx(Ym,{present:n||a,children:m.jsx(Vj,W(M({open:a},o),{ref:e,onClose:()=>l(!1),onPause:Zr(t.onPause),onResume:Zr(t.onResume),onSwipeStart:Pe(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Pe(t.onSwipeMove,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Pe(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Pe(t.onSwipeEnd,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})}))})});SA.displayName=Eh;var[Mj,Fj]=wA(Eh,{onClose(){}}),Vj=_.forwardRef((t,e)=>{const ee=t,{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p}=ee,T=re(ee,["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"]),v=Jm(Eh,n),[w,E]=_.useState(null),y=jt(e,q=>E(q)),x=_.useRef(null),C=_.useRef(null),D=s||v.duration,V=_.useRef(0),S=_.useRef(D),I=_.useRef(0),{onToastAdd:R,onToastRemove:P}=v,O=Zr(()=>{var Y;(w==null?void 0:w.contains(document.activeElement))&&((Y=v.viewport)==null||Y.focus()),o()}),L=_.useCallback(q=>{!q||q===1/0||(window.clearTimeout(I.current),V.current=new Date().getTime(),I.current=window.setTimeout(O,q))},[O]);_.useEffect(()=>{const q=v.viewport;if(q){const Y=()=>{L(S.current),c==null||c()},te=()=>{const U=new Date().getTime()-V.current;S.current=S.current-U,window.clearTimeout(I.current),l==null||l()};return q.addEventListener(g_,te),q.addEventListener(y_,Y),()=>{q.removeEventListener(g_,te),q.removeEventListener(y_,Y)}}},[v.viewport,D,l,c,L]),_.useEffect(()=>{i&&!v.isClosePausedRef.current&&L(D)},[i,D,v.isClosePausedRef,L]),_.useEffect(()=>(R(),()=>P()),[R,P]);const k=_.useMemo(()=>w?NA(w):null,[w]);return v.viewport?m.jsxs(m.Fragment,{children:[k&&m.jsx(jj,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:k}),m.jsx(Mj,{scope:n,onClose:O,children:ga.createPortal(m.jsx(C0.ItemSlot,{scope:n,children:m.jsx(yj,{asChild:!0,onEscapeKeyDown:Pe(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||O(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:m.jsx(Ke.li,W(M({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection},T),{ref:y,style:M({userSelect:"none",touchAction:"none"},t.style),onKeyDown:Pe(t.onKeyDown,q=>{q.key==="Escape"&&(a==null||a(q.nativeEvent),q.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:Pe(t.onPointerDown,q=>{q.button===0&&(x.current={x:q.clientX,y:q.clientY})}),onPointerMove:Pe(t.onPointerMove,q=>{if(!x.current)return;const Y=q.clientX-x.current.x,te=q.clientY-x.current.y,U=!!C.current,$=["left","right"].includes(v.swipeDirection),X=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,ie=$?X(0,Y):0,J=$?0:X(0,te),ae=q.pointerType==="touch"?10:2,ye={x:ie,y:J},le={originalEvent:q,delta:ye};U?(C.current=ye,Cf(Dj,h,le,{discrete:!1})):mx(ye,v.swipeDirection,ae)?(C.current=ye,Cf(Nj,d,le,{discrete:!1}),q.target.setPointerCapture(q.pointerId)):(Math.abs(Y)>ae||Math.abs(te)>ae)&&(x.current=null)}),onPointerUp:Pe(t.onPointerUp,q=>{const Y=C.current,te=q.target;if(te.hasPointerCapture(q.pointerId)&&te.releasePointerCapture(q.pointerId),C.current=null,x.current=null,Y){const U=q.currentTarget,$={originalEvent:q,delta:Y};mx(Y,v.swipeDirection,v.swipeThreshold)?Cf(Lj,p,$,{discrete:!0}):Cf(Oj,f,$,{discrete:!0}),U.addEventListener("click",X=>X.preventDefault(),{once:!0})}})}))})}),v.viewport)})]}):null}),jj=t=>{const c=t,{__scopeToast:e,children:n}=c,r=re(c,["__scopeToast","children"]),s=Jm(Eh,e),[i,o]=_.useState(!1),[a,l]=_.useState(!1);return Bj(()=>o(!0)),_.useEffect(()=>{const d=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(d)},[]),a?null:m.jsx(S0,{asChild:!0,children:m.jsx(Xm,W(M({},r),{children:i&&m.jsxs(m.Fragment,{children:[s.label," ",n]})}))})},Uj="ToastTitle",IA=_.forwardRef((t,e)=>{const s=t,{__scopeToast:n}=s,r=re(s,["__scopeToast"]);return m.jsx(Ke.div,W(M({},r),{ref:e}))});IA.displayName=Uj;var zj="ToastDescription",CA=_.forwardRef((t,e)=>{const s=t,{__scopeToast:n}=s,r=re(s,["__scopeToast"]);return m.jsx(Ke.div,W(M({},r),{ref:e}))});CA.displayName=zj;var RA="ToastAction",AA=_.forwardRef((t,e)=>{const s=t,{altText:n}=s,r=re(s,["altText"]);return n.trim()?m.jsx(PA,{altText:n,asChild:!0,children:m.jsx(R0,W(M({},r),{ref:e}))}):(console.error(`Invalid prop \`altText\` supplied to \`${RA}\`. Expected non-empty \`string\`.`),null)});AA.displayName=RA;var kA="ToastClose",R0=_.forwardRef((t,e)=>{const i=t,{__scopeToast:n}=i,r=re(i,["__scopeToast"]),s=Fj(kA,n);return m.jsx(PA,{asChild:!0,children:m.jsx(Ke.button,W(M({type:"button"},r),{ref:e,onClick:Pe(t.onClick,s.onClose)}))})});R0.displayName=kA;var PA=_.forwardRef((t,e)=>{const i=t,{__scopeToast:n,altText:r}=i,s=re(i,["__scopeToast","altText"]);return m.jsx(Ke.div,W(M({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0},s),{ref:e}))});function NA(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),$j(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...NA(r))}}),e}function Cf(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?mA(s,i):s.dispatchEvent(i)}var mx=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function Bj(t=()=>{}){const e=Zr(t);xn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function $j(t){return t.nodeType===t.ELEMENT_NODE}function Wj(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Dy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Hj=EA,DA=bA,OA=SA,LA=IA,MA=CA,FA=AA,VA=R0;function jA(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=jA(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function UA(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=jA(t))&&(r&&(r+=" "),r+=e);return r}const gx=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,yx=UA,A0=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return yx(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=gx(d)||gx(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let T=d,{class:h,className:f}=T,p=re(T,["class","className"]);return Object.entries(p).every(v=>{let[w,E]=v;return Array.isArray(E)?E.includes(M(M({},i),a)[w]):M(M({},i),a)[w]===E})?[...c,h,f]:c},[]);return yx(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},k0="-",qj=t=>{const e=Kj(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(k0);return a[0]===""&&a.length!==1&&a.shift(),zA(a,e)||Gj(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},zA=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?zA(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(k0);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},vx=/^\[(.+)\]$/,Gj=t=>{if(vx.test(t)){const e=vx.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Kj=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Yj(Object.entries(t.classGroups),n).forEach(([i,o])=>{__(o,r,i,e)}),r},__=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:_x(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(Qj(s)){__(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{__(o,_x(e,i),n,r)})})},_x=(t,e)=>{let n=t;return e.split(k0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Qj=t=>t.isThemeGetter,Yj=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,Xj=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},BA="!",Jj=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let w=0;w<a.length;w++){let E=a[w];if(c===0){if(E===s&&(r||a.slice(w,w+i)===e)){l.push(a.slice(d,w)),d=w+i;continue}if(E==="/"){h=w;continue}}E==="["?c++:E==="]"&&c--}const f=l.length===0?a:a.substring(d),p=f.startsWith(BA),T=p?f.substring(1):f,v=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:T,maybePostfixModifierPosition:v}};return n?a=>n({className:a,parseClassName:o}):o},Zj=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},e4=t=>M({cache:Xj(t.cacheSize),parseClassName:Jj(t)},qj(t)),t4=/\s+/,n4=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(t4);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let T=!!p,v=r(T?f.substring(0,p):f);if(!v){if(!T){a=c+(a.length>0?" "+a:a);continue}if(v=r(f),!v){a=c+(a.length>0?" "+a:a);continue}T=!1}const w=Zj(d).join(":"),E=h?w+BA:w,y=E+v;if(i.includes(y))continue;i.push(y);const x=s(v,T);for(let C=0;C<x.length;++C){const D=x[C];i.push(E+D)}a=c+(a.length>0?" "+a:a)}return a};function r4(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=$A(e))&&(r&&(r+=" "),r+=n);return r}const $A=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=$A(t[r]))&&(n&&(n+=" "),n+=e);return n};function s4(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=e4(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=n4(l,n);return s(l,d),d}return function(){return i(r4.apply(null,arguments))}}const xt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},WA=/^\[(?:([a-z-]+):)?(.+)\]$/i,i4=/^\d+\/\d+$/,o4=new Set(["px","full","screen"]),a4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,l4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,c4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,u4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,d4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wi=t=>dc(t)||o4.has(t)||i4.test(t),yo=t=>tu(t,"length",_4),dc=t=>!!t&&!Number.isNaN(Number(t)),Oy=t=>tu(t,"number",dc),ju=t=>!!t&&Number.isInteger(Number(t)),h4=t=>t.endsWith("%")&&dc(t.slice(0,-1)),Me=t=>WA.test(t),vo=t=>a4.test(t),f4=new Set(["length","size","percentage"]),p4=t=>tu(t,f4,HA),m4=t=>tu(t,"position",HA),g4=new Set(["image","url"]),y4=t=>tu(t,g4,E4),v4=t=>tu(t,"",w4),Uu=()=>!0,tu=(t,e,n)=>{const r=WA.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},_4=t=>l4.test(t)&&!c4.test(t),HA=()=>!1,w4=t=>u4.test(t),E4=t=>d4.test(t),T4=()=>{const t=xt("colors"),e=xt("spacing"),n=xt("blur"),r=xt("brightness"),s=xt("borderColor"),i=xt("borderRadius"),o=xt("borderSpacing"),a=xt("borderWidth"),l=xt("contrast"),c=xt("grayscale"),d=xt("hueRotate"),h=xt("invert"),f=xt("gap"),p=xt("gradientColorStops"),T=xt("gradientColorStopPositions"),v=xt("inset"),w=xt("margin"),E=xt("opacity"),y=xt("padding"),x=xt("saturate"),C=xt("scale"),D=xt("sepia"),V=xt("skew"),S=xt("space"),I=xt("translate"),R=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Me,e],L=()=>[Me,e],k=()=>["",wi,yo],ee=()=>["auto",dc,Me],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Me],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ie=()=>[dc,Me];return{cacheSize:500,separator:":",theme:{colors:[Uu],spacing:[wi,yo],blur:["none","",vo,Me],brightness:ie(),borderColor:[t],borderRadius:["none","","full",vo,Me],borderSpacing:L(),borderWidth:k(),contrast:ie(),grayscale:$(),hueRotate:ie(),invert:$(),gap:L(),gradientColorStops:[t],gradientColorStopPositions:[h4,yo],inset:O(),margin:O(),opacity:ie(),padding:L(),saturate:ie(),scale:ie(),sepia:$(),skew:ie(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",Me]}],container:["container"],columns:[{columns:[vo]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),Me]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ju,Me]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Me]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",ju,Me]}],"grid-cols":[{"grid-cols":[Uu]}],"col-start-end":[{col:["auto",{span:["full",ju,Me]},Me]}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":[Uu]}],"row-start-end":[{row:["auto",{span:[ju,Me]},Me]}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Me]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Me,e]}],"min-w":[{"min-w":[Me,e,"min","max","fit"]}],"max-w":[{"max-w":[Me,e,"none","full","min","max","fit","prose",{screen:[vo]},vo]}],h:[{h:[Me,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Me,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Me,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Me,e,"auto","min","max","fit"]}],"font-size":[{text:["base",vo,yo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Oy]}],"font-family":[{font:[Uu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Me]}],"line-clamp":[{"line-clamp":["none",dc,Oy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",wi,Me]}],"list-image":[{"list-image":["none",Me]}],"list-style-type":[{list:["none","disc","decimal",Me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",wi,yo]}],"underline-offset":[{"underline-offset":["auto",wi,Me]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),m4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",p4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},y4]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[T]}],"gradient-via-pos":[{via:[T]}],"gradient-to-pos":[{to:[T]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:Y()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[wi,Me]}],"outline-w":[{outline:[wi,yo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[wi,yo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",vo,v4]}],"shadow-color":[{shadow:[Uu]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",vo,Me]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[x]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Me]}],duration:[{duration:ie()}],ease:[{ease:["linear","in","out","in-out",Me]}],delay:[{delay:ie()}],animate:[{animate:["none","spin","ping","pulse","bounce",Me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[ju,Me]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Me]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Me]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Me]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[wi,yo,Oy]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},b4=s4(T4);function ft(...t){return b4(UA(t))}const x4=Hj,qA=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);return m.jsx(DA,M({ref:n,className:ft("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t)},e))});qA.displayName=DA.displayName;const S4=A0("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),GA=_.forwardRef((s,r)=>{var i=s,{className:t,variant:e}=i,n=re(i,["className","variant"]);return m.jsx(OA,M({ref:r,className:ft(S4({variant:e}),t)},n))});GA.displayName=OA.displayName;const I4=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);return m.jsx(FA,M({ref:n,className:ft("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t)},e))});I4.displayName=FA.displayName;const KA=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);return m.jsx(VA,W(M({ref:n,className:ft("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":""},e),{children:m.jsx(I2,{className:"h-4 w-4"})}))});KA.displayName=VA.displayName;const QA=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);return m.jsx(LA,M({ref:n,className:ft("text-sm font-semibold",t)},e))});QA.displayName=LA.displayName;const YA=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);return m.jsx(MA,M({ref:n,className:ft("text-sm opacity-90",t)},e))});YA.displayName=MA.displayName;function C4(){const{toasts:t}=tj();return m.jsxs(x4,{children:[t.map(function(o){var a=o,{id:e,title:n,description:r,action:s}=a,i=re(a,["id","title","description","action"]);return m.jsxs(GA,W(M({},i),{children:[m.jsxs("div",{className:"grid gap-1",children:[n&&m.jsx(QA,{children:n}),r&&m.jsx(YA,{children:r})]}),s,m.jsx(KA,{})]}),e)}),m.jsx(qA,{})]})}var wx=["light","dark"],R4="(prefers-color-scheme: dark)",A4=_.createContext(void 0),k4={setTheme:t=>{},themes:[]},P4=()=>{var t;return(t=_.useContext(A4))!=null?t:k4};_.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(T=>`'${T}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?wx.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(T,v=!1,w=!0)=>{let E=o?o[T]:T,y=v?T+"|| ''":`'${E}'`,x="";return s&&w&&!v&&wx.includes(T)&&(x+=`d.style.colorScheme = '${T}';`),n==="class"?v||E?x+=`c.add(${y})`:x+="null":E&&(x+=`d[s](n,${y})`),x},p=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${R4}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return _.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})});var N4=t=>{switch(t){case"success":return L4;case"info":return F4;case"warning":return M4;case"error":return V4;default:return null}},D4=Array(12).fill(0),O4=({visible:t,className:e})=>se.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},se.createElement("div",{className:"sonner-spinner"},D4.map((n,r)=>se.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),L4=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),M4=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),F4=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),V4=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),j4=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},se.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),se.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),U4=()=>{let[t,e]=se.useState(document.hidden);return se.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},w_=1,z4=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let l=e,{message:r}=l,s=re(l,["message"]),i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:w_++,o=this.toasts.find(c=>c.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(c=>c.id===i?(this.publish(W(M(M({},c),e),{id:i,title:r})),W(M(M({},c),e),{id:i,dismissible:a,title:r})):c):this.addToast(W(M({title:r},s),{dismissible:a,id:i})),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create(W(M({},n),{message:e})),this.error=(e,n)=>this.create(W(M({},n),{message:e,type:"error"})),this.success=(e,n)=>this.create(W(M({},n),{type:"success",message:e})),this.info=(e,n)=>this.create(W(M({},n),{type:"info",message:e})),this.warning=(e,n)=>this.create(W(M({},n),{type:"warning",message:e})),this.loading=(e,n)=>this.create(W(M({},n),{type:"loading",message:e})),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create(W(M({},n),{promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0})));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(c=>A(this,null,function*(){if(o=["resolve",c],se.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if($4(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?yield n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?yield n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?yield n.success(c):n.success,h=typeof n.description=="function"?yield n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}})).catch(c=>A(this,null,function*(){if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?yield n.error(c):n.error,h=typeof n.description=="function"?yield n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}})).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||w_++;return this.create(M({jsx:e(r),id:r},n)),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ar=new z4,B4=(t,e)=>{let n=(e==null?void 0:e.id)||w_++;return ar.addToast(W(M({title:t},e),{id:n})),n},$4=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",W4=B4,H4=()=>ar.toasts,q4=()=>ar.getActiveToasts(),on=Object.assign(W4,{success:ar.success,info:ar.info,warning:ar.warning,error:ar.error,custom:ar.custom,message:ar.message,promise:ar.promise,dismiss:ar.dismiss,loading:ar.loading},{getHistory:H4,getToasts:q4});function G4(t,{insertAt:e}={}){if(typeof document=="undefined")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}G4(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Rf(t){return t.label!==void 0}var K4=3,Q4="32px",Y4="16px",Ex=4e3,X4=356,J4=14,Z4=20,eU=200;function ds(...t){return t.filter(Boolean).join(" ")}function tU(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var nU=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:f,toast:p,unstyled:T,interacting:v,setHeights:w,visibleToasts:E,heights:y,index:x,toasts:C,expanded:D,removeToast:V,defaultRichColors:S,closeButton:I,style:R,cancelButtonStyle:P,actionButtonStyle:O,className:L="",descriptionClassName:k="",duration:ee,position:q,gap:Y,loadingIcon:te,expandByDefault:U,classNames:$,icons:X,closeButtonAriaLabel:ie="Close toast",pauseWhenPageIsHidden:J}=t,[ae,ye]=se.useState(null),[le,Ue]=se.useState(null),[Ee,Te]=se.useState(!1),[He,dt]=se.useState(!1),[Fe,be]=se.useState(!1),[Le,Ut]=se.useState(!1),[Ht,Ot]=se.useState(!1),[jr,yr]=se.useState(0),[fi,Fs]=se.useState(0),Ur=se.useRef(p.duration||ee||Ex),ss=se.useRef(null),vr=se.useRef(null),_r=x===0,Vs=x+1<=E,et=p.type,gt=p.dismissible!==!1,qn=p.className||"",sr=p.descriptionClassName||"",js=se.useMemo(()=>y.findIndex(Ie=>Ie.toastId===p.id)||0,[y,p.id]),ao=se.useMemo(()=>{var Ie;return(Ie=p.closeButton)!=null?Ie:I},[p.closeButton,I]),Us=se.useMemo(()=>p.duration||ee||Ex,[p.duration,ee]),Gn=se.useRef(0),zr=se.useRef(0),pi=se.useRef(0),is=se.useRef(null),[Tu,lo]=q.split("-"),zs=se.useMemo(()=>y.reduce((Ie,$e,tt)=>tt>=js?Ie:Ie+$e.height,0),[y,js]),co=U4(),os=p.invert||f,as=et==="loading";zr.current=se.useMemo(()=>js*Y+zs,[js,zs]),se.useEffect(()=>{Ur.current=Us},[Us]),se.useEffect(()=>{Te(!0)},[]),se.useEffect(()=>{let Ie=vr.current;if(Ie){let $e=Ie.getBoundingClientRect().height;return Fs($e),w(tt=>[{toastId:p.id,height:$e,position:p.position},...tt]),()=>w(tt=>tt.filter(zt=>zt.toastId!==p.id))}},[w,p.id]),se.useLayoutEffect(()=>{if(!Ee)return;let Ie=vr.current,$e=Ie.style.height;Ie.style.height="auto";let tt=Ie.getBoundingClientRect().height;Ie.style.height=$e,Fs(tt),w(zt=>zt.find(Cn=>Cn.toastId===p.id)?zt.map(Cn=>Cn.toastId===p.id?W(M({},Cn),{height:tt}):Cn):[{toastId:p.id,height:tt,position:p.position},...zt])},[Ee,p.title,p.description,w,p.id]);let ir=se.useCallback(()=>{dt(!0),yr(zr.current),w(Ie=>Ie.filter($e=>$e.toastId!==p.id)),setTimeout(()=>{V(p)},eU)},[p,V,w,zr]);se.useEffect(()=>{if(p.promise&&et==="loading"||p.duration===1/0||p.type==="loading")return;let Ie;return D||v||J&&co?(()=>{if(pi.current<Gn.current){let $e=new Date().getTime()-Gn.current;Ur.current=Ur.current-$e}pi.current=new Date().getTime()})():Ur.current!==1/0&&(Gn.current=new Date().getTime(),Ie=setTimeout(()=>{var $e;($e=p.onAutoClose)==null||$e.call(p,p),ir()},Ur.current)),()=>clearTimeout(Ie)},[D,v,p,et,J,co,ir]),se.useEffect(()=>{p.delete&&ir()},[ir,p.delete]);function Br(){var Ie,$e,tt;return X!=null&&X.loading?se.createElement("div",{className:ds($==null?void 0:$.loader,(Ie=p==null?void 0:p.classNames)==null?void 0:Ie.loader,"sonner-loader"),"data-visible":et==="loading"},X.loading):te?se.createElement("div",{className:ds($==null?void 0:$.loader,($e=p==null?void 0:p.classNames)==null?void 0:$e.loader,"sonner-loader"),"data-visible":et==="loading"},te):se.createElement(O4,{className:ds($==null?void 0:$.loader,(tt=p==null?void 0:p.classNames)==null?void 0:tt.loader),visible:et==="loading"})}return se.createElement("li",{tabIndex:0,ref:vr,className:ds(L,qn,$==null?void 0:$.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,$==null?void 0:$.default,$==null?void 0:$[et],(n=p==null?void 0:p.classNames)==null?void 0:n[et]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:S,"data-styled":!(p.jsx||p.unstyled||T),"data-mounted":Ee,"data-promise":!!p.promise,"data-swiped":Ht,"data-removed":He,"data-visible":Vs,"data-y-position":Tu,"data-x-position":lo,"data-index":x,"data-front":_r,"data-swiping":Fe,"data-dismissible":gt,"data-type":et,"data-invert":os,"data-swipe-out":Le,"data-swipe-direction":le,"data-expanded":!!(D||U&&Ee),style:M(M({"--index":x,"--toasts-before":x,"--z-index":C.length-x,"--offset":`${He?jr:zr.current}px`,"--initial-height":U?"auto":`${fi}px`},R),p.style),onDragEnd:()=>{be(!1),ye(null),is.current=null},onPointerDown:Ie=>{as||!gt||(ss.current=new Date,yr(zr.current),Ie.target.setPointerCapture(Ie.pointerId),Ie.target.tagName!=="BUTTON"&&(be(!0),is.current={x:Ie.clientX,y:Ie.clientY}))},onPointerUp:()=>{var Ie,$e,tt,zt;if(Le||!gt)return;is.current=null;let Cn=Number(((Ie=vr.current)==null?void 0:Ie.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),yt=Number((($e=vr.current)==null?void 0:$e.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),F=new Date().getTime()-((tt=ss.current)==null?void 0:tt.getTime()),j=ae==="x"?Cn:yt,B=Math.abs(j)/F;if(Math.abs(j)>=Z4||B>.11){yr(zr.current),(zt=p.onDismiss)==null||zt.call(p,p),Ue(ae==="x"?Cn>0?"right":"left":yt>0?"down":"up"),ir(),Ut(!0),Ot(!1);return}be(!1),ye(null)},onPointerMove:Ie=>{var $e,tt,zt,Cn;if(!is.current||!gt||(($e=window.getSelection())==null?void 0:$e.toString().length)>0)return;let yt=Ie.clientY-is.current.y,F=Ie.clientX-is.current.x,j=(tt=t.swipeDirections)!=null?tt:tU(q);!ae&&(Math.abs(F)>1||Math.abs(yt)>1)&&ye(Math.abs(F)>Math.abs(yt)?"x":"y");let B={x:0,y:0};ae==="y"?(j.includes("top")||j.includes("bottom"))&&(j.includes("top")&&yt<0||j.includes("bottom")&&yt>0)&&(B.y=yt):ae==="x"&&(j.includes("left")||j.includes("right"))&&(j.includes("left")&&F<0||j.includes("right")&&F>0)&&(B.x=F),(Math.abs(B.x)>0||Math.abs(B.y)>0)&&Ot(!0),(zt=vr.current)==null||zt.style.setProperty("--swipe-amount-x",`${B.x}px`),(Cn=vr.current)==null||Cn.style.setProperty("--swipe-amount-y",`${B.y}px`)}},ao&&!p.jsx?se.createElement("button",{"aria-label":ie,"data-disabled":as,"data-close-button":!0,onClick:as||!gt?()=>{}:()=>{var Ie;ir(),(Ie=p.onDismiss)==null||Ie.call(p,p)},className:ds($==null?void 0:$.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(i=X==null?void 0:X.close)!=null?i:j4):null,p.jsx||_.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:se.createElement(se.Fragment,null,et||p.icon||p.promise?se.createElement("div",{"data-icon":"",className:ds($==null?void 0:$.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Br():null,p.type!=="loading"?p.icon||(X==null?void 0:X[et])||N4(et):null):null,se.createElement("div",{"data-content":"",className:ds($==null?void 0:$.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},se.createElement("div",{"data-title":"",className:ds($==null?void 0:$.title,(l=p==null?void 0:p.classNames)==null?void 0:l.title)},typeof p.title=="function"?p.title():p.title),p.description?se.createElement("div",{"data-description":"",className:ds(k,sr,$==null?void 0:$.description,(c=p==null?void 0:p.classNames)==null?void 0:c.description)},typeof p.description=="function"?p.description():p.description):null),_.isValidElement(p.cancel)?p.cancel:p.cancel&&Rf(p.cancel)?se.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||P,onClick:Ie=>{var $e,tt;Rf(p.cancel)&&gt&&((tt=($e=p.cancel).onClick)==null||tt.call($e,Ie),ir())},className:ds($==null?void 0:$.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,_.isValidElement(p.action)?p.action:p.action&&Rf(p.action)?se.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||O,onClick:Ie=>{var $e,tt;Rf(p.action)&&((tt=($e=p.action).onClick)==null||tt.call($e,Ie),!Ie.defaultPrevented&&ir())},className:ds($==null?void 0:$.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function Tx(){if(typeof window=="undefined"||typeof document=="undefined")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function rU(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?Y4:Q4;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var sU=_.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:f,style:p,visibleToasts:T=K4,toastOptions:v,dir:w=Tx(),gap:E=J4,loadingIcon:y,icons:x,containerAriaLabel:C="Notifications",pauseWhenPageIsHidden:D}=t,[V,S]=se.useState([]),I=se.useMemo(()=>Array.from(new Set([r].concat(V.filter(J=>J.position).map(J=>J.position)))),[V,r]),[R,P]=se.useState([]),[O,L]=se.useState(!1),[k,ee]=se.useState(!1),[q,Y]=se.useState(d!=="system"?d:typeof window!="undefined"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),te=se.useRef(null),U=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=se.useRef(null),X=se.useRef(!1),ie=se.useCallback(J=>{S(ae=>{var ye;return(ye=ae.find(le=>le.id===J.id))!=null&&ye.delete||ar.dismiss(J.id),ae.filter(({id:le})=>le!==J.id)})},[]);return se.useEffect(()=>ar.subscribe(J=>{if(J.dismiss){S(ae=>ae.map(ye=>ye.id===J.id?W(M({},ye),{delete:!0}):ye));return}setTimeout(()=>{b0.flushSync(()=>{S(ae=>{let ye=ae.findIndex(le=>le.id===J.id);return ye!==-1?[...ae.slice(0,ye),M(M({},ae[ye]),J),...ae.slice(ye+1)]:[J,...ae]})})})}),[]),se.useEffect(()=>{if(d!=="system"){Y(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window=="undefined")return;let J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:ae})=>{Y(ae?"dark":"light")})}catch(ae){J.addListener(({matches:ye})=>{try{Y(ye?"dark":"light")}catch(le){console.error(le)}})}},[d]),se.useEffect(()=>{V.length<=1&&L(!1)},[V]),se.useEffect(()=>{let J=ae=>{var ye,le;s.every(Ue=>ae[Ue]||ae.code===Ue)&&(L(!0),(ye=te.current)==null||ye.focus()),ae.code==="Escape"&&(document.activeElement===te.current||(le=te.current)!=null&&le.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[s]),se.useEffect(()=>{if(te.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,X.current=!1)}},[te.current]),se.createElement("section",{ref:e,"aria-label":`${C} ${U}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((J,ae)=>{var ye;let[le,Ue]=J.split("-");return V.length?se.createElement("ol",{key:J,dir:w==="auto"?Tx():w,tabIndex:-1,ref:te,className:a,"data-sonner-toaster":!0,"data-theme":q,"data-y-position":le,"data-lifted":O&&V.length>1&&!i,"data-x-position":Ue,style:M(M({"--front-toast-height":`${((ye=R[0])==null?void 0:ye.height)||0}px`,"--width":`${X4}px`,"--gap":`${E}px`},p),rU(l,c)),onBlur:Ee=>{X.current&&!Ee.currentTarget.contains(Ee.relatedTarget)&&(X.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:Ee=>{Ee.target instanceof HTMLElement&&Ee.target.dataset.dismissible==="false"||X.current||(X.current=!0,$.current=Ee.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{k||L(!1)},onDragEnd:()=>L(!1),onPointerDown:Ee=>{Ee.target instanceof HTMLElement&&Ee.target.dataset.dismissible==="false"||ee(!0)},onPointerUp:()=>ee(!1)},V.filter(Ee=>!Ee.position&&ae===0||Ee.position===J).map((Ee,Te)=>{var He,dt;return se.createElement(nU,{key:Ee.id,icons:x,index:Te,toast:Ee,defaultRichColors:h,duration:(He=v==null?void 0:v.duration)!=null?He:f,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:T,closeButton:(dt=v==null?void 0:v.closeButton)!=null?dt:o,interacting:k,position:J,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:ie,toasts:V.filter(Fe=>Fe.position==Ee.position),heights:R.filter(Fe=>Fe.position==Ee.position),setHeights:P,expandByDefault:i,gap:E,loadingIcon:y,expanded:O,pauseWhenPageIsHidden:D,swipeDirections:t.swipeDirections})})):null}))});const iU=e=>{var t=re(e,[]);const{theme:n="system"}=P4();return m.jsx(sU,M({theme:n,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}}},t))};var oU=Nw[" useId ".trim().toString()]||(()=>{}),aU=0;function nu(t){const[e,n]=_.useState(oU());return xn(()=>{t||n(r=>r!=null?r:String(aU++))},[t]),t||(e?`radix-${e}`:"")}const lU=["top","right","bottom","left"],sa=Math.min,Ir=Math.max,Bp=Math.round,Af=Math.floor,ti=t=>({x:t,y:t}),cU={left:"right",right:"left",bottom:"top",top:"bottom"},uU={start:"end",end:"start"};function E_(t,e,n){return Ir(t,sa(e,n))}function Hi(t,e){return typeof t=="function"?t(e):t}function qi(t){return t.split("-")[0]}function ru(t){return t.split("-")[1]}function P0(t){return t==="x"?"y":"x"}function N0(t){return t==="y"?"height":"width"}const dU=new Set(["top","bottom"]);function Xs(t){return dU.has(qi(t))?"y":"x"}function D0(t){return P0(Xs(t))}function hU(t,e,n){n===void 0&&(n=!1);const r=ru(t),s=D0(t),i=N0(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=$p(o)),[o,$p(o)]}function fU(t){const e=$p(t);return[T_(t),e,T_(e)]}function T_(t){return t.replace(/start|end/g,e=>uU[e])}const bx=["left","right"],xx=["right","left"],pU=["top","bottom"],mU=["bottom","top"];function gU(t,e,n){switch(t){case"top":case"bottom":return n?e?xx:bx:e?bx:xx;case"left":case"right":return e?pU:mU;default:return[]}}function yU(t,e,n,r){const s=ru(t);let i=gU(qi(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(T_)))),i}function $p(t){return t.replace(/left|right|bottom|top/g,e=>cU[e])}function vU(t){return M({top:0,right:0,bottom:0,left:0},t)}function XA(t){return typeof t!="number"?vU(t):{top:t,right:t,bottom:t,left:t}}function Wp(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Sx(t,e,n){let{reference:r,floating:s}=t;const i=Xs(e),o=D0(e),a=N0(o),l=qi(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(ru(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const _U=(t,e,n)=>A(void 0,null,function*(){const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=yield o.isRTL==null?void 0:o.isRTL(e);let c=yield o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=Sx(c,r,l),f=r,p={},T=0;for(let v=0;v<a.length;v++){const{name:w,fn:E}=a[v],{x:y,y:x,data:C,reset:D}=yield E({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});d=y!=null?y:d,h=x!=null?x:h,p=W(M({},p),{[w]:M(M({},p[w]),C)}),D&&T<=50&&(T++,typeof D=="object"&&(D.placement&&(f=D.placement),D.rects&&(c=D.rects===!0?yield o.getElementRects({reference:t,floating:e,strategy:s}):D.rects),{x:d,y:h}=Sx(c,f,l)),v=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:p}});function Qd(t,e){return A(this,null,function*(){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=Hi(e,t),T=XA(p),w=a[f?h==="floating"?"reference":"floating":h],E=Wp(yield i.getClippingRect({element:(n=yield i.isElement==null?void 0:i.isElement(w))==null||n?w:w.contextElement||(yield i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),y=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,x=yield i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating),C=(yield i.isElement==null?void 0:i.isElement(x))?(yield i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},D=Wp(i.convertOffsetParentRelativeRectToViewportRelativeRect?yield i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:x,strategy:l}):y);return{top:(E.top-D.top+T.top)/C.y,bottom:(D.bottom-E.bottom+T.bottom)/C.y,left:(E.left-D.left+T.left)/C.x,right:(D.right-E.right+T.right)/C.x}})}const wU=t=>({name:"arrow",options:t,fn(n){return A(this,null,function*(){const{x:r,y:s,placement:i,rects:o,platform:a,elements:l,middlewareData:c}=n,{element:d,padding:h=0}=Hi(t,n)||{};if(d==null)return{};const f=XA(h),p={x:r,y:s},T=D0(i),v=N0(T),w=yield a.getDimensions(d),E=T==="y",y=E?"top":"left",x=E?"bottom":"right",C=E?"clientHeight":"clientWidth",D=o.reference[v]+o.reference[T]-p[T]-o.floating[v],V=p[T]-o.reference[T],S=yield a.getOffsetParent==null?void 0:a.getOffsetParent(d);let I=S?S[C]:0;(!I||!(yield a.isElement==null?void 0:a.isElement(S)))&&(I=l.floating[C]||o.floating[v]);const R=D/2-V/2,P=I/2-w[v]/2-1,O=sa(f[y],P),L=sa(f[x],P),k=O,ee=I-w[v]-L,q=I/2-w[v]/2+R,Y=E_(k,q,ee),te=!c.arrow&&ru(i)!=null&&q!==Y&&o.reference[v]/2-(q<k?O:L)-w[v]/2<0,U=te?q<k?q-k:q-ee:0;return{[T]:p[T]+U,data:M({[T]:Y,centerOffset:q-Y-U},te&&{alignmentOffset:U}),reset:te}})}}),EU=function(t){return t===void 0&&(t={}),{name:"flip",options:t,fn(n){return A(this,null,function*(){var r,s;const{placement:i,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:d}=n,q=Hi(t,n),{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:T="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:w=!0}=q,E=re(q,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const y=qi(i),x=Xs(l),C=qi(l)===l,D=yield c.isRTL==null?void 0:c.isRTL(d.floating),V=p||(C||!w?[$p(l)]:fU(l)),S=v!=="none";!p&&S&&V.push(...yU(l,w,v,D));const I=[l,...V],R=yield Qd(n,E),P=[];let O=((s=o.flip)==null?void 0:s.overflows)||[];if(h&&P.push(R[y]),f){const Y=hU(i,a,D);P.push(R[Y[0]],R[Y[1]])}if(O=[...O,{placement:i,overflows:P}],!P.every(Y=>Y<=0)){var L,k;const Y=(((L=o.flip)==null?void 0:L.index)||0)+1,te=I[Y];if(te&&(!(f==="alignment"?x!==Xs(te):!1)||O.every(X=>X.overflows[0]>0&&Xs(X.placement)===x)))return{data:{index:Y,overflows:O},reset:{placement:te}};let U=(k=O.filter($=>$.overflows[0]<=0).sort(($,X)=>$.overflows[1]-X.overflows[1])[0])==null?void 0:k.placement;if(!U)switch(T){case"bestFit":{var ee;const $=(ee=O.filter(X=>{if(S){const ie=Xs(X.placement);return ie===x||ie==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(ie=>ie>0).reduce((ie,J)=>ie+J,0)]).sort((X,ie)=>X[1]-ie[1])[0])==null?void 0:ee[0];$&&(U=$);break}case"initialPlacement":U=l;break}if(i!==U)return{reset:{placement:U}}}return{}})}}};function Ix(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Cx(t){return lU.some(e=>t[e]>=0)}const TU=function(t){return t===void 0&&(t={}),{name:"hide",options:t,fn(n){return A(this,null,function*(){const{rects:r}=n,o=Hi(t,n),{strategy:s="referenceHidden"}=o,i=re(o,["strategy"]);switch(s){case"referenceHidden":{const a=yield Qd(n,W(M({},i),{elementContext:"reference"})),l=Ix(a,r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Cx(l)}}}case"escaped":{const a=yield Qd(n,W(M({},i),{altBoundary:!0})),l=Ix(a,r.floating);return{data:{escapedOffsets:l,escaped:Cx(l)}}}default:return{}}})}}},JA=new Set(["left","top"]);function bU(t,e){return A(this,null,function*(){const{placement:n,platform:r,elements:s}=t,i=yield r.isRTL==null?void 0:r.isRTL(s.floating),o=qi(n),a=ru(n),l=Xs(n)==="y",c=JA.has(o)?-1:1,d=i&&l?-1:1,h=Hi(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:T}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof T=="number"&&(p=a==="end"?T*-1:T),l?{x:p*d,y:f*c}:{x:f*c,y:p*d}})}const xU=function(t){return t===void 0&&(t=0),{name:"offset",options:t,fn(n){return A(this,null,function*(){var r,s;const{x:i,y:o,placement:a,middlewareData:l}=n,c=yield bU(n,t);return a===((r=l.offset)==null?void 0:r.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:W(M({},c),{placement:a})}})}}},SU=function(t){return t===void 0&&(t={}),{name:"shift",options:t,fn(n){return A(this,null,function*(){const{x:r,y:s,placement:i}=n,E=Hi(t,n),{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:y=>{let{x,y:C}=y;return{x,y:C}}}}=E,c=re(E,["mainAxis","crossAxis","limiter"]),d={x:r,y:s},h=yield Qd(n,c),f=Xs(qi(i)),p=P0(f);let T=d[p],v=d[f];if(o){const y=p==="y"?"top":"left",x=p==="y"?"bottom":"right",C=T+h[y],D=T-h[x];T=E_(C,T,D)}if(a){const y=f==="y"?"top":"left",x=f==="y"?"bottom":"right",C=v+h[y],D=v-h[x];v=E_(C,v,D)}const w=l.fn(W(M({},n),{[p]:T,[f]:v}));return W(M({},w),{data:{x:w.x-r,y:w.y-s,enabled:{[p]:o,[f]:a}}})})}}},IU=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Hi(t,e),d={x:n,y:r},h=Xs(s),f=P0(h);let p=d[f],T=d[h];const v=Hi(a,e),w=typeof v=="number"?{mainAxis:v,crossAxis:0}:M({mainAxis:0,crossAxis:0},v);if(l){const x=f==="y"?"height":"width",C=i.reference[f]-i.floating[x]+w.mainAxis,D=i.reference[f]+i.reference[x]-w.mainAxis;p<C?p=C:p>D&&(p=D)}if(c){var E,y;const x=f==="y"?"width":"height",C=JA.has(qi(s)),D=i.reference[h]-i.floating[x]+(C&&((E=o.offset)==null?void 0:E[h])||0)+(C?0:w.crossAxis),V=i.reference[h]+i.reference[x]+(C?0:((y=o.offset)==null?void 0:y[h])||0)-(C?w.crossAxis:0);T<D?T=D:T>V&&(T=V)}return{[f]:p,[h]:T}}}},CU=function(t){return t===void 0&&(t={}),{name:"size",options:t,fn(n){return A(this,null,function*(){var r,s;const{placement:i,rects:o,platform:a,elements:l}=n,O=Hi(t,n),{apply:c=()=>{}}=O,d=re(O,["apply"]),h=yield Qd(n,d),f=qi(i),p=ru(i),T=Xs(i)==="y",{width:v,height:w}=o.floating;let E,y;f==="top"||f==="bottom"?(E=f,y=p===((yield a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(y=f,E=p==="end"?"top":"bottom");const x=w-h.top-h.bottom,C=v-h.left-h.right,D=sa(w-h[E],x),V=sa(v-h[y],C),S=!n.middlewareData.shift;let I=D,R=V;if((r=n.middlewareData.shift)!=null&&r.enabled.x&&(R=C),(s=n.middlewareData.shift)!=null&&s.enabled.y&&(I=x),S&&!p){const L=Ir(h.left,0),k=Ir(h.right,0),ee=Ir(h.top,0),q=Ir(h.bottom,0);T?R=v-2*(L!==0||k!==0?L+k:Ir(h.left,h.right)):I=w-2*(ee!==0||q!==0?ee+q:Ir(h.top,h.bottom))}yield c(W(M({},n),{availableWidth:R,availableHeight:I}));const P=yield a.getDimensions(l.floating);return v!==P.width||w!==P.height?{reset:{rects:!0}}:{}})}}};function Zm(){return typeof window!="undefined"}function su(t){return ZA(t)?(t.nodeName||"").toLowerCase():"#document"}function Pr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function li(t){var e;return(e=(ZA(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ZA(t){return Zm()?t instanceof Node||t instanceof Pr(t).Node:!1}function Ns(t){return Zm()?t instanceof Element||t instanceof Pr(t).Element:!1}function ii(t){return Zm()?t instanceof HTMLElement||t instanceof Pr(t).HTMLElement:!1}function Rx(t){return!Zm()||typeof ShadowRoot=="undefined"?!1:t instanceof ShadowRoot||t instanceof Pr(t).ShadowRoot}const RU=new Set(["inline","contents"]);function Th(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Ds(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!RU.has(s)}const AU=new Set(["table","td","th"]);function kU(t){return AU.has(su(t))}const PU=[":popover-open",":modal"];function eg(t){return PU.some(e=>{try{return t.matches(e)}catch(n){return!1}})}const NU=["transform","translate","scale","rotate","perspective"],DU=["transform","translate","scale","rotate","perspective","filter"],OU=["paint","layout","strict","content"];function O0(t){const e=L0(),n=Ns(t)?Ds(t):t;return NU.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||DU.some(r=>(n.willChange||"").includes(r))||OU.some(r=>(n.contain||"").includes(r))}function LU(t){let e=ia(t);for(;ii(e)&&!Fc(e);){if(O0(e))return e;if(eg(e))return null;e=ia(e)}return null}function L0(){return typeof CSS=="undefined"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const MU=new Set(["html","body","#document"]);function Fc(t){return MU.has(su(t))}function Ds(t){return Pr(t).getComputedStyle(t)}function tg(t){return Ns(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ia(t){if(su(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Rx(t)&&t.host||li(t);return Rx(e)?e.host:e}function ek(t){const e=ia(t);return Fc(e)?t.ownerDocument?t.ownerDocument.body:t.body:ii(e)&&Th(e)?e:ek(e)}function Yd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=ek(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Pr(s);if(i){const a=b_(o);return e.concat(o,o.visualViewport||[],Th(s)?s:[],a&&n?Yd(a):[])}return e.concat(s,Yd(s,[],n))}function b_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function tk(t){const e=Ds(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ii(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Bp(n)!==i||Bp(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function M0(t){return Ns(t)?t:t.contextElement}function hc(t){const e=M0(t);if(!ii(e))return ti(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=tk(e);let o=(i?Bp(n.width):n.width)/r,a=(i?Bp(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const FU=ti(0);function nk(t){const e=Pr(t);return!L0()||!e.visualViewport?FU:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function VU(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Pr(t)?!1:e}function tl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=M0(t);let o=ti(1);e&&(r?Ns(r)&&(o=hc(r)):o=hc(t));const a=VU(i,n,r)?nk(i):ti(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=Pr(i),p=r&&Ns(r)?Pr(r):r;let T=f,v=b_(T);for(;v&&r&&p!==T;){const w=hc(v),E=v.getBoundingClientRect(),y=Ds(v),x=E.left+(v.clientLeft+parseFloat(y.paddingLeft))*w.x,C=E.top+(v.clientTop+parseFloat(y.paddingTop))*w.y;l*=w.x,c*=w.y,d*=w.x,h*=w.y,l+=x,c+=C,T=Pr(v),v=b_(T)}}return Wp({width:d,height:h,x:l,y:c})}function F0(t,e){const n=tg(t).scrollLeft;return e?e.left+n:tl(li(t)).left+n}function rk(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:F0(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function jU(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=li(r),a=e?eg(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=ti(1);const d=ti(0),h=ii(r);if((h||!h&&!i)&&((su(r)!=="body"||Th(o))&&(l=tg(r)),ii(r))){const p=tl(r);c=hc(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!i?rk(o,l,!0):ti(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function UU(t){return Array.from(t.getClientRects())}function zU(t){const e=li(t),n=tg(t),r=t.ownerDocument.body,s=Ir(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Ir(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+F0(t);const a=-n.scrollTop;return Ds(r).direction==="rtl"&&(o+=Ir(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function BU(t,e){const n=Pr(t),r=li(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=L0();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}const $U=new Set(["absolute","fixed"]);function WU(t,e){const n=tl(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=ii(t)?hc(t):ti(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function Ax(t,e,n){let r;if(e==="viewport")r=BU(t,n);else if(e==="document")r=zU(li(t));else if(Ns(e))r=WU(e,n);else{const s=nk(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Wp(r)}function sk(t,e){const n=ia(t);return n===e||!Ns(n)||Fc(n)?!1:Ds(n).position==="fixed"||sk(n,e)}function HU(t,e){const n=e.get(t);if(n)return n;let r=Yd(t,[],!1).filter(a=>Ns(a)&&su(a)!=="body"),s=null;const i=Ds(t).position==="fixed";let o=i?ia(t):t;for(;Ns(o)&&!Fc(o);){const a=Ds(o),l=O0(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&$U.has(s.position)||Th(o)&&!l&&sk(t,o))?r=r.filter(d=>d!==o):s=a,o=ia(o)}return e.set(t,r),r}function qU(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?eg(e)?[]:HU(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=Ax(e,d,s);return c.top=Ir(h.top,c.top),c.right=sa(h.right,c.right),c.bottom=sa(h.bottom,c.bottom),c.left=Ir(h.left,c.left),c},Ax(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function GU(t){const{width:e,height:n}=tk(t);return{width:e,height:n}}function KU(t,e,n){const r=ii(e),s=li(e),i=n==="fixed",o=tl(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=ti(0);function c(){l.x=F0(s)}if(r||!r&&!i)if((su(e)!=="body"||Th(s))&&(a=tg(e)),r){const p=tl(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?rk(s,a):ti(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function Ly(t){return Ds(t).position==="static"}function kx(t,e){if(!ii(t)||Ds(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return li(t)===n&&(n=n.ownerDocument.body),n}function ik(t,e){const n=Pr(t);if(eg(t))return n;if(!ii(t)){let s=ia(t);for(;s&&!Fc(s);){if(Ns(s)&&!Ly(s))return s;s=ia(s)}return n}let r=kx(t,e);for(;r&&kU(r)&&Ly(r);)r=kx(r,e);return r&&Fc(r)&&Ly(r)&&!O0(r)?n:r||LU(t)||n}const QU=function(t){return A(this,null,function*(){const e=this.getOffsetParent||ik,n=this.getDimensions,r=yield n(t.floating);return{reference:KU(t.reference,yield e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}})};function YU(t){return Ds(t).direction==="rtl"}const XU={convertOffsetParentRelativeRectToViewportRelativeRect:jU,getDocumentElement:li,getClippingRect:qU,getOffsetParent:ik,getElementRects:QU,getClientRects:UU,getDimensions:GU,getScale:hc,isElement:Ns,isRTL:YU};function ok(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function JU(t,e){let n=null,r;const s=li(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=c;if(a||e(),!f||!p)return;const T=Af(h),v=Af(s.clientWidth-(d+f)),w=Af(s.clientHeight-(h+p)),E=Af(d),x={rootMargin:-T+"px "+-v+"px "+-w+"px "+-E+"px",threshold:Ir(0,sa(1,l))||1};let C=!0;function D(V){const S=V[0].intersectionRatio;if(S!==l){if(!C)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!ok(c,t.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(D,W(M({},x),{root:s.ownerDocument}))}catch(V){n=new IntersectionObserver(D,x)}n.observe(t)}return o(!0),i}function ZU(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=M0(t),d=s||i?[...c?Yd(c):[],...Yd(e)]:[];d.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const h=c&&a?JU(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(E=>{let[y]=E;y&&y.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=p)==null||x.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let T,v=l?tl(t):null;l&&w();function w(){const E=tl(t);v&&!ok(v,E)&&n(),v=E,T=requestAnimationFrame(w)}return n(),()=>{var E;d.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),h==null||h(),(E=p)==null||E.disconnect(),p=null,l&&cancelAnimationFrame(T)}}const e3=xU,t3=SU,n3=EU,r3=CU,s3=TU,Px=wU,i3=IU,o3=(t,e,n)=>{const r=new Map,s=M({platform:XU},n),i=W(M({},s.platform),{_c:r});return _U(t,e,W(M({},s),{platform:i}))};var a3=typeof document!="undefined",l3=function(){},rp=a3?_.useLayoutEffect:l3;function Hp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Hp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Hp(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function ak(t){return typeof window=="undefined"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Nx(t,e){const n=ak(t);return Math.round(e*n)/n}function My(t){const e=_.useRef(t);return rp(()=>{e.current=t}),e}function c3(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=_.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=_.useState(r);Hp(f,r)||p(r);const[T,v]=_.useState(null),[w,E]=_.useState(null),y=_.useCallback(U=>{U!==V.current&&(V.current=U,v(U))},[]),x=_.useCallback(U=>{U!==S.current&&(S.current=U,E(U))},[]),C=i||T,D=o||w,V=_.useRef(null),S=_.useRef(null),I=_.useRef(d),R=l!=null,P=My(l),O=My(s),L=My(c),k=_.useCallback(()=>{if(!V.current||!S.current)return;const U={placement:e,strategy:n,middleware:f};O.current&&(U.platform=O.current),o3(V.current,S.current,U).then($=>{const X=W(M({},$),{isPositioned:L.current!==!1});ee.current&&!Hp(I.current,X)&&(I.current=X,ga.flushSync(()=>{h(X)}))})},[f,e,n,O,L]);rp(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,h(U=>W(M({},U),{isPositioned:!1})))},[c]);const ee=_.useRef(!1);rp(()=>(ee.current=!0,()=>{ee.current=!1}),[]),rp(()=>{if(C&&(V.current=C),D&&(S.current=D),C&&D){if(P.current)return P.current(C,D,k);k()}},[C,D,k,P,R]);const q=_.useMemo(()=>({reference:V,floating:S,setReference:y,setFloating:x}),[y,x]),Y=_.useMemo(()=>({reference:C,floating:D}),[C,D]),te=_.useMemo(()=>{const U={position:n,left:0,top:0};if(!Y.floating)return U;const $=Nx(Y.floating,d.x),X=Nx(Y.floating,d.y);return a?M(W(M({},U),{transform:"translate("+$+"px, "+X+"px)"}),ak(Y.floating)>=1.5&&{willChange:"transform"}):{position:n,left:$,top:X}},[n,a,Y.floating,d.x,d.y]);return _.useMemo(()=>W(M({},d),{update:k,refs:q,elements:Y,floatingStyles:te}),[d,k,q,Y,te])}const u3=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Px({element:r.current,padding:s}).fn(n):{}:r?Px({element:r,padding:s}).fn(n):{}}}},d3=(t,e)=>W(M({},e3(t)),{options:[t,e]}),h3=(t,e)=>W(M({},t3(t)),{options:[t,e]}),f3=(t,e)=>W(M({},i3(t)),{options:[t,e]}),p3=(t,e)=>W(M({},n3(t)),{options:[t,e]}),m3=(t,e)=>W(M({},r3(t)),{options:[t,e]}),g3=(t,e)=>W(M({},s3(t)),{options:[t,e]}),y3=(t,e)=>W(M({},u3(t)),{options:[t,e]});var v3="Arrow",lk=_.forwardRef((t,e)=>{const o=t,{children:n,width:r=10,height:s=5}=o,i=re(o,["children","width","height"]);return m.jsx(Ke.svg,W(M({},i),{ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})}))});lk.displayName=v3;var _3=lk;function w3(t){const[e,n]=_.useState(void 0);return xn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var V0="Popper",[ck,ng]=yl(V0),[E3,uk]=ck(V0),dk=t=>{const{__scopePopper:e,children:n}=t,[r,s]=_.useState(null);return m.jsx(E3,{scope:e,anchor:r,onAnchorChange:s,children:n})};dk.displayName=V0;var hk="PopperAnchor",fk=_.forwardRef((t,e)=>{const l=t,{__scopePopper:n,virtualRef:r}=l,s=re(l,["__scopePopper","virtualRef"]),i=uk(hk,n),o=_.useRef(null),a=jt(e,o);return _.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:m.jsx(Ke.div,W(M({},s),{ref:a}))});fk.displayName=hk;var j0="PopperContent",[T3,b3]=ck(j0),pk=_.forwardRef((t,e)=>{var Te,He,dt,Fe,be,Le,Ut,Ht;const Ee=t,{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:T}=Ee,v=re(Ee,["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"]),w=uk(j0,n),[E,y]=_.useState(null),x=jt(e,Ot=>y(Ot)),[C,D]=_.useState(null),V=w3(C),S=(Te=V==null?void 0:V.width)!=null?Te:0,I=(He=V==null?void 0:V.height)!=null?He:0,R=r+(i!=="center"?"-"+i:""),P=typeof d=="number"?d:M({top:0,right:0,bottom:0,left:0},d),O=Array.isArray(c)?c:[c],L=O.length>0,k={padding:P,boundary:O.filter(S3),altBoundary:L},{refs:ee,floatingStyles:q,placement:Y,isPositioned:te,middlewareData:U}=c3({strategy:"fixed",placement:R,whileElementsMounted:(...Ot)=>ZU(...Ot,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[d3({mainAxis:s+I,alignmentAxis:o}),l&&h3(M({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?f3():void 0},k)),l&&p3(M({},k)),m3(W(M({},k),{apply:({elements:Ot,rects:jr,availableWidth:yr,availableHeight:fi})=>{const{width:Fs,height:Ur}=jr.reference,ss=Ot.floating.style;ss.setProperty("--radix-popper-available-width",`${yr}px`),ss.setProperty("--radix-popper-available-height",`${fi}px`),ss.setProperty("--radix-popper-anchor-width",`${Fs}px`),ss.setProperty("--radix-popper-anchor-height",`${Ur}px`)}})),C&&y3({element:C,padding:a}),I3({arrowWidth:S,arrowHeight:I}),f&&g3(M({strategy:"referenceHidden"},k))]}),[$,X]=yk(Y),ie=Zr(T);xn(()=>{te&&(ie==null||ie())},[te,ie]);const J=(dt=U.arrow)==null?void 0:dt.x,ae=(Fe=U.arrow)==null?void 0:Fe.y,ye=((be=U.arrow)==null?void 0:be.centerOffset)!==0,[le,Ue]=_.useState();return xn(()=>{E&&Ue(window.getComputedStyle(E).zIndex)},[E]),m.jsx("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:M(W(M({},q),{transform:te?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:le,"--radix-popper-transform-origin":[(Le=U.transformOrigin)==null?void 0:Le.x,(Ut=U.transformOrigin)==null?void 0:Ut.y].join(" ")}),((Ht=U.hide)==null?void 0:Ht.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:t.dir,children:m.jsx(T3,{scope:n,placedSide:$,onArrowChange:D,arrowX:J,arrowY:ae,shouldHideArrow:ye,children:m.jsx(Ke.div,W(M({"data-side":$,"data-align":X},v),{ref:x,style:W(M({},v.style),{animation:te?void 0:"none"})}))})})});pk.displayName=j0;var mk="PopperArrow",x3={top:"bottom",right:"left",bottom:"top",left:"right"},gk=_.forwardRef(function(e,n){const a=e,{__scopePopper:r}=a,s=re(a,["__scopePopper"]),i=b3(mk,r),o=x3[i.placedSide];return m.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:m.jsx(_3,W(M({},s),{ref:n,style:W(M({},s.style),{display:"block"})}))})});gk.displayName=mk;function S3(t){return t!==null}var I3=t=>({name:"transformOrigin",options:t,fn(e){var w,E,y,x,C;const{placement:n,rects:r,middlewareData:s}=e,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=yk(n),h={start:"0%",center:"50%",end:"100%"}[d],f=((y=(E=s.arrow)==null?void 0:E.x)!=null?y:0)+a/2,p=((C=(x=s.arrow)==null?void 0:x.y)!=null?C:0)+l/2;let T="",v="";return c==="bottom"?(T=o?h:`${f}px`,v=`${-l}px`):c==="top"?(T=o?h:`${f}px`,v=`${r.floating.height+l}px`):c==="right"?(T=`${-l}px`,v=o?h:`${p}px`):c==="left"&&(T=`${r.floating.width+l}px`,v=o?h:`${p}px`),{data:{x:T,y:v}}}});function yk(t){const[e,n="center"]=t.split("-");return[e,n]}var vk=dk,_k=fk,wk=pk,Ek=gk,[rg,YJ]=yl("Tooltip",[ng]),sg=ng(),Tk="TooltipProvider",C3=700,x_="tooltip.open",[R3,U0]=rg(Tk),bk=t=>{const{__scopeTooltip:e,delayDuration:n=C3,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=_.useRef(!0),a=_.useRef(!1),l=_.useRef(0);return _.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),m.jsx(R3,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:_.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:_.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:_.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};bk.displayName=Tk;var Xd="Tooltip",[A3,ig]=rg(Xd),xk=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=t,l=U0(Xd,t.__scopeTooltip),c=sg(e),[d,h]=_.useState(null),f=nu(),p=_.useRef(0),T=o!=null?o:l.disableHoverableContent,v=a!=null?a:l.delayDuration,w=_.useRef(!1),[E,y]=Mc({prop:r,defaultProp:s!=null?s:!1,onChange:S=>{S?(l.onOpen(),document.dispatchEvent(new CustomEvent(x_))):l.onClose(),i==null||i(S)},caller:Xd}),x=_.useMemo(()=>E?w.current?"delayed-open":"instant-open":"closed",[E]),C=_.useCallback(()=>{window.clearTimeout(p.current),p.current=0,w.current=!1,y(!0)},[y]),D=_.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y(!1)},[y]),V=_.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{w.current=!0,y(!0),p.current=0},v)},[v,y]);return _.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),m.jsx(vk,W(M({},c),{children:m.jsx(A3,{scope:e,contentId:f,open:E,stateAttribute:x,trigger:d,onTriggerChange:h,onTriggerEnter:_.useCallback(()=>{l.isOpenDelayedRef.current?V():C()},[l.isOpenDelayedRef,V,C]),onTriggerLeave:_.useCallback(()=>{T?D():(window.clearTimeout(p.current),p.current=0)},[D,T]),onOpen:C,onClose:D,disableHoverableContent:T,children:n})}))};xk.displayName=Xd;var S_="TooltipTrigger",Sk=_.forwardRef((t,e)=>{const f=t,{__scopeTooltip:n}=f,r=re(f,["__scopeTooltip"]),s=ig(S_,n),i=U0(S_,n),o=sg(n),a=_.useRef(null),l=jt(e,a,s.onTriggerChange),c=_.useRef(!1),d=_.useRef(!1),h=_.useCallback(()=>c.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),m.jsx(_k,W(M({asChild:!0},o),{children:m.jsx(Ke.button,W(M({"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute},r),{ref:l,onPointerMove:Pe(t.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Pe(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Pe(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Pe(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Pe(t.onBlur,s.onClose),onClick:Pe(t.onClick,s.onClose)}))}))});Sk.displayName=S_;var k3="TooltipPortal",[XJ,P3]=rg(k3,{forceMount:void 0}),Vc="TooltipContent",Ik=_.forwardRef((t,e)=>{const n=P3(Vc,t.__scopeTooltip),a=t,{forceMount:r=n.forceMount,side:s="top"}=a,i=re(a,["forceMount","side"]),o=ig(Vc,t.__scopeTooltip);return m.jsx(Ym,{present:r||o.open,children:o.disableHoverableContent?m.jsx(Ck,W(M({side:s},i),{ref:e})):m.jsx(N3,W(M({side:s},i),{ref:e}))})}),N3=_.forwardRef((t,e)=>{const n=ig(Vc,t.__scopeTooltip),r=U0(Vc,t.__scopeTooltip),s=_.useRef(null),i=jt(e,s),[o,a]=_.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=_.useCallback(()=>{a(null),h(!1)},[h]),p=_.useCallback((T,v)=>{const w=T.currentTarget,E={x:T.clientX,y:T.clientY},y=F3(E,w.getBoundingClientRect()),x=V3(E,y),C=j3(v.getBoundingClientRect()),D=z3([...x,...C]);a(D),h(!0)},[h]);return _.useEffect(()=>()=>f(),[f]),_.useEffect(()=>{if(l&&d){const T=w=>p(w,d),v=w=>p(w,l);return l.addEventListener("pointerleave",T),d.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",T),d.removeEventListener("pointerleave",v)}}},[l,d,p,f]),_.useEffect(()=>{if(o){const T=v=>{const w=v.target,E={x:v.clientX,y:v.clientY},y=(l==null?void 0:l.contains(w))||(d==null?void 0:d.contains(w)),x=!U3(E,o);y?f():x&&(f(),c())};return document.addEventListener("pointermove",T),()=>document.removeEventListener("pointermove",T)}},[l,d,o,c,f]),m.jsx(Ck,W(M({},t),{ref:i}))}),[D3,O3]=rg(Xd,{isInside:!1}),L3=ij("TooltipContent"),Ck=_.forwardRef((t,e)=>{const h=t,{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o}=h,a=re(h,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]),l=ig(Vc,n),c=sg(n),{onClose:d}=l;return _.useEffect(()=>(document.addEventListener(x_,d),()=>document.removeEventListener(x_,d)),[d]),_.useEffect(()=>{if(l.trigger){const f=p=>{const T=p.target;T!=null&&T.contains(l.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,d]),m.jsx(Qm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:m.jsxs(wk,W(M(M({"data-state":l.stateAttribute},c),a),{ref:e,style:W(M({},a.style),{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}),children:[m.jsx(L3,{children:r}),m.jsx(D3,{scope:n,isInside:!0,children:m.jsx(Cj,{id:l.contentId,role:"tooltip",children:s||r})})]}))})});Ik.displayName=Vc;var Rk="TooltipArrow",M3=_.forwardRef((t,e)=>{const o=t,{__scopeTooltip:n}=o,r=re(o,["__scopeTooltip"]),s=sg(n);return O3(Rk,n).isInside?null:m.jsx(Ek,W(M(M({},s),r),{ref:e}))});M3.displayName=Rk;function F3(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function V3(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function j3(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function U3(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-c)*(r-d)/(f-d)+c&&(s=!s)}return s}function z3(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),B3(e)}function B3(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var $3=bk,W3=xk,H3=Sk,Ak=Ik;const q3=$3,JJ=W3,ZJ=H3,G3=_.forwardRef((s,r)=>{var i=s,{className:t,sideOffset:e=4}=i,n=re(i,["className","sideOffset"]);return m.jsx(Ak,M({ref:r,sideOffset:e,className:ft("z-[9999] overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t)},n))});G3.displayName=Ak.displayName;var og=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ag=typeof window=="undefined"||"Deno"in globalThis;function ps(){}function K3(t,e){return typeof t=="function"?t(e):t}function Q3(t){return typeof t=="number"&&t>=0&&t!==1/0}function Y3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function I_(t,e){return typeof t=="function"?t(e):t}function X3(t,e){return typeof t=="function"?t(e):t}function Dx(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==z0(o,e.options))return!1}else if(!Zd(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function Ox(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Jd(e.options.mutationKey)!==Jd(i))return!1}else if(!Zd(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function z0(t,e){return((e==null?void 0:e.queryKeyHashFn)||Jd)(t)}function Jd(t){return JSON.stringify(t,(e,n)=>C_(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Zd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Zd(t[n],e[n])):!1}function kk(t,e){if(t===e)return t;const n=Lx(t)&&Lx(e);if(n||C_(t)&&C_(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},l=new Set(r);let c=0;for(let d=0;d<o;d++){const h=n?d:i[d];(!n&&l.has(h)||n)&&t[h]===void 0&&e[h]===void 0?(a[h]=void 0,c++):(a[h]=kk(t[h],e[h]),a[h]===t[h]&&t[h]!==void 0&&c++)}return s===o&&c===s?t:a}return e}function eZ(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Lx(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function C_(t){if(!Mx(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Mx(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Mx(t){return Object.prototype.toString.call(t)==="[object Object]"}function J3(t){return new Promise(e=>{setTimeout(e,t)})}function Z3(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?kk(t,e):e}function e5(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function t5(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var B0=Symbol();function Pk(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===B0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function tZ(t,e){return typeof t=="function"?t(...e):!!t}var Ua,ko,Ec,Q1,n5=(Q1=class extends og{constructor(){super();rt(this,Ua);rt(this,ko);rt(this,Ec);Oe(this,Ec,e=>{if(!ag&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){K(this,ko)||this.setEventListener(K(this,Ec))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,ko))==null||e.call(this),Oe(this,ko,void 0))}setEventListener(e){var n;Oe(this,Ec,e),(n=K(this,ko))==null||n.call(this),Oe(this,ko,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){K(this,Ua)!==e&&(Oe(this,Ua,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof K(this,Ua)=="boolean"?K(this,Ua):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ua=new WeakMap,ko=new WeakMap,Ec=new WeakMap,Q1),Nk=new n5,Tc,Po,bc,Y1,r5=(Y1=class extends og{constructor(){super();rt(this,Tc,!0);rt(this,Po);rt(this,bc);Oe(this,bc,e=>{if(!ag&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){K(this,Po)||this.setEventListener(K(this,bc))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,Po))==null||e.call(this),Oe(this,Po,void 0))}setEventListener(e){var n;Oe(this,bc,e),(n=K(this,Po))==null||n.call(this),Oe(this,Po,e(this.setOnline.bind(this)))}setOnline(e){K(this,Tc)!==e&&(Oe(this,Tc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return K(this,Tc)}},Tc=new WeakMap,Po=new WeakMap,bc=new WeakMap,Y1),qp=new r5;function s5(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function i5(t){return Math.min(1e3*nb(2,t),3e4)}function Dk(t){return(t!=null?t:"online")==="online"?qp.isOnline():!0}var Ok=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Fy(t){return t instanceof Ok}function Lk(t){let e=!1,n=0,r=!1,s;const i=s5(),o=v=>{var w;r||(f(new Ok(v)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>Nk.isFocused()&&(t.networkMode==="always"||qp.isOnline())&&t.canRun(),d=()=>Dk(t.networkMode)&&t.canRun(),h=v=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,v),s==null||s(),i.resolve(v))},f=v=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,v),s==null||s(),i.reject(v))},p=()=>new Promise(v=>{var w;s=E=>{(r||c())&&v(E)},(w=t.onPause)==null||w.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),T=()=>{if(r)return;let v;const w=n===0?t.initialPromise:void 0;try{v=w!=null?w:t.fn()}catch(E){v=Promise.reject(E)}Promise.resolve(v).then(h).catch(E=>{var V,S,I;if(r)return;const y=(V=t.retry)!=null?V:ag?0:3,x=(S=t.retryDelay)!=null?S:i5,C=typeof x=="function"?x(n,E):x,D=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,E);if(e||!D){f(E);return}n++,(I=t.onFail)==null||I.call(t,n,E),J3(C).then(()=>c()?void 0:p()).then(()=>{e?f(E):T()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?T():p().then(T),i)}}var o5=t=>setTimeout(t,0);function a5(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=o5;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Xn=a5(),za,X1,Mk=(X1=class{constructor(){rt(this,za)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Q3(this.gcTime)&&Oe(this,za,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t!=null?t:ag?1/0:5*60*1e3)}clearGcTimeout(){K(this,za)&&(clearTimeout(K(this,za)),Oe(this,za,void 0))}},za=new WeakMap,X1),xc,Ba,Wr,$a,On,mh,Wa,ms,Ei,J1,l5=(J1=class extends Mk{constructor(n){var r;super();rt(this,ms);rt(this,xc);rt(this,Ba);rt(this,Wr);rt(this,$a);rt(this,On);rt(this,mh);rt(this,Wa);Oe(this,Wa,!1),Oe(this,mh,n.defaultOptions),this.setOptions(n.options),this.observers=[],Oe(this,$a,n.client),Oe(this,Wr,K(this,$a).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Oe(this,xc,u5(this.options)),this.state=(r=n.state)!=null?r:K(this,xc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=K(this,On))==null?void 0:n.promise}setOptions(n){this.options=M(M({},K(this,mh)),n),this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&K(this,Wr).remove(this)}setData(n,r){const s=Z3(this.state.data,n,this.options);return kn(this,ms,Ei).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){kn(this,ms,Ei).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=K(this,On))==null?void 0:s.promise;return(i=K(this,On))==null||i.cancel(n),r?r.then(ps).catch(ps):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(K(this,xc))}isActive(){return this.observers.some(n=>X3(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===B0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>I_(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!Y3(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,On))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,On))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),K(this,Wr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(K(this,On)&&(K(this,Wa)?K(this,On).cancel({revert:!0}):K(this,On).cancelRetry()),this.scheduleGc()),K(this,Wr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||kn(this,ms,Ei).call(this,{type:"invalidate"})}fetch(n,r){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(K(this,On))return K(this,On).continueRetry(),K(this,On).promise}if(n&&this.setOptions(n),!this.options.queryFn){const p=this.observers.find(T=>T.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Oe(this,Wa,!0),s.signal)})},o=()=>{const p=Pk(this.options,r),v=(()=>{const w={client:K(this,$a),queryKey:this.queryKey,meta:this.meta};return i(w),w})();return Oe(this,Wa,!1),this.options.persister?this.options.persister(p,v,this):p(v)},l=(()=>{const p={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:K(this,$a),state:this.state,fetchFn:o};return i(p),p})();(d=this.options.behavior)==null||d.onFetch(l,this),Oe(this,Ba,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&kn(this,ms,Ei).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=p=>{var T,v,w,E;Fy(p)&&p.silent||kn(this,ms,Ei).call(this,{type:"error",error:p}),Fy(p)||((v=(T=K(this,Wr).config).onError)==null||v.call(T,p,this),(E=(w=K(this,Wr).config).onSettled)==null||E.call(w,this.state.data,p,this)),this.scheduleGc()};return Oe(this,On,Lk({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var T,v,w,E;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(y){c(y);return}(v=(T=K(this,Wr).config).onSuccess)==null||v.call(T,p,this),(E=(w=K(this,Wr).config).onSettled)==null||E.call(w,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,T)=>{kn(this,ms,Ei).call(this,{type:"failed",failureCount:p,error:T})},onPause:()=>{kn(this,ms,Ei).call(this,{type:"pause"})},onContinue:()=>{kn(this,ms,Ei).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),K(this,On).start()}},xc=new WeakMap,Ba=new WeakMap,Wr=new WeakMap,$a=new WeakMap,On=new WeakMap,mh=new WeakMap,Wa=new WeakMap,ms=new WeakSet,Ei=function(n){const r=s=>{var i,o;switch(n.type){case"failed":return W(M({},s),{fetchFailureCount:n.failureCount,fetchFailureReason:n.error});case"pause":return W(M({},s),{fetchStatus:"paused"});case"continue":return W(M({},s),{fetchStatus:"fetching"});case"fetch":return W(M(M({},s),c5(s.data,this.options)),{fetchMeta:(i=n.meta)!=null?i:null});case"success":return Oe(this,Ba,void 0),M(W(M({},s),{data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:(o=n.dataUpdatedAt)!=null?o:Date.now(),error:null,isInvalidated:!1,status:"success"}),!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});case"error":const a=n.error;return Fy(a)&&a.revert&&K(this,Ba)?W(M({},K(this,Ba)),{fetchStatus:"idle"}):W(M({},s),{error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"});case"invalidate":return W(M({},s),{isInvalidated:!0});case"setState":return M(M({},s),n.state)}};this.state=r(this.state),Xn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),K(this,Wr).notify({query:this,type:"updated",action:n})})},J1);function c5(t,e){return M({fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Dk(e.networkMode)?"fetching":"paused"},t===void 0&&{error:null,status:"pending"})}function u5(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r!=null?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var qs,Z1,d5=(Z1=class extends og{constructor(e={}){super();rt(this,qs);this.config=e,Oe(this,qs,new Map)}build(e,n,r){var a;const s=n.queryKey,i=(a=n.queryHash)!=null?a:z0(s,n);let o=this.get(i);return o||(o=new l5({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){K(this,qs).has(e.queryHash)||(K(this,qs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=K(this,qs).get(e.queryHash);n&&(e.destroy(),n===e&&K(this,qs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Xn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return K(this,qs).get(e)}getAll(){return[...K(this,qs).values()]}find(e){const n=M({exact:!0},e);return this.getAll().find(r=>Dx(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Dx(e,r)):n}notify(e){Xn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Xn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Xn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},qs=new WeakMap,Z1),Gs,Qn,Ha,Ks,wo,eC,h5=(eC=class extends Mk{constructor(n){super();rt(this,Ks);rt(this,Gs);rt(this,Qn);rt(this,Ha);this.mutationId=n.mutationId,Oe(this,Qn,n.mutationCache),Oe(this,Gs,[]),this.state=n.state||f5(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){K(this,Gs).includes(n)||(K(this,Gs).push(n),this.clearGcTimeout(),K(this,Qn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Oe(this,Gs,K(this,Gs).filter(r=>r!==n)),this.scheduleGc(),K(this,Qn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){K(this,Gs).length||(this.state.status==="pending"?this.scheduleGc():K(this,Qn).remove(this))}continue(){var n,r;return(r=(n=K(this,Ha))==null?void 0:n.continue())!=null?r:this.execute(this.state.variables)}execute(n){return A(this,null,function*(){var o,a,l,c,d,h,f,p,T,v,w,E,y,x,C,D,V,S,I,R,P;const r=()=>{kn(this,Ks,wo).call(this,{type:"continue"})};Oe(this,Ha,Lk({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(O,L)=>{kn(this,Ks,wo).call(this,{type:"failed",failureCount:O,error:L})},onPause:()=>{kn(this,Ks,wo).call(this,{type:"pause"})},onContinue:r,retry:(o=this.options.retry)!=null?o:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>K(this,Qn).canRun(this)}));const s=this.state.status==="pending",i=!K(this,Ha).canStart();try{if(s)r();else{kn(this,Ks,wo).call(this,{type:"pending",variables:n,isPaused:i}),yield(l=(a=K(this,Qn).config).onMutate)==null?void 0:l.call(a,n,this);const L=yield(d=(c=this.options).onMutate)==null?void 0:d.call(c,n);L!==this.state.context&&kn(this,Ks,wo).call(this,{type:"pending",context:L,variables:n,isPaused:i})}const O=yield K(this,Ha).start();return yield(f=(h=K(this,Qn).config).onSuccess)==null?void 0:f.call(h,O,n,this.state.context,this),yield(T=(p=this.options).onSuccess)==null?void 0:T.call(p,O,n,this.state.context),yield(w=(v=K(this,Qn).config).onSettled)==null?void 0:w.call(v,O,null,this.state.variables,this.state.context,this),yield(y=(E=this.options).onSettled)==null?void 0:y.call(E,O,null,n,this.state.context),kn(this,Ks,wo).call(this,{type:"success",data:O}),O}catch(O){try{throw yield(C=(x=K(this,Qn).config).onError)==null?void 0:C.call(x,O,n,this.state.context,this),yield(V=(D=this.options).onError)==null?void 0:V.call(D,O,n,this.state.context),yield(I=(S=K(this,Qn).config).onSettled)==null?void 0:I.call(S,void 0,O,this.state.variables,this.state.context,this),yield(P=(R=this.options).onSettled)==null?void 0:P.call(R,void 0,O,n,this.state.context),O}finally{kn(this,Ks,wo).call(this,{type:"error",error:O})}}finally{K(this,Qn).runNext(this)}})}},Gs=new WeakMap,Qn=new WeakMap,Ha=new WeakMap,Ks=new WeakSet,wo=function(n){const r=s=>{switch(n.type){case"failed":return W(M({},s),{failureCount:n.failureCount,failureReason:n.error});case"pause":return W(M({},s),{isPaused:!0});case"continue":return W(M({},s),{isPaused:!1});case"pending":return W(M({},s),{context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()});case"success":return W(M({},s),{data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return W(M({},s),{data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"})}};this.state=r(this.state),Xn.batch(()=>{K(this,Gs).forEach(s=>{s.onMutationUpdate(n)}),K(this,Qn).notify({mutation:this,type:"updated",action:n})})},eC);function f5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ii,gs,gh,tC,p5=(tC=class extends og{constructor(e={}){super();rt(this,Ii);rt(this,gs);rt(this,gh);this.config=e,Oe(this,Ii,new Set),Oe(this,gs,new Map),Oe(this,gh,0)}build(e,n,r){const s=new h5({mutationCache:this,mutationId:++cf(this,gh)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){K(this,Ii).add(e);const n=kf(e);if(typeof n=="string"){const r=K(this,gs).get(n);r?r.push(e):K(this,gs).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(K(this,Ii).delete(e)){const n=kf(e);if(typeof n=="string"){const r=K(this,gs).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&K(this,gs).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=kf(e);if(typeof n=="string"){const r=K(this,gs).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r,s;const n=kf(e);if(typeof n=="string"){const i=(r=K(this,gs).get(n))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(s=i==null?void 0:i.continue())!=null?s:Promise.resolve()}else return Promise.resolve()}clear(){Xn.batch(()=>{K(this,Ii).forEach(e=>{this.notify({type:"removed",mutation:e})}),K(this,Ii).clear(),K(this,gs).clear()})}getAll(){return Array.from(K(this,Ii))}find(e){const n=M({exact:!0},e);return this.getAll().find(r=>Ox(n,r))}findAll(e={}){return this.getAll().filter(n=>Ox(e,n))}notify(e){Xn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Xn.batch(()=>Promise.all(e.map(n=>n.continue().catch(ps))))}},Ii=new WeakMap,gs=new WeakMap,gh=new WeakMap,tC);function kf(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Fx(t){return{onFetch:(e,n)=>{var d,h,f,p,T;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((T=e.state.data)==null?void 0:T.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=()=>A(this,null,function*(){var x;let v=!1;const w=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},E=Pk(e.options,e.fetchOptions),y=(C,D,V)=>A(this,null,function*(){if(v)return Promise.reject();if(D==null&&C.pages.length)return Promise.resolve(C);const I=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:D,direction:V?"backward":"forward",meta:e.options.meta};return w(L),L})(),R=yield E(I),{maxPages:P}=e.options,O=V?t5:e5;return{pages:O(C.pages,R,P),pageParams:O(C.pageParams,D,P)}});if(s&&i.length){const C=s==="backward",D=C?m5:Vx,V={pages:i,pageParams:o},S=D(r,V);a=yield y(V,S,C)}else{const C=t!=null?t:i.length;do{const D=l===0?(x=o[0])!=null?x:r.initialPageParam:Vx(r,a);if(l>0&&D==null)break;a=yield y(a,D),l++}while(l<C)}return a});e.options.persister?e.fetchFn=()=>{var v,w;return(w=(v=e.options).persister)==null?void 0:w.call(v,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function Vx(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function m5(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var $t,No,Do,Sc,Ic,Oo,Cc,Rc,nC,g5=(nC=class{constructor(t={}){rt(this,$t);rt(this,No);rt(this,Do);rt(this,Sc);rt(this,Ic);rt(this,Oo);rt(this,Cc);rt(this,Rc);Oe(this,$t,t.queryCache||new d5),Oe(this,No,t.mutationCache||new p5),Oe(this,Do,t.defaultOptions||{}),Oe(this,Sc,new Map),Oe(this,Ic,new Map),Oe(this,Oo,0)}mount(){cf(this,Oo)._++,K(this,Oo)===1&&(Oe(this,Cc,Nk.subscribe(t=>A(this,null,function*(){t&&(yield this.resumePausedMutations(),K(this,$t).onFocus())}))),Oe(this,Rc,qp.subscribe(t=>A(this,null,function*(){t&&(yield this.resumePausedMutations(),K(this,$t).onOnline())}))))}unmount(){var t,e;cf(this,Oo)._--,K(this,Oo)===0&&((t=K(this,Cc))==null||t.call(this),Oe(this,Cc,void 0),(e=K(this,Rc))==null||e.call(this),Oe(this,Rc,void 0))}isFetching(t){return K(this,$t).findAll(W(M({},t),{fetchStatus:"fetching"})).length}isMutating(t){return K(this,No).findAll(W(M({},t),{status:"pending"})).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,$t).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=K(this,$t).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(I_(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return K(this,$t).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=K(this,$t).get(r.queryHash),i=s==null?void 0:s.state.data,o=K3(e,i);if(o!==void 0)return K(this,$t).build(this,r).setData(o,W(M({},n),{manual:!0}))}setQueriesData(t,e,n){return Xn.batch(()=>K(this,$t).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,$t).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=K(this,$t);Xn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=K(this,$t);return Xn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries(M({type:"active"},t),e)))}cancelQueries(t,e={}){const n=M({revert:!0},e),r=Xn.batch(()=>K(this,$t).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(ps).catch(ps)}invalidateQueries(t,e={}){return Xn.batch(()=>{var n,r;return K(this,$t).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries(W(M({},t),{type:(r=(n=t==null?void 0:t.refetchType)!=null?n:t==null?void 0:t.type)!=null?r:"active"}),e)})}refetchQueries(t,e={}){var s;const n=W(M({},e),{cancelRefetch:(s=e.cancelRefetch)!=null?s:!0}),r=Xn.batch(()=>K(this,$t).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(ps)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(ps)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=K(this,$t).build(this,e);return n.isStaleByTime(I_(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ps).catch(ps)}fetchInfiniteQuery(t){return t.behavior=Fx(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ps).catch(ps)}ensureInfiniteQueryData(t){return t.behavior=Fx(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return qp.isOnline()?K(this,No).resumePausedMutations():Promise.resolve()}getQueryCache(){return K(this,$t)}getMutationCache(){return K(this,No)}getDefaultOptions(){return K(this,Do)}setDefaultOptions(t){Oe(this,Do,t)}setQueryDefaults(t,e){K(this,Sc).set(Jd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...K(this,Sc).values()],n={};return e.forEach(r=>{Zd(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){K(this,Ic).set(Jd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...K(this,Ic).values()],n={};return e.forEach(r=>{Zd(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e=W(M(M(M({},K(this,Do).queries),this.getQueryDefaults(t.queryKey)),t),{_defaulted:!0});return e.queryHash||(e.queryHash=z0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===B0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:W(M(M(M({},K(this,Do).mutations),(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey)),t),{_defaulted:!0})}clear(){K(this,$t).clear(),K(this,No).clear()}},$t=new WeakMap,No=new WeakMap,Do=new WeakMap,Sc=new WeakMap,Ic=new WeakMap,Oo=new WeakMap,Cc=new WeakMap,Rc=new WeakMap,nC),Fk=_.createContext(void 0),sZ=t=>{const e=_.useContext(Fk);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},y5=({client:t,children:e})=>(_.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(Fk.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nt(){return Nt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nt.apply(this,arguments)}var Jt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Jt||(Jt={}));const jx="popstate";function v5(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return eh("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:nl(s)}return w5(e,n,null,t)}function Ve(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function jc(t,e){if(!t){typeof console!="undefined"&&console.warn(e);try{throw new Error(e)}catch(n){}}}function _5(){return Math.random().toString(36).substr(2,8)}function Ux(t,e){return{usr:t.state,key:t.key,idx:e}}function eh(t,e,n,r){return n===void 0&&(n=null),Nt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ya(e):e,{state:n,key:e&&e.key||r||_5()})}function nl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ya(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function w5(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Jt.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Nt({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Jt.Pop;let w=d(),E=w==null?null:w-c;c=w,l&&l({action:a,location:v.location,delta:E})}function f(w,E){a=Jt.Push;let y=eh(v.location,w,E);c=d()+1;let x=Ux(y,c),C=v.createHref(y);try{o.pushState(x,"",C)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(C)}i&&l&&l({action:a,location:v.location,delta:1})}function p(w,E){a=Jt.Replace;let y=eh(v.location,w,E);c=d();let x=Ux(y,c),C=v.createHref(y);o.replaceState(x,"",C),i&&l&&l({action:a,location:v.location,delta:0})}function T(w){let E=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof w=="string"?w:nl(w);return y=y.replace(/ $/,"%20"),Ve(E,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,E)}let v={get action(){return a},get location(){return t(s,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(jx,h),l=w,()=>{s.removeEventListener(jx,h),l=null}},createHref(w){return e(s,w)},createURL:T,encodeLocation(w){let E=T(w);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:p,go(w){return o.go(w)}};return v}var ct;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ct||(ct={}));const E5=new Set(["lazy","caseSensitive","path","id","index","children"]);function T5(t){return t.index===!0}function Gp(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((s,i)=>{let o=[...n,String(i)],a=typeof s.id=="string"?s.id:o.join("-");if(Ve(s.index!==!0||!s.children,"Cannot specify children on an index route"),Ve(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),T5(s)){let l=Nt({},s,e(s),{id:a});return r[a]=l,l}else{let l=Nt({},s,e(s),{id:a,children:void 0});return r[a]=l,s.children&&(l.children=Gp(s.children,e,o,r)),l}})}function ka(t,e,n){return n===void 0&&(n="/"),sp(t,e,n,!1)}function sp(t,e,n,r){let s=typeof e=="string"?ya(e):e,i=Gi(s.pathname||"/",n);if(i==null)return null;let o=Vk(t);x5(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=L5(i);a=D5(o[l],c,r)}return a}function b5(t,e){let{route:n,pathname:r,params:s}=t;return{id:n.id,pathname:r,params:s,data:e[n.id],handle:n.handle}}function Vk(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ve(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Oi([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Ve(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Vk(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:P5(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of jk(i.path))s(i,o,l)}),e}function jk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=jk(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function x5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:N5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const S5=/^:[\w-]+$/,I5=3,C5=2,R5=1,A5=10,k5=-2,zx=t=>t==="*";function P5(t,e){let n=t.split("/"),r=n.length;return n.some(zx)&&(r+=k5),e&&(r+=C5),n.filter(s=>!zx(s)).reduce((s,i)=>s+(S5.test(i)?I5:i===""?R5:A5),r)}function N5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function D5(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=Kp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=Kp({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Oi([i,h.pathname]),pathnameBase:V5(Oi([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Oi([i,h.pathnameBase]))}return o}function Kp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=O5(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let v=a[h]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const T=a[h];return p&&!T?c[f]=void 0:c[f]=(T||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function O5(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),jc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function L5(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Gi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function M5(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ya(t):t;return{pathname:n?n.startsWith("/")?n:F5(n,e):e,search:j5(r),hash:U5(s)}}function F5(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Vy(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Uk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function lg(t,e){let n=Uk(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function cg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ya(t):(s=Nt({},t),Ve(!s.pathname||!s.pathname.includes("?"),Vy("?","pathname","search",s)),Ve(!s.pathname||!s.pathname.includes("#"),Vy("#","pathname","hash",s)),Ve(!s.search||!s.search.includes("#"),Vy("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=M5(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Oi=t=>t.join("/").replace(/\/\/+/g,"/"),V5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),j5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,U5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Qp{constructor(e,n,r,s){s===void 0&&(s=!1),this.status=e,this.statusText=n||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Ko(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const zk=["post","put","patch","delete"],z5=new Set(zk),B5=["get",...zk],$5=new Set(B5),W5=new Set([301,302,303,307,308]),H5=new Set([307,308]),jy={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},q5={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},zu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},$0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,G5=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Bk="remix-router-transitions";function K5(t){const e=t.window?t.window:typeof window!="undefined"?window:void 0,n=typeof e!="undefined"&&typeof e.document!="undefined"&&typeof e.document.createElement!="undefined",r=!n;Ve(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(t.mapRouteProperties)s=t.mapRouteProperties;else if(t.detectErrorBoundary){let F=t.detectErrorBoundary;s=j=>({hasErrorBoundary:F(j)})}else s=G5;let i={},o=Gp(t.routes,s,void 0,i),a,l=t.basename||"/",c=t.dataStrategy||J5,d=t.patchRoutesOnNavigation,h=Nt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),f=null,p=new Set,T=null,v=null,w=null,E=t.hydrationData!=null,y=ka(o,t.history.location,l),x=!1,C=null;if(y==null&&!d){let F=or(404,{pathname:t.history.location.pathname}),{matches:j,route:B}=Jx(o);y=j,C={[B.id]:F}}y&&!t.hydrationData&&tt(y,o,t.history.location.pathname).active&&(y=null);let D;if(y)if(y.some(F=>F.route.lazy))D=!1;else if(!y.some(F=>F.route.loader))D=!0;else if(h.v7_partialHydration){let F=t.hydrationData?t.hydrationData.loaderData:null,j=t.hydrationData?t.hydrationData.errors:null;if(j){let B=y.findIndex(Z=>j[Z.route.id]!==void 0);D=y.slice(0,B+1).every(Z=>!A_(Z.route,F,j))}else D=y.every(B=>!A_(B.route,F,j))}else D=t.hydrationData!=null;else if(D=!1,y=[],h.v7_partialHydration){let F=tt(null,o,t.history.location.pathname);F.active&&F.matches&&(x=!0,y=F.matches)}let V,S={historyAction:t.history.action,location:t.history.location,matches:y,initialized:D,navigation:jy,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||C,fetchers:new Map,blockers:new Map},I=Jt.Pop,R=!1,P,O=!1,L=new Map,k=null,ee=!1,q=!1,Y=[],te=new Set,U=new Map,$=0,X=-1,ie=new Map,J=new Set,ae=new Map,ye=new Map,le=new Set,Ue=new Map,Ee=new Map,Te;function He(){if(f=t.history.listen(F=>{let{action:j,location:B,delta:Z}=F;if(Te){Te(),Te=void 0;return}jc(Ee.size===0||Z!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ce=co({currentLocation:S.location,nextLocation:B,historyAction:j});if(ce&&Z!=null){let ve=new Promise(Ce=>{Te=Ce});t.history.go(Z*-1),zs(ce,{state:"blocked",location:B,proceed(){zs(ce,{state:"proceeding",proceed:void 0,reset:void 0,location:B}),ve.then(()=>t.history.go(Z))},reset(){let Ce=new Map(S.blockers);Ce.set(ce,zu),be({blockers:Ce})}});return}return Ot(j,B)}),n){h6(e,L);let F=()=>f6(e,L);e.addEventListener("pagehide",F),k=()=>e.removeEventListener("pagehide",F)}return S.initialized||Ot(Jt.Pop,S.location,{initialHydration:!0}),V}function dt(){f&&f(),k&&k(),p.clear(),P&&P.abort(),S.fetchers.forEach((F,j)=>ao(j)),S.blockers.forEach((F,j)=>lo(j))}function Fe(F){return p.add(F),()=>p.delete(F)}function be(F,j){j===void 0&&(j={}),S=Nt({},S,F);let B=[],Z=[];h.v7_fetcherPersist&&S.fetchers.forEach((ce,ve)=>{ce.state==="idle"&&(le.has(ve)?Z.push(ve):B.push(ve))}),le.forEach(ce=>{!S.fetchers.has(ce)&&!U.has(ce)&&Z.push(ce)}),[...p].forEach(ce=>ce(S,{deletedFetchers:Z,viewTransitionOpts:j.viewTransitionOpts,flushSync:j.flushSync===!0})),h.v7_fetcherPersist?(B.forEach(ce=>S.fetchers.delete(ce)),Z.forEach(ce=>ao(ce))):Z.forEach(ce=>le.delete(ce))}function Le(F,j,B){var Z,ce;let{flushSync:ve}=B===void 0?{}:B,Ce=S.actionData!=null&&S.navigation.formMethod!=null&&vs(S.navigation.formMethod)&&S.navigation.state==="loading"&&((Z=F.state)==null?void 0:Z._isRedirect)!==!0,ge;j.actionData?Object.keys(j.actionData).length>0?ge=j.actionData:ge=null:Ce?ge=S.actionData:ge=null;let me=j.loaderData?Yx(S.loaderData,j.loaderData,j.matches||[],j.errors):S.loaderData,fe=S.blockers;fe.size>0&&(fe=new Map(fe),fe.forEach((De,Qt)=>fe.set(Qt,zu)));let _e=R===!0||S.navigation.formMethod!=null&&vs(S.navigation.formMethod)&&((ce=F.state)==null?void 0:ce._isRedirect)!==!0;a&&(o=a,a=void 0),ee||I===Jt.Pop||(I===Jt.Push?t.history.push(F,F.state):I===Jt.Replace&&t.history.replace(F,F.state));let Ae;if(I===Jt.Pop){let De=L.get(S.location.pathname);De&&De.has(F.pathname)?Ae={currentLocation:S.location,nextLocation:F}:L.has(F.pathname)&&(Ae={currentLocation:F,nextLocation:S.location})}else if(O){let De=L.get(S.location.pathname);De?De.add(F.pathname):(De=new Set([F.pathname]),L.set(S.location.pathname,De)),Ae={currentLocation:S.location,nextLocation:F}}be(Nt({},j,{actionData:ge,loaderData:me,historyAction:I,location:F,initialized:!0,navigation:jy,revalidation:"idle",restoreScrollPosition:$e(F,j.matches||S.matches),preventScrollReset:_e,blockers:fe}),{viewTransitionOpts:Ae,flushSync:ve===!0}),I=Jt.Pop,R=!1,O=!1,ee=!1,q=!1,Y=[]}function Ut(F,j){return A(this,null,function*(){if(typeof F=="number"){t.history.go(F);return}let B=R_(S.location,S.matches,l,h.v7_prependBasename,F,h.v7_relativeSplatPath,j==null?void 0:j.fromRouteId,j==null?void 0:j.relative),{path:Z,submission:ce,error:ve}=Bx(h.v7_normalizeFormMethod,!1,B,j),Ce=S.location,ge=eh(S.location,Z,j&&j.state);ge=Nt({},ge,t.history.encodeLocation(ge));let me=j&&j.replace!=null?j.replace:void 0,fe=Jt.Push;me===!0?fe=Jt.Replace:me===!1||ce!=null&&vs(ce.formMethod)&&ce.formAction===S.location.pathname+S.location.search&&(fe=Jt.Replace);let _e=j&&"preventScrollReset"in j?j.preventScrollReset===!0:void 0,Ae=(j&&j.flushSync)===!0,De=co({currentLocation:Ce,nextLocation:ge,historyAction:fe});if(De){zs(De,{state:"blocked",location:ge,proceed(){zs(De,{state:"proceeding",proceed:void 0,reset:void 0,location:ge}),Ut(F,j)},reset(){let Qt=new Map(S.blockers);Qt.set(De,zu),be({blockers:Qt})}});return}return yield Ot(fe,ge,{submission:ce,pendingError:ve,preventScrollReset:_e,replace:j&&j.replace,enableViewTransition:j&&j.viewTransition,flushSync:Ae})})}function Ht(){if(gt(),be({revalidation:"loading"}),S.navigation.state!=="submitting"){if(S.navigation.state==="idle"){Ot(S.historyAction,S.location,{startUninterruptedRevalidation:!0});return}Ot(I||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation,enableViewTransition:O===!0})}}function Ot(F,j,B){return A(this,null,function*(){P&&P.abort(),P=null,I=F,ee=(B&&B.startUninterruptedRevalidation)===!0,Ie(S.location,S.matches),R=(B&&B.preventScrollReset)===!0,O=(B&&B.enableViewTransition)===!0;let Z=a||o,ce=B&&B.overrideNavigation,ve=B!=null&&B.initialHydration&&S.matches&&S.matches.length>0&&!x?S.matches:ka(Z,j,l),Ce=(B&&B.flushSync)===!0;if(ve&&S.initialized&&!q&&s6(S.location,j)&&!(B&&B.submission&&vs(B.submission.formMethod))){Le(j,{matches:ve},{flushSync:Ce});return}let ge=tt(ve,Z,j.pathname);if(ge.active&&ge.matches&&(ve=ge.matches),!ve){let{error:lt,notFoundMatches:qe,route:vt}=os(j.pathname);Le(j,{matches:qe,loaderData:{},errors:{[vt.id]:lt}},{flushSync:Ce});return}P=new AbortController;let me=Dl(t.history,j,P.signal,B&&B.submission),fe;if(B&&B.pendingError)fe=[Pa(ve).route.id,{type:ct.error,error:B.pendingError}];else if(B&&B.submission&&vs(B.submission.formMethod)){let lt=yield jr(me,j,B.submission,ve,ge.active,{replace:B.replace,flushSync:Ce});if(lt.shortCircuited)return;if(lt.pendingActionResult){let[qe,vt]=lt.pendingActionResult;if(Sr(vt)&&Ko(vt.error)&&vt.error.status===404){P=null,Le(j,{matches:lt.matches,loaderData:{},errors:{[qe]:vt.error}});return}}ve=lt.matches||ve,fe=lt.pendingActionResult,ce=Uy(j,B.submission),Ce=!1,ge.active=!1,me=Dl(t.history,me.url,me.signal)}let{shortCircuited:_e,matches:Ae,loaderData:De,errors:Qt}=yield yr(me,j,ve,ge.active,ce,B&&B.submission,B&&B.fetcherSubmission,B&&B.replace,B&&B.initialHydration===!0,Ce,fe);_e||(P=null,Le(j,Nt({matches:Ae||ve},Xx(fe),{loaderData:De,errors:Qt})))})}function jr(F,j,B,Z,ce,ve){return A(this,null,function*(){ve===void 0&&(ve={}),gt();let Ce=u6(j,B);if(be({navigation:Ce},{flushSync:ve.flushSync===!0}),ce){let fe=yield zt(Z,j.pathname,F.signal);if(fe.type==="aborted")return{shortCircuited:!0};if(fe.type==="error"){let _e=Pa(fe.partialMatches).route.id;return{matches:fe.partialMatches,pendingActionResult:[_e,{type:ct.error,error:fe.error}]}}else if(fe.matches)Z=fe.matches;else{let{notFoundMatches:_e,error:Ae,route:De}=os(j.pathname);return{matches:_e,pendingActionResult:[De.id,{type:ct.error,error:Ae}]}}}let ge,me=Zu(Z,j);if(!me.route.action&&!me.route.lazy)ge={type:ct.error,error:or(405,{method:F.method,pathname:j.pathname,routeId:me.route.id})};else if(ge=(yield Vs("action",S,F,[me],Z,null))[me.route.id],F.signal.aborted)return{shortCircuited:!0};if(La(ge)){let fe;return ve&&ve.replace!=null?fe=ve.replace:fe=Gx(ge.response.headers.get("Location"),new URL(F.url),l)===S.location.pathname+S.location.search,yield _r(F,ge,!0,{submission:B,replace:fe}),{shortCircuited:!0}}if(Fo(ge))throw or(400,{type:"defer-action"});if(Sr(ge)){let fe=Pa(Z,me.route.id);return(ve&&ve.replace)!==!0&&(I=Jt.Push),{matches:Z,pendingActionResult:[fe.route.id,ge]}}return{matches:Z,pendingActionResult:[me.route.id,ge]}})}function yr(F,j,B,Z,ce,ve,Ce,ge,me,fe,_e){return A(this,null,function*(){let Ae=ce||Uy(j,ve),De=ve||Ce||eS(Ae),Qt=!ee&&(!h.v7_partialHydration||!me);if(Z){if(Qt){let Tt=fi(_e);be(Nt({navigation:Ae},Tt!==void 0?{actionData:Tt}:{}),{flushSync:fe})}let Qe=yield zt(B,j.pathname,F.signal);if(Qe.type==="aborted")return{shortCircuited:!0};if(Qe.type==="error"){let Tt=Pa(Qe.partialMatches).route.id;return{matches:Qe.partialMatches,loaderData:{},errors:{[Tt]:Qe.error}}}else if(Qe.matches)B=Qe.matches;else{let{error:Tt,notFoundMatches:yi,route:fo}=os(j.pathname);return{matches:yi,loaderData:{},errors:{[fo.id]:Tt}}}}let lt=a||o,[qe,vt]=Wx(t.history,S,B,De,j,h.v7_partialHydration&&me===!0,h.v7_skipActionErrorRevalidation,q,Y,te,le,ae,J,lt,l,_e);if(as(Qe=>!(B&&B.some(Tt=>Tt.route.id===Qe))||qe&&qe.some(Tt=>Tt.route.id===Qe)),X=++$,qe.length===0&&vt.length===0){let Qe=pi();return Le(j,Nt({matches:B,loaderData:{},errors:_e&&Sr(_e[1])?{[_e[0]]:_e[1].error}:null},Xx(_e),Qe?{fetchers:new Map(S.fetchers)}:{}),{flushSync:fe}),{shortCircuited:!0}}if(Qt){let Qe={};if(!Z){Qe.navigation=Ae;let Tt=fi(_e);Tt!==void 0&&(Qe.actionData=Tt)}vt.length>0&&(Qe.fetchers=Fs(vt)),be(Qe,{flushSync:fe})}vt.forEach(Qe=>{Gn(Qe.key),Qe.controller&&U.set(Qe.key,Qe.controller)});let mi=()=>vt.forEach(Qe=>Gn(Qe.key));P&&P.signal.addEventListener("abort",mi);let{loaderResults:uo,fetcherResults:ls}=yield et(S,B,qe,vt,F);if(F.signal.aborted)return{shortCircuited:!0};P&&P.signal.removeEventListener("abort",mi),vt.forEach(Qe=>U.delete(Qe.key));let Kn=Pf(uo);if(Kn)return yield _r(F,Kn.result,!0,{replace:ge}),{shortCircuited:!0};if(Kn=Pf(ls),Kn)return J.add(Kn.key),yield _r(F,Kn.result,!0,{replace:ge}),{shortCircuited:!0};let{loaderData:Rl,errors:gi}=Qx(S,B,uo,_e,vt,ls,Ue);Ue.forEach((Qe,Tt)=>{Qe.subscribe(yi=>{(yi||Qe.done)&&Ue.delete(Tt)})}),h.v7_partialHydration&&me&&S.errors&&(gi=Nt({},S.errors,gi));let wr=pi(),$r=is(X),ho=wr||$r||vt.length>0;return Nt({matches:B,loaderData:Rl,errors:gi},ho?{fetchers:new Map(S.fetchers)}:{})})}function fi(F){if(F&&!Sr(F[1]))return{[F[0]]:F[1].data};if(S.actionData)return Object.keys(S.actionData).length===0?null:S.actionData}function Fs(F){return F.forEach(j=>{let B=S.fetchers.get(j.key),Z=Bu(void 0,B?B.data:void 0);S.fetchers.set(j.key,Z)}),new Map(S.fetchers)}function Ur(F,j,B,Z){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Gn(F);let ce=(Z&&Z.flushSync)===!0,ve=a||o,Ce=R_(S.location,S.matches,l,h.v7_prependBasename,B,h.v7_relativeSplatPath,j,Z==null?void 0:Z.relative),ge=ka(ve,Ce,l),me=tt(ge,ve,Ce);if(me.active&&me.matches&&(ge=me.matches),!ge){sr(F,j,or(404,{pathname:Ce}),{flushSync:ce});return}let{path:fe,submission:_e,error:Ae}=Bx(h.v7_normalizeFormMethod,!0,Ce,Z);if(Ae){sr(F,j,Ae,{flushSync:ce});return}let De=Zu(ge,fe),Qt=(Z&&Z.preventScrollReset)===!0;if(_e&&vs(_e.formMethod)){ss(F,j,fe,De,ge,me.active,ce,Qt,_e);return}ae.set(F,{routeId:j,path:fe}),vr(F,j,fe,De,ge,me.active,ce,Qt,_e)}function ss(F,j,B,Z,ce,ve,Ce,ge,me){return A(this,null,function*(){gt(),ae.delete(F);function fe(Pt){if(!Pt.route.action&&!Pt.route.lazy){let Bs=or(405,{method:me.formMethod,pathname:B,routeId:j});return sr(F,j,Bs,{flushSync:Ce}),!0}return!1}if(!ve&&fe(Z))return;let _e=S.fetchers.get(F);qn(F,d6(me,_e),{flushSync:Ce});let Ae=new AbortController,De=Dl(t.history,B,Ae.signal,me);if(ve){let Pt=yield zt(ce,new URL(De.url).pathname,De.signal,F);if(Pt.type==="aborted")return;if(Pt.type==="error"){sr(F,j,Pt.error,{flushSync:Ce});return}else if(Pt.matches){if(ce=Pt.matches,Z=Zu(ce,B),fe(Z))return}else{sr(F,j,or(404,{pathname:B}),{flushSync:Ce});return}}U.set(F,Ae);let Qt=$,qe=(yield Vs("action",S,De,[Z],ce,F))[Z.route.id];if(De.signal.aborted){U.get(F)===Ae&&U.delete(F);return}if(h.v7_fetcherPersist&&le.has(F)){if(La(qe)||Sr(qe)){qn(F,Eo(void 0));return}}else{if(La(qe))if(U.delete(F),X>Qt){qn(F,Eo(void 0));return}else return J.add(F),qn(F,Bu(me)),_r(De,qe,!1,{fetcherSubmission:me,preventScrollReset:ge});if(Sr(qe)){sr(F,j,qe.error);return}}if(Fo(qe))throw or(400,{type:"defer-action"});let vt=S.navigation.location||S.location,mi=Dl(t.history,vt,Ae.signal),uo=a||o,ls=S.navigation.state!=="idle"?ka(uo,S.navigation.location,l):S.matches;Ve(ls,"Didn't find any matches after fetcher action");let Kn=++$;ie.set(F,Kn);let Rl=Bu(me,qe.data);S.fetchers.set(F,Rl);let[gi,wr]=Wx(t.history,S,ls,me,vt,!1,h.v7_skipActionErrorRevalidation,q,Y,te,le,ae,J,uo,l,[Z.route.id,qe]);wr.filter(Pt=>Pt.key!==F).forEach(Pt=>{let Bs=Pt.key,bu=S.fetchers.get(Bs),Kh=Bu(void 0,bu?bu.data:void 0);S.fetchers.set(Bs,Kh),Gn(Bs),Pt.controller&&U.set(Bs,Pt.controller)}),be({fetchers:new Map(S.fetchers)});let $r=()=>wr.forEach(Pt=>Gn(Pt.key));Ae.signal.addEventListener("abort",$r);let{loaderResults:ho,fetcherResults:Qe}=yield et(S,ls,gi,wr,mi);if(Ae.signal.aborted)return;Ae.signal.removeEventListener("abort",$r),ie.delete(F),U.delete(F),wr.forEach(Pt=>U.delete(Pt.key));let Tt=Pf(ho);if(Tt)return _r(mi,Tt.result,!1,{preventScrollReset:ge});if(Tt=Pf(Qe),Tt)return J.add(Tt.key),_r(mi,Tt.result,!1,{preventScrollReset:ge});let{loaderData:yi,errors:fo}=Qx(S,ls,ho,void 0,wr,Qe,Ue);if(S.fetchers.has(F)){let Pt=Eo(qe.data);S.fetchers.set(F,Pt)}is(Kn),S.navigation.state==="loading"&&Kn>X?(Ve(I,"Expected pending action"),P&&P.abort(),Le(S.navigation.location,{matches:ls,loaderData:yi,errors:fo,fetchers:new Map(S.fetchers)})):(be({errors:fo,loaderData:Yx(S.loaderData,yi,ls,fo),fetchers:new Map(S.fetchers)}),q=!1)})}function vr(F,j,B,Z,ce,ve,Ce,ge,me){return A(this,null,function*(){let fe=S.fetchers.get(F);qn(F,Bu(me,fe?fe.data:void 0),{flushSync:Ce});let _e=new AbortController,Ae=Dl(t.history,B,_e.signal);if(ve){let qe=yield zt(ce,new URL(Ae.url).pathname,Ae.signal,F);if(qe.type==="aborted")return;if(qe.type==="error"){sr(F,j,qe.error,{flushSync:Ce});return}else if(qe.matches)ce=qe.matches,Z=Zu(ce,B);else{sr(F,j,or(404,{pathname:B}),{flushSync:Ce});return}}U.set(F,_e);let De=$,lt=(yield Vs("loader",S,Ae,[Z],ce,F))[Z.route.id];if(Fo(lt)&&(lt=(yield W0(lt,Ae.signal,!0))||lt),U.get(F)===_e&&U.delete(F),!Ae.signal.aborted){if(le.has(F)){qn(F,Eo(void 0));return}if(La(lt))if(X>De){qn(F,Eo(void 0));return}else{J.add(F),yield _r(Ae,lt,!1,{preventScrollReset:ge});return}if(Sr(lt)){sr(F,j,lt.error);return}Ve(!Fo(lt),"Unhandled fetcher deferred data"),qn(F,Eo(lt.data))}})}function _r(F,j,B,Z){return A(this,null,function*(){let{submission:ce,fetcherSubmission:ve,preventScrollReset:Ce,replace:ge}=Z===void 0?{}:Z;j.response.headers.has("X-Remix-Revalidate")&&(q=!0);let me=j.response.headers.get("Location");Ve(me,"Expected a Location header on the redirect Response"),me=Gx(me,new URL(F.url),l);let fe=eh(S.location,me,{_isRedirect:!0});if(n){let qe=!1;if(j.response.headers.has("X-Remix-Reload-Document"))qe=!0;else if($0.test(me)){const vt=t.history.createURL(me);qe=vt.origin!==e.location.origin||Gi(vt.pathname,l)==null}if(qe){ge?e.location.replace(me):e.location.assign(me);return}}P=null;let _e=ge===!0||j.response.headers.has("X-Remix-Replace")?Jt.Replace:Jt.Push,{formMethod:Ae,formAction:De,formEncType:Qt}=S.navigation;!ce&&!ve&&Ae&&De&&Qt&&(ce=eS(S.navigation));let lt=ce||ve;if(H5.has(j.response.status)&&lt&&vs(lt.formMethod))yield Ot(_e,fe,{submission:Nt({},lt,{formAction:me}),preventScrollReset:Ce||R,enableViewTransition:B?O:void 0});else{let qe=Uy(fe,ce);yield Ot(_e,fe,{overrideNavigation:qe,fetcherSubmission:ve,preventScrollReset:Ce||R,enableViewTransition:B?O:void 0})}})}function Vs(F,j,B,Z,ce,ve){return A(this,null,function*(){let Ce,ge={};try{Ce=yield Z5(c,F,j,B,Z,ce,ve,i,s)}catch(me){return Z.forEach(fe=>{ge[fe.route.id]={type:ct.error,error:me}}),ge}for(let[me,fe]of Object.entries(Ce))if(i6(fe)){let _e=fe.result;ge[me]={type:ct.redirect,response:n6(_e,B,me,ce,l,h.v7_relativeSplatPath)}}else ge[me]=yield t6(fe);return ge})}function et(F,j,B,Z,ce){return A(this,null,function*(){let ve=F.matches,Ce=Vs("loader",F,ce,B,j,null),ge=Promise.all(Z.map(_e=>A(this,null,function*(){if(_e.matches&&_e.match&&_e.controller){let De=(yield Vs("loader",F,Dl(t.history,_e.path,_e.controller.signal),[_e.match],_e.matches,_e.key))[_e.match.route.id];return{[_e.key]:De}}else return Promise.resolve({[_e.key]:{type:ct.error,error:or(404,{pathname:_e.path})}})}))),me=yield Ce,fe=(yield ge).reduce((_e,Ae)=>Object.assign(_e,Ae),{});return yield Promise.all([l6(j,me,ce.signal,ve,F.loaderData),c6(j,fe,Z)]),{loaderResults:me,fetcherResults:fe}})}function gt(){q=!0,Y.push(...as()),ae.forEach((F,j)=>{U.has(j)&&te.add(j),Gn(j)})}function qn(F,j,B){B===void 0&&(B={}),S.fetchers.set(F,j),be({fetchers:new Map(S.fetchers)},{flushSync:(B&&B.flushSync)===!0})}function sr(F,j,B,Z){Z===void 0&&(Z={});let ce=Pa(S.matches,j);ao(F),be({errors:{[ce.route.id]:B},fetchers:new Map(S.fetchers)},{flushSync:(Z&&Z.flushSync)===!0})}function js(F){return ye.set(F,(ye.get(F)||0)+1),le.has(F)&&le.delete(F),S.fetchers.get(F)||q5}function ao(F){let j=S.fetchers.get(F);U.has(F)&&!(j&&j.state==="loading"&&ie.has(F))&&Gn(F),ae.delete(F),ie.delete(F),J.delete(F),h.v7_fetcherPersist&&le.delete(F),te.delete(F),S.fetchers.delete(F)}function Us(F){let j=(ye.get(F)||0)-1;j<=0?(ye.delete(F),le.add(F),h.v7_fetcherPersist||ao(F)):ye.set(F,j),be({fetchers:new Map(S.fetchers)})}function Gn(F){let j=U.get(F);j&&(j.abort(),U.delete(F))}function zr(F){for(let j of F){let B=js(j),Z=Eo(B.data);S.fetchers.set(j,Z)}}function pi(){let F=[],j=!1;for(let B of J){let Z=S.fetchers.get(B);Ve(Z,"Expected fetcher: "+B),Z.state==="loading"&&(J.delete(B),F.push(B),j=!0)}return zr(F),j}function is(F){let j=[];for(let[B,Z]of ie)if(Z<F){let ce=S.fetchers.get(B);Ve(ce,"Expected fetcher: "+B),ce.state==="loading"&&(Gn(B),ie.delete(B),j.push(B))}return zr(j),j.length>0}function Tu(F,j){let B=S.blockers.get(F)||zu;return Ee.get(F)!==j&&Ee.set(F,j),B}function lo(F){S.blockers.delete(F),Ee.delete(F)}function zs(F,j){let B=S.blockers.get(F)||zu;Ve(B.state==="unblocked"&&j.state==="blocked"||B.state==="blocked"&&j.state==="blocked"||B.state==="blocked"&&j.state==="proceeding"||B.state==="blocked"&&j.state==="unblocked"||B.state==="proceeding"&&j.state==="unblocked","Invalid blocker state transition: "+B.state+" -> "+j.state);let Z=new Map(S.blockers);Z.set(F,j),be({blockers:Z})}function co(F){let{currentLocation:j,nextLocation:B,historyAction:Z}=F;if(Ee.size===0)return;Ee.size>1&&jc(!1,"A router only supports one blocker at a time");let ce=Array.from(Ee.entries()),[ve,Ce]=ce[ce.length-1],ge=S.blockers.get(ve);if(!(ge&&ge.state==="proceeding")&&Ce({currentLocation:j,nextLocation:B,historyAction:Z}))return ve}function os(F){let j=or(404,{pathname:F}),B=a||o,{matches:Z,route:ce}=Jx(B);return as(),{notFoundMatches:Z,route:ce,error:j}}function as(F){let j=[];return Ue.forEach((B,Z)=>{(!F||F(Z))&&(B.cancel(),j.push(Z),Ue.delete(Z))}),j}function ir(F,j,B){if(T=F,w=j,v=B||null,!E&&S.navigation===jy){E=!0;let Z=$e(S.location,S.matches);Z!=null&&be({restoreScrollPosition:Z})}return()=>{T=null,w=null,v=null}}function Br(F,j){return v&&v(F,j.map(Z=>b5(Z,S.loaderData)))||F.key}function Ie(F,j){if(T&&w){let B=Br(F,j);T[B]=w()}}function $e(F,j){if(T){let B=Br(F,j),Z=T[B];if(typeof Z=="number")return Z}return null}function tt(F,j,B){if(d)if(F){if(Object.keys(F[0].params).length>0)return{active:!0,matches:sp(j,B,l,!0)}}else return{active:!0,matches:sp(j,B,l,!0)||[]};return{active:!1,matches:null}}function zt(F,j,B,Z){return A(this,null,function*(){if(!d)return{type:"success",matches:F};let ce=F;for(;;){let ve=a==null,Ce=a||o,ge=i;try{yield d({signal:B,path:j,matches:ce,fetcherKey:Z,patch:(_e,Ae)=>{B.aborted||qx(_e,Ae,Ce,ge,s)}})}catch(_e){return{type:"error",error:_e,partialMatches:ce}}finally{ve&&!B.aborted&&(o=[...o])}if(B.aborted)return{type:"aborted"};let me=ka(Ce,j,l);if(me)return{type:"success",matches:me};let fe=sp(Ce,j,l,!0);if(!fe||ce.length===fe.length&&ce.every((_e,Ae)=>_e.route.id===fe[Ae].route.id))return{type:"success",matches:null};ce=fe}})}function Cn(F){i={},a=Gp(F,s,void 0,i)}function yt(F,j){let B=a==null;qx(F,j,a||o,i,s),B&&(o=[...o],be({}))}return V={get basename(){return l},get future(){return h},get state(){return S},get routes(){return o},get window(){return e},initialize:He,subscribe:Fe,enableScrollRestoration:ir,navigate:Ut,fetch:Ur,revalidate:Ht,createHref:F=>t.history.createHref(F),encodeLocation:F=>t.history.encodeLocation(F),getFetcher:js,deleteFetcher:Us,dispose:dt,getBlocker:Tu,deleteBlocker:lo,patchRoutes:yt,_internalFetchControllers:U,_internalActiveDeferreds:Ue,_internalSetRoutes:Cn},V}function Q5(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function R_(t,e,n,r,s,i,o,a){let l,c;if(o){l=[];for(let h of e)if(l.push(h),h.route.id===o){c=h;break}}else l=e,c=e[e.length-1];let d=cg(s||".",lg(l,i),Gi(t.pathname,n)||t.pathname,a==="path");if(s==null&&(d.search=t.search,d.hash=t.hash),(s==null||s===""||s===".")&&c){let h=H0(d.search);if(c.route.index&&!h)d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&h){let f=new URLSearchParams(d.search),p=f.getAll("index");f.delete("index"),p.filter(v=>v).forEach(v=>f.append("index",v));let T=f.toString();d.search=T?"?"+T:""}}return r&&n!=="/"&&(d.pathname=d.pathname==="/"?n:Oi([n,d.pathname])),nl(d)}function Bx(t,e,n,r){if(!r||!Q5(r))return{path:n};if(r.formMethod&&!a6(r.formMethod))return{path:n,error:or(405,{method:r.formMethod})};let s=()=>({path:n,error:or(400,{type:"invalid-body"})}),i=r.formMethod||"get",o=t?i.toUpperCase():i.toLowerCase(),a=Hk(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!vs(o))return s();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((p,T)=>{let[v,w]=T;return""+p+v+"="+w+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!vs(o))return s();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch(f){return s()}}}Ve(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=k_(r.formData),c=r.formData;else if(r.body instanceof FormData)l=k_(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=Kx(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=Kx(l)}catch(f){return s()}let d={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(vs(d.formMethod))return{path:n,submission:d};let h=ya(n);return e&&h.search&&H0(h.search)&&l.append("index",""),h.search="?"+l,{path:nl(h),submission:d}}function $x(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(s=>s.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function Wx(t,e,n,r,s,i,o,a,l,c,d,h,f,p,T,v){let w=v?Sr(v[1])?v[1].error:v[1].data:void 0,E=t.createURL(e.location),y=t.createURL(s),x=n;i&&e.errors?x=$x(n,Object.keys(e.errors)[0],!0):v&&Sr(v[1])&&(x=$x(n,v[0]));let C=v?v[1].statusCode:void 0,D=o&&C&&C>=400,V=x.filter((I,R)=>{let{route:P}=I;if(P.lazy)return!0;if(P.loader==null)return!1;if(i)return A_(P,e.loaderData,e.errors);if(Y5(e.loaderData,e.matches[R],I)||l.some(k=>k===I.route.id))return!0;let O=e.matches[R],L=I;return Hx(I,Nt({currentUrl:E,currentParams:O.params,nextUrl:y,nextParams:L.params},r,{actionResult:w,actionStatus:C,defaultShouldRevalidate:D?!1:a||E.pathname+E.search===y.pathname+y.search||E.search!==y.search||$k(O,L)}))}),S=[];return h.forEach((I,R)=>{if(i||!n.some(ee=>ee.route.id===I.routeId)||d.has(R))return;let P=ka(p,I.path,T);if(!P){S.push({key:R,routeId:I.routeId,path:I.path,matches:null,match:null,controller:null});return}let O=e.fetchers.get(R),L=Zu(P,I.path),k=!1;f.has(R)?k=!1:c.has(R)?(c.delete(R),k=!0):O&&O.state!=="idle"&&O.data===void 0?k=a:k=Hx(L,Nt({currentUrl:E,currentParams:e.matches[e.matches.length-1].params,nextUrl:y,nextParams:n[n.length-1].params},r,{actionResult:w,actionStatus:C,defaultShouldRevalidate:D?!1:a})),k&&S.push({key:R,routeId:I.routeId,path:I.path,matches:P,match:L,controller:new AbortController})}),[V,S]}function A_(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,s=n!=null&&n[t.id]!==void 0;return!r&&s?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!s}function Y5(t,e,n){let r=!e||n.route.id!==e.route.id,s=t[n.route.id]===void 0;return r||s}function $k(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Hx(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function qx(t,e,n,r,s){var i;let o;if(t){let c=r[t];Ve(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),o=c.children}else o=n;let a=e.filter(c=>!o.some(d=>Wk(c,d))),l=Gp(a,s,[t||"_","patch",String(((i=o)==null?void 0:i.length)||"0")],r);o.push(...l)}function Wk(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var s;return(s=e.children)==null?void 0:s.some(i=>Wk(n,i))}):!1}function X5(t,e,n){return A(this,null,function*(){if(!t.lazy)return;let r=yield t.lazy();if(!t.lazy)return;let s=n[t.id];Ve(s,"No route found in manifest");let i={};for(let o in r){let l=s[o]!==void 0&&o!=="hasErrorBoundary";jc(!l,'Route "'+s.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!E5.has(o)&&(i[o]=r[o])}Object.assign(s,i),Object.assign(s,Nt({},e(s),{lazy:void 0}))})}function J5(t){return A(this,null,function*(){let{matches:e}=t,n=e.filter(s=>s.shouldLoad);return(yield Promise.all(n.map(s=>s.resolve()))).reduce((s,i,o)=>Object.assign(s,{[n[o].route.id]:i}),{})})}function Z5(t,e,n,r,s,i,o,a,l,c){return A(this,null,function*(){let d=i.map(p=>p.route.lazy?X5(p.route,l,a):void 0),h=i.map((p,T)=>{let v=d[T],w=s.some(y=>y.route.id===p.route.id);return Nt({},p,{shouldLoad:w,resolve:y=>A(this,null,function*(){return y&&r.method==="GET"&&(p.route.lazy||p.route.loader)&&(w=!0),w?e6(e,r,p,v,y,c):Promise.resolve({type:ct.data,result:void 0})})})}),f=yield t({matches:h,request:r,params:i[0].params,fetcherKey:o,context:c});try{yield Promise.all(d)}catch(p){}return f})}function e6(t,e,n,r,s,i){return A(this,null,function*(){let o,a,l=c=>{let d,h=new Promise((T,v)=>d=v);a=()=>d(),e.signal.addEventListener("abort",a);let f=T=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:i},...T!==void 0?[T]:[]),p=A(this,null,function*(){try{return{type:"data",result:yield s?s(v=>f(v)):f()}}catch(T){return{type:"error",result:T}}});return Promise.race([p,h])};try{let c=n.route[t];if(r)if(c){let d,[h]=yield Promise.all([l(c).catch(f=>{d=f}),r]);if(d!==void 0)throw d;o=h}else if(yield r,c=n.route[t],c)o=yield l(c);else if(t==="action"){let d=new URL(e.url),h=d.pathname+d.search;throw or(405,{method:e.method,pathname:h,routeId:n.route.id})}else return{type:ct.data,result:void 0};else if(c)o=yield l(c);else{let d=new URL(e.url),h=d.pathname+d.search;throw or(404,{pathname:h})}Ve(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:ct.error,result:c}}finally{a&&e.signal.removeEventListener("abort",a)}return o})}function t6(t){return A(this,null,function*(){let{result:e,type:n}=t;if(qk(e)){let h;try{let f=e.headers.get("Content-Type");f&&/\bapplication\/json\b/.test(f)?e.body==null?h=null:h=yield e.json():h=yield e.text()}catch(f){return{type:ct.error,error:f}}return n===ct.error?{type:ct.error,error:new Qp(e.status,e.statusText,h),statusCode:e.status,headers:e.headers}:{type:ct.data,data:h,statusCode:e.status,headers:e.headers}}if(n===ct.error){if(Zx(e)){var r,s;if(e.data instanceof Error){var i,o;return{type:ct.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:ct.error,error:new Qp(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:Ko(e)?e.status:void 0,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:ct.error,error:e,statusCode:Ko(e)?e.status:void 0}}if(o6(e)){var a,l;return{type:ct.deferred,deferredData:e,statusCode:(a=e.init)==null?void 0:a.status,headers:((l=e.init)==null?void 0:l.headers)&&new Headers(e.init.headers)}}if(Zx(e)){var c,d;return{type:ct.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}}return{type:ct.data,data:e}})}function n6(t,e,n,r,s,i){let o=t.headers.get("Location");if(Ve(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!$0.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=R_(new URL(e.url),a,s,!0,o,i),t.headers.set("Location",o)}return t}function Gx(t,e,n){if($0.test(t)){let r=t,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),i=Gi(s.pathname,n)!=null;if(s.origin===e.origin&&i)return s.pathname+s.search+s.hash}return t}function Dl(t,e,n,r){let s=t.createURL(Hk(e)).toString(),i={signal:n};if(r&&vs(r.formMethod)){let{formMethod:o,formEncType:a}=r;i.method=o.toUpperCase(),a==="application/json"?(i.headers=new Headers({"Content-Type":a}),i.body=JSON.stringify(r.json)):a==="text/plain"?i.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?i.body=k_(r.formData):i.body=r.formData}return new Request(s,i)}function k_(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Kx(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function r6(t,e,n,r,s){let i={},o=null,a,l=!1,c={},d=n&&Sr(n[1])?n[1].error:void 0;return t.forEach(h=>{if(!(h.route.id in e))return;let f=h.route.id,p=e[f];if(Ve(!La(p),"Cannot handle redirect results in processLoaderData"),Sr(p)){let T=p.error;d!==void 0&&(T=d,d=void 0),o=o||{};{let v=Pa(t,f);o[v.route.id]==null&&(o[v.route.id]=T)}i[f]=void 0,l||(l=!0,a=Ko(p.error)?p.error.status:500),p.headers&&(c[f]=p.headers)}else Fo(p)?(r.set(f,p.deferredData),i[f]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(c[f]=p.headers)):(i[f]=p.data,p.statusCode&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(c[f]=p.headers))}),d!==void 0&&n&&(o={[n[0]]:d},i[n[0]]=void 0),{loaderData:i,errors:o,statusCode:a||200,loaderHeaders:c}}function Qx(t,e,n,r,s,i,o){let{loaderData:a,errors:l}=r6(e,n,r,o);return s.forEach(c=>{let{key:d,match:h,controller:f}=c,p=i[d];if(Ve(p,"Did not find corresponding fetcher result"),!(f&&f.signal.aborted))if(Sr(p)){let T=Pa(t.matches,h==null?void 0:h.route.id);l&&l[T.route.id]||(l=Nt({},l,{[T.route.id]:p.error})),t.fetchers.delete(d)}else if(La(p))Ve(!1,"Unhandled fetcher revalidation redirect");else if(Fo(p))Ve(!1,"Unhandled fetcher deferred data");else{let T=Eo(p.data);t.fetchers.set(d,T)}}),{loaderData:a,errors:l}}function Yx(t,e,n,r){let s=Nt({},e);for(let i of n){let o=i.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(s[o]=e[o]):t[o]!==void 0&&i.route.loader&&(s[o]=t[o]),r&&r.hasOwnProperty(o))break}return s}function Xx(t){return t?Sr(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Pa(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Jx(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function or(t,e){let{pathname:n,routeId:r,method:s,type:i,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",s&&n&&r?l="You made a "+s+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":i==="defer-action"?l="defer() is not supported in actions":i==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",s&&n&&r?l="You made a "+s.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":s&&(l='Invalid request method "'+s.toUpperCase()+'"')),new Qp(t||500,a,new Error(l),!0)}function Pf(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,s]=e[n];if(La(s))return{key:r,result:s}}}function Hk(t){let e=typeof t=="string"?ya(t):t;return nl(Nt({},e,{hash:""}))}function s6(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function i6(t){return qk(t.result)&&W5.has(t.result.status)}function Fo(t){return t.type===ct.deferred}function Sr(t){return t.type===ct.error}function La(t){return(t&&t.type)===ct.redirect}function Zx(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function o6(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function qk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body!="undefined"}function a6(t){return $5.has(t.toLowerCase())}function vs(t){return z5.has(t.toLowerCase())}function l6(t,e,n,r,s){return A(this,null,function*(){let i=Object.entries(e);for(let o=0;o<i.length;o++){let[a,l]=i[o],c=t.find(f=>(f==null?void 0:f.route.id)===a);if(!c)continue;let d=r.find(f=>f.route.id===c.route.id),h=d!=null&&!$k(d,c)&&(s&&s[c.route.id])!==void 0;Fo(l)&&h&&(yield W0(l,n,!1).then(f=>{f&&(e[a]=f)}))}})}function c6(t,e,n){return A(this,null,function*(){for(let r=0;r<n.length;r++){let{key:s,routeId:i,controller:o}=n[r],a=e[s];t.find(c=>(c==null?void 0:c.route.id)===i)&&Fo(a)&&(Ve(o,"Expected an AbortController for revalidating fetcher deferred result"),yield W0(a,o.signal,!0).then(c=>{c&&(e[s]=c)}))}})}function W0(t,e,n){return A(this,null,function*(){if(n===void 0&&(n=!1),!(yield t.deferredData.resolveData(e))){if(n)try{return{type:ct.data,data:t.deferredData.unwrappedData}}catch(s){return{type:ct.error,error:s}}return{type:ct.data,data:t.deferredData.data}}})}function H0(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Zu(t,e){let n=typeof e=="string"?ya(e).search:e.search;if(t[t.length-1].route.index&&H0(n||""))return t[t.length-1];let r=Uk(t);return r[r.length-1]}function eS(t){let{formMethod:e,formAction:n,formEncType:r,text:s,formData:i,json:o}=t;if(!(!e||!n||!r)){if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:s};if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Uy(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function u6(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Bu(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function d6(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Eo(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function h6(t,e){try{let n=t.sessionStorage.getItem(Bk);if(n){let r=JSON.parse(n);for(let[s,i]of Object.entries(r||{}))i&&Array.isArray(i)&&e.set(s,new Set(i||[]))}}catch(n){}}function f6(t,e){if(e.size>0){let n={};for(let[r,s]of e)n[r]=[...s];try{t.sessionStorage.setItem(Bk,JSON.stringify(n))}catch(r){jc(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yp(){return Yp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yp.apply(this,arguments)}const bh=_.createContext(null),q0=_.createContext(null),no=_.createContext(null),G0=_.createContext(null),ci=_.createContext({outlet:null,matches:[],isDataRoute:!1}),Gk=_.createContext(null);function p6(t,e){let{relative:n}=e===void 0?{}:e;iu()||Ve(!1);let{basename:r,navigator:s}=_.useContext(no),{hash:i,pathname:o,search:a}=ug(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Oi([r,o])),s.createHref({pathname:l,search:a,hash:i})}function iu(){return _.useContext(G0)!=null}function ro(){return iu()||Ve(!1),_.useContext(G0).location}function Kk(t){_.useContext(no).static||_.useLayoutEffect(t)}function vl(){let{isDataRoute:t}=_.useContext(ci);return t?C6():m6()}function m6(){iu()||Ve(!1);let t=_.useContext(bh),{basename:e,future:n,navigator:r}=_.useContext(no),{matches:s}=_.useContext(ci),{pathname:i}=ro(),o=JSON.stringify(lg(s,n.v7_relativeSplatPath)),a=_.useRef(!1);return Kk(()=>{a.current=!0}),_.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=cg(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Oi([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}const g6=_.createContext(null);function y6(t){let e=_.useContext(ci).outlet;return e&&_.createElement(g6.Provider,{value:t},e)}function iZ(){let{matches:t}=_.useContext(ci),e=t[t.length-1];return e?e.params:{}}function ug(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=_.useContext(no),{matches:s}=_.useContext(ci),{pathname:i}=ro(),o=JSON.stringify(lg(s,r.v7_relativeSplatPath));return _.useMemo(()=>cg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function v6(t,e,n,r){iu()||Ve(!1);let{navigator:s}=_.useContext(no),{matches:i}=_.useContext(ci),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=ro(),d;d=c;let h=d.pathname||"/",f=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let p=ka(t,{pathname:f});return b6(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:Oi([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Oi([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r)}function _6(){let t=Xk(),e=Ko(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:s},n):null,null)}const w6=_.createElement(_6,null);class E6 extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(ci.Provider,{value:this.props.routeContext},_.createElement(Gk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function T6(t){let{routeContext:e,match:n,children:r}=t,s=_.useContext(bh);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(ci.Provider,{value:e},r)}function b6(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Ve(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=n,T=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||T){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,T=!1,v=null,w=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,v=h.route.errorElement||w6,l&&(c<0&&f===0?(T=!0,w=null):c===f&&(T=!0,w=h.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,f+1)),y=()=>{let x;return p?x=v:T?x=w:h.route.Component?x=_.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=d,_.createElement(T6,{match:h,routeContext:{outlet:d,matches:E,isDataRoute:n!=null},children:x})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?_.createElement(E6,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:y(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):y()},null)}var Qk=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Qk||{}),Xp=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Xp||{});function x6(t){let e=_.useContext(bh);return e||Ve(!1),e}function S6(t){let e=_.useContext(q0);return e||Ve(!1),e}function I6(t){let e=_.useContext(ci);return e||Ve(!1),e}function Yk(t){let e=I6(),n=e.matches[e.matches.length-1];return n.route.id||Ve(!1),n.route.id}function Xk(){var t;let e=_.useContext(Gk),n=S6(Xp.UseRouteError),r=Yk(Xp.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function C6(){let{router:t}=x6(Qk.UseNavigateStable),e=Yk(Xp.UseNavigateStable),n=_.useRef(!1);return Kk(()=>{n.current=!0}),_.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Yp({fromRouteId:e},i)))},[t,e])}function R6(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function tS(t){let{to:e,replace:n,state:r,relative:s}=t;iu()||Ve(!1);let{future:i,static:o}=_.useContext(no),{matches:a}=_.useContext(ci),{pathname:l}=ro(),c=vl(),d=cg(e,lg(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return _.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function A6(t){return y6(t.context)}function k6(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Jt.Pop,navigator:i,static:o=!1,future:a}=t;iu()&&Ve(!1);let l=e.replace(/^\/*/,"/"),c=_.useMemo(()=>({basename:l,navigator:i,static:o,future:Yp({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=ya(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:T="default"}=r,v=_.useMemo(()=>{let w=Gi(d,l);return w==null?null:{location:{pathname:w,search:h,hash:f,state:p,key:T},navigationType:s}},[l,d,h,f,p,T,s]);return v==null?null:_.createElement(no.Provider,{value:c},_.createElement(G0.Provider,{children:n,value:v}))}new Promise(()=>{});function P6(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:_.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:_.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:_.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uc(){return Uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uc.apply(this,arguments)}function Jk(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function N6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function D6(t,e){return t.button===0&&(!e||e==="_self")&&!N6(t)}function P_(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function O6(t,e){let n=P_(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const L6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],M6=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],F6="6";try{window.__reactRouterVersion=F6}catch(t){}function V6(t,e){return K5({basename:void 0,future:Uc({},void 0,{v7_prependBasename:!0}),history:v5({window:void 0}),hydrationData:j6(),routes:t,mapRouteProperties:P6,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function j6(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Uc({},e,{errors:U6(e.errors)})),e}function U6(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")n[r]=new Qp(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let i=window[s.__subType];if(typeof i=="function")try{let o=new i(s.message);o.stack="",n[r]=o}catch(o){}}if(n[r]==null){let i=new Error(s.message);i.stack="",n[r]=i}}else n[r]=s;return n}const Zk=_.createContext({isTransitioning:!1}),z6=_.createContext(new Map),B6="startTransition",nS=Nw[B6],$6="flushSync",rS=GV[$6];function W6(t){nS?nS(t):t()}function $u(t){rS?rS(t):t()}let H6=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function q6(t){let{fallbackElement:e,router:n,future:r}=t,[s,i]=_.useState(n.state),[o,a]=_.useState(),[l,c]=_.useState({isTransitioning:!1}),[d,h]=_.useState(),[f,p]=_.useState(),[T,v]=_.useState(),w=_.useRef(new Map),{v7_startTransition:E}=r||{},y=_.useCallback(I=>{E?W6(I):I()},[E]),x=_.useCallback((I,R)=>{let{deletedFetchers:P,flushSync:O,viewTransitionOpts:L}=R;I.fetchers.forEach((ee,q)=>{ee.data!==void 0&&w.current.set(q,ee.data)}),P.forEach(ee=>w.current.delete(ee));let k=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!L||k){O?$u(()=>i(I)):y(()=>i(I));return}if(O){$u(()=>{f&&(d&&d.resolve(),f.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:L.currentLocation,nextLocation:L.nextLocation})});let ee=n.window.document.startViewTransition(()=>{$u(()=>i(I))});ee.finished.finally(()=>{$u(()=>{h(void 0),p(void 0),a(void 0),c({isTransitioning:!1})})}),$u(()=>p(ee));return}f?(d&&d.resolve(),f.skipTransition(),v({state:I,currentLocation:L.currentLocation,nextLocation:L.nextLocation})):(a(I),c({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}))},[n.window,f,d,w,y]);_.useLayoutEffect(()=>n.subscribe(x),[n,x]),_.useEffect(()=>{l.isTransitioning&&!l.flushSync&&h(new H6)},[l]),_.useEffect(()=>{if(d&&o&&n.window){let I=o,R=d.promise,P=n.window.document.startViewTransition(()=>A(this,null,function*(){y(()=>i(I)),yield R}));P.finished.finally(()=>{h(void 0),p(void 0),a(void 0),c({isTransitioning:!1})}),p(P)}},[y,o,d,n.window]),_.useEffect(()=>{d&&o&&s.location.key===o.location.key&&d.resolve()},[d,f,s.location,o]),_.useEffect(()=>{!l.isTransitioning&&T&&(a(T.state),c({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}),v(void 0))},[l.isTransitioning,T]),_.useEffect(()=>{},[]);let C=_.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:I=>n.navigate(I),push:(I,R,P)=>n.navigate(I,{state:R,preventScrollReset:P==null?void 0:P.preventScrollReset}),replace:(I,R,P)=>n.navigate(I,{replace:!0,state:R,preventScrollReset:P==null?void 0:P.preventScrollReset})}),[n]),D=n.basename||"/",V=_.useMemo(()=>({router:n,navigator:C,static:!1,basename:D}),[n,C,D]),S=_.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return _.useEffect(()=>R6(r,n.future),[r,n.future]),_.createElement(_.Fragment,null,_.createElement(bh.Provider,{value:V},_.createElement(q0.Provider,{value:s},_.createElement(z6.Provider,{value:w.current},_.createElement(Zk.Provider,{value:l},_.createElement(k6,{basename:D,location:s.location,navigationType:s.historyAction,navigator:C,future:S},s.initialized||n.future.v7_partialHydration?_.createElement(G6,{routes:n.routes,future:n.future,state:s}):e))))),null)}const G6=_.memo(K6);function K6(t){let{routes:e,future:n,state:r}=t;return v6(e,void 0,r,n)}const Q6=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",Y6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jp=_.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=Jk(e,L6),{basename:p}=_.useContext(no),T,v=!1;if(typeof c=="string"&&Y6.test(c)&&(T=c,Q6))try{let x=new URL(window.location.href),C=c.startsWith("//")?new URL(x.protocol+c):new URL(c),D=Gi(C.pathname,p);C.origin===x.origin&&D!=null?c=D+C.search+C.hash:v=!0}catch(x){}let w=p6(c,{relative:s}),E=J6(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function y(x){r&&r(x),x.defaultPrevented||E(x)}return _.createElement("a",Uc({},f,{href:T||w,onClick:v||i?r:y,ref:n,target:l}))}),aZ=_.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:d}=e,h=Jk(e,M6),f=ug(l,{relative:h.relative}),p=ro(),T=_.useContext(q0),{navigator:v,basename:w}=_.useContext(no),E=T!=null&&Z6(f)&&c===!0,y=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,x=p.pathname,C=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;s||(x=x.toLowerCase(),C=C?C.toLowerCase():null,y=y.toLowerCase()),C&&w&&(C=Gi(C,w)||C);const D=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let V=x===y||!o&&x.startsWith(y)&&x.charAt(D)==="/",S=C!=null&&(C===y||!o&&C.startsWith(y)&&C.charAt(y.length)==="/"),I={isActive:V,isPending:S,isTransitioning:E},R=V?r:void 0,P;typeof i=="function"?P=i(I):P=[i,V?"active":null,S?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(I):a;return _.createElement(Jp,Uc({},h,{"aria-current":R,className:P,ref:n,style:O,to:l,viewTransition:c}),typeof d=="function"?d(I):d)});var N_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(N_||(N_={}));var sS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(sS||(sS={}));function X6(t){let e=_.useContext(bh);return e||Ve(!1),e}function J6(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=vl(),c=ro(),d=ug(t,{relative:o});return _.useCallback(h=>{if(D6(h,n)){h.preventDefault();let f=r!==void 0?r:nl(c)===nl(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function eP(t){let e=_.useRef(P_(t)),n=_.useRef(!1),r=ro(),s=_.useMemo(()=>O6(r.search,n.current?null:e.current),[r.search]),i=vl(),o=_.useCallback((a,l)=>{const c=P_(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}function Z6(t,e){e===void 0&&(e={});let n=_.useContext(Zk);n==null&&Ve(!1);let{basename:r}=X6(N_.useViewTransitionState),s=ug(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Gi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Gi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Kp(s.pathname,o)!=null||Kp(s.pathname,i)!=null}const ez=()=>{};var iS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de=function(t,e){if(!t)throw ou(e)},ou=function(t){return new Error("Firebase Database ("+tP.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},tz=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},K0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[d],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tz(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new nz;const f=i<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const T=c<<6&192|h;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nz extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rP=function(t){const e=nP(t);return K0.encodeByteArray(e,!0)},Zp=function(t){return rP(t).replace(/\./g,"")},em=function(t){try{return K0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rz(t){return sP(void 0,t)}function sP(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!sz(n)||(t[n]=sP(t[n],e[n]));return t}function sz(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iz(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oz=()=>iz().__FIREBASE_DEFAULTS__,az=()=>{if(typeof process=="undefined"||typeof iS=="undefined")return;const t=iS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lz=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&em(t[1]);return e&&JSON.parse(e)},dg=()=>{try{return ez()||oz()||az()||lz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},iP=t=>{var e,n;return(n=(e=dg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Q0=t=>{const e=iP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},oP=()=>{var t;return(t=dg())===null||t===void 0?void 0:t.config},aP=t=>{var e;return(e=dg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch(e){return!1}}function hg(t){return A(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Zp(JSON.stringify(n)),Zp(JSON.stringify(o)),""].join(".")}const yd={};function cz(){const t={prod:[],emulator:[]};for(const e of Object.keys(yd))yd[e]?t.emulator.push(e):t.prod.push(e);return t}function uz(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let oS=!1;function fg(t,e){if(typeof window=="undefined"||typeof document=="undefined"||!ui(window.location.host)||yd[t]===e||yd[t]||oS)return;yd[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=cz().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{oS=!0,o()},f}function d(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=uz(r),p=n("text"),T=document.getElementById(p)||document.createElement("span"),v=n("learnmore"),w=document.getElementById(v)||document.createElement("a"),E=n("preprendIcon"),y=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const x=f.element;a(x),d(w,v);const C=c();l(y,E),x.append(y,T,w,C),document.body.appendChild(x)}i?(T.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function J0(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wn())}function dz(){var t;const e=(t=dg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(n){return!1}}function hz(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function lP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fz(){const t=Wn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function uP(){return tP.NODE_ADMIN===!0}function pz(){return!dz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dP(){try{return typeof indexedDB=="object"}catch(t){return!1}}function hP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function mz(){return!(typeof navigator=="undefined"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gz="FirebaseError";class rs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gz,Object.setPrototypeOf(this,rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_l.prototype.create)}}class _l{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?yz(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new rs(s,a,r)}}function yz(t,e){return t.replace(vz,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const vz=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t){return JSON.parse(t)}function En(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=th(em(i[0])||""),n=th(em(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch(i){}return{header:e,claims:n,data:r,signature:s}},_z=function(t){const e=fP(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},wz=function(t){const e=fP(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zc(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function D_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function tm(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Ki(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(aS(i)&&aS(o)){if(!Ki(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function aS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ed(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function td(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,d;for(let h=0;h<80;h++){h<40?h<20?(c=a^i&(o^a),d=1518500249):(c=i^o^a,d=1859775393):h<60?(c=i&o|a&(i|o),d=2400959708):(c=i^o^a,d=3395469782);const f=(s<<5|s>>>27)+c+l+d+r[h]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function Tz(t,e){const n=new bz(t,e);return n.subscribe.bind(n)}class bz{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xz(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=zy),s.error===void 0&&(s.error=zy),s.complete===void 0&&(s.complete=zy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch(o){}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xz(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function zy(){}function Sz(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,de(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},pg=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz=1e3,Rz=2,Az=4*60*60*1e3,kz=.5;function lS(t,e=Cz,n=Rz){const r=e*Math.pow(n,t),s=Math.round(kz*r*(Math.random()-.5)*2);return Math.min(Az,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t){return t&&t._delegate?t._delegate:t}class Lr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Y0;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch(s){}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Dz(e))try{this.getOrInitializeService({instanceIdentifier:Ra})}catch(n){}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch(i){}}}}clearInstance(e=Ra){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return A(this,null,function*(){const e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ra){return this.instances.has(e)}getOptions(e=Ra){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch(i){}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Nz(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(s){}return r||null}normalizeInstanceIdentifier(e=Ra){return this.component?this.component.multipleInstances?e:Ra:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Nz(t){return t===Ra?void 0:t}function Dz(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Pz(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Be||(Be={}));const Lz={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},Mz=Be.INFO,Fz={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},Vz=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Fz[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xh{constructor(e){this.name=e,this._logLevel=Mz,this._logHandler=Vz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Lz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const jz=(t,e)=>e.some(n=>t instanceof n);let cS,uS;function Uz(){return cS||(cS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zz(){return uS||(uS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pP=new WeakMap,O_=new WeakMap,mP=new WeakMap,By=new WeakMap,Z0=new WeakMap;function Bz(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Qo(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&pP.set(n,t)}).catch(()=>{}),Z0.set(e,t),e}function $z(t){if(O_.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});O_.set(t,e)}let L_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return O_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Wz(t){L_=t(L_)}function Hz(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($y(this),e,...n);return mP.set(r,e.sort?e.sort():[e]),Qo(r)}:zz().includes(t)?function(...e){return t.apply($y(this),e),Qo(pP.get(this))}:function(...e){return Qo(t.apply($y(this),e))}}function qz(t){return typeof t=="function"?Hz(t):(t instanceof IDBTransaction&&$z(t),jz(t,Uz())?new Proxy(t,L_):t)}function Qo(t){if(t instanceof IDBRequest)return Bz(t);if(By.has(t))return By.get(t);const e=qz(t);return e!==t&&(By.set(t,e),Z0.set(e,t)),e}const $y=t=>Z0.get(t);function gP(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Qo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Qo(o.result),l.oldVersion,l.newVersion,Qo(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Gz=["get","getKey","getAll","getAllKeys","count"],Kz=["put","add","delete","clear"],Wy=new Map;function dS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wy.get(e))return Wy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Kz.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Gz.includes(n)))return;const i=function(o,...a){return A(this,null,function*(){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(yield Promise.all([c[n](...a),s&&l.done]))[0]})};return Wy.set(e,i),i}Wz(t=>W(M({},t),{get:(e,n,r)=>dS(e,n)||t.get(e,n,r),has:(e,n)=>!!dS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Yz(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Yz(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const M_="@firebase/app",hS="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new xh("@firebase/app"),Xz="@firebase/app-compat",Jz="@firebase/analytics-compat",Zz="@firebase/analytics",e9="@firebase/app-check-compat",t9="@firebase/app-check",n9="@firebase/auth",r9="@firebase/auth-compat",s9="@firebase/database",i9="@firebase/data-connect",o9="@firebase/database-compat",a9="@firebase/functions",l9="@firebase/functions-compat",c9="@firebase/installations",u9="@firebase/installations-compat",d9="@firebase/messaging",h9="@firebase/messaging-compat",f9="@firebase/performance",p9="@firebase/performance-compat",m9="@firebase/remote-config",g9="@firebase/remote-config-compat",y9="@firebase/storage",v9="@firebase/storage-compat",_9="@firebase/firestore",w9="@firebase/ai",E9="@firebase/firestore-compat",T9="firebase",b9="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="[DEFAULT]",x9={[M_]:"fire-core",[Xz]:"fire-core-compat",[Zz]:"fire-analytics",[Jz]:"fire-analytics-compat",[t9]:"fire-app-check",[e9]:"fire-app-check-compat",[n9]:"fire-auth",[r9]:"fire-auth-compat",[s9]:"fire-rtdb",[i9]:"fire-data-connect",[o9]:"fire-rtdb-compat",[a9]:"fire-fn",[l9]:"fire-fn-compat",[c9]:"fire-iid",[u9]:"fire-iid-compat",[d9]:"fire-fcm",[h9]:"fire-fcm-compat",[f9]:"fire-perf",[p9]:"fire-perf-compat",[m9]:"fire-rc",[g9]:"fire-rc-compat",[y9]:"fire-gcs",[v9]:"fire-gcs-compat",[_9]:"fire-fst",[E9]:"fire-fst-compat",[w9]:"fire-vertex","fire-js":"fire-js",[T9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh=new Map,S9=new Map,V_=new Map;function fS(t,e){try{t.container.addComponent(e)}catch(n){Qi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function es(t){const e=t.name;if(V_.has(e))return Qi.debug(`There were multiple attempts to register component ${e}.`),!1;V_.set(e,t);for(const n of nh.values())fS(n,t);for(const n of S9.values())fS(n,t);return!0}function io(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yo=new _l("app","Firebase",I9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=b9;function yP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:F_,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Yo.create("bad-app-name",{appName:String(s)});if(n||(n=oP()),!n)throw Yo.create("no-options");const i=nh.get(s);if(i){if(Ki(n,i.options)&&Ki(r,i.config))return i;throw Yo.create("duplicate-app",{appName:s})}const o=new Oz(s);for(const l of V_.values())o.addComponent(l);const a=new C9(n,r,o);return nh.set(s,a),a}function Sh(t=F_){const e=nh.get(t);if(!e&&t===F_&&oP())return yP();if(!e)throw Yo.create("no-app",{appName:t});return e}function pS(){return Array.from(nh.values())}function zn(t,e,n){var r;let s=(r=x9[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qi.warn(a.join(" "));return}es(new Lr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9="firebase-heartbeat-database",A9=1,rh="firebase-heartbeat-store";let Hy=null;function vP(){return Hy||(Hy=gP(R9,A9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(rh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yo.create("idb-open",{originalErrorMessage:t.message})})),Hy}function k9(t){return A(this,null,function*(){try{const n=(yield vP()).transaction(rh),r=yield n.objectStore(rh).get(_P(t));return yield n.done,r}catch(e){if(e instanceof rs)Qi.warn(e.message);else{const n=Yo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qi.warn(n.message)}}})}function mS(t,e){return A(this,null,function*(){try{const r=(yield vP()).transaction(rh,"readwrite");yield r.objectStore(rh).put(e,_P(t)),yield r.done}catch(n){if(n instanceof rs)Qi.warn(n.message);else{const r=Yo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qi.warn(r.message)}}})}function _P(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9=1024,N9=30;class D9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new L9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return A(this,null,function*(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=gS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>N9){const o=M9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Qi.warn(r)}})}getHeartbeatsHeader(){return A(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gS(),{heartbeatsToSend:r,unsentEntries:s}=O9(this._heartbeatsCache.heartbeats),i=Zp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Qi.warn(n),""}})}}function gS(){return new Date().toISOString().substring(0,10)}function O9(t,e=P9){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),yS(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),yS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class L9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return A(this,null,function*(){return dP()?hP().then(()=>!0).catch(()=>!1):!1})}read(){return A(this,null,function*(){if(yield this._canUseIndexedDBPromise){const n=yield k9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return A(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){const s=yield this.read();return mS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return A(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){const s=yield this.read();return mS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return})}}function yS(t){return Zp(JSON.stringify({version:2,heartbeats:t})).length}function M9(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F9(t){es(new Lr("platform-logger",e=>new Qz(e),"PRIVATE")),es(new Lr("heartbeat",e=>new D9(e),"PRIVATE")),zn(M_,hS,t),zn(M_,hS,"esm2017"),zn("fire-js","")}F9("");var Ys=function(){return Ys=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ys.apply(this,arguments)};function Ih(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function V9(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function wP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const j9=wP,EP=new _l("auth","Firebase",wP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=new xh("@firebase/auth");function U9(t,...e){nm.logLevel<=Be.WARN&&nm.warn(`Auth (${va}): ${t}`,...e)}function ip(t,...e){nm.logLevel<=Be.ERROR&&nm.error(`Auth (${va}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t,...e){throw tE(t,...e)}function Is(t,...e){return tE(t,...e)}function eE(t,e,n){const r=Object.assign(Object.assign({},j9()),{[e]:n});return new _l("auth","Firebase",r).create(e,{appName:t.name})}function Li(t){return eE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function z9(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ts(t,"argument-error"),eE(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tE(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return EP.create(t,...e)}function xe(t,e,...n){if(!t)throw tE(e,...n)}function ki(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ip(e),new Error(e)}function Yi(t,e){t||ki(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function B9(){return vS()==="http:"||vS()==="https:"}function vS(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $9(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B9()||lP()||"connection"in navigator)?navigator.onLine:!0}function W9(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yi(n>e,"Short delay should be less than long delay!"),this.isMobile=J0()||cP()}get(){return $9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(t,e){Yi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],G9=new Ch(3e4,6e4);function di(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Ms(i,o,a,l){return A(this,arguments,function*(t,e,n,r,s={}){return bP(t,s,()=>A(this,null,function*(){let c={},d={};r&&(e==="GET"?d=r:c={body:JSON.stringify(r)});const h=au(Object.assign({key:t.config.apiKey},d)).slice(1),f=yield t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:f},c);return hz()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&ui(t.emulatorConfig.host)&&(p.credentials="include"),TP.fetch()(yield xP(t,t.config.apiHost,n,h),p)}))})}function bP(t,e,n){return A(this,null,function*(){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},H9),e);try{const s=new Q9(t),i=yield Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=yield i.json();if("needConfirmation"in o)throw Nf(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Nf(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Nf(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw eE(t,d,c);ts(t,d)}}catch(s){if(s instanceof rs)throw s;ts(t,"network-request-failed",{message:String(s)})}})}function Rh(i,o,a,l){return A(this,arguments,function*(t,e,n,r,s={}){const c=yield Ms(t,e,n,r,s);return"mfaPendingCredential"in c&&ts(t,"multi-factor-auth-required",{_serverResponse:c}),c})}function xP(t,e,n,r){return A(this,null,function*(){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?nE(t.config,s):`${t.config.apiScheme}://${s}`;return q9.includes(n)&&(yield i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o})}function K9(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Q9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Is(this.auth,"network-request-failed")),G9.get())})}}function Nf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Is(t,e,r);return s.customData._tokenResponse=n,s}function _S(t){return t!==void 0&&t.enterprise!==void 0}class Y9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return K9(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}function X9(t,e){return A(this,null,function*(){return Ms(t,"GET","/v2/recaptchaConfig",di(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J9(t,e){return A(this,null,function*(){return Ms(t,"POST","/v1/accounts:delete",e)})}function rm(t,e){return A(this,null,function*(){return Ms(t,"POST","/v1/accounts:lookup",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function Z9(t,e=!1){return A(this,null,function*(){const n=st(t),r=yield n.getIdToken(e),s=rE(r);xe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:vd(qy(s.auth_time)),issuedAtTime:vd(qy(s.iat)),expirationTime:vd(qy(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}})}function qy(t){return Number(t)*1e3}function rE(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ip("JWT malformed, contained fewer than 3 sections"),null;try{const s=em(n);return s?JSON.parse(s):(ip("Failed to decode base64 JWT payload"),null)}catch(s){return ip("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function wS(t){const e=rE(t);return xe(e,"internal-error"),xe(typeof e.exp!="undefined","internal-error"),xe(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(t,e,n=!1){return A(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof rs&&eB(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function eB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(()=>A(this,null,function*(){yield this.iteration()}),n)}iteration(){return A(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vd(this.lastLoginAt),this.creationTime=vd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t){return A(this,null,function*(){var e;const n=t.auth,r=yield t.getIdToken(),s=yield Bc(t,rm(n,{idToken:r}));xe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?SP(i.providerUserInfo):[],a=rB(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new U_(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)})}function nB(t){return A(this,null,function*(){const e=st(t);yield sm(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function rB(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function SP(t){return t.map(e=>{var{providerId:n}=e,r=Ih(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sB(t,e){return A(this,null,function*(){const n=yield bP(t,{},()=>A(this,null,function*(){const r=au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=yield xP(t,s,"/v1/token",`key=${i}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&ui(t.emulatorConfig.host)&&(l.credentials="include"),TP.fetch()(o,l)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function iB(t,e){return A(this,null,function*(){return Ms(t,"POST","/v2/accounts:revokeToken",di(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken!="undefined","internal-error"),xe(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):wS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=wS(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return A(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return A(this,null,function*(){const{accessToken:r,refreshToken:s,expiresIn:i}=yield sB(e,n);this.updateTokensAndExpiration(r,s,Number(i))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new fc;return r&&(xe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(xe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(xe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fc,this.toJSON())}_performRefresh(){return ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(t,e){xe(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class Es{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Ih(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new U_(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return A(this,null,function*(){const n=yield Bc(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Z9(this,e)}reload(){return nB(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Es(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return A(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield sm(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return A(this,null,function*(){if(Zn(this.auth.app))return Promise.reject(Li(this.auth));const e=yield this.getIdToken();return yield Bc(this,J9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:x,emailVerified:C,isAnonymous:D,providerData:V,stsTokenManager:S}=n;xe(x&&S,e,"internal-error");const I=fc.fromJSON(this.name,S);xe(typeof x=="string",e,"internal-error"),_o(h,e.name),_o(f,e.name),xe(typeof C=="boolean",e,"internal-error"),xe(typeof D=="boolean",e,"internal-error"),_o(p,e.name),_o(T,e.name),_o(v,e.name),_o(w,e.name),_o(E,e.name),_o(y,e.name);const R=new Es({uid:x,auth:e,email:f,emailVerified:C,displayName:h,isAnonymous:D,photoURL:T,phoneNumber:p,tenantId:v,stsTokenManager:I,createdAt:E,lastLoginAt:y});return V&&Array.isArray(V)&&(R.providerData=V.map(P=>Object.assign({},P))),w&&(R._redirectEventId=w),R}static _fromIdTokenResponse(e,n,r=!1){return A(this,null,function*(){const s=new fc;s.updateFromServerResponse(n);const i=new Es({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return yield sm(i),i})}static _fromGetAccountInfoResponse(e,n,r){return A(this,null,function*(){const s=n.users[0];xe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?SP(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new fc;a.updateFromIdToken(r);const l=new Es({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new U_(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=new Map;function Pi(t){Yi(t instanceof Function,"Expected a class definition");let e=ES.get(t);return e?(Yi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ES.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return A(this,null,function*(){return!0})}_set(e,n){return A(this,null,function*(){this.storage[e]=n})}_get(e){return A(this,null,function*(){const n=this.storage[e];return n===void 0?null:n})}_remove(e){return A(this,null,function*(){delete this.storage[e]})}_addListener(e,n){}_removeListener(e,n){}}IP.type="NONE";const TS=IP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t,e,n){return`firebase:${t}:${e}:${n}`}class pc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=op(this.userKey,s.apiKey,i),this.fullPersistenceKey=op("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return A(this,null,function*(){const e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=yield rm(this.auth,{idToken:e}).catch(()=>{});return n?Es._fromGetAccountInfoResponse(this.auth,n,e):null}return Es._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return A(this,null,function*(){if(this.persistence===e)return;const n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return A(this,null,function*(){if(!n.length)return new pc(Pi(TS),e,r);const s=(yield Promise.all(n.map(c=>A(this,null,function*(){if(yield c._isAvailable())return c})))).filter(c=>c);let i=s[0]||Pi(TS);const o=op(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=yield c._get(o);if(d){let h;if(typeof d=="string"){const f=yield rm(e,{idToken:d}).catch(()=>{});if(!f)break;h=yield Es._fromGetAccountInfoResponse(e,f,d)}else h=Es._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch(d){}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new pc(i,e,r):(i=l[0],a&&(yield i._set(o,a.toJSON())),yield Promise.all(n.map(c=>A(this,null,function*(){if(c!==i)try{yield c._remove(o)}catch(d){}}))),new pc(i,e,r))})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NP(e))return"Blackberry";if(DP(e))return"Webos";if(RP(e))return"Safari";if((e.includes("chrome/")||AP(e))&&!e.includes("edge/"))return"Chrome";if(PP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function CP(t=Wn()){return/firefox\//i.test(t)}function RP(t=Wn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AP(t=Wn()){return/crios\//i.test(t)}function kP(t=Wn()){return/iemobile/i.test(t)}function PP(t=Wn()){return/android/i.test(t)}function NP(t=Wn()){return/blackberry/i.test(t)}function DP(t=Wn()){return/webos/i.test(t)}function sE(t=Wn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function oB(t=Wn()){var e;return sE(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function aB(){return fz()&&document.documentMode===10}function OP(t=Wn()){return sE(t)||PP(t)||DP(t)||NP(t)||/windows phone/i.test(t)||kP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t,e=[]){let n;switch(t){case"Browser":n=bS(Wn());break;case"Worker":n=`${bS(Wn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${va}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}runMiddleware(e){return A(this,null,function*(){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}})}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cB(n){return A(this,arguments,function*(t,e={}){return Ms(t,"GET","/v2/passwordPolicy",di(t,e))})}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=6;class dB{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:uB,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xS(this),this.idTokenSubscription=new xS(this),this.beforeStateQueue=new lB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pi(n)),this._initializationPromise=this.queue(()=>A(this,null,function*(){var r,s,i;if(!this._deleted&&(this.persistenceManager=yield pc.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch(o){}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return A(this,null,function*(){if(this._deleted)return;const e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return A(this,null,function*(){try{const n=yield rm(this,{idToken:e}),r=yield Es._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return A(this,null,function*(){var n;if(Zn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=yield this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)})}tryRedirectSignIn(e){return A(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return A(this,null,function*(){try{yield sm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=W9()}_delete(){return A(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return A(this,null,function*(){if(Zn(this.app))return Promise.reject(Li(this));const n=e?st(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return A(this,null,function*(){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>A(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return A(this,null,function*(){return Zn(this.app)?Promise.reject(Li(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Zn(this.app)?Promise.reject(Li(this)):this.queue(()=>A(this,null,function*(){yield this.assertedPersistence.setPersistence(Pi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return A(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return A(this,null,function*(){const e=yield cB(this),n=new dB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _l("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return A(this,null,function*(){if(this.currentUser){const n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield iB(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return A(this,null,function*(){const r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return A(this,null,function*(){if(!this.redirectPersistenceManager){const n=e&&Pi(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=yield pc.create(this,[Pi(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return A(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>A(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return A(this,null,function*(){if(e===this.currentUser)return this.queue(()=>A(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return A(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return A(this,null,function*(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);const s=yield this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n})}_getAppCheckToken(){return A(this,null,function*(){var e;if(Zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n!=null&&n.error&&U9(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token})}}function oo(t){return st(t)}class xS{constructor(e){this.auth=e,this.observer=null,this.addObserver=Tz(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mg={loadJS(){return A(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fB(t){mg=t}function MP(t){return mg.loadJS(t)}function pB(){return mg.recaptchaEnterpriseScript}function mB(){return mg.gapiScript}function gB(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class yB{constructor(){this.enterprise=new vB}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class vB{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const _B="recaptcha-enterprise",FP="NO_RECAPTCHA";class wB{constructor(e){this.type=_B,this.auth=oo(e)}verify(e="verify",n=!1){return A(this,null,function*(){function r(i){return A(this,null,function*(){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise((o,a)=>A(this,null,function*(){X9(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new Y9(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})}))})}function s(i,o,a){const l=window.grecaptcha;_S(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(FP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yB().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&_S(window.grecaptcha))s(a,i,o);else{if(typeof window=="undefined"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=pB();l.length!==0&&(l+=a),MP(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})})}}function SS(t,e,n,r=!1,s=!1){return A(this,null,function*(){const i=new wB(t);let o;if(s)o=FP;else try{o=yield i.verify(n)}catch(l){o=yield i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function im(t,e,n,r,s){return A(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=yield SS(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(o=>A(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=yield SS(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)}))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EB(t,e){const n=io(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ki(i,e!=null?e:{}))return s;ts(s,"already-initialized")}return n.initialize({options:e})}function TB(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bB(t,e,n){const r=oo(t);xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=VP(e),{host:o,port:a}=xB(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xe(Ki(c,r.config.emulator)&&Ki(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,ui(o)?(hg(`${i}//${o}${l}`),fg("Auth",!0)):SB()}function VP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xB(t){const e=VP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:IS(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:IS(o)}}}function IS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function SB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ki("not implemented")}_getIdTokenResponse(e){return ki("not implemented")}_linkToIdToken(e,n){return ki("not implemented")}_getReauthenticationResolver(e){return ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IB(t,e){return A(this,null,function*(){return Ms(t,"POST","/v1/accounts:resetPassword",di(t,e))})}function CB(t,e){return A(this,null,function*(){return Ms(t,"POST","/v1/accounts:signUp",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RB(t,e){return A(this,null,function*(){return Rh(t,"POST","/v1/accounts:signInWithPassword",di(t,e))})}function jP(t,e){return A(this,null,function*(){return Ms(t,"POST","/v1/accounts:sendOobCode",di(t,e))})}function AB(t,e){return A(this,null,function*(){return jP(t,e)})}function kB(t,e){return A(this,null,function*(){return jP(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PB(t,e){return A(this,null,function*(){return Rh(t,"POST","/v1/accounts:signInWithEmailLink",di(t,e))})}function NB(t,e){return A(this,null,function*(){return Rh(t,"POST","/v1/accounts:signInWithEmailLink",di(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends iE{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new sh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new sh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return A(this,null,function*(){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(e,n,"signInWithPassword",RB);case"emailLink":return PB(e,{email:this._email,oobCode:this._password});default:ts(e,"internal-error")}})}_linkToIdToken(e,n){return A(this,null,function*(){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(e,r,"signUpPassword",CB);case"emailLink":return NB(e,{idToken:n,email:this._email,oobCode:this._password});default:ts(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(t,e){return A(this,null,function*(){return Rh(t,"POST","/v1/accounts:signInWithIdp",di(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB="http://localhost";class rl extends iE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new rl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ts("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Ih(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new rl(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return mc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,mc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,mc(e,n)}buildRequest(){const e={requestUri:DB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=au(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LB(t){const e=ed(td(t)).link,n=e?ed(td(e)).deep_link_id:null,r=ed(td(t)).deep_link_id;return(r?ed(td(r)).link:null)||r||n||e||t}class oE{constructor(e){var n,r,s,i,o,a;const l=ed(td(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=OB((s=l.mode)!==null&&s!==void 0?s:null);xe(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=LB(e);try{return new oE(n)}catch(r){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(){this.providerId=lu.PROVIDER_ID}static credential(e,n){return sh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=oE.parseLink(n);return xe(r,"argument-error"),sh._fromEmailAndCode(e,r.code,r.tenantId)}}lu.PROVIDER_ID="password";lu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";lu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends aE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co extends Ah{constructor(){super("facebook.com")}static credential(e){return rl._fromParams({providerId:Co.PROVIDER_ID,signInMethod:Co.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Co.credentialFromTaggedObject(e)}static credentialFromError(e){return Co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Co.credential(e.oauthAccessToken)}catch(n){return null}}}Co.FACEBOOK_SIGN_IN_METHOD="facebook.com";Co.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends Ah{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return rl._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ci.credential(n,r)}catch(s){return null}}}Ci.GOOGLE_SIGN_IN_METHOD="google.com";Ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends Ah{constructor(){super("github.com")}static credential(e){return rl._fromParams({providerId:Ro.PROVIDER_ID,signInMethod:Ro.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ro.credentialFromTaggedObject(e)}static credentialFromError(e){return Ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ro.credential(e.oauthAccessToken)}catch(n){return null}}}Ro.GITHUB_SIGN_IN_METHOD="github.com";Ro.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends Ah{constructor(){super("twitter.com")}static credential(e,n){return rl._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ao.credentialFromTaggedObject(e)}static credentialFromError(e){return Ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ao.credential(n,r)}catch(s){return null}}}Ao.TWITTER_SIGN_IN_METHOD="twitter.com";Ao.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MB(t,e){return A(this,null,function*(){return Rh(t,"POST","/v1/accounts:signUp",di(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,s=!1){return A(this,null,function*(){const i=yield Es._fromIdTokenResponse(e,r,s),o=CS(r);return new sl({user:i,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return A(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);const s=CS(r);return new sl({user:e,providerId:s,_tokenResponse:r,operationType:n})})}}function CS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om extends rs{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,om.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new om(e,n,r,s)}}function UP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?om._fromErrorAndOperation(t,i,e,r):i})}function FB(t,e,n=!1){return A(this,null,function*(){const r=yield Bc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return sl._forOperation(t,"link",r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VB(t,e,n=!1){return A(this,null,function*(){const{auth:r}=t;if(Zn(r.app))return Promise.reject(Li(r));const s="reauthenticate";try{const i=yield Bc(t,UP(r,s,e,t),n);xe(i.idToken,r,"internal-error");const o=rE(i.idToken);xe(o,r,"internal-error");const{sub:a}=o;return xe(t.uid===a,r,"user-mismatch"),sl._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ts(r,"user-mismatch"),i}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(t,e,n=!1){return A(this,null,function*(){if(Zn(t.app))return Promise.reject(Li(t));const r="signIn",s=yield UP(t,r,e),i=yield sl._fromIdTokenResponse(t,r,s);return n||(yield t._updateCurrentUser(i.user)),i})}function jB(t,e){return A(this,null,function*(){return zP(oo(t),e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(t){return A(this,null,function*(){const e=oo(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function UB(t,e,n){return A(this,null,function*(){const r=oo(t);yield im(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",kB)})}function zB(t,e,n){return A(this,null,function*(){yield IB(st(t),{oobCode:e,newPassword:n}).catch(r=>A(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&lE(t),r}))})}function BB(t,e,n){return A(this,null,function*(){if(Zn(t.app))return Promise.reject(Li(t));const r=oo(t),o=yield im(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",MB).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&lE(t),l}),a=yield sl._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function $B(t,e,n){return Zn(t.app)?Promise.reject(Li(t)):jB(st(t),lu.credential(e,n)).catch(r=>A(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&lE(t),r}))}function BP(t,e){return A(this,null,function*(){const n=st(t),s={requestType:"VERIFY_EMAIL",idToken:yield t.getIdToken()},{email:i}=yield AB(n.auth,s);i!==t.email&&(yield t.reload())})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WB(t,e){return A(this,null,function*(){return Ms(t,"POST","/v1/accounts:update",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(r,s){return A(this,arguments,function*(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=st(t),a={idToken:yield i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=yield Bc(i,WB(i.auth,a));i.displayName=l.displayName||null,i.photoURL=l.photoUrl||null;const c=i.providerData.find(({providerId:d})=>d==="password");c&&(c.displayName=i.displayName,c.photoURL=i.photoURL),yield i._updateTokensIfNecessary(l)})}function HB(t,e,n,r){return st(t).onIdTokenChanged(e,n,r)}function qB(t,e,n){return st(t).beforeAuthStateChanged(e,n)}function WP(t,e,n,r){return st(t).onAuthStateChanged(e,n,r)}function Cs(t){return st(t).signOut()}function GB(t){return A(this,null,function*(){return st(t).delete()})}const am="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(am,"1"),this.storage.removeItem(am),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB=1e3,QB=10;class gc extends HP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);aB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,QB):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},KB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(e,n){return A(this,null,function*(){yield Sa(gc.prototype,this,"_set").call(this,e,n),this.localCache[e]=JSON.stringify(n)})}_get(e){return A(this,null,function*(){const n=yield Sa(gc.prototype,this,"_get").call(this,e);return this.localCache[e]=JSON.stringify(n),n})}_remove(e){return A(this,null,function*(){yield Sa(gc.prototype,this,"_remove").call(this,e),delete this.localCache[e]})}}gc.type="LOCAL";const YB=gc;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP extends HP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qP.type="SESSION";const GP=qP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XB(t){return Promise.all(t.map(e=>A(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new gg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){return A(this,null,function*(){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(c=>A(this,null,function*(){return c(n.origin,i)})),l=yield XB(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return A(this,null,function*(){const s=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=cE("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(){return window}function ZB(t){ni().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(){return typeof ni().WorkerGlobalScope!="undefined"&&typeof ni().importScripts=="function"}function e$(){return A(this,null,function*(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(t){return null}})}function t$(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function n$(){return KP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="firebaseLocalStorageDb",r$=1,lm="firebaseLocalStorage",YP="fbase_key";class kh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yg(t,e){return t.transaction([lm],e?"readwrite":"readonly").objectStore(lm)}function s$(){const t=indexedDB.deleteDatabase(QP);return new kh(t).toPromise()}function z_(){const t=indexedDB.open(QP,r$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(lm,{keyPath:YP})}catch(s){n(s)}}),t.addEventListener("success",()=>A(this,null,function*(){const r=t.result;r.objectStoreNames.contains(lm)?e(r):(r.close(),yield s$(),e(yield z_()))}))})}function RS(t,e,n){return A(this,null,function*(){const r=yg(t,!0).put({[YP]:e,value:n});return new kh(r).toPromise()})}function i$(t,e){return A(this,null,function*(){const n=yg(t,!1).get(e),r=yield new kh(n).toPromise();return r===void 0?null:r.value})}function AS(t,e){const n=yg(t,!0).delete(e);return new kh(n).toPromise()}const o$=800,a$=3;class XP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return A(this,null,function*(){return this.db?this.db:(this.db=yield z_(),this.db)})}_withRetries(e){return A(this,null,function*(){let n=0;for(;;)try{const r=yield this._openDb();return yield e(r)}catch(r){if(n++>a$)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return A(this,null,function*(){return KP()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return A(this,null,function*(){this.receiver=gg._getInstance(n$()),this.receiver._subscribe("keyChanged",(e,n)=>A(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(n.key)}})),this.receiver._subscribe("ping",(e,n)=>A(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return A(this,null,function*(){var e,n;if(this.activeServiceWorker=yield e$(),!this.activeServiceWorker)return;this.sender=new JB(this.activeServiceWorker);const r=yield this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(e){return A(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||t$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(n){}})}_isAvailable(){return A(this,null,function*(){try{if(!indexedDB)return!1;const e=yield z_();return yield RS(e,am,"1"),yield AS(e,am),!0}catch(e){}return!1})}_withPendingWrite(e){return A(this,null,function*(){this.pendingWrites++;try{yield e()}finally{this.pendingWrites--}})}_set(e,n){return A(this,null,function*(){return this._withPendingWrite(()=>A(this,null,function*(){return yield this._withRetries(r=>RS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)}))})}_get(e){return A(this,null,function*(){const n=yield this._withRetries(r=>i$(r,e));return this.localCache[e]=n,n})}_remove(e){return A(this,null,function*(){return this._withPendingWrite(()=>A(this,null,function*(){return yield this._withRetries(n=>AS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)}))})}_poll(){return A(this,null,function*(){const e=yield this._withRetries(s=>{const i=yg(s,!1).getAll();return new kh(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n})}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>A(this,null,function*(){return this._poll()}),o$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XP.type="LOCAL";const l$=XP;new Ch(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(t,e){return e?Pi(e):(xe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE extends iE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return mc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return mc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function c$(t){return zP(t.auth,new uE(t),t.bypassAuthState)}function u$(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),VB(n,new uE(t),t.bypassAuthState)}function d$(t){return A(this,null,function*(){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),FB(n,new uE(t),t.bypassAuthState)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>A(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return A(this,null,function*(){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(l))}catch(c){this.reject(c)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return c$;case"linkViaPopup":case"linkViaRedirect":return d$;case"reauthViaPopup":case"reauthViaRedirect":return u$;default:ts(this.auth,"internal-error")}}resolve(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h$=new Ch(2e3,1e4);function f$(t,e,n){return A(this,null,function*(){if(Zn(t.app))return Promise.reject(Is(t,"operation-not-supported-in-this-environment"));const r=oo(t);z9(t,e,aE);const s=JP(r,n);return new Ma(r,"signInViaPopup",e,s).executeNotNull()})}class Ma extends ZP{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ma.currentPopupAction&&Ma.currentPopupAction.cancel(),Ma.currentPopupAction=this}executeNotNull(){return A(this,null,function*(){const e=yield this.execute();return xe(e,this.auth,"internal-error"),e})}onExecution(){return A(this,null,function*(){Yi(this.filter.length===1,"Popup operations only handle one event");const e=cE();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Is(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Is(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Is(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,h$.get())};e()}}Ma.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p$="pendingRedirect",ap=new Map;class _d extends ZP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return A(this,null,function*(){let e=ap.get(this.auth._key());if(!e){try{const r=(yield m$(this.resolver,this.auth))?yield Sa(_d.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ap.set(this.auth._key(),e)}return this.bypassAuthState||ap.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return A(this,null,function*(){if(e.type==="signInViaRedirect")return Sa(_d.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Sa(_d.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return A(this,null,function*(){})}cleanUp(){}}function m$(t,e){return A(this,null,function*(){const n=v$(e),r=y$(t);if(!(yield r._isAvailable()))return!1;const s=(yield r._get(n))==="true";return yield r._remove(n),s})}function g$(t,e){ap.set(t._key(),e)}function y$(t){return Pi(t._redirectPersistence)}function v$(t){return op(p$,t.config.apiKey,t.name)}function _$(t,e,n=!1){return A(this,null,function*(){if(Zn(t.app))return Promise.reject(Li(t));const r=oo(t),s=JP(r,e),o=yield new _d(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w$=10*60*1e3;class E${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!T$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!eN(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Is(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=w$&&this.cachedEventUids.clear(),this.cachedEventUids.has(kS(e))}saveEventToCache(e){this.cachedEventUids.add(kS(e)),this.lastProcessedEventTime=Date.now()}}function kS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function eN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function T$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b$(n){return A(this,arguments,function*(t,e={}){return Ms(t,"GET","/v1/projects",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S$=/^https?/;function I$(t){return A(this,null,function*(){if(t.config.emulator)return;const{authorizedDomains:e}=yield b$(t);for(const n of e)try{if(C$(n))return}catch(r){}ts(t,"unauthorized-domain")})}function C$(t){const e=j_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!S$.test(n))return!1;if(x$.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R$=new Ch(3e4,6e4);function PS(){const t=ni().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function A$(t){return new Promise((e,n)=>{var r,s,i;function o(){PS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PS(),n(Is(t,"network-request-failed"))},timeout:R$.get()})}if(!((s=(r=ni().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ni().gapi)===null||i===void 0)&&i.load)o();else{const a=gB("iframefcb");return ni()[a]=()=>{gapi.load?o():n(Is(t,"network-request-failed"))},MP(`${mB()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw lp=null,e})}let lp=null;function k$(t){return lp=lp||A$(t),lp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P$=new Ch(5e3,15e3),N$="__/auth/iframe",D$="emulator/auth/iframe",O$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M$(t){const e=t.config;xe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?nE(e,D$):`https://${t.config.authDomain}/${N$}`,r={apiKey:e.apiKey,appName:t.name,v:va},s=L$.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${au(r).slice(1)}`}function F$(t){return A(this,null,function*(){const e=yield k$(t),n=ni().gapi;return xe(n,t,"internal-error"),e.open({where:document.body,url:M$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:O$,dontclear:!0},r=>new Promise((s,i)=>A(this,null,function*(){yield r.restyle({setHideOnLeave:!1});const o=Is(t,"network-request-failed"),a=ni().setTimeout(()=>{i(o)},P$.get());function l(){ni().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})})))})}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j$=500,U$=600,z$="_blank",B$="http://localhost";class NS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function $$(t,e,n,r=j$,s=U$){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},V$),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Wn().toLowerCase();n&&(a=AP(c)?z$:n),CP(c)&&(e=e||B$,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[p,T])=>`${f}${p}=${T},`,"");if(oB(c)&&a!=="_self")return W$(e||"",a),new NS(null);const h=window.open(e||"",a,d);xe(h,t,"popup-blocked");try{h.focus()}catch(f){}return new NS(h)}function W$(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$="__/auth/handler",q$="emulator/auth/handler",G$=encodeURIComponent("fac");function DS(t,e,n,r,s,i){return A(this,null,function*(){xe(t.config.authDomain,t,"auth-domain-config-required"),xe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:va,eventId:s};if(e instanceof aE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",D_(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Ah){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=yield t._getAppCheckToken(),c=l?`#${G$}=${encodeURIComponent(l)}`:"";return`${K$(t)}?${au(a).slice(1)}${c}`})}function K$({config:t}){return t.emulator?nE(t,q$):`https://${t.authDomain}/${H$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="webStorageSupport";class Q${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GP,this._completeRedirectFn=_$,this._overrideRedirectResult=g$}_openPopup(e,n,r,s){return A(this,null,function*(){var i;Yi((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=yield DS(e,n,r,j_(),s);return $$(e,o,cE())})}_openRedirect(e,n,r,s){return A(this,null,function*(){yield this._originValidation(e);const i=yield DS(e,n,r,j_(),s);return ZB(i),new Promise(()=>{})})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Yi(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return A(this,null,function*(){const n=yield F$(e),r=new E$(e);return n.register("authEvent",s=>(xe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gy,{type:Gy},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Gy];o!==void 0&&n(!!o),ts(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=I$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return OP()||RP()||sE()}}const Y$=Q$;var OS="@firebase/auth",LS="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return A(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Z$(t){es(new Lr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;xe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LP(t)},c=new hB(r,s,i,l);return TB(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),es(new Lr("auth-internal",e=>{const n=oo(e.getProvider("auth").getImmediate());return(r=>new X$(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zn(OS,LS,J$(t)),zn(OS,LS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eW=5*60,tW=aP("authIdTokenMaxAge")||eW;let MS=null;const nW=t=>e=>A(void 0,null,function*(){const n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>tW)return;const s=n==null?void 0:n.token;MS!==s&&(MS=s,yield fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});function Ky(t=Sh()){const e=io(t,"auth");if(e.isInitialized())return e.getImmediate();const n=EB(t,{popupRedirectResolver:Y$,persistence:[l$,YB,GP]}),r=aP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=nW(i.toString());qB(n,o,()=>o(n.currentUser)),HB(n,a=>o(a))}}const s=iP("auth");return s&&bB(n,`http://${s}`),n}function rW(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}fB({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Is("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",rW().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Z$("Browser");var FS=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xo,tN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,I){function R(){}R.prototype=I.prototype,S.D=I.prototype,S.prototype=new R,S.prototype.constructor=S,S.C=function(P,O,L){for(var k=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)k[ee-2]=arguments[ee];return I.prototype[O].apply(P,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,I,R){R||(R=0);var P=Array(16);if(typeof I=="string")for(var O=0;16>O;++O)P[O]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(O=0;16>O;++O)P[O]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=S.g[0],R=S.g[1],O=S.g[2];var L=S.g[3],k=I+(L^R&(O^L))+P[0]+3614090360&4294967295;I=R+(k<<7&4294967295|k>>>25),k=L+(O^I&(R^O))+P[1]+3905402710&4294967295,L=I+(k<<12&4294967295|k>>>20),k=O+(R^L&(I^R))+P[2]+606105819&4294967295,O=L+(k<<17&4294967295|k>>>15),k=R+(I^O&(L^I))+P[3]+3250441966&4294967295,R=O+(k<<22&4294967295|k>>>10),k=I+(L^R&(O^L))+P[4]+4118548399&4294967295,I=R+(k<<7&4294967295|k>>>25),k=L+(O^I&(R^O))+P[5]+1200080426&4294967295,L=I+(k<<12&4294967295|k>>>20),k=O+(R^L&(I^R))+P[6]+2821735955&4294967295,O=L+(k<<17&4294967295|k>>>15),k=R+(I^O&(L^I))+P[7]+4249261313&4294967295,R=O+(k<<22&4294967295|k>>>10),k=I+(L^R&(O^L))+P[8]+1770035416&4294967295,I=R+(k<<7&4294967295|k>>>25),k=L+(O^I&(R^O))+P[9]+2336552879&4294967295,L=I+(k<<12&4294967295|k>>>20),k=O+(R^L&(I^R))+P[10]+4294925233&4294967295,O=L+(k<<17&4294967295|k>>>15),k=R+(I^O&(L^I))+P[11]+2304563134&4294967295,R=O+(k<<22&4294967295|k>>>10),k=I+(L^R&(O^L))+P[12]+1804603682&4294967295,I=R+(k<<7&4294967295|k>>>25),k=L+(O^I&(R^O))+P[13]+4254626195&4294967295,L=I+(k<<12&4294967295|k>>>20),k=O+(R^L&(I^R))+P[14]+2792965006&4294967295,O=L+(k<<17&4294967295|k>>>15),k=R+(I^O&(L^I))+P[15]+1236535329&4294967295,R=O+(k<<22&4294967295|k>>>10),k=I+(O^L&(R^O))+P[1]+4129170786&4294967295,I=R+(k<<5&4294967295|k>>>27),k=L+(R^O&(I^R))+P[6]+3225465664&4294967295,L=I+(k<<9&4294967295|k>>>23),k=O+(I^R&(L^I))+P[11]+643717713&4294967295,O=L+(k<<14&4294967295|k>>>18),k=R+(L^I&(O^L))+P[0]+3921069994&4294967295,R=O+(k<<20&4294967295|k>>>12),k=I+(O^L&(R^O))+P[5]+3593408605&4294967295,I=R+(k<<5&4294967295|k>>>27),k=L+(R^O&(I^R))+P[10]+38016083&4294967295,L=I+(k<<9&4294967295|k>>>23),k=O+(I^R&(L^I))+P[15]+3634488961&4294967295,O=L+(k<<14&4294967295|k>>>18),k=R+(L^I&(O^L))+P[4]+3889429448&4294967295,R=O+(k<<20&4294967295|k>>>12),k=I+(O^L&(R^O))+P[9]+568446438&4294967295,I=R+(k<<5&4294967295|k>>>27),k=L+(R^O&(I^R))+P[14]+3275163606&4294967295,L=I+(k<<9&4294967295|k>>>23),k=O+(I^R&(L^I))+P[3]+4107603335&4294967295,O=L+(k<<14&4294967295|k>>>18),k=R+(L^I&(O^L))+P[8]+1163531501&4294967295,R=O+(k<<20&4294967295|k>>>12),k=I+(O^L&(R^O))+P[13]+2850285829&4294967295,I=R+(k<<5&4294967295|k>>>27),k=L+(R^O&(I^R))+P[2]+4243563512&4294967295,L=I+(k<<9&4294967295|k>>>23),k=O+(I^R&(L^I))+P[7]+1735328473&4294967295,O=L+(k<<14&4294967295|k>>>18),k=R+(L^I&(O^L))+P[12]+2368359562&4294967295,R=O+(k<<20&4294967295|k>>>12),k=I+(R^O^L)+P[5]+4294588738&4294967295,I=R+(k<<4&4294967295|k>>>28),k=L+(I^R^O)+P[8]+2272392833&4294967295,L=I+(k<<11&4294967295|k>>>21),k=O+(L^I^R)+P[11]+1839030562&4294967295,O=L+(k<<16&4294967295|k>>>16),k=R+(O^L^I)+P[14]+4259657740&4294967295,R=O+(k<<23&4294967295|k>>>9),k=I+(R^O^L)+P[1]+2763975236&4294967295,I=R+(k<<4&4294967295|k>>>28),k=L+(I^R^O)+P[4]+1272893353&4294967295,L=I+(k<<11&4294967295|k>>>21),k=O+(L^I^R)+P[7]+4139469664&4294967295,O=L+(k<<16&4294967295|k>>>16),k=R+(O^L^I)+P[10]+3200236656&4294967295,R=O+(k<<23&4294967295|k>>>9),k=I+(R^O^L)+P[13]+681279174&4294967295,I=R+(k<<4&4294967295|k>>>28),k=L+(I^R^O)+P[0]+3936430074&4294967295,L=I+(k<<11&4294967295|k>>>21),k=O+(L^I^R)+P[3]+3572445317&4294967295,O=L+(k<<16&4294967295|k>>>16),k=R+(O^L^I)+P[6]+76029189&4294967295,R=O+(k<<23&4294967295|k>>>9),k=I+(R^O^L)+P[9]+3654602809&4294967295,I=R+(k<<4&4294967295|k>>>28),k=L+(I^R^O)+P[12]+3873151461&4294967295,L=I+(k<<11&4294967295|k>>>21),k=O+(L^I^R)+P[15]+530742520&4294967295,O=L+(k<<16&4294967295|k>>>16),k=R+(O^L^I)+P[2]+3299628645&4294967295,R=O+(k<<23&4294967295|k>>>9),k=I+(O^(R|~L))+P[0]+4096336452&4294967295,I=R+(k<<6&4294967295|k>>>26),k=L+(R^(I|~O))+P[7]+1126891415&4294967295,L=I+(k<<10&4294967295|k>>>22),k=O+(I^(L|~R))+P[14]+2878612391&4294967295,O=L+(k<<15&4294967295|k>>>17),k=R+(L^(O|~I))+P[5]+4237533241&4294967295,R=O+(k<<21&4294967295|k>>>11),k=I+(O^(R|~L))+P[12]+1700485571&4294967295,I=R+(k<<6&4294967295|k>>>26),k=L+(R^(I|~O))+P[3]+2399980690&4294967295,L=I+(k<<10&4294967295|k>>>22),k=O+(I^(L|~R))+P[10]+4293915773&4294967295,O=L+(k<<15&4294967295|k>>>17),k=R+(L^(O|~I))+P[1]+2240044497&4294967295,R=O+(k<<21&4294967295|k>>>11),k=I+(O^(R|~L))+P[8]+1873313359&4294967295,I=R+(k<<6&4294967295|k>>>26),k=L+(R^(I|~O))+P[15]+4264355552&4294967295,L=I+(k<<10&4294967295|k>>>22),k=O+(I^(L|~R))+P[6]+2734768916&4294967295,O=L+(k<<15&4294967295|k>>>17),k=R+(L^(O|~I))+P[13]+1309151649&4294967295,R=O+(k<<21&4294967295|k>>>11),k=I+(O^(R|~L))+P[4]+4149444226&4294967295,I=R+(k<<6&4294967295|k>>>26),k=L+(R^(I|~O))+P[11]+3174756917&4294967295,L=I+(k<<10&4294967295|k>>>22),k=O+(I^(L|~R))+P[2]+718787259&4294967295,O=L+(k<<15&4294967295|k>>>17),k=R+(L^(O|~I))+P[9]+3951481745&4294967295,S.g[0]=S.g[0]+I&4294967295,S.g[1]=S.g[1]+(O+(k<<21&4294967295|k>>>11))&4294967295,S.g[2]=S.g[2]+O&4294967295,S.g[3]=S.g[3]+L&4294967295}r.prototype.u=function(S,I){I===void 0&&(I=S.length);for(var R=I-this.blockSize,P=this.B,O=this.h,L=0;L<I;){if(O==0)for(;L<=R;)s(this,S,L),L+=this.blockSize;if(typeof S=="string"){for(;L<I;)if(P[O++]=S.charCodeAt(L++),O==this.blockSize){s(this,P),O=0;break}}else for(;L<I;)if(P[O++]=S[L++],O==this.blockSize){s(this,P),O=0;break}}this.h=O,this.o+=I},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var I=1;I<S.length-8;++I)S[I]=0;var R=8*this.o;for(I=S.length-8;I<S.length;++I)S[I]=R&255,R/=256;for(this.u(S),S=Array(16),I=R=0;4>I;++I)for(var P=0;32>P;P+=8)S[R++]=this.g[I]>>>P&255;return S};function i(S,I){var R=a;return Object.prototype.hasOwnProperty.call(R,S)?R[S]:R[S]=I(S)}function o(S,I){this.h=I;for(var R=[],P=!0,O=S.length-1;0<=O;O--){var L=S[O]|0;P&&L==I||(R[O]=L,P=!1)}this.g=R}var a={};function l(S){return-128<=S&&128>S?i(S,function(I){return new o([I|0],0>I?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(0>S)return w(c(-S));for(var I=[],R=1,P=0;S>=R;P++)I[P]=S/R|0,R*=4294967296;return new o(I,0)}function d(S,I){if(S.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(S.charAt(0)=="-")return w(d(S.substring(1),I));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=c(Math.pow(I,8)),P=h,O=0;O<S.length;O+=8){var L=Math.min(8,S.length-O),k=parseInt(S.substring(O,O+L),I);8>L?(L=c(Math.pow(I,L)),P=P.j(L).add(c(k))):(P=P.j(R),P=P.add(c(k)))}return P}var h=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-w(this).m();for(var S=0,I=1,R=0;R<this.g.length;R++){var P=this.i(R);S+=(0<=P?P:4294967296+P)*I,I*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(T(this))return"0";if(v(this))return"-"+w(this).toString(S);for(var I=c(Math.pow(S,6)),R=this,P="";;){var O=C(R,I).g;R=E(R,O.j(I));var L=((0<R.g.length?R.g[0]:R.h)>>>0).toString(S);if(R=O,T(R))return L+P;for(;6>L.length;)L="0"+L;P=L+P}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function T(S){if(S.h!=0)return!1;for(var I=0;I<S.g.length;I++)if(S.g[I]!=0)return!1;return!0}function v(S){return S.h==-1}t.l=function(S){return S=E(this,S),v(S)?-1:T(S)?0:1};function w(S){for(var I=S.g.length,R=[],P=0;P<I;P++)R[P]=~S.g[P];return new o(R,~S.h).add(f)}t.abs=function(){return v(this)?w(this):this},t.add=function(S){for(var I=Math.max(this.g.length,S.g.length),R=[],P=0,O=0;O<=I;O++){var L=P+(this.i(O)&65535)+(S.i(O)&65535),k=(L>>>16)+(this.i(O)>>>16)+(S.i(O)>>>16);P=k>>>16,L&=65535,k&=65535,R[O]=k<<16|L}return new o(R,R[R.length-1]&-2147483648?-1:0)};function E(S,I){return S.add(w(I))}t.j=function(S){if(T(this)||T(S))return h;if(v(this))return v(S)?w(this).j(w(S)):w(w(this).j(S));if(v(S))return w(this.j(w(S)));if(0>this.l(p)&&0>S.l(p))return c(this.m()*S.m());for(var I=this.g.length+S.g.length,R=[],P=0;P<2*I;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(var O=0;O<S.g.length;O++){var L=this.i(P)>>>16,k=this.i(P)&65535,ee=S.i(O)>>>16,q=S.i(O)&65535;R[2*P+2*O]+=k*q,y(R,2*P+2*O),R[2*P+2*O+1]+=L*q,y(R,2*P+2*O+1),R[2*P+2*O+1]+=k*ee,y(R,2*P+2*O+1),R[2*P+2*O+2]+=L*ee,y(R,2*P+2*O+2)}for(P=0;P<I;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=I;P<2*I;P++)R[P]=0;return new o(R,0)};function y(S,I){for(;(S[I]&65535)!=S[I];)S[I+1]+=S[I]>>>16,S[I]&=65535,I++}function x(S,I){this.g=S,this.h=I}function C(S,I){if(T(I))throw Error("division by zero");if(T(S))return new x(h,h);if(v(S))return I=C(w(S),I),new x(w(I.g),w(I.h));if(v(I))return I=C(S,w(I)),new x(w(I.g),I.h);if(30<S.g.length){if(v(S)||v(I))throw Error("slowDivide_ only works with positive integers.");for(var R=f,P=I;0>=P.l(S);)R=D(R),P=D(P);var O=V(R,1),L=V(P,1);for(P=V(P,2),R=V(R,2);!T(P);){var k=L.add(P);0>=k.l(S)&&(O=O.add(R),L=k),P=V(P,1),R=V(R,1)}return I=E(S,O.j(I)),new x(O,I)}for(O=h;0<=S.l(I);){for(R=Math.max(1,Math.floor(S.m()/I.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),L=c(R),k=L.j(I);v(k)||0<k.l(S);)R-=P,L=c(R),k=L.j(I);T(L)&&(L=f),O=O.add(L),S=E(S,k)}return new x(O,S)}t.A=function(S){return C(this,S).h},t.and=function(S){for(var I=Math.max(this.g.length,S.g.length),R=[],P=0;P<I;P++)R[P]=this.i(P)&S.i(P);return new o(R,this.h&S.h)},t.or=function(S){for(var I=Math.max(this.g.length,S.g.length),R=[],P=0;P<I;P++)R[P]=this.i(P)|S.i(P);return new o(R,this.h|S.h)},t.xor=function(S){for(var I=Math.max(this.g.length,S.g.length),R=[],P=0;P<I;P++)R[P]=this.i(P)^S.i(P);return new o(R,this.h^S.h)};function D(S){for(var I=S.g.length+1,R=[],P=0;P<I;P++)R[P]=S.i(P)<<1|S.i(P-1)>>>31;return new o(R,S.h)}function V(S,I){var R=I>>5;I%=32;for(var P=S.g.length-R,O=[],L=0;L<P;L++)O[L]=0<I?S.i(L+R)>>>I|S.i(L+R+1)<<32-I:S.i(L+R);return new o(O,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Xo=o}).apply(typeof FS!="undefined"?FS:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var Df=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nN,nd,rN,cp,B_,sN,iN,oN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,b){return u==Array.prototype||u==Object.prototype||(u[g]=b.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Df=="object"&&Df];for(var g=0;g<u.length;++g){var b=u[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var b=r;u=u.split(".");for(var N=0;N<u.length-1;N++){var z=u[N];if(!(z in b))break e;b=b[z]}u=u[u.length-1],N=b[u],g=g(N),g!=N&&g!=null&&e(b,u,{configurable:!0,writable:!0,value:g})}}function i(u,g){u instanceof String&&(u+="");var b=0,N=!1,z={next:function(){if(!N&&b<u.length){var H=b++;return{value:g(H,u[H]),done:!1}}return N=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}s("Array.prototype.values",function(u){return u||function(){return i(this,function(g,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,b){return u.call.apply(u.bind,arguments)}function h(u,g,b){if(!u)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,N),u.apply(g,z)}}return function(){return u.apply(g,arguments)}}function f(u,g,b){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function p(u,g){var b=Array.prototype.slice.call(arguments,1);return function(){var N=b.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function T(u,g){function b(){}b.prototype=g.prototype,u.aa=g.prototype,u.prototype=new b,u.prototype.constructor=u,u.Qb=function(N,z,H){for(var oe=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)oe[pt-2]=arguments[pt];return g.prototype[z].apply(N,oe)}}function v(u){const g=u.length;if(0<g){const b=Array(g);for(let N=0;N<g;N++)b[N]=u[N];return b}return[]}function w(u,g){for(let b=1;b<arguments.length;b++){const N=arguments[b];if(l(N)){const z=u.length||0,H=N.length||0;u.length=z+H;for(let oe=0;oe<H;oe++)u[z+oe]=N[oe]}else u.push(N)}}class E{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function y(u){return/^[\s\xa0]*$/.test(u)}function x(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function C(u){return C[" "](u),u}C[" "]=function(){};var D=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function V(u,g,b){for(const N in u)g.call(b,u[N],N,u)}function S(u,g){for(const b in u)g.call(void 0,u[b],b,u)}function I(u){const g={};for(const b in u)g[b]=u[b];return g}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,g){let b,N;for(let z=1;z<arguments.length;z++){N=arguments[z];for(b in N)u[b]=N[b];for(let H=0;H<R.length;H++)b=R[H],Object.prototype.hasOwnProperty.call(N,b)&&(u[b]=N[b])}}function O(u){var g=1;u=u.split(":");const b=[];for(;0<g&&u.length;)b.push(u.shift()),g--;return u.length&&b.push(u.join(":")),b}function L(u){a.setTimeout(()=>{throw u},0)}function k(){var u=$;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class ee{constructor(){this.h=this.g=null}add(g,b){const N=q.get();N.set(g,b),this.h?this.h.next=N:this.g=N,this.h=N}}var q=new E(()=>new Y,u=>u.reset());class Y{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let te,U=!1,$=new ee,X=()=>{const u=a.Promise.resolve(void 0);te=()=>{u.then(ie)}};var ie=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(b){L(b)}var g=q;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}U=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};a.addEventListener("test",b,g),a.removeEventListener("test",b,g)}catch(b){}return u}();function le(u,g){if(ae.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var b=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(D){e:{try{C(g.nodeName);var z=!0;break e}catch(H){}z=!1}z||(g=null)}}else b=="mouseover"?g=u.fromElement:b=="mouseout"&&(g=u.toElement);this.relatedTarget=g,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ue[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&le.aa.h.call(this)}}T(le,ae);var Ue={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),Te=0;function He(u,g,b,N,z){this.listener=u,this.proxy=null,this.src=g,this.type=b,this.capture=!!N,this.ha=z,this.key=++Te,this.da=this.fa=!1}function dt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Fe(u){this.src=u,this.g={},this.h=0}Fe.prototype.add=function(u,g,b,N,z){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var oe=Le(u,g,N,z);return-1<oe?(g=u[oe],b||(g.fa=!1)):(g=new He(g,this.src,H,!!N,z),g.fa=b,u.push(g)),g};function be(u,g){var b=g.type;if(b in u.g){var N=u.g[b],z=Array.prototype.indexOf.call(N,g,void 0),H;(H=0<=z)&&Array.prototype.splice.call(N,z,1),H&&(dt(g),u.g[b].length==0&&(delete u.g[b],u.h--))}}function Le(u,g,b,N){for(var z=0;z<u.length;++z){var H=u[z];if(!H.da&&H.listener==g&&H.capture==!!b&&H.ha==N)return z}return-1}var Ut="closure_lm_"+(1e6*Math.random()|0),Ht={};function Ot(u,g,b,N,z){if(Array.isArray(g)){for(var H=0;H<g.length;H++)Ot(u,g[H],b,N,z);return null}return b=Vs(b),u&&u[Ee]?u.K(g,b,c(N)?!!N.capture:!!N,z):jr(u,g,b,!1,N,z)}function jr(u,g,b,N,z,H){if(!g)throw Error("Invalid event type");var oe=c(z)?!!z.capture:!!z,pt=vr(u);if(pt||(u[Ut]=pt=new Fe(u)),b=pt.add(g,b,N,oe,H),b.proxy)return b;if(N=yr(),b.proxy=N,N.src=u,N.listener=b,u.addEventListener)ye||(z=oe),z===void 0&&(z=!1),u.addEventListener(g.toString(),N,z);else if(u.attachEvent)u.attachEvent(Ur(g.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return b}function yr(){function u(b){return g.call(u.src,u.listener,b)}const g=ss;return u}function fi(u,g,b,N,z){if(Array.isArray(g))for(var H=0;H<g.length;H++)fi(u,g[H],b,N,z);else N=c(N)?!!N.capture:!!N,b=Vs(b),u&&u[Ee]?(u=u.i,g=String(g).toString(),g in u.g&&(H=u.g[g],b=Le(H,b,N,z),-1<b&&(dt(H[b]),Array.prototype.splice.call(H,b,1),H.length==0&&(delete u.g[g],u.h--)))):u&&(u=vr(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Le(g,b,N,z)),(b=-1<u?g[u]:null)&&Fs(b))}function Fs(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ee])be(g.i,u);else{var b=u.type,N=u.proxy;g.removeEventListener?g.removeEventListener(b,N,u.capture):g.detachEvent?g.detachEvent(Ur(b),N):g.addListener&&g.removeListener&&g.removeListener(N),(b=vr(g))?(be(b,u),b.h==0&&(b.src=null,g[Ut]=null)):dt(u)}}}function Ur(u){return u in Ht?Ht[u]:Ht[u]="on"+u}function ss(u,g){if(u.da)u=!0;else{g=new le(g,this);var b=u.listener,N=u.ha||u.src;u.fa&&Fs(u),u=b.call(N,g)}return u}function vr(u){return u=u[Ut],u instanceof Fe?u:null}var _r="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vs(u){return typeof u=="function"?u:(u[_r]||(u[_r]=function(g){return u.handleEvent(g)}),u[_r])}function et(){J.call(this),this.i=new Fe(this),this.M=this,this.F=null}T(et,J),et.prototype[Ee]=!0,et.prototype.removeEventListener=function(u,g,b,N){fi(this,u,g,b,N)};function gt(u,g){var b,N=u.F;if(N)for(b=[];N;N=N.F)b.push(N);if(u=u.M,N=g.type||g,typeof g=="string")g=new ae(g,u);else if(g instanceof ae)g.target=g.target||u;else{var z=g;g=new ae(N,u),P(g,z)}if(z=!0,b)for(var H=b.length-1;0<=H;H--){var oe=g.g=b[H];z=qn(oe,N,!0,g)&&z}if(oe=g.g=u,z=qn(oe,N,!0,g)&&z,z=qn(oe,N,!1,g)&&z,b)for(H=0;H<b.length;H++)oe=g.g=b[H],z=qn(oe,N,!1,g)&&z}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var b=u.g[g],N=0;N<b.length;N++)dt(b[N]);delete u.g[g],u.h--}}this.F=null},et.prototype.K=function(u,g,b,N){return this.i.add(String(u),g,!1,b,N)},et.prototype.L=function(u,g,b,N){return this.i.add(String(u),g,!0,b,N)};function qn(u,g,b,N){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var z=!0,H=0;H<g.length;++H){var oe=g[H];if(oe&&!oe.da&&oe.capture==b){var pt=oe.listener,_n=oe.ha||oe.src;oe.fa&&be(u.i,oe),z=pt.call(_n,N)!==!1&&z}}return z&&!N.defaultPrevented}function sr(u,g,b){if(typeof u=="function")b&&(u=f(u,b));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function js(u){u.g=sr(()=>{u.g=null,u.i&&(u.i=!1,js(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class ao extends J{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:js(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Us(u){J.call(this),this.h=u,this.g={}}T(Us,J);var Gn=[];function zr(u){V(u.g,function(g,b){this.g.hasOwnProperty(b)&&Fs(g)},u),u.g={}}Us.prototype.N=function(){Us.aa.N.call(this),zr(this)},Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pi=a.JSON.stringify,is=a.JSON.parse,Tu=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function lo(){}lo.prototype.h=null;function zs(u){return u.h||(u.h=u.i())}function co(){}var os={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function as(){ae.call(this,"d")}T(as,ae);function ir(){ae.call(this,"c")}T(ir,ae);var Br={},Ie=null;function $e(){return Ie=Ie||new et}Br.La="serverreachability";function tt(u){ae.call(this,Br.La,u)}T(tt,ae);function zt(u){const g=$e();gt(g,new tt(g))}Br.STAT_EVENT="statevent";function Cn(u,g){ae.call(this,Br.STAT_EVENT,u),this.stat=g}T(Cn,ae);function yt(u){const g=$e();gt(g,new Cn(g,u))}Br.Ma="timingevent";function F(u,g){ae.call(this,Br.Ma,u),this.size=g}T(F,ae);function j(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function B(){this.g=!0}B.prototype.xa=function(){this.g=!1};function Z(u,g,b,N,z,H){u.info(function(){if(u.g)if(H)for(var oe="",pt=H.split("&"),_n=0;_n<pt.length;_n++){var nt=pt[_n].split("=");if(1<nt.length){var Rn=nt[0];nt=nt[1];var An=Rn.split("_");oe=2<=An.length&&An[1]=="type"?oe+(Rn+"="+nt+"&"):oe+(Rn+"=redacted&")}}else oe=null;else oe=H;return"XMLHTTP REQ ("+N+") [attempt "+z+"]: "+g+`
`+b+`
`+oe})}function ce(u,g,b,N,z,H,oe){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+z+"]: "+g+`
`+b+`
`+H+" "+oe})}function ve(u,g,b,N){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+ge(u,b)+(N?" "+N:"")})}function Ce(u,g){u.info(function(){return"TIMEOUT: "+g})}B.prototype.info=function(){};function ge(u,g){if(!u.g)return g;if(!g)return null;try{var b=JSON.parse(g);if(b){for(u=0;u<b.length;u++)if(Array.isArray(b[u])){var N=b[u];if(!(2>N.length)){var z=N[1];if(Array.isArray(z)&&!(1>z.length)){var H=z[0];if(H!="noop"&&H!="stop"&&H!="close")for(var oe=1;oe<z.length;oe++)z[oe]=""}}}}return pi(b)}catch(pt){return g}}var me={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_e;function Ae(){}T(Ae,lo),Ae.prototype.g=function(){return new XMLHttpRequest},Ae.prototype.i=function(){return{}},_e=new Ae;function De(u,g,b,N){this.j=u,this.i=g,this.l=b,this.R=N||1,this.U=new Us(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qt}function Qt(){this.i=null,this.g="",this.h=!1}var lt={},qe={};function vt(u,g,b){u.L=1,u.v=Xh(vi(g)),u.m=b,u.P=!0,mi(u,null)}function mi(u,g){u.F=Date.now(),Kn(u),u.A=vi(u.v);var b=u.A,N=u.R;Array.isArray(N)||(N=[String(N)]),PT(b.i,"t",N),u.C=0,b=u.j.J,u.h=new Qt,u.g=QT(u.j,b?g:null,!u.m),0<u.O&&(u.M=new ao(f(u.Y,u,u.g),u.O)),g=u.U,b=u.g,N=u.ca;var z="readystatechange";Array.isArray(z)||(z&&(Gn[0]=z.toString()),z=Gn);for(var H=0;H<z.length;H++){var oe=Ot(b,z[H],N||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),zt(),Z(u.i,u.u,u.A,u.l,u.R,u.m)}De.prototype.ca=function(u){u=u.target;const g=this.M;g&&_i(u)==3?g.j():this.Y(u)},De.prototype.Y=function(u){try{if(u==this.g)e:{const An=_i(this.g);var g=this.g.Ba();const Pl=this.g.Z();if(!(3>An)&&(An!=3||this.g&&(this.h.h||this.g.oa()||VT(this.g)))){this.J||An!=4||g==7||(g==8||0>=Pl?zt(3):zt(2)),gi(this);var b=this.g.Z();this.X=b;t:if(uo(this)){var N=VT(this.g);u="";var z=N.length,H=_i(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){$r(this),wr(this);var oe="";break t}this.h.i=new a.TextDecoder}for(g=0;g<z;g++)this.h.h=!0,u+=this.h.i.decode(N[g],{stream:!(H&&g==z-1)});N.length=0,this.h.g+=u,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=b==200,ce(this.i,this.u,this.A,this.l,this.R,An,b),this.o){if(this.T&&!this.K){t:{if(this.g){var pt,_n=this.g;if((pt=_n.g?_n.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(pt)){var nt=pt;break t}}nt=null}if(b=nt)ve(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ho(this,b);else{this.o=!1,this.s=3,yt(12),$r(this),wr(this);break e}}if(this.P){b=!0;let cs;for(;!this.J&&this.C<oe.length;)if(cs=ls(this,oe),cs==qe){An==4&&(this.s=4,yt(14),b=!1),ve(this.i,this.l,null,"[Incomplete Response]");break}else if(cs==lt){this.s=4,yt(15),ve(this.i,this.l,oe,"[Invalid Chunk]"),b=!1;break}else ve(this.i,this.l,cs,null),ho(this,cs);if(uo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),An!=4||oe.length!=0||this.h.h||(this.s=1,yt(16),b=!1),this.o=this.o&&b,!b)ve(this.i,this.l,oe,"[Invalid Chunked Response]"),$r(this),wr(this);else if(0<oe.length&&!this.W){this.W=!0;var Rn=this.j;Rn.g==this&&Rn.ba&&!Rn.M&&(Rn.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),ny(Rn),Rn.M=!0,yt(11))}}else ve(this.i,this.l,oe,null),ho(this,oe);An==4&&$r(this),this.o&&!this.J&&(An==4?HT(this.j,this):(this.o=!1,Kn(this)))}else v2(this.g),b==400&&0<oe.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),$r(this),wr(this)}}}catch(An){}finally{}};function uo(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ls(u,g){var b=u.C,N=g.indexOf(`
`,b);return N==-1?qe:(b=Number(g.substring(b,N)),isNaN(b)?lt:(N+=1,N+b>g.length?qe:(g=g.slice(N,N+b),u.C=N+b,g)))}De.prototype.cancel=function(){this.J=!0,$r(this)};function Kn(u){u.S=Date.now()+u.I,Rl(u,u.I)}function Rl(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=j(f(u.ba,u),g)}function gi(u){u.B&&(a.clearTimeout(u.B),u.B=null)}De.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ce(this.i,this.A),this.L!=2&&(zt(),yt(17)),$r(this),this.s=2,wr(this)):Rl(this,this.S-u)};function wr(u){u.j.G==0||u.J||HT(u.j,u)}function $r(u){gi(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,zr(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function ho(u,g){try{var b=u.j;if(b.G!=0&&(b.g==u||Pt(b.h,u))){if(!u.K&&Pt(b.h,u)&&b.G==3){try{var N=b.Da.g.parse(g)}catch(nt){N=null}if(Array.isArray(N)&&N.length==3){var z=N;if(z[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<u.F)rf(b),tf(b);else break e;ty(b),yt(18)}}else b.za=z[1],0<b.za-b.T&&37500>z[2]&&b.F&&b.v==0&&!b.C&&(b.C=j(f(b.Za,b),6e3));if(1>=fo(b.h)&&b.ca){try{b.ca()}catch(nt){}b.ca=void 0}}else xa(b,11)}else if((u.K||b.g==u)&&rf(b),!y(g))for(z=b.Da.g.parse(g),g=0;g<z.length;g++){let nt=z[g];if(b.T=nt[0],nt=nt[1],b.G==2)if(nt[0]=="c"){b.K=nt[1],b.ia=nt[2];const Rn=nt[3];Rn!=null&&(b.la=Rn,b.j.info("VER="+b.la));const An=nt[4];An!=null&&(b.Aa=An,b.j.info("SVER="+b.Aa));const Pl=nt[5];Pl!=null&&typeof Pl=="number"&&0<Pl&&(N=1.5*Pl,b.L=N,b.j.info("backChannelRequestTimeoutMs_="+N)),N=b;const cs=u.g;if(cs){const of=cs.g?cs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(of){var H=N.h;H.g||of.indexOf("spdy")==-1&&of.indexOf("quic")==-1&&of.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Bs(H,H.h),H.h=null))}if(N.D){const ry=cs.g?cs.g.getResponseHeader("X-HTTP-Session-Id"):null;ry&&(N.ya=ry,bt(N.I,N.D,ry))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-u.F,b.j.info("Handshake RTT: "+b.R+"ms")),N=b;var oe=u;if(N.qa=KT(N,N.J?N.ia:null,N.W),oe.K){bu(N.h,oe);var pt=oe,_n=N.L;_n&&(pt.I=_n),pt.B&&(gi(pt),Kn(pt)),N.g=oe}else $T(N);0<b.i.length&&nf(b)}else nt[0]!="stop"&&nt[0]!="close"||xa(b,7);else b.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?xa(b,7):ey(b):nt[0]!="noop"&&b.l&&b.l.ta(nt),b.v=0)}}zt(4)}catch(nt){}}var Qe=class{constructor(u,g){this.g=u,this.map=g}};function Tt(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yi(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function fo(u){return u.h?1:u.g?u.g.size:0}function Pt(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Bs(u,g){u.g?u.g.add(g):u.h=g}function bu(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Tt.prototype.cancel=function(){if(this.i=Kh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Kh(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const b of u.g.values())g=g.concat(b.D);return g}return v(u.i)}function r2(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map!="undefined"&&u instanceof Map||typeof Set!="undefined"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var g=[],b=u.length,N=0;N<b;N++)g.push(u[N]);return g}g=[],b=0;for(N in u)g[b++]=u[N];return g}function s2(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map!="undefined"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set!="undefined"&&u instanceof Set)){if(l(u)||typeof u=="string"){var g=[];u=u.length;for(var b=0;b<u;b++)g.push(b);return g}g=[],b=0;for(const N in u)g[b++]=N;return g}}}function ST(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var b=s2(u),N=r2(u),z=N.length,H=0;H<z;H++)g.call(void 0,N[H],b&&b[H],u)}var IT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function i2(u,g){if(u){u=u.split("&");for(var b=0;b<u.length;b++){var N=u[b].indexOf("="),z=null;if(0<=N){var H=u[b].substring(0,N);z=u[b].substring(N+1)}else H=u[b];g(H,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function ba(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ba){this.h=u.h,Qh(this,u.j),this.o=u.o,this.g=u.g,Yh(this,u.s),this.l=u.l;var g=u.i,b=new Iu;b.i=g.i,g.g&&(b.g=new Map(g.g),b.h=g.h),CT(this,b),this.m=u.m}else u&&(g=String(u).match(IT))?(this.h=!1,Qh(this,g[1]||"",!0),this.o=xu(g[2]||""),this.g=xu(g[3]||"",!0),Yh(this,g[4]),this.l=xu(g[5]||"",!0),CT(this,g[6]||"",!0),this.m=xu(g[7]||"")):(this.h=!1,this.i=new Iu(null,this.h))}ba.prototype.toString=function(){var u=[],g=this.j;g&&u.push(Su(g,RT,!0),":");var b=this.g;return(b||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Su(g,RT,!0),"@"),u.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&u.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(Su(b,b.charAt(0)=="/"?l2:a2,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",Su(b,u2)),u.join("")};function vi(u){return new ba(u)}function Qh(u,g,b){u.j=b?xu(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Yh(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function CT(u,g,b){g instanceof Iu?(u.i=g,d2(u.i,u.h)):(b||(g=Su(g,c2)),u.i=new Iu(g,u.h))}function bt(u,g,b){u.i.set(g,b)}function Xh(u){return bt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function xu(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Su(u,g,b){return typeof u=="string"?(u=encodeURI(u).replace(g,o2),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function o2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var RT=/[#\/\?@]/g,a2=/[#\?:]/g,l2=/[#\?]/g,c2=/[#\?@]/g,u2=/#/g;function Iu(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function po(u){u.g||(u.g=new Map,u.h=0,u.i&&i2(u.i,function(g,b){u.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}t=Iu.prototype,t.add=function(u,g){po(this),this.i=null,u=Al(this,u);var b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(g),this.h+=1,this};function AT(u,g){po(u),g=Al(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function kT(u,g){return po(u),g=Al(u,g),u.g.has(g)}t.forEach=function(u,g){po(this),this.g.forEach(function(b,N){b.forEach(function(z){u.call(g,z,N,this)},this)},this)},t.na=function(){po(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),b=[];for(let N=0;N<g.length;N++){const z=u[N];for(let H=0;H<z.length;H++)b.push(g[N])}return b},t.V=function(u){po(this);let g=[];if(typeof u=="string")kT(this,u)&&(g=g.concat(this.g.get(Al(this,u))));else{u=Array.from(this.g.values());for(let b=0;b<u.length;b++)g=g.concat(u[b])}return g},t.set=function(u,g){return po(this),this.i=null,u=Al(this,u),kT(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function PT(u,g,b){AT(u,g),0<b.length&&(u.i=null,u.g.set(Al(u,g),v(b)),u.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var b=0;b<g.length;b++){var N=g[b];const H=encodeURIComponent(String(N)),oe=this.V(N);for(N=0;N<oe.length;N++){var z=H;oe[N]!==""&&(z+="="+encodeURIComponent(String(oe[N]))),u.push(z)}}return this.i=u.join("&")};function Al(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function d2(u,g){g&&!u.j&&(po(u),u.i=null,u.g.forEach(function(b,N){var z=N.toLowerCase();N!=z&&(AT(this,N),PT(this,z,b))},u)),u.j=g}function h2(u,g){const b=new B;if(a.Image){const N=new Image;N.onload=p(mo,b,"TestLoadImage: loaded",!0,g,N),N.onerror=p(mo,b,"TestLoadImage: error",!1,g,N),N.onabort=p(mo,b,"TestLoadImage: abort",!1,g,N),N.ontimeout=p(mo,b,"TestLoadImage: timeout",!1,g,N),a.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else g(!1)}function f2(u,g){const b=new B,N=new AbortController,z=setTimeout(()=>{N.abort(),mo(b,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:N.signal}).then(H=>{clearTimeout(z),H.ok?mo(b,"TestPingServer: ok",!0,g):mo(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(z),mo(b,"TestPingServer: error",!1,g)})}function mo(u,g,b,N,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),N(b)}catch(H){}}function p2(){this.g=new Tu}function m2(u,g,b){const N=b||"";try{ST(u,function(z,H){let oe=z;c(z)&&(oe=pi(z)),g.push(N+H+"="+encodeURIComponent(oe))})}catch(z){throw g.push(N+"type="+encodeURIComponent("_badmap")),z}}function Jh(u){this.l=u.Ub||null,this.j=u.eb||!1}T(Jh,lo),Jh.prototype.g=function(){return new Zh(this.l,this.j)},Jh.prototype.i=function(u){return function(){return u}}({});function Zh(u,g){et.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Zh,et),t=Zh.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Ru(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cu(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ru(this)),this.g&&(this.readyState=3,Ru(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream!="undefined"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;NT(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function NT(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Cu(this):Ru(this),this.readyState==3&&NT(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Cu(this))},t.Qa=function(u){this.g&&(this.response=u,Cu(this))},t.ga=function(){this.g&&Cu(this)};function Cu(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ru(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=g.next();return u.join(`\r
`)};function Ru(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Zh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function DT(u){let g="";return V(u,function(b,N){g+=N,g+=":",g+=b,g+=`\r
`}),g}function Zg(u,g,b){e:{for(N in b){var N=!1;break e}N=!0}N||(b=DT(b),typeof u=="string"?b!=null&&encodeURIComponent(String(b)):bt(u,g,b))}function Bt(u){et.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Bt,et);var g2=/^https?$/i,y2=["POST","PUT"];t=Bt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,b,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_e.g(),this.v=this.o?zs(this.o):zs(_e),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(H){OT(this,H);return}if(u=b||"",b=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var z in N)b.set(z,N[z]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const H of N.keys())b.set(H,N.get(H));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(b.keys()).find(H=>H.toLowerCase()=="content-type"),z=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(y2,g,void 0))||N||z||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,oe]of b)this.g.setRequestHeader(H,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{FT(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){OT(this,H)}};function OT(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,LT(u),ef(u)}function LT(u){u.A||(u.A=!0,gt(u,"complete"),gt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,gt(this,"complete"),gt(this,"abort"),ef(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ef(this,!0)),Bt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?MT(this):this.bb())},t.bb=function(){MT(this)};function MT(u){if(u.h&&typeof o!="undefined"&&(!u.v[1]||_i(u)!=4||u.Z()!=2)){if(u.u&&_i(u)==4)sr(u.Ea,0,u);else if(gt(u,"readystatechange"),_i(u)==4){u.h=!1;try{const oe=u.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var N;if(N=oe===0){var z=String(u.D).match(IT)[1]||null;!z&&a.self&&a.self.location&&(z=a.self.location.protocol.slice(0,-1)),N=!g2.test(z?z.toLowerCase():"")}b=N}if(b)gt(u,"complete"),gt(u,"success");else{u.m=6;try{var H=2<_i(u)?u.g.statusText:""}catch(pt){H=""}u.l=H+" ["+u.Z()+"]",LT(u)}}finally{ef(u)}}}}function ef(u,g){if(u.g){FT(u);const b=u.g,N=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||gt(u,"ready");try{b.onreadystatechange=N}catch(z){}}}function FT(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function _i(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<_i(this)?this.g.status:-1}catch(u){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(u){return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),is(g)}};function VT(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch(g){return null}}function v2(u){const g={};u=(u.g&&2<=_i(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(y(u[N]))continue;var b=O(u[N]);const z=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const H=g[z]||[];g[z]=H,H.push(b)}S(g,function(N){return N.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Au(u,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||g}function jT(u){this.Aa=0,this.i=[],this.j=new B,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Au("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Au("baseRetryDelayMs",5e3,u),this.cb=Au("retryDelaySeedMs",1e4,u),this.Wa=Au("forwardChannelMaxRetries",2,u),this.wa=Au("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Tt(u&&u.concurrentRequestLimit),this.Da=new p2,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=jT.prototype,t.la=8,t.G=1,t.connect=function(u,g,b,N){yt(0),this.W=u,this.H=g||{},b&&N!==void 0&&(this.H.OSID=b,this.H.OAID=N),this.F=this.X,this.I=KT(this,null,this.W),nf(this)};function ey(u){if(UT(u),u.G==3){var g=u.U++,b=vi(u.I);if(bt(b,"SID",u.K),bt(b,"RID",g),bt(b,"TYPE","terminate"),ku(u,b),g=new De(u,u.j,g),g.L=2,g.v=Xh(vi(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(g.v.toString(),"")}catch(N){}!b&&a.Image&&(new Image().src=g.v,b=!0),b||(g.g=QT(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Kn(g)}GT(u)}function tf(u){u.g&&(ny(u),u.g.cancel(),u.g=null)}function UT(u){tf(u),u.u&&(a.clearTimeout(u.u),u.u=null),rf(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function nf(u){if(!yi(u.h)&&!u.s){u.s=!0;var g=u.Ga;te||X(),U||(te(),U=!0),$.add(g,u),u.B=0}}function _2(u,g){return fo(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=j(f(u.Ga,u,g),qT(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const z=new De(this,this.j,u);let H=this.o;if(this.S&&(H?(H=I(H),P(H,this.S)):H=this.S),this.m!==null||this.O||(z.H=H,H=null),this.P)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var N=this.i[b];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(g+=N,4096<g){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=BT(this,z,g),b=vi(this.I),bt(b,"RID",u),bt(b,"CVER",22),this.D&&bt(b,"X-HTTP-Session-Id",this.D),ku(this,b),H&&(this.O?g="headers="+encodeURIComponent(String(DT(H)))+"&"+g:this.m&&Zg(b,this.m,H)),Bs(this.h,z),this.Ua&&bt(b,"TYPE","init"),this.P?(bt(b,"$req",g),bt(b,"SID","null"),z.T=!0,vt(z,b,null)):vt(z,b,g),this.G=2}}else this.G==3&&(u?zT(this,u):this.i.length==0||yi(this.h)||zT(this))};function zT(u,g){var b;g?b=g.l:b=u.U++;const N=vi(u.I);bt(N,"SID",u.K),bt(N,"RID",b),bt(N,"AID",u.T),ku(u,N),u.m&&u.o&&Zg(N,u.m,u.o),b=new De(u,u.j,b,u.B+1),u.m===null&&(b.H=u.o),g&&(u.i=g.D.concat(u.i)),g=BT(u,b,1e3),b.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Bs(u.h,b),vt(b,N,g)}function ku(u,g){u.H&&V(u.H,function(b,N){bt(g,N,b)}),u.l&&ST({},function(b,N){bt(g,N,b)})}function BT(u,g,b){b=Math.min(u.i.length,b);var N=u.l?f(u.l.Na,u.l,u):null;e:{var z=u.i;let H=-1;for(;;){const oe=["count="+b];H==-1?0<b?(H=z[0].g,oe.push("ofs="+H)):H=0:oe.push("ofs="+H);let pt=!0;for(let _n=0;_n<b;_n++){let nt=z[_n].g;const Rn=z[_n].map;if(nt-=H,0>nt)H=Math.max(0,z[_n].g-100),pt=!1;else try{m2(Rn,oe,"req"+nt+"_")}catch(An){N&&N(Rn)}}if(pt){N=oe.join("&");break e}}}return u=u.i.splice(0,b),g.D=u,N}function $T(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;te||X(),U||(te(),U=!0),$.add(g,u),u.v=0}}function ty(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=j(f(u.Fa,u),qT(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,WT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=j(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),tf(this),WT(this))};function ny(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function WT(u){u.g=new De(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=vi(u.qa);bt(g,"RID","rpc"),bt(g,"SID",u.K),bt(g,"AID",u.T),bt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&bt(g,"TO",u.ja),bt(g,"TYPE","xmlhttp"),ku(u,g),u.m&&u.o&&Zg(g,u.m,u.o),u.L&&(u.g.I=u.L);var b=u.g;u=u.ia,b.L=1,b.v=Xh(vi(g)),b.m=null,b.P=!0,mi(b,u)}t.Za=function(){this.C!=null&&(this.C=null,tf(this),ty(this),yt(19))};function rf(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function HT(u,g){var b=null;if(u.g==g){rf(u),ny(u),u.g=null;var N=2}else if(Pt(u.h,g))b=g.D,bu(u.h,g),N=1;else return;if(u.G!=0){if(g.o)if(N==1){b=g.m?g.m.length:0,g=Date.now()-g.F;var z=u.B;N=$e(),gt(N,new F(N,b)),nf(u)}else $T(u);else if(z=g.s,z==3||z==0&&0<g.X||!(N==1&&_2(u,g)||N==2&&ty(u)))switch(b&&0<b.length&&(g=u.h,g.i=g.i.concat(b)),z){case 1:xa(u,5);break;case 4:xa(u,10);break;case 3:xa(u,6);break;default:xa(u,2)}}}function qT(u,g){let b=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(b*=2),b*g}function xa(u,g){if(u.j.info("Error code "+g),g==2){var b=f(u.fb,u),N=u.Xa;const z=!N;N=new ba(N||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Qh(N,"https"),Xh(N),z?h2(N.toString(),b):f2(N.toString(),b)}else yt(2);u.G=0,u.l&&u.l.sa(g),GT(u),UT(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function GT(u){if(u.G=0,u.ka=[],u.l){const g=Kh(u.h);(g.length!=0||u.i.length!=0)&&(w(u.ka,g),w(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function KT(u,g,b){var N=b instanceof ba?vi(b):new ba(b);if(N.g!="")g&&(N.g=g+"."+N.g),Yh(N,N.s);else{var z=a.location;N=z.protocol,g=g?g+"."+z.hostname:z.hostname,z=+z.port;var H=new ba(null);N&&Qh(H,N),g&&(H.g=g),z&&Yh(H,z),b&&(H.l=b),N=H}return b=u.D,g=u.ya,b&&g&&bt(N,b,g),bt(N,"VER",u.la),ku(u,N),N}function QT(u,g,b){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Bt(new Jh({eb:b})):new Bt(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function YT(){}t=YT.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function sf(){}sf.prototype.g=function(u,g){return new Er(u,g)};function Er(u,g){et.call(this),this.g=new jT(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!y(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!y(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new kl(this)}T(Er,et),Er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Er.prototype.close=function(){ey(this.g)},Er.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.u&&(b={},b.__data__=pi(u),u=b);g.i.push(new Qe(g.Ya++,u)),g.G==3&&nf(g)},Er.prototype.N=function(){this.g.l=null,delete this.j,ey(this.g),delete this.g,Er.aa.N.call(this)};function XT(u){as.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const b in g){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}T(XT,as);function JT(){ir.call(this),this.status=1}T(JT,ir);function kl(u){this.g=u}T(kl,YT),kl.prototype.ua=function(){gt(this.g,"a")},kl.prototype.ta=function(u){gt(this.g,new XT(u))},kl.prototype.sa=function(u){gt(this.g,new JT)},kl.prototype.ra=function(){gt(this.g,"b")},sf.prototype.createWebChannel=sf.prototype.g,Er.prototype.send=Er.prototype.o,Er.prototype.open=Er.prototype.m,Er.prototype.close=Er.prototype.close,oN=function(){return new sf},iN=function(){return $e()},sN=Br,B_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},me.NO_ERROR=0,me.TIMEOUT=8,me.HTTP_ERROR=6,cp=me,fe.COMPLETE="complete",rN=fe,co.EventType=os,os.OPEN="a",os.CLOSE="b",os.ERROR="c",os.MESSAGE="d",et.prototype.listen=et.prototype.K,nd=co,Bt.prototype.listenOnce=Bt.prototype.L,Bt.prototype.getLastError=Bt.prototype.Ka,Bt.prototype.getLastErrorCode=Bt.prototype.Ba,Bt.prototype.getStatus=Bt.prototype.Z,Bt.prototype.getResponseJson=Bt.prototype.Oa,Bt.prototype.getResponseText=Bt.prototype.oa,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Ha,nN=Bt}).apply(typeof Df!="undefined"?Df:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const VS="@firebase/firestore",jS="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=new xh("@firebase/firestore");function Vl(){return il.logLevel}function he(t,...e){if(il.logLevel<=Be.DEBUG){const n=e.map(dE);il.debug(`Firestore (${cu}): ${t}`,...n)}}function Xi(t,...e){if(il.logLevel<=Be.ERROR){const n=e.map(dE);il.error(`Firestore (${cu}): ${t}`,...n)}}function Ji(t,...e){if(il.logLevel<=Be.WARN){const n=e.map(dE);il.warn(`Firestore (${cu}): ${t}`,...n)}}function dE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,aN(t,r,n)}function aN(t,e,n){let r=`FIRESTORE (${cu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(s){r+=" CONTEXT: "+n}throw Xi(r),new Error(r)}function at(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||aN(e,s,r)}function Ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends rs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ln.UNAUTHENTICATED))}shutdown(){}}class sW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class iW{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){at(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Mi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(()=>A(this,null,function*(){yield l.promise,yield s(this.currentUser)}))},a=l=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Mi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(at(typeof r.accessToken=="string",31837,{l:r}),new lN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new Ln(e)}}class oW{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aW{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new oW(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class US{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lW{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){at(this.o===void 0,3512);const r=i=>{i.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,he("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new US(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(at(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new US(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cW(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=cW(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function je(t,e){return t<e?-1:t>e?1:0}function $_(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return je(r,s);{const i=uN(),o=uW(i.encode(zS(t,n)),i.encode(zS(e,n)));return o!==0?o:je(r,s)}}n+=r>65535?2:1}return je(t.length,e.length)}function zS(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function uW(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return je(t[n],e[n]);return je(t.length,e.length)}function $c(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="__name__";class Hs{constructor(e,n,r){n===void 0?n=0:n>e.length&&Se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Hs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Hs.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return je(e.length,n.length)}static compareSegments(e,n){const r=Hs.isNumericId(e),s=Hs.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Hs.extractNumericId(e).compare(Hs.extractNumericId(n)):$_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xo.fromString(e.substring(4,e.length-2))}}class wt extends Hs{construct(e,n,r){return new wt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new wt(n)}static emptyPath(){return new wt([])}}const dW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends Hs{construct(e,n,r){return new mn(e,n,r)}static isValidIdentifier(e){return dW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===BS}static keyField(){return new mn([BS])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ue(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ue(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ue(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new ue(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(n)}static emptyPath(){return new mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(wt.fromString(e))}static fromName(e){return new we(wt.fromString(e).popFirst(5))}static empty(){return new we(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return wt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new wt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(t,e,n){if(!n)throw new ue(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hN(t,e,n,r){if(e===!0&&r===!0)throw new ue(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function $S(t){if(!we.isDocumentKey(t))throw new ue(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function WS(t){if(we.isDocumentKey(t))throw new ue(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function _g(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Se(12329,{type:typeof t})}function Bn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ue(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_g(t);throw new ue(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function hW(t,e){if(e<=0)throw new ue(G.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ph(t,e){if(!fN(t))throw new ue(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ue(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=-62135596800,qS=1e6;class ze{static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*qS);return new ze(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<HS)throw new ue(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qS}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ph(e,ze._jsonSchema))return new ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-HS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ze._jsonSchemaVersion="firestore/timestamp/1.0",ze._jsonSchema={type:tn("string",ze._jsonSchemaVersion),seconds:tn("number"),nanoseconds:tn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new ze(0,0))}static max(){return new ke(new ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=-1;function fW(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ke.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new oa(s,we.empty(),e)}function pW(t){return new oa(t.readTime,t.key,ih)}class oa{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new oa(ke.min(),we.empty(),ih)}static max(){return new oa(ke.max(),we.empty(),ih)}}function mW(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=we.comparator(t.documentKey,e.documentKey),n!==0?n:je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yW{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t){return A(this,null,function*(){if(t.code!==G.FAILED_PRECONDITION||t.message!==gW)throw t;he("LocalStore","Unexpectedly lost primary lease")})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,r)=>{n(e)})}static reject(e){return new Q((n,r)=>{r(e)})}static waitFor(e){return new Q((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=Q.resolve(!1);for(const r of e)n=n.next(s=>s?Q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new Q((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new Q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function vW(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function du(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}wg.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=-1;function Eg(t){return t==null}function cm(t){return t===0&&1/t==-1/0}function _W(t){return typeof t=="number"&&Number.isInteger(t)&&!cm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="";function wW(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=GS(e)),e=EW(t.get(n),e);return GS(e)}function EW(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case pN:n+="";break;default:n+=i}}return n}function GS(t){return t+pN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _a(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class W_{constructor(e,n){this.comparator=e,this.root=n||Jo.EMPTY}insert(e,n){return new W_(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jo.BLACK,null,null))}remove(e){return new W_(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jo.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Of(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Of(this.root,e,this.comparator,!1)}getReverseIterator(){return new Of(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Of(this.root,e,this.comparator,!0)}},Of=class{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Jo=class Ti{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r!=null?r:Ti.RED,this.left=s!=null?s:Ti.EMPTY,this.right=i!=null?i:Ti.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ti(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,s!=null?s:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ti.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ti.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ti.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ti.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}};Jo.EMPTY=null,Jo.RED=!0,Jo.BLACK=!1;Jo.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Jo(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.comparator=e,this.data=new nn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new QS(this.data.getIterator())}getIteratorFrom(e){return new QS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new cn(this.comparator);return n.data=e,n}}class QS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new Ar([])}unionWith(e){let n=new cn(mn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ar(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $c(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException!="undefined"&&i instanceof DOMException?new gN("Invalid base64 string: "+i):i}}(e);return new vn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new vn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vn.EMPTY_BYTE_STRING=new vn("");const TW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function aa(t){if(at(!!t,39018),typeof t=="string"){let e=0;const n=TW.exec(t);if(at(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qt(t.seconds),nanos:qt(t.nanos)}}function qt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function la(t){return typeof t=="string"?vn.fromBase64String(t):vn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="server_timestamp",vN="__type__",_N="__previous_value__",wN="__local_write_time__";function fE(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[vN])===null||n===void 0?void 0:n.stringValue)===yN}function Tg(t){const e=t.mapValue.fields[_N];return fE(e)?Tg(e):e}function oh(t){const e=aa(t.mapValue.fields[wN].timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bW{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const um="(default)";class Wc{constructor(e,n){this.projectId=e,this.database=n||um}static empty(){return new Wc("","")}get isDefaultDatabase(){return this.database===um}isEqual(e){return e instanceof Wc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="__type__",TN="__max__",Lf={mapValue:{fields:{__type__:{stringValue:TN}}}},bN="__vector__",dm="value";function ca(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fE(t)?4:SW(t)?9007199254740991:xW(t)?10:11:Se(28295,{value:t})}function oi(t,e){if(t===e)return!0;const n=ca(t);if(n!==ca(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return oh(t).isEqual(oh(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=aa(s.timestampValue),a=aa(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return la(s.bytesValue).isEqual(la(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return qt(s.geoPointValue.latitude)===qt(i.geoPointValue.latitude)&&qt(s.geoPointValue.longitude)===qt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return qt(s.integerValue)===qt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=qt(s.doubleValue),a=qt(i.doubleValue);return o===a?cm(o)===cm(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return $c(t.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(KS(o)!==KS(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!oi(o[l],a[l])))return!1;return!0}(t,e);default:return Se(52216,{left:t})}}function ah(t,e){return(t.values||[]).find(n=>oi(n,e))!==void 0}function Hc(t,e){if(t===e)return 0;const n=ca(t),r=ca(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=qt(i.integerValue||i.doubleValue),l=qt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return YS(t.timestampValue,e.timestampValue);case 4:return YS(oh(t),oh(e));case 5:return $_(t.stringValue,e.stringValue);case 6:return function(i,o){const a=la(i),l=la(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=je(a[c],l[c]);if(d!==0)return d}return je(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=je(qt(i.latitude),qt(o.latitude));return a!==0?a:je(qt(i.longitude),qt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return XS(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,d;const h=i.fields||{},f=o.fields||{},p=(a=h[dm])===null||a===void 0?void 0:a.arrayValue,T=(l=f[dm])===null||l===void 0?void 0:l.arrayValue,v=je(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((d=T==null?void 0:T.values)===null||d===void 0?void 0:d.length)||0);return v!==0?v:XS(p,T)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Lf.mapValue&&o===Lf.mapValue)return 0;if(i===Lf.mapValue)return 1;if(o===Lf.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=$_(l[h],d[h]);if(f!==0)return f;const p=Hc(a[l[h]],c[d[h]]);if(p!==0)return p}return je(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Se(23264,{le:n})}}function YS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return je(t,e);const n=aa(t),r=aa(e),s=je(n.seconds,r.seconds);return s!==0?s:je(n.nanos,r.nanos)}function XS(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Hc(n[s],r[s]);if(i)return i}return je(n.length,r.length)}function qc(t){return H_(t)}function H_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=aa(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return la(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return we.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=H_(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${H_(n.fields[o])}`;return s+"}"}(t.mapValue):Se(61005,{value:t})}function up(t){switch(ca(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tg(t);return e?16+up(e):16;case 5:return 2*t.stringValue.length;case 6:return la(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+up(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return _a(r.fields,(i,o)=>{s+=i.length+up(o)}),s}(t.mapValue);default:throw Se(13486,{value:t})}}function JS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function q_(t){return!!t&&"integerValue"in t}function pE(t){return!!t&&"arrayValue"in t}function ZS(t){return!!t&&"nullValue"in t}function eI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dp(t){return!!t&&"mapValue"in t}function xW(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[EN])===null||n===void 0?void 0:n.stringValue)===bN}function wd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return _a(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=wd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function SW(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===TN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.value=e}static empty(){return new ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wd(n)}setAll(e){let n=mn.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=wd(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());dp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];dp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){_a(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ur(wd(this.value))}}function xN(t){const e=[];return _a(t.fields,(n,r)=>{const s=new mn([n]);if(dp(r)){const i=xN(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ar(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Fn(e,0,ke.min(),ke.min(),ke.min(),ur.empty(),0)}static newFoundDocument(e,n,r,s){return new Fn(e,1,n,ke.min(),r,s,0)}static newNoDocument(e,n){return new Fn(e,2,n,ke.min(),ke.min(),ur.empty(),0)}static newUnknownDocument(e,n){return new Fn(e,3,n,ke.min(),ke.min(),ur.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n){this.position=e,this.inclusive=n}}function tI(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=we.comparator(we.fromName(o.referenceValue),n.key):r=Hc(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function nI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!oi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n="asc"){this.field=e,this.dir=n}}function IW(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{}class en extends SN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new RW(e,n,r):n==="array-contains"?new PW(e,r):n==="in"?new NW(e,r):n==="not-in"?new DW(e,r):n==="array-contains-any"?new OW(e,r):new en(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new AW(e,r):new kW(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Hc(n,this.value)):n!==null&&ca(this.value)===ca(n)&&this.matchesComparison(Hc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Os extends SN{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Os(e,n)}matches(e){return IN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function IN(t){return t.op==="and"}function CN(t){return CW(t)&&IN(t)}function CW(t){for(const e of t.filters)if(e instanceof Os)return!1;return!0}function G_(t){if(t instanceof en)return t.field.canonicalString()+t.op.toString()+qc(t.value);if(CN(t))return t.filters.map(e=>G_(e)).join(",");{const e=t.filters.map(n=>G_(n)).join(",");return`${t.op}(${e})`}}function RN(t,e){return t instanceof en?function(r,s){return s instanceof en&&r.op===s.op&&r.field.isEqual(s.field)&&oi(r.value,s.value)}(t,e):t instanceof Os?function(r,s){return s instanceof Os&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&RN(o,s.filters[a]),!0):!1}(t,e):void Se(19439)}function AN(t){return t instanceof en?function(n){return`${n.field.canonicalString()} ${n.op} ${qc(n.value)}`}(t):t instanceof Os?function(n){return n.op.toString()+" {"+n.getFilters().map(AN).join(" ,")+"}"}(t):"Filter"}class RW extends en{constructor(e,n,r){super(e,n,r),this.key=we.fromName(r.referenceValue)}matches(e){const n=we.comparator(e.key,this.key);return this.matchesComparison(n)}}class AW extends en{constructor(e,n){super(e,"in",n),this.keys=kN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class kW extends en{constructor(e,n){super(e,"not-in",n),this.keys=kN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>we.fromName(r.referenceValue))}class PW extends en{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pE(n)&&ah(n.arrayValue,this.value)}}class NW extends en{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ah(this.value.arrayValue,n)}}class DW extends en{constructor(e,n){super(e,"not-in",n)}matches(e){if(ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ah(this.value.arrayValue,n)}}class OW extends en{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ah(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Pe=null}}function rI(t,e=null,n=[],r=[],s=null,i=null,o=null){return new LW(t,e,n,r,s,i,o)}function mE(t){const e=Ne(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>G_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Eg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qc(r)).join(",")),e.Pe=n}return e.Pe}function gE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!IW(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nI(t.startAt,e.startAt)&&nI(t.endAt,e.endAt)}function K_(t){return we.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function MW(t,e,n,r,s,i,o,a){return new hu(t,e,n,r,s,i,o,a)}function bg(t){return new hu(t)}function sI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PN(t){return t.collectionGroup!==null}function Ed(t){const e=Ne(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new cn(mn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new lh(i,r))}),n.has(mn.keyField().canonicalString())||e.Te.push(new lh(mn.keyField(),r))}return e.Te}function ri(t){const e=Ne(t);return e.Ie||(e.Ie=FW(e,Ed(t))),e.Ie}function FW(t,e){if(t.limitType==="F")return rI(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new lh(s.field,i)});const n=t.endAt?new hm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new hm(t.startAt.position,t.startAt.inclusive):null;return rI(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Q_(t,e){const n=t.filters.concat([e]);return new hu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function fm(t,e,n){return new hu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xg(t,e){return gE(ri(t),ri(e))&&t.limitType===e.limitType}function NN(t){return`${mE(ri(t))}|lt:${t.limitType}`}function jl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>AN(s)).join(", ")}]`),Eg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>qc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>qc(s)).join(",")),`Target(${r})`}(ri(t))}; limitType=${t.limitType})`}function Sg(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):we.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ed(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=tI(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ed(r),s)||r.endAt&&!function(o,a,l){const c=tI(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ed(r),s))}(t,e)}function VW(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function DN(t){return(e,n)=>{let r=!1;for(const s of Ed(t)){const i=jW(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function jW(t,e,n){const r=t.field.isKeyField()?we.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Hc(l,c):Se(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Se(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_a(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return mN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UW=new nn(we.comparator);function Zi(){return UW}const ON=new nn(we.comparator);function rd(...t){let e=ON;for(const n of t)e=e.insert(n.key,n);return e}function LN(t){let e=ON;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fa(){return Td()}function MN(){return Td()}function Td(){return new wl(t=>t.toString(),(t,e)=>t.isEqual(e))}const zW=new nn(we.comparator),BW=new cn(we.comparator);function We(...t){let e=BW;for(const n of t)e=e.add(n);return e}const $W=new cn(je);function WW(){return $W}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cm(e)?"-0":e}}function FN(t){return{integerValue:""+t}}function HW(t,e){return _W(e)?FN(e):yE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(){this._=void 0}}function qW(t,e,n){return t instanceof ch?function(s,i){const o={fields:{[vN]:{stringValue:yN},[wN]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&fE(i)&&(i=Tg(i)),i&&(o.fields[_N]=i),{mapValue:o}}(n,e):t instanceof uh?jN(t,e):t instanceof dh?UN(t,e):function(s,i){const o=VN(s,i),a=iI(o)+iI(s.Ee);return q_(o)&&q_(s.Ee)?FN(a):yE(s.serializer,a)}(t,e)}function GW(t,e,n){return t instanceof uh?jN(t,e):t instanceof dh?UN(t,e):n}function VN(t,e){return t instanceof pm?function(r){return q_(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ch extends Ig{}class uh extends Ig{constructor(e){super(),this.elements=e}}function jN(t,e){const n=zN(e);for(const r of t.elements)n.some(s=>oi(s,r))||n.push(r);return{arrayValue:{values:n}}}class dh extends Ig{constructor(e){super(),this.elements=e}}function UN(t,e){let n=zN(e);for(const r of t.elements)n=n.filter(s=>!oi(s,r));return{arrayValue:{values:n}}}class pm extends Ig{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function iI(t){return qt(t.integerValue||t.doubleValue)}function zN(t){return pE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KW{constructor(e,n){this.field=e,this.transform=n}}function QW(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof uh&&s instanceof uh||r instanceof dh&&s instanceof dh?$c(r.elements,s.elements,oi):r instanceof pm&&s instanceof pm?oi(r.Ee,s.Ee):r instanceof ch&&s instanceof ch}(t.transform,e.transform)}class YW{constructor(e,n){this.version=e,this.transformResults=n}}class tr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Cg{}function BN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Rg(t.key,tr.none()):new Nh(t.key,t.data,tr.none());{const n=t.data,r=ur.empty();let s=new cn(mn.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new wa(t.key,r,new Ar(s.toArray()),tr.none())}}function XW(t,e,n){t instanceof Nh?function(s,i,o){const a=s.value.clone(),l=aI(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof wa?function(s,i,o){if(!hp(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=aI(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll($N(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function bd(t,e,n,r){return t instanceof Nh?function(i,o,a,l){if(!hp(i.precondition,o))return a;const c=i.value.clone(),d=lI(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof wa?function(i,o,a,l){if(!hp(i.precondition,o))return a;const c=lI(i.fieldTransforms,l,o),d=o.data;return d.setAll($N(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return hp(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function JW(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=VN(r.transform,s||null);i!=null&&(n===null&&(n=ur.empty()),n.set(r.field,i))}return n||null}function oI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&$c(r,s,(i,o)=>QW(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nh extends Cg{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class wa extends Cg{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function $N(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function aI(t,e,n){const r=new Map;at(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,GW(o,a,n[s]))}return r}function lI(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,qW(i,o,e))}return r}class Rg extends Cg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZW extends Cg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&XW(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=bd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=bd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=MN();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=BN(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),We())}isEqual(e){return this.batchId===e.batchId&&$c(this.mutations,e.mutations,(n,r)=>oI(n,r))&&$c(this.baseMutations,e.baseMutations,(n,r)=>oI(n,r))}}class vE{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){at(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return zW}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new vE(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt,Ye;function r8(t){switch(t){case G.OK:return Se(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return Se(15467,{code:t})}}function WN(t){if(t===void 0)return Xi("GRPC error has no .code"),G.UNKNOWN;switch(t){case Xt.OK:return G.OK;case Xt.CANCELLED:return G.CANCELLED;case Xt.UNKNOWN:return G.UNKNOWN;case Xt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case Xt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case Xt.INTERNAL:return G.INTERNAL;case Xt.UNAVAILABLE:return G.UNAVAILABLE;case Xt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case Xt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case Xt.NOT_FOUND:return G.NOT_FOUND;case Xt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case Xt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case Xt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case Xt.ABORTED:return G.ABORTED;case Xt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case Xt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case Xt.DATA_LOSS:return G.DATA_LOSS;default:return Se(39323,{code:t})}}(Ye=Xt||(Xt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8=new Xo([4294967295,4294967295],0);function cI(t){const e=uN().encode(t),n=new tN;return n.update(e),new Uint8Array(n.digest())}function uI(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Xo([n,r],0),new Xo([s,i],0)]}class _E{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new sd(`Invalid padding: ${n}`);if(r<0)throw new sd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new sd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new sd(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Xo.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Xo.fromNumber(r)));return s.compare(s8)===1&&(s=new Xo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=cI(e),[r,s]=uI(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new _E(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=cI(e),[r,s]=uI(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class sd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Dh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ag(ke.min(),s,new nn(je),Zi(),We())}}class Dh{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Dh(r,n,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class HN{constructor(e,n){this.targetId=e,this.De=n}}class qN{constructor(e,n,r=vn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class dI{constructor(){this.ve=0,this.Ce=hI(),this.Fe=vn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=We(),n=We(),r=We();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Se(38017,{changeType:i})}}),new Dh(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=hI()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class i8{constructor(e){this.We=e,this.Ge=new Map,this.ze=Zi(),this.je=Mf(),this.Je=Mf(),this.He=new nn(je)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Se(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(K_(i))if(r===0){const o=new we(i.path);this.Xe(n,o,Fn.newNoDocument(o,ke.min()))}else at(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const a=this._t(e),l=a?this.ut(a,e,o):1;if(l!==0){this.rt(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=la(r).toUint8Array()}catch(l){if(l instanceof gN)return Ji("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new _E(o,s,i)}catch(l){return Ji(l instanceof sd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const a=this.st(o);if(a){if(i.current&&K_(a.target)){const l=new we(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,Fn.newNoDocument(l,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=We();this.Je.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.st(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new Ag(e,n,this.He,this.ze,r);return this.ze=Zi(),this.je=Mf(),this.Je=Mf(),this.He=new nn(je),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new dI,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new cn(je),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new cn(je),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new dI),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Mf(){return new nn(we.comparator)}function hI(){return new nn(we.comparator)}const o8={asc:"ASCENDING",desc:"DESCENDING"},a8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},l8={and:"AND",or:"OR"};class c8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Y_(t,e){return t.useProto3Json||Eg(e)?e:{value:e}}function mm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function u8(t,e){return mm(t,e.toTimestamp())}function si(t){return at(!!t,49232),ke.fromTimestamp(function(n){const r=aa(n);return new ze(r.seconds,r.nanos)}(t))}function wE(t,e){return X_(t,e).canonicalString()}function X_(t,e){const n=function(s){return new wt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function KN(t){const e=wt.fromString(t);return at(ZN(e),10190,{key:e.toString()}),e}function J_(t,e){return wE(t.databaseId,e.path)}function Qy(t,e){const n=KN(e);if(n.get(1)!==t.databaseId.projectId)throw new ue(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ue(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new we(YN(n))}function QN(t,e){return wE(t.databaseId,e)}function d8(t){const e=KN(t);return e.length===4?wt.emptyPath():YN(e)}function Z_(t){return new wt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YN(t){return at(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function fI(t,e,n){return{name:J_(t,e),fields:n.value.mapValue.fields}}function h8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Se(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(at(d===void 0||typeof d=="string",58123),vn.fromBase64String(d||"")):(at(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),vn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?G.UNKNOWN:WN(c.code);return new ue(d,c.message||"")}(o);n=new qN(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Qy(t,r.document.name),i=si(r.document.updateTime),o=r.document.createTime?si(r.document.createTime):ke.min(),a=new ur({mapValue:{fields:r.document.fields}}),l=Fn.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new fp(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Qy(t,r.document),i=r.readTime?si(r.readTime):ke.min(),o=Fn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new fp([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Qy(t,r.document),i=r.removedTargetIds||[];n=new fp([],i,s,null)}else{if(!("filter"in e))return Se(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new n8(s,i),a=r.targetId;n=new HN(a,o)}}return n}function f8(t,e){let n;if(e instanceof Nh)n={update:fI(t,e.key,e.value)};else if(e instanceof Rg)n={delete:J_(t,e.key)};else if(e instanceof wa)n={update:fI(t,e.key,e.data),updateMask:T8(e.fieldMask)};else{if(!(e instanceof ZW))return Se(16599,{Rt:e.type});n={verify:J_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ch)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof uh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof dh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof pm)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw Se(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:u8(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Se(27497)}(t,e.precondition)),n}function p8(t,e){return t&&t.length>0?(at(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?si(s.updateTime):si(i);return o.isEqual(ke.min())&&(o=si(i)),new YW(o,s.transformResults||[])}(n,e))):[]}function m8(t,e){return{documents:[QN(t,e.path)]}}function g8(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QN(t,s);const i=function(c){if(c.length!==0)return JN(Os.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:Ul(f.field),direction:_8(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Y_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{Vt:n,parent:s}}function y8(t){let e=d8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){at(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=XN(h);return f instanceof Os&&CN(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(T){return new lh(zl(T.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Eg(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,p=h.values||[];return new hm(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,p=h.values||[];return new hm(p,f)}(n.endAt)),MW(e,s,o,i,a,"F",l,c)}function v8(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zl(n.unaryFilter.field);return en.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=zl(n.unaryFilter.field);return en.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zl(n.unaryFilter.field);return en.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zl(n.unaryFilter.field);return en.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}}(t):t.fieldFilter!==void 0?function(n){return en.create(zl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Os.create(n.compositeFilter.filters.map(r=>XN(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Se(1026)}}(n.compositeFilter.op))}(t):Se(30097,{filter:t})}function _8(t){return o8[t]}function w8(t){return a8[t]}function E8(t){return l8[t]}function Ul(t){return{fieldPath:t.canonicalString()}}function zl(t){return mn.fromServerFormat(t.fieldPath)}function JN(t){return t instanceof en?function(n){if(n.op==="=="){if(eI(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NAN"}};if(ZS(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(eI(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NOT_NAN"}};if(ZS(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ul(n.field),op:w8(n.op),value:n.value}}}(t):t instanceof Os?function(n){const r=n.getFilters().map(s=>JN(s));return r.length===1?r[0]:{compositeFilter:{op:E8(n.op),filters:r}}}(t):Se(54877,{filter:t})}function T8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n,r,s,i=ke.min(),o=ke.min(),a=vn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Vo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e){this.gt=e}}function x8(t){const e=y8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(){this.Dn=new I8}addToCollectionParentIndex(e,n){return this.Dn.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(oa.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(oa.min())}updateCollectionGroup(e,n,r){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class I8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new cn(wt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new cn(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eD=41943040;class lr{static withCacheSize(e){return new lr(e,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr.DEFAULT_COLLECTION_PERCENTILE=10,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lr.DEFAULT=new lr(eD,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lr.DISABLED=new lr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Gc(0)}static ur(){return new Gc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="LruGarbageCollector",C8=1048576;function gI([t,e],[n,r]){const s=je(t,n);return s===0?je(e,r):s}class R8{constructor(e){this.Tr=e,this.buffer=new cn(gI),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();gI(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class A8{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){he(mI,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>A(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){du(n)?he(mI,"Ignoring IndexedDB error during garbage collection: ",n):yield uu(n)}yield this.Rr(3e5)}))}}class k8{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Q.resolve(wg.ue);const r=new R8(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(pI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pI):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Vl()<=Be.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function P8(t,e){return new k8(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(){this.changes=new wl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&bd(r.mutation,s,Ar.empty(),ze.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,n,r=We()){const s=Fa();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=rd();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Fa();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,We()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Zi();const o=Td(),a=function(){return Td()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof wa)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),bd(d.mutation,c,d.mutation.getFieldMask(),ze.now())):o.set(c.key,Ar.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new D8(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Td();let s=new nn((o,a)=>o-a),i=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Ar.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||We()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=MN();d.forEach(f=>{if(!i.has(f)){const p=BN(n.get(f),r.get(f));p!==null&&h.set(f,p),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return Q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return we.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):PN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):Q.resolve(Fa());let a=ih,l=i;return o.next(c=>Q.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?Q.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,We())).next(d=>({batchId:a,changes:LN(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new we(n)).next(r=>{let s=rd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=rd();return this.indexManager.getCollectionParents(e,i).next(a=>Q.forEach(a,l=>{const c=function(h,f){return new hu(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Fn.newInvalidDocument(d)))});let a=rd();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&bd(d.mutation,c,Ar.empty(),ze.now()),Sg(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return Q.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:si(s.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:x8(s.bundledQuery),readTime:si(s.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(){this.overlays=new nn(we.comparator),this.kr=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fa();return Q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),Q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),Q.resolve()}getOverlaysForCollection(e,n,r){const s=Fa(),i=n.length+1,o=new we(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return Q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new nn((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Fa(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Fa(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return Q.resolve(a)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new t8(n,r));let i=this.kr.get(n);i===void 0&&(i=We(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(){this.sessionToken=vn.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(){this.qr=new cn(hn.Qr),this.$r=new cn(hn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new hn(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new hn(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new we(new wt([])),r=new hn(n,e),s=new hn(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new we(new wt([])),r=new hn(n,e),s=new hn(n,e+1);let i=We();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new hn(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class hn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return we.comparator(e.key,n.key)||je(e.Hr,n.Hr)}static Ur(e,n){return je(e.Hr,n.Hr)||we.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new cn(hn.Qr)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new e8(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Yr=this.Yr.add(new hn(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Q.resolve(o)}lookupMutationBatch(e,n){return Q.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return Q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?hE:this.er-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new hn(n,0),s=new hn(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const a=this.Zr(o.Hr);i.push(a)}),Q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new cn(je);return n.forEach(s=>{const i=new hn(s,0),o=new hn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],a=>{r=r.add(a.Hr)})}),Q.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;we.isDocumentKey(i)||(i=i.child(""));const o=new hn(new we(i),0);let a=new cn(je);return this.Yr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Hr)),!0)},o),Q.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){at(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Q.forEach(n.mutations,s=>{const i=new hn(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new hn(n,0),s=this.Yr.firstAfterOrEqual(r);return Q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e){this.ni=e,this.docs=function(){return new nn(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Q.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(n))}getEntries(e,n){let r=Zi();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Fn.newInvalidDocument(s))}),Q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Zi();const o=n.path,a=new we(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||mW(pW(d),r)<=0||(s.has(d.key)||Sg(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return Q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Se(9500)}ri(e,n){return Q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new U8(this)}getSize(e){return Q.resolve(this.size)}}class U8 extends N8{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),Q.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e){this.persistence=e,this.ii=new wl(n=>mE(n),gE),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.si=0,this.oi=new EE,this.targetCount=0,this._i=Gc.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),Q.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Gc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.hr(n),Q.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),Q.waitFor(i).next(()=>s)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return Q.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),Q.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),Q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return Q.resolve(r)}containsKey(e,n){return Q.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,n){this.ai={},this.overlays={},this.ui=new wg(0),this.ci=!1,this.ci=!0,this.li=new F8,this.referenceDelegate=e(this),this.hi=new z8(this),this.indexManager=new S8,this.remoteDocumentCache=function(s){return new j8(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new b8(n),this.Ti=new L8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new M8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new V8(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){he("MemoryPersistence","Starting transaction:",e);const s=new B8(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return Q.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class B8 extends yW{constructor(e){super(),this.currentSequenceNumber=e}}class TE{constructor(e){this.persistence=e,this.Ai=new EE,this.Ri=null}static Vi(e){return new TE(e)}get mi(){if(this.Ri)return this.Ri;throw Se(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),Q.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.mi,r=>{const s=we.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,ke.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return Q.or([()=>Q.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class gm{constructor(e,n){this.persistence=e,this.gi=new wl(r=>wW(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=P8(this,n)}static Vi(e,n){return new gm(e,n)}Ii(){}di(e){return Q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return Q.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?Q.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ke.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),Q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),Q.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),Q.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=up(e.data.value)),n}Sr(e,n,r){return Q.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return Q.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=We(),s=We();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new bE(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return pz()?8:vW(Wn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new $8;return this.ws(e,n,o).next(a=>{if(i.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(Vl()<=Be.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",jl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Q.resolve()):(Vl()<=Be.DEBUG&&he("QueryEngine","Query:",jl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Vl()<=Be.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",jl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ri(n))):Q.resolve())}ps(e,n){if(sI(n))return Q.resolve(null);let r=ri(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=fm(n,null,"F"),r=ri(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=We(...i);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.bs(n,a);return this.Ds(n,c,o,l.readTime)?this.ps(e,fm(n,null,"F")):this.vs(e,c,n,l)}))})))}ys(e,n,r,s){return sI(n)||s.isEqual(ke.min())?Q.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?Q.resolve(null):(Vl()<=Be.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),jl(n)),this.vs(e,o,n,fW(s,ih)).next(a=>a))})}bs(e,n){let r=new cn(DN(e));return n.forEach((s,i)=>{Sg(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return Vl()<=Be.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",jl(n)),this.gs.getDocumentsMatchingQuery(e,n,oa.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="LocalStore",H8=3e8;class q8{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new nn(je),this.Ms=new wl(i=>mE(i),gE),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O8(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function G8(t,e,n,r){return new q8(t,e,n,r)}function nD(t,e){return A(this,null,function*(){const n=Ne(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=We();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Bs:c,removedBatchIds:o,addedBatchIds:a}))})})})}function K8(t,e){const n=Ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let p=Q.resolve();return f.forEach(T=>{p=p.next(()=>d.getEntry(l,T)).next(v=>{const w=c.docVersions.get(T);at(w!==null,48541),v.version.compareTo(w)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),d.addEntry(v)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=We();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function rD(t){const e=Ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Q8(t,e){const n=Ne(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.hi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.hi.addMatchingKeys(i,d.addedDocuments,h)));let p=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(vn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),s=s.insert(h,p),function(v,w,E){return v.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=H8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,p,d)&&a.push(n.hi.updateTargetData(i,p))});let l=Zi(),c=We();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(Y8(i,o,e.documentUpdates).next(d=>{l=d.Ls,c=d.ks})),!r.isEqual(ke.min())){const d=n.hi.getLastRemoteSnapshotVersion(i).next(h=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return Q.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Fs=s,i))}function Y8(t,e,n){let r=We(),s=We();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Zi();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ke.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):he(xE,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ls:o,ks:s}})}function X8(t,e){const n=Ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=hE),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function J8(t,e){const n=Ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,Q.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new Vo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function ew(t,e,n){return A(this,null,function*(){const r=Ne(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!du(o))throw o;he(xE,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)})}function yI(t,e,n){const r=Ne(t);let s=ke.min(),i=We();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=Ne(l),f=h.Ms.get(d);return f!==void 0?Q.resolve(h.Fs.get(f)):h.hi.getTargetData(c,d)}(r,o,ri(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:ke.min(),n?i:We())).next(a=>(Z8(r,VW(e),a),{documents:a,qs:i})))}function Z8(t,e,n){let r=t.xs.get(e)||ke.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class vI{constructor(){this.activeTargetIds=WW()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eH{constructor(){this.Fo=new vI,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new vI,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="ConnectivityMonitor";class wI{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){he(_I,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){he(_I,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff=null;function tw(){return Ff===null?Ff=function(){return 268435456+Math.round(2147483648*Math.random())}():Ff++,"0x"+Ff.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="RestConnection",nH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rH{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===um?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=tw(),a=this.Go(e,n.toUriEncodedString());he(Yy,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,s,i);const{host:c}=new URL(a),d=ui(c);return this.jo(e,a,l,r,d).then(h=>(he(Yy,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Ji(Yy,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=nH[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="WebChannelConnection";class iH extends rH{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=tw();return new Promise((a,l)=>{const c=new nN;c.setWithCredentials(!0),c.listenOnce(rN.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case cp.NO_ERROR:const h=c.getResponseJson();he(Dn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case cp.TIMEOUT:he(Dn,`RPC '${e}' ${o} timed out`),l(new ue(G.DEADLINE_EXCEEDED,"Request time out"));break;case cp.HTTP_ERROR:const f=c.getStatus();if(he(Dn,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const T=p==null?void 0:p.error;if(T&&T.status&&T.message){const v=function(E){const y=E.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(y)>=0?y:G.UNKNOWN}(T.status);l(new ue(v,T.message))}else l(new ue(G.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ue(G.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{c_:e,streamId:o,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{he(Dn,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);he(Dn,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}P_(e,n,r){const s=tw(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=oN(),a=iN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");he(Dn,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.T_(h);let f=!1,p=!1;const T=new sH({Ho:w=>{p?he(Dn,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(f||(he(Dn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),he(Dn,`RPC '${e}' stream ${s} sending:`,w),h.send(w))},Yo:()=>h.close()}),v=(w,E,y)=>{w.listen(E,x=>{try{y(x)}catch(C){setTimeout(()=>{throw C},0)}})};return v(h,nd.EventType.OPEN,()=>{p||(he(Dn,`RPC '${e}' stream ${s} transport opened.`),T.s_())}),v(h,nd.EventType.CLOSE,()=>{p||(p=!0,he(Dn,`RPC '${e}' stream ${s} transport closed`),T.__(),this.I_(h))}),v(h,nd.EventType.ERROR,w=>{p||(p=!0,Ji(Dn,`RPC '${e}' stream ${s} transport errored. Name:`,w.name,"Message:",w.message),T.__(new ue(G.UNAVAILABLE,"The operation could not be completed")))}),v(h,nd.EventType.MESSAGE,w=>{var E;if(!p){const y=w.data[0];at(!!y,16349);const x=y,C=(x==null?void 0:x.error)||((E=x[0])===null||E===void 0?void 0:E.error);if(C){he(Dn,`RPC '${e}' stream ${s} received error:`,C);const D=C.status;let V=function(R){const P=Xt[R];if(P!==void 0)return WN(P)}(D),S=C.message;V===void 0&&(V=G.INTERNAL,S="Unknown error status: "+D+" with message "+C.message),p=!0,T.__(new ue(V,S)),h.close()}else he(Dn,`RPC '${e}' stream ${s} received:`,y),T.a_(y)}}),v(a,sN.STAT_EVENT,w=>{w.stat===B_.PROXY?he(Dn,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===B_.NOPROXY&&he(Dn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.o_()},0),T}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Xy(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t){return new c8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&he("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="PersistentStream";class iD{constructor(e,n,r,s,i,o,a,l){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new sD(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return A(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return A(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return A(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(Xi(n.toString()),Xi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new ue(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(()=>A(this,null,function*(){this.state=0,this.start()}))}G_(e){return he(EI,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(he(EI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oH extends iD{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=h8(this.serializer,e),r=function(i){if(!("targetChange"in i))return ke.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ke.min():o.readTime?si(o.readTime):ke.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Z_(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=K_(l)?{documents:m8(i,l)}:{query:g8(i,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=GN(i,o.resumeToken);const c=Y_(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ke.min())>0){a.readTime=mm(i,o.snapshotVersion.toTimestamp());const c=Y_(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=v8(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Z_(this.serializer),n.removeTarget=e,this.k_(n)}}class aH extends iD{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return at(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){at(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=p8(e.writeResults,e.commitTime),r=si(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Z_(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>f8(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{}class cH extends lH{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new ue(G.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,X_(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ue(G.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,X_(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(G.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class uH{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Xi(n),this._a=!1):he("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol="RemoteStore";class dH{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(()=>A(this,null,function*(){El(this)&&(he(ol,"Restarting streams for network reachability change."),yield function(l){return A(this,null,function*(){const c=Ne(l);c.Ia.add(4),yield Oh(c),c.Aa.set("Unknown"),c.Ia.delete(4),yield Pg(c)})}(this))}))}),this.Aa=new uH(r,s)}}function Pg(t){return A(this,null,function*(){if(El(t))for(const e of t.da)yield e(!0)})}function Oh(t){return A(this,null,function*(){for(const e of t.da)yield e(!1)})}function oD(t,e){const n=Ne(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),RE(n)?CE(n):fu(n).x_()&&IE(n,e))}function SE(t,e){const n=Ne(t),r=fu(n);n.Ta.delete(e),r.x_()&&aD(n,e),n.Ta.size===0&&(r.x_()?r.B_():El(n)&&n.Aa.set("Unknown"))}function IE(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fu(t).H_(e)}function aD(t,e){t.Ra.$e(e),fu(t).Y_(e)}function CE(t){t.Ra=new i8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),fu(t).start(),t.Aa.aa()}function RE(t){return El(t)&&!fu(t).M_()&&t.Ta.size>0}function El(t){return Ne(t).Ia.size===0}function lD(t){t.Ra=void 0}function hH(t){return A(this,null,function*(){t.Aa.set("Online")})}function fH(t){return A(this,null,function*(){t.Ta.forEach((e,n)=>{IE(t,e)})})}function pH(t,e){return A(this,null,function*(){lD(t),RE(t)?(t.Aa.la(e),CE(t)):t.Aa.set("Unknown")})}function mH(t,e,n){return A(this,null,function*(){if(t.Aa.set("Online"),e instanceof qN&&e.state===2&&e.cause)try{yield function(s,i){return A(this,null,function*(){const o=i.cause;for(const a of i.targetIds)s.Ta.has(a)&&(yield s.remoteSyncer.rejectListen(a,o),s.Ta.delete(a),s.Ra.removeTarget(a))})}(t,e)}catch(r){he(ol,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ym(t,r)}else if(e instanceof fp?t.Ra.Ye(e):e instanceof HN?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ke.min()))try{const r=yield rD(t.localStore);n.compareTo(r)>=0&&(yield function(i,o){const a=i.Ra.Pt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ta.get(c);d&&i.Ta.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ta.get(l);if(!d)return;i.Ta.set(l,d.withResumeToken(vn.EMPTY_BYTE_STRING,d.snapshotVersion)),aD(i,l);const h=new Vo(d.target,l,c,d.sequenceNumber);IE(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){he(ol,"Failed to raise snapshot:",r),yield ym(t,r)}})}function ym(t,e,n){return A(this,null,function*(){if(!du(e))throw e;t.Ia.add(1),yield Oh(t),t.Aa.set("Offline"),n||(n=()=>rD(t.localStore)),t.asyncQueue.enqueueRetryable(()=>A(this,null,function*(){he(ol,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield Pg(t)}))})}function cD(t,e){return e().catch(n=>ym(t,n,e))}function Ng(t){return A(this,null,function*(){const e=Ne(t),n=ua(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:hE;for(;gH(e);)try{const s=yield X8(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,yH(e,s)}catch(s){yield ym(e,s)}uD(e)&&dD(e)})}function gH(t){return El(t)&&t.Pa.length<10}function yH(t,e){t.Pa.push(e);const n=ua(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function uD(t){return El(t)&&!ua(t).M_()&&t.Pa.length>0}function dD(t){ua(t).start()}function vH(t){return A(this,null,function*(){ua(t).na()})}function _H(t){return A(this,null,function*(){const e=ua(t);for(const n of t.Pa)e.X_(n.mutations)})}function wH(t,e,n){return A(this,null,function*(){const r=t.Pa.shift(),s=vE.from(r,e,n);yield cD(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),yield Ng(t)})}function EH(t,e){return A(this,null,function*(){e&&ua(t).Z_&&(yield function(r,s){return A(this,null,function*(){if(function(o){return r8(o)&&o!==G.ABORTED}(s.code)){const i=r.Pa.shift();ua(r).N_(),yield cD(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),yield Ng(r)}})}(t,e)),uD(t)&&dD(t)})}function TI(t,e){return A(this,null,function*(){const n=Ne(t);n.asyncQueue.verifyOperationInProgress(),he(ol,"RemoteStore received new credentials");const r=El(n);n.Ia.add(3),yield Oh(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield Pg(n)})}function TH(t,e){return A(this,null,function*(){const n=Ne(t);e?(n.Ia.delete(2),yield Pg(n)):e||(n.Ia.add(2),yield Oh(n),n.Aa.set("Unknown"))})}function fu(t){return t.Va||(t.Va=function(n,r,s){const i=Ne(n);return i.ia(),new oH(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:hH.bind(null,t),e_:fH.bind(null,t),n_:pH.bind(null,t),J_:mH.bind(null,t)}),t.da.push(e=>A(this,null,function*(){e?(t.Va.N_(),RE(t)?CE(t):t.Aa.set("Unknown")):(yield t.Va.stop(),lD(t))}))),t.Va}function ua(t){return t.ma||(t.ma=function(n,r,s){const i=Ne(n);return i.ia(),new aH(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:vH.bind(null,t),n_:EH.bind(null,t),ea:_H.bind(null,t),ta:wH.bind(null,t)}),t.da.push(e=>A(this,null,function*(){e?(t.ma.N_(),yield Ng(t)):(yield t.ma.stop(),t.Pa.length>0&&(he(ol,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new AE(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kE(t,e){if(Xi("AsyncQueue",`${e}: ${t}`),du(t))return new ue(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{static emptySet(e){return new yc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||we.comparator(n.key,r.key):(n,r)=>we.comparator(n.key,r.key),this.keyedMap=rd(),this.sortedSet=new nn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new yc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(){this.fa=new nn(we.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Se(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Kc{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Kc(e,n,yc.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bH{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class xH{constructor(){this.queries=xI(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=Ne(n),i=s.queries;s.queries=xI(),i.forEach((o,a)=>{for(const l of a.wa)l.onError(r)})})(this,new ue(G.ABORTED,"Firestore shutting down"))}}function xI(){return new wl(t=>NN(t),xg)}function PE(t,e){return A(this,null,function*(){const n=Ne(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new bH,r=e.ba()?0:1);try{switch(r){case 0:i.ya=yield n.onListen(s,!0);break;case 1:i.ya=yield n.onListen(s,!1);break;case 2:yield n.onFirstRemoteStoreListen(s)}}catch(o){const a=kE(o,`Initialization of query '${jl(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&DE(n)})}function NE(t,e){return A(this,null,function*(){const n=Ne(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function SH(t,e){const n=Ne(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.wa)a.Ca(s)&&(r=!0);o.ya=s}}r&&DE(n)}function IH(t,e,n){const r=Ne(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function DE(t){t.Da.forEach(e=>{e.next()})}var nw,SI;(SI=nw||(nw={})).Fa="default",SI.Cache="cache";class OE{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Kc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Kc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==nw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.key=e}}class fD{constructor(e){this.key=e}}class CH{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=We(),this.mutatedKeys=We(),this.Xa=DN(e),this.eu=new yc(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new bI,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),p=Sg(this.query,h)?h:null,T=!!f&&this.mutatedKeys.has(f.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;f&&p?f.data.isEqual(p.data)?T!==v&&(r.track({type:3,doc:p}),w=!0):this.iu(f,p)||(r.track({type:2,doc:p}),w=!0,(l&&this.Xa(p,l)>0||c&&this.Xa(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),w=!0):f&&!p&&(r.track({type:1,doc:f}),w=!0,(l||c)&&(a=!0)),w&&(p?(o=o.add(p),i=v?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{eu:o,ru:r,Ds:a,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((d,h)=>function(p,T){const v=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{At:w})}};return v(p)-v(T)}(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),s=s!=null&&s;const a=n&&!s?this.ou():[],l=this.Za.size===0&&this.current&&!s?1:0,c=l!==this.Ya;return this.Ya=l,o.length!==0||c?{snapshot:new Kc(this.query,e.eu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new bI,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=We(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new fD(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new hD(r))}),n}uu(e){this.Ha=e.qs,this.Za=We();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Kc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const LE="SyncEngine";class RH{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class AH{constructor(e){this.key=e,this.lu=!1}}class kH{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new wl(a=>NN(a),xg),this.Tu=new Map,this.Iu=new Set,this.du=new nn(we.comparator),this.Eu=new Map,this.Au=new EE,this.Ru={},this.Vu=new Map,this.mu=Gc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}function PH(t,e,n=!0){return A(this,null,function*(){const r=_D(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=yield pD(r,e,n,!0),s})}function NH(t,e){return A(this,null,function*(){const n=_D(t);yield pD(n,e,!0,!1)})}function pD(t,e,n,r){return A(this,null,function*(){const s=yield J8(t.localStore,ri(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=yield DH(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&oD(t.remoteStore,s),a})}function DH(t,e,n,r,s){return A(this,null,function*(){t.gu=(h,f,p)=>function(v,w,E,y){return A(this,null,function*(){let x=w.view.nu(E);x.Ds&&(x=yield yI(v.localStore,w.query,!1).then(({documents:S})=>w.view.nu(S,x)));const C=y&&y.targetChanges.get(w.targetId),D=y&&y.targetMismatches.get(w.targetId)!=null,V=w.view.applyChanges(x,v.isPrimaryClient,C,D);return CI(v,w.targetId,V._u),V.snapshot})}(t,h,f,p);const i=yield yI(t.localStore,e,!0),o=new CH(e,i.qs),a=o.nu(i.documents),l=Dh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);CI(t,n,c._u);const d=new RH(e,n,o);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),c.snapshot})}function OH(t,e,n){return A(this,null,function*(){const r=Ne(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!xg(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||(yield ew(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&SE(r.remoteStore,s.targetId),rw(r,s.targetId)}).catch(uu))):(rw(r,s.targetId),yield ew(r.localStore,s.targetId,!0))})}function LH(t,e){return A(this,null,function*(){const n=Ne(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),SE(n.remoteStore,r.targetId))})}function MH(t,e,n){return A(this,null,function*(){const r=$H(t);try{const s=yield function(o,a){const l=Ne(o),c=ze.now(),d=a.reduce((p,T)=>p.add(T.key),We());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let T=Zi(),v=We();return l.Os.getEntries(p,d).next(w=>{T=w,T.forEach((E,y)=>{y.isValidDocument()||(v=v.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,T)).next(w=>{h=w;const E=[];for(const y of a){const x=JW(y,h.get(y.key).overlayedDocument);x!=null&&E.push(new wa(y.key,x,xN(x.value.mapValue),tr.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,E,a)}).next(w=>{f=w;const E=w.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(p,w.batchId,E)})}).then(()=>({batchId:f.batchId,changes:LN(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ru[o.currentUser.toKey()];c||(c=new nn(je)),c=c.insert(a,l),o.Ru[o.currentUser.toKey()]=c}(r,s.batchId,n),yield Lh(r,s.changes),yield Ng(r.remoteStore)}catch(s){const i=kE(s,"Failed to persist write");n.reject(i)}})}function mD(t,e){return A(this,null,function*(){const n=Ne(t);try{const r=yield Q8(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(at(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?at(o.lu,14607):s.removedDocuments.size>0&&(at(o.lu,42227),o.lu=!1))}),yield Lh(n,r,e)}catch(r){yield uu(r)}})}function II(t,e,n){const r=Ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Ne(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.wa)f.va(a)&&(c=!0)}),c&&DE(l)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function FH(t,e,n){return A(this,null,function*(){const r=Ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new nn(we.comparator);o=o.insert(i,Fn.newNoDocument(i,ke.min()));const a=We().add(i),l=new Ag(ke.min(),new Map,new nn(je),o,a);yield mD(r,l),r.du=r.du.remove(i),r.Eu.delete(e),ME(r)}else yield ew(r.localStore,e,!1).then(()=>rw(r,e,n)).catch(uu)})}function VH(t,e){return A(this,null,function*(){const n=Ne(t),r=e.batch.batchId;try{const s=yield K8(n.localStore,e);yD(n,r,null),gD(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Lh(n,s)}catch(s){yield uu(s)}})}function jH(t,e,n){return A(this,null,function*(){const r=Ne(t);try{const s=yield function(o,a){const l=Ne(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(at(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);yD(r,e,n),gD(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Lh(r,s)}catch(s){yield uu(s)}})}function gD(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function yD(t,e,n){const r=Ne(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function rw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||vD(t,r)})}function vD(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(SE(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),ME(t))}function CI(t,e,n){for(const r of n)r instanceof hD?(t.Au.addReference(r.key,e),UH(t,r)):r instanceof fD?(he(LE,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||vD(t,r.key)):Se(19791,{yu:r})}function UH(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(he(LE,"New document in limbo: "+n),t.Iu.add(r),ME(t))}function ME(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new we(wt.fromString(e)),r=t.mu.next();t.Eu.set(r,new AH(n)),t.du=t.du.insert(n,r),oD(t.remoteStore,new Vo(ri(bg(n.path)),r,"TargetPurposeLimboResolution",wg.ue))}}function Lh(t,e,n){return A(this,null,function*(){const r=Ne(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,l)=>{o.push(r.gu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=bE.Es(l.targetId,c);i.push(h)}}))}),yield Promise.all(o),r.hu.J_(s),yield function(l,c){return A(this,null,function*(){const d=Ne(l);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Q.forEach(c,f=>Q.forEach(f.Is,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>Q.forEach(f.ds,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!du(h))throw h;he(xE,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const p=d.Fs.get(f),T=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(T);d.Fs=d.Fs.insert(f,v)}}})}(r.localStore,i))})}function zH(t,e){return A(this,null,function*(){const n=Ne(t);if(!n.currentUser.isEqual(e)){he(LE,"User change. New user:",e.toKey());const r=yield nD(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(a=>{a.forEach(l=>{l.reject(new ue(G.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Lh(n,r.Bs)}})}function BH(t,e){const n=Ne(t),r=n.Eu.get(e);if(r&&r.lu)return We().add(r.key);{let s=We();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const a=n.Pu.get(o);s=s.unionWith(a.view.tu)}return s}}function _D(t){const e=Ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FH.bind(null,e),e.hu.J_=SH.bind(null,e.eventManager),e.hu.pu=IH.bind(null,e.eventManager),e}function $H(t){const e=Ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jH.bind(null,e),e}class vm{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(e){return A(this,null,function*(){this.serializer=kg(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),yield this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)})}Cu(e,n){return null}Fu(e,n){return null}vu(e){return G8(this.persistence,new W8,e.initialUser,this.serializer)}Du(e){return new tD(TE.Vi,this.serializer)}bu(e){return new eH}terminate(){return A(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}vm.provider={build:()=>new vm};class WH extends vm{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){at(this.persistence.referenceDelegate instanceof gm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new A8(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?lr.withCacheSize(this.cacheSizeBytes):lr.DEFAULT;return new tD(r=>gm.Vi(r,n),this.serializer)}}class sw{initialize(e,n){return A(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>II(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zH.bind(null,this.syncEngine),yield TH(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new xH}()}createDatastore(e){const n=kg(e.databaseInfo.databaseId),r=function(i){return new iH(i)}(e.databaseInfo);return function(i,o,a,l){return new cH(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new dH(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>II(this.syncEngine,n,0),function(){return wI.C()?new wI:new tH}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new kH(s,i,o,a,l,c);return d&&(h.fu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return A(this,null,function*(){var e,n;yield function(s){return A(this,null,function*(){const i=Ne(s);he(ol,"RemoteStore shutting down."),i.Ia.add(5),yield Oh(i),i.Ea.shutdown(),i.Aa.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}}sw.provider={build:()=>new sw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Xi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="FirestoreClient";class HH{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ln.UNAUTHENTICATED,this.clientId=vg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,o=>A(this,null,function*(){he(da,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(he(da,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>A(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=kE(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function Jy(t,e){return A(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),he(da,"Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(s=>A(this,null,function*(){r.isEqual(s)||(yield nD(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener(()=>{Ji("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{he("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Ji("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e})}function RI(t,e){return A(this,null,function*(){t.asyncQueue.verifyOperationInProgress();const n=yield qH(t);he(da,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>TI(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>TI(e.remoteStore,s)),t._onlineComponents=e})}function qH(t){return A(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he(da,"Using user provided OfflineComponentProvider");try{yield Jy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===G.FAILED_PRECONDITION||s.code===G.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ji("Error using user provided cache. Falling back to memory cache: "+n),yield Jy(t,new vm)}}else he(da,"Using default OfflineComponentProvider"),yield Jy(t,new WH(void 0));return t._offlineComponents})}function wD(t){return A(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(he(da,"Using user provided OnlineComponentProvider"),yield RI(t,t._uninitializedComponentsProvider._online)):(he(da,"Using default OnlineComponentProvider"),yield RI(t,new sw))),t._onlineComponents})}function GH(t){return wD(t).then(e=>e.syncEngine)}function _m(t){return A(this,null,function*(){const e=yield wD(t),n=e.eventManager;return n.onListen=PH.bind(null,e.syncEngine),n.onUnlisten=OH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=LH.bind(null,e.syncEngine),n})}function KH(t,e,n={}){const r=new Mi;return t.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return function(i,o,a,l,c){const d=new FE({next:f=>{d.Ou(),o.enqueueAndForget(()=>NE(i,h));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new ue(G.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new ue(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new OE(bg(a.path),d,{includeMetadataChanges:!0,ka:!0});return PE(i,h)}(yield _m(t),t.asyncQueue,e,n,r)})),r.promise}function QH(t,e,n={}){const r=new Mi;return t.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return function(i,o,a,l,c){const d=new FE({next:f=>{d.Ou(),o.enqueueAndForget(()=>NE(i,h)),f.fromCache&&l.source==="server"?c.reject(new ue(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new OE(a,d,{includeMetadataChanges:!0,ka:!0});return PE(i,h)}(yield _m(t),t.asyncQueue,e,n,r)})),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD="firestore.googleapis.com",kI=!0;class PI{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TD,this.ssl=kI}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:kI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eD;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<C8)throw new ue(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ED((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ue(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ue(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ue(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dg{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cN;switch(r.type){case"firstParty":return new aW(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return A(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=AI.get(n);r&&(he("ComponentProvider","Removing Datastore"),AI.delete(n),r.terminate())}(this),Promise.resolve()}}function bD(t,e,n,r={}){var s;t=Bn(t,Dg);const i=ui(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;i&&(hg(`https://${l}`),fg("Firestore",!0)),o.host!==TD&&o.host!==l&&Ji("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:i,emulatorOptions:r});if(!Ki(c,a)&&(t._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Ln.MOCK_USER;else{d=X0(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ue(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ln(f)}t._authCredentials=new sW(new lN(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hi(this.firestore,e,this._query)}}class Mt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ph(n,Mt._jsonSchema))return new Mt(e,r||null,new we(wt.fromString(n.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:tn("string",Mt._jsonSchemaVersion),referencePath:tn("string")};class Fi extends hi{constructor(e,n,r){super(e,n,bg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new we(e))}withConverter(e){return new Fi(this.firestore,e,this._path)}}function nr(t,e,...n){if(t=st(t),dN("collection","path",e),t instanceof Dg){const r=wt.fromString(e,...n);return WS(r),new Fi(t,null,r)}{if(!(t instanceof Mt||t instanceof Fi))throw new ue(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(wt.fromString(e,...n));return WS(r),new Fi(t.firestore,null,r)}}function Kt(t,e,...n){if(t=st(t),arguments.length===1&&(e=vg.newId()),dN("doc","path",e),t instanceof Dg){const r=wt.fromString(e,...n);return $S(r),new Mt(t,null,new we(r))}{if(!(t instanceof Mt||t instanceof Fi))throw new ue(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(wt.fromString(e,...n));return $S(r),new Mt(t.firestore,t instanceof Fi?t.converter:null,new we(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="AsyncQueue";class DI{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new sD(this,"async_queue_retry"),this.oc=()=>{const r=Xy();r&&he(NI,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Xy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Xy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Mi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return A(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!du(e))throw e;he(NI,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Xi("INTERNAL UNHANDLED ERROR: ",OI(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=AE.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&Se(47125,{hc:OI(this.tc)})}verifyOperationInProgress(){}Pc(){return A(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function OI(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ls extends Dg{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new DI,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return A(this,null,function*(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new DI(e),this._firestoreClient=void 0,yield e}})}}function iw(t,e){const n=typeof t=="object"?t:Sh(),r=typeof t=="string"?t:um,s=io(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Q0("firestore");i&&bD(s,...i)}return s}function pu(t){if(t._terminated)throw new ue(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||YH(t),t._firestoreClient}function YH(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new bW(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,ED(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new HH(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cr(vn.fromBase64String(e))}catch(n){throw new ue(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Cr(vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Cr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ph(e,Cr._jsonSchema))return Cr.fromBase64String(e.bytes)}}Cr._jsonSchemaVersion="firestore/bytes/1.0",Cr._jsonSchema={type:tn("string",Cr._jsonSchemaVersion),bytes:tn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Rs._jsonSchemaVersion}}static fromJSON(e){if(Ph(e,Rs._jsonSchema))return new Rs(e.latitude,e.longitude)}}Rs._jsonSchemaVersion="firestore/geoPoint/1.0",Rs._jsonSchema={type:tn("string",Rs._jsonSchemaVersion),latitude:tn("number"),longitude:tn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:As._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ph(e,As._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new As(e.vectorValues);throw new ue(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}As._jsonSchemaVersion="firestore/vectorValue/1.0",As._jsonSchema={type:tn("string",As._jsonSchemaVersion),vectorValues:tn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XH=/^__.*__$/;class JH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new wa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nh(e,this.data,n,this.fieldTransforms)}}class xD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new wa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function SD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ec:t})}}class VE{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new VE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return wm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(SD(this.Ec)&&XH.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class ZH{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||kg(e)}Dc(e,n,r,s=!1){return new VE({Ec:e,methodName:n,bc:r,path:mn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fh(t){const e=t._freezeSettings(),n=kg(t._databaseId);return new ZH(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jE(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);zE("Data must be an object, but it was:",o,r);const a=RD(r,o);let l,c;if(i.merge)l=new Ar(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=ow(e,h,n);if(!o.contains(f))throw new ue(G.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);kD(d,f)||d.push(f)}l=new Ar(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new JH(new ur(a),l,c)}class Og extends Mh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Og}}class UE extends Mh{_toFieldTransform(e){return new KW(e.path,new ch)}isEqual(e){return e instanceof UE}}function ID(t,e,n,r){const s=t.Dc(1,e,n);zE("Data must be an object, but it was:",s,r);const i=[],o=ur.empty();_a(r,(l,c)=>{const d=BE(e,l,n);c=st(c);const h=s.gc(d);if(c instanceof Og)i.push(d);else{const f=Vh(c,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new Ar(i);return new xD(o,a,s.fieldTransforms)}function CD(t,e,n,r,s,i){const o=t.Dc(1,e,n),a=[ow(e,r,n)],l=[s];if(i.length%2!=0)throw new ue(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(ow(e,i[f])),l.push(i[f+1]);const c=[],d=ur.empty();for(let f=a.length-1;f>=0;--f)if(!kD(c,a[f])){const p=a[f];let T=l[f];T=st(T);const v=o.gc(p);if(T instanceof Og)c.push(p);else{const w=Vh(T,v);w!=null&&(c.push(p),d.set(p,w))}}const h=new Ar(c);return new xD(d,h,o.fieldTransforms)}function e7(t,e,n,r=!1){return Vh(n,t.Dc(r?4:3,e))}function Vh(t,e){if(AD(t=st(t)))return zE("Unsupported field value:",e,t),RD(t,e);if(t instanceof Mh)return function(r,s){if(!SD(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Vh(a,s.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=st(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HW(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ze.fromDate(r);return{timestampValue:mm(s.serializer,i)}}if(r instanceof ze){const i=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mm(s.serializer,i)}}if(r instanceof Rs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cr)return{bytesValue:GN(s.serializer,r._byteString)};if(r instanceof Mt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:wE(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof As)return function(o,a){return{mapValue:{fields:{[EN]:{stringValue:bN},[dm]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.wc("VectorValues must only contain numeric values.");return yE(a.serializer,c)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${_g(r)}`)}(t,e)}function RD(t,e){const n={};return mN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_a(t,(r,s)=>{const i=Vh(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function AD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof Rs||t instanceof Cr||t instanceof Mt||t instanceof Mh||t instanceof As)}function zE(t,e,n){if(!AD(n)||!fN(n)){const r=_g(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function ow(t,e,n){if((e=st(e))instanceof mu)return e._internalPath;if(typeof e=="string")return BE(t,e);throw wm("Field path arguments must be of type string or ",t,!1,void 0,n)}const t7=new RegExp("[~\\*/\\[\\]]");function BE(t,e,n){if(e.search(t7)>=0)throw wm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mu(...e.split("."))._internalPath}catch(r){throw wm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wm(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new ue(G.INVALID_ARGUMENT,a+t+l)}function kD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new n7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class n7 extends PD{data(){return super.data()}}function Lg(t,e){return typeof e=="string"?BE(t,e):e instanceof mu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ue(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $E{}class Mg extends $E{}function Jn(t,e,...n){let r=[];e instanceof $E&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Fg).length,a=i.filter(l=>l instanceof jh).length;if(o>1||o>0&&a>0)throw new ue(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class jh extends Mg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new jh(e,n,r)}_apply(e){const n=this._parse(e);return DD(e._query,n),new hi(e.firestore,e.converter,Q_(e._query,n))}_parse(e){const n=Fh(e.firestore);return function(i,o,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ue(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){FI(h,d);const T=[];for(const v of h)T.push(MI(l,i,v));f={arrayValue:{values:T}}}else f=MI(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||FI(h,d),f=e7(a,o,h,d==="in"||d==="not-in");return en.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Vi(t,e,n){const r=e,s=Lg("where",t);return jh._create(s,r,n)}class Fg extends $E{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Fg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Os.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)DD(o,l),o=Q_(o,l)}(e._query,n),new hi(e.firestore,e.converter,Q_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vg extends Mg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new ue(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ue(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lh(i,o)}(e._query,this._field,this._direction);return new hi(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new hu(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Qc(t,e="asc"){const n=e,r=Lg("orderBy",t);return Vg._create(r,n)}class jg extends Mg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new jg(e,n,r)}_apply(e){return new hi(e.firestore,e.converter,fm(e._query,this._limit,this._limitType))}}function Em(t){return hW("limit",t),jg._create("limit",t,"F")}function MI(t,e,n){if(typeof(n=st(n))=="string"){if(n==="")throw new ue(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PN(e)&&n.indexOf("/")!==-1)throw new ue(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(wt.fromString(n));if(!we.isDocumentKey(r))throw new ue(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return JS(t,new we(r))}if(n instanceof Mt)return JS(t,n._key);throw new ue(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_g(n)}.`)}function FI(t,e){if(!Array.isArray(t)||t.length===0)throw new ue(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DD(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ue(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class OD{convertValue(e,n="none"){switch(ca(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(la(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _a(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[dm].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>qt(o.doubleValue));return new As(i)}convertGeoPoint(e){return new Rs(qt(e.latitude),qt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Tg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(oh(e));default:return null}}convertTimestamp(e){const n=aa(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=wt.fromString(e);at(ZN(r),9688,{name:e});const s=new Wc(r.get(1),r.get(3)),i=new we(r.popFirst(5));return s.isEqual(n)||Xi(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class tc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zo extends PD{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Lg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Zo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Zo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zo._jsonSchema={type:tn("string",Zo._jsonSchemaVersion),bundleSource:tn("string","DocumentSnapshot"),bundleName:tn("string"),bundle:tn("string")};class xd extends Zo{data(e={}){return super.data(e)}}class ea{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new tc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xd(this._firestore,this._userDataWriter,r.key,r,new tc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new xd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new tc(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new xd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new tc(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:r7(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ea._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function r7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t){t=Bn(t,Mt);const e=Bn(t.firestore,Ls);return KH(pu(e),t._key).then(n=>MD(e,t,n))}ea._jsonSchemaVersion="firestore/querySnapshot/1.0",ea._jsonSchema={type:tn("string",ea._jsonSchemaVersion),bundleSource:tn("string","QuerySnapshot"),bundleName:tn("string"),bundle:tn("string")};class HE extends OD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,n)}}function Mr(t){t=Bn(t,hi);const e=Bn(t.firestore,Ls),n=pu(e),r=new HE(e);return ND(t._query),QH(n,t._query).then(s=>new ea(e,r,t,s))}function qE(t,e,n){t=Bn(t,Mt);const r=Bn(t.firestore,Ls),s=WE(t.converter,e,n);return yu(r,[jE(Fh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,tr.none())])}function Hn(t,e,n,...r){t=Bn(t,Mt);const s=Bn(t.firestore,Ls),i=Fh(s);let o;return o=typeof(e=st(e))=="string"||e instanceof mu?CD(i,"updateDoc",t._key,e,n,r):ID(i,"updateDoc",t._key,e),yu(s,[o.toMutation(t._key,tr.exists(!0))])}function LD(t){return yu(Bn(t.firestore,Ls),[new Rg(t._key,tr.none())])}function GE(t,e){const n=Bn(t.firestore,Ls),r=Kt(t),s=WE(t.converter,e);return yu(n,[jE(Fh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,tr.exists(!1))]).then(()=>r)}function s7(t,...e){var n,r,s;t=st(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||LI(e[o])||(i=e[o++]);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(LI(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,d;if(t instanceof Mt)c=Bn(t.firestore,Ls),d=bg(t._key.path),l={next:h=>{e[o]&&e[o](MD(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Bn(t,hi);c=Bn(h.firestore,Ls),d=h._query;const f=new HE(c);l={next:p=>{e[o]&&e[o](new ea(c,f,h,p))},error:e[o+1],complete:e[o+2]},ND(t._query)}return function(f,p,T,v){const w=new FE(v),E=new OE(p,w,T);return f.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return PE(yield _m(f),E)})),()=>{w.Ou(),f.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return NE(yield _m(f),E)}))}}(pu(c),d,a,l)}function yu(t,e){return function(r,s){const i=new Mi;return r.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return MH(yield GH(r),s,i)})),i.promise}(pu(t),e)}function MD(t,e,n){const r=n.docs.get(e._key),s=new HE(t);return new Zo(t,s,e._key,r,new tc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Fh(e)}set(e,n,r){this._verifyNotCommitted();const s=Zy(e,this._firestore),i=WE(s.converter,n,r),o=jE(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,tr.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Zy(e,this._firestore);let o;return o=typeof(n=st(n))=="string"||n instanceof mu?CD(this._dataReader,"WriteBatch.update",i._key,n,r,s):ID(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,tr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Zy(e,this._firestore);return this._mutations=this._mutations.concat(new Rg(n._key,tr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ue(G.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zy(t,e){if((t=st(t)).firestore!==e)throw new ue(G.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Ts(){return new UE("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t){return pu(t=Bn(t,Ls)),new FD(t,e=>yu(t,e))}(function(e,n=!0){(function(s){cu=s})(va),es(new Lr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ls(new iW(r.getProvider("auth-internal")),new lW(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ue(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wc(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),zn(VS,jS,e),zn(VS,jS,"esm2017")})();const i7=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:OD,Bytes:Cr,CollectionReference:Fi,DocumentReference:Mt,DocumentSnapshot:Zo,FieldPath:mu,FieldValue:Mh,Firestore:Ls,FirestoreError:ue,GeoPoint:Rs,Query:hi,QueryCompositeFilterConstraint:Fg,QueryConstraint:Mg,QueryDocumentSnapshot:xd,QueryFieldFilterConstraint:jh,QueryLimitConstraint:jg,QueryOrderByConstraint:Vg,QuerySnapshot:ea,SnapshotMetadata:tc,Timestamp:ze,VectorValue:As,WriteBatch:FD,_AutoId:vg,_ByteString:vn,_DatabaseId:Wc,_DocumentKey:we,_EmptyAuthCredentialsProvider:cN,_FieldPath:mn,_cast:Bn,_logWarn:Ji,_validateIsNotUsedTogether:hN,addDoc:GE,collection:nr,connectFirestoreEmulator:bD,deleteDoc:LD,doc:Kt,ensureFirestoreConfigured:pu,executeWrite:yu,getDoc:gu,getDocs:Mr,getFirestore:iw,limit:Em,onSnapshot:s7,orderBy:Qc,query:Jn,serverTimestamp:Ts,setDoc:qE,updateDoc:Hn,where:Vi,writeBatch:VD},Symbol.toStringTag,{value:"Module"}));var o7="firebase",a7="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn(o7,a7,"app");const jD="@firebase/installations",KE="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=1e4,zD=`w:${KE}`,BD="FIS_v2",l7="https://firebaseinstallations.googleapis.com/v1",c7=60*60*1e3,u7="installations",d7="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},al=new _l(u7,d7,h7);function $D(t){return t instanceof rs&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD({projectId:t}){return`${l7}/projects/${t}/installations`}function HD(t){return{token:t.token,requestStatus:2,expiresIn:p7(t.expiresIn),creationTime:Date.now()}}function qD(t,e){return A(this,null,function*(){const r=(yield e.json()).error;return al.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function GD({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function f7(t,{refreshToken:e}){const n=GD(t);return n.append("Authorization",m7(e)),n}function KD(t){return A(this,null,function*(){const e=yield t();return e.status>=500&&e.status<600?t():e})}function p7(t){return Number(t.replace("s","000"))}function m7(t){return`${BD} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g7(r,s){return A(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=WD(t),o=GD(t),a=e.getImmediate({optional:!0});if(a){const h=yield a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}const l={fid:n,authVersion:BD,appId:t.appId,sdkVersion:zD},c={method:"POST",headers:o,body:JSON.stringify(l)},d=yield KD(()=>fetch(i,c));if(d.ok){const h=yield d.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:HD(h.authToken)}}else throw yield qD("Create Installation",d)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y7(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7=/^[cdef][\w-]{21}$/,aw="";function _7(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=w7(t);return v7.test(n)?n:aw}catch(t){return aw}}function w7(t){return y7(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=new Map;function XD(t,e){const n=Ug(t);JD(n,e),E7(n,e)}function JD(t,e){const n=YD.get(t);if(n)for(const r of n)r(e)}function E7(t,e){const n=T7();n&&n.postMessage({key:t,fid:e}),b7()}let Va=null;function T7(){return!Va&&"BroadcastChannel"in self&&(Va=new BroadcastChannel("[Firebase] FID Change"),Va.onmessage=t=>{JD(t.data.key,t.data.fid)}),Va}function b7(){YD.size===0&&Va&&(Va.close(),Va=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x7="firebase-installations-database",S7=1,ll="firebase-installations-store";let ev=null;function QE(){return ev||(ev=gP(x7,S7,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ll)}}})),ev}function Tm(t,e){return A(this,null,function*(){const n=Ug(t),s=(yield QE()).transaction(ll,"readwrite"),i=s.objectStore(ll),o=yield i.get(n);return yield i.put(e,n),yield s.done,(!o||o.fid!==e.fid)&&XD(t,e.fid),e})}function ZD(t){return A(this,null,function*(){const e=Ug(t),r=(yield QE()).transaction(ll,"readwrite");yield r.objectStore(ll).delete(e),yield r.done})}function zg(t,e){return A(this,null,function*(){const n=Ug(t),s=(yield QE()).transaction(ll,"readwrite"),i=s.objectStore(ll),o=yield i.get(n),a=e(o);return a===void 0?yield i.delete(n):yield i.put(a,n),yield s.done,a&&(!o||o.fid!==a.fid)&&XD(t,a.fid),a})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(t){return A(this,null,function*(){let e;const n=yield zg(t.appConfig,r=>{const s=I7(r),i=C7(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===aw?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function I7(t){const e=t||{fid:_7(),registrationStatus:0};return eO(e)}function C7(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(al.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=R7(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:A7(t)}:{installationEntry:e}}function R7(t,e){return A(this,null,function*(){try{const n=yield g7(t,e);return Tm(t.appConfig,n)}catch(n){throw $D(n)&&n.customData.serverCode===409?yield ZD(t.appConfig):yield Tm(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function A7(t){return A(this,null,function*(){let e=yield VI(t.appConfig);for(;e.registrationStatus===1;)yield QD(100),e=yield VI(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=yield YE(t);return r||n}return e})}function VI(t){return zg(t,e=>{if(!e)throw al.create("installation-not-found");return eO(e)})}function eO(t){return k7(t)?{fid:t.fid,registrationStatus:0}:t}function k7(t){return t.registrationStatus===1&&t.registrationTime+UD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P7(r,s){return A(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){const i=N7(t,n),o=f7(t,n),a=e.getImmediate({optional:!0});if(a){const h=yield a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}const l={installation:{sdkVersion:zD,appId:t.appId}},c={method:"POST",headers:o,body:JSON.stringify(l)},d=yield KD(()=>fetch(i,c));if(d.ok){const h=yield d.json();return HD(h)}else throw yield qD("Generate Auth Token",d)})}function N7(t,{fid:e}){return`${WD(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(t,e=!1){return A(this,null,function*(){let n;const r=yield zg(t.appConfig,i=>{if(!tO(i))throw al.create("not-registered");const o=i.authToken;if(!e&&L7(o))return i;if(o.requestStatus===1)return n=D7(t,e),i;{if(!navigator.onLine)throw al.create("app-offline");const a=F7(i);return n=O7(t,a),a}});return n?yield n:r.authToken})}function D7(t,e){return A(this,null,function*(){let n=yield jI(t.appConfig);for(;n.authToken.requestStatus===1;)yield QD(100),n=yield jI(t.appConfig);const r=n.authToken;return r.requestStatus===0?XE(t,e):r})}function jI(t){return zg(t,e=>{if(!tO(e))throw al.create("not-registered");const n=e.authToken;return V7(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function O7(t,e){return A(this,null,function*(){try{const n=yield P7(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield Tm(t.appConfig,r),n}catch(n){if($D(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield ZD(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Tm(t.appConfig,r)}throw n}})}function tO(t){return t!==void 0&&t.registrationStatus===2}function L7(t){return t.requestStatus===2&&!M7(t)}function M7(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+c7}function F7(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function V7(t){return t.requestStatus===1&&t.requestTime+UD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j7(t){return A(this,null,function*(){const e=t,{installationEntry:n,registrationPromise:r}=yield YE(e);return r?r.catch(console.error):XE(e).catch(console.error),n.fid})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U7(t,e=!1){return A(this,null,function*(){const n=t;return yield z7(n),(yield XE(n,e)).token})}function z7(t){return A(this,null,function*(){const{registrationPromise:e}=yield YE(t);e&&(yield e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B7(t){if(!t||!t.options)throw tv("App Configuration");if(!t.name)throw tv("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw tv(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function tv(t){return al.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO="installations",$7="installations-internal",W7=t=>{const e=t.getProvider("app").getImmediate(),n=B7(e),r=io(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},H7=t=>{const e=t.getProvider("app").getImmediate(),n=io(e,nO).getImmediate();return{getId:()=>j7(n),getToken:s=>U7(n,s)}};function q7(){es(new Lr(nO,W7,"PUBLIC")),es(new Lr($7,H7,"PRIVATE"))}q7();zn(jD,KE);zn(jD,KE,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="analytics",G7="firebase_id",K7="origin",Q7=60*1e3,Y7="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",JE="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=new xh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Nr=new _l("analytics","Analytics",X7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J7(t){if(!t.startsWith(JE)){const e=Nr.create("invalid-gtag-resource",{gtagURL:t});return gr.warn(e.message),""}return t}function rO(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Z7(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function eq(t,e){const n=Z7("firebase-js-sdk-policy",{createScriptURL:J7}),r=document.createElement("script"),s=`${JE}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function tq(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function nq(t,e,n,r,s,i){return A(this,null,function*(){const o=r[s];try{if(o)yield e[o];else{const l=(yield rO(n)).find(c=>c.measurementId===s);l&&(yield e[l.appId])}}catch(a){gr.error(a)}t("config",s,i)})}function rq(t,e,n,r,s){return A(this,null,function*(){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=yield rO(n);for(const l of o){const c=a.find(h=>h.measurementId===l),d=c&&e[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),yield Promise.all(i),t("event",r,s||{})}catch(i){gr.error(i)}})}function sq(t,e,n,r){function s(i,...o){return A(this,null,function*(){try{if(i==="event"){const[a,l]=o;yield rq(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;yield nq(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){gr.error(a)}})}return s}function iq(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=sq(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function oq(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(JE)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aq=30,lq=1e3;class cq{constructor(e={},n=lq){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const sO=new cq;function uq(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function dq(t){return A(this,null,function*(){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:uq(r)},i=Y7.replace("{app-id}",n),o=yield fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=yield o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch(l){}throw Nr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function hq(r){return A(this,arguments,function*(t,e=sO,n){const{appId:s,apiKey:i,measurementId:o}=t.options;if(!s)throw Nr.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:s};throw Nr.create("no-api-key")}const a=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new mq;return setTimeout(()=>A(this,null,function*(){l.abort()}),Q7),iO({appId:s,apiKey:i,measurementId:o},a,l,e)})}function iO(i,o,a){return A(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=sO){var l;const{appId:c,measurementId:d}=t;try{yield fq(r,e)}catch(h){if(d)return gr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:c,measurementId:d};throw h}try{const h=yield dq(t);return s.deleteThrottleMetadata(c),h}catch(h){const f=h;if(!pq(f)){if(s.deleteThrottleMetadata(c),d)return gr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:c,measurementId:d};throw h}const p=Number((l=f==null?void 0:f.customData)===null||l===void 0?void 0:l.httpStatus)===503?lS(n,s.intervalMillis,aq):lS(n,s.intervalMillis),T={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return s.setThrottleMetadata(c,T),gr.debug(`Calling attemptFetch again in ${p} millis`),iO(t,T,r,s)}})}function fq(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Nr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function pq(t){if(!(t instanceof rs)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class mq{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function gq(t,e,n,r,s){return A(this,null,function*(){if(s&&s.global){t("event",n,r);return}else{const i=yield e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yq(){return A(this,null,function*(){if(dP())try{yield hP()}catch(t){return gr.warn(Nr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return gr.warn(Nr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function vq(t,e,n,r,s,i,o){return A(this,null,function*(){var a;const l=hq(t);l.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&gr.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>gr.error(p)),e.push(l);const c=yq().then(p=>{if(p)return r.getId()}),[d,h]=yield Promise.all([l,c]);oq(i)||eq(i,d.measurementId),s("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[K7]="firebase",f.update=!0,h!=null&&(f[G7]=h),s("config",d.measurementId,f),d.measurementId})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _q{constructor(e){this.app=e}_delete(){return delete Sd[this.app.options.appId],Promise.resolve()}}let Sd={},UI=[];const zI={};let nv="dataLayer",wq="gtag",BI,oO,$I=!1;function Eq(){const t=[];if(lP()&&t.push("This is a browser extension environment."),mz()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Nr.create("invalid-analytics-context",{errorInfo:e});gr.warn(n.message)}}function Tq(t,e,n){Eq();const r=t.options.appId;if(!r)throw Nr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)gr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Nr.create("no-api-key");if(Sd[r]!=null)throw Nr.create("already-exists",{id:r});if(!$I){tq(nv);const{wrappedGtag:i,gtagCore:o}=iq(Sd,UI,zI,nv,wq);oO=i,BI=o,$I=!0}return Sd[r]=vq(t,UI,zI,e,BI,nv,n),new _q(t)}function bq(t=Sh()){t=st(t);const e=io(t,bm);return e.isInitialized()?e.getImmediate():xq(t)}function xq(t,e={}){const n=io(t,bm);if(n.isInitialized()){const s=n.getImmediate();if(Ki(e,n.getOptions()))return s;throw Nr.create("already-initialized")}return n.initialize({options:e})}function Sq(t,e,n,r){t=st(t),gq(oO,Sd[t.app.options.appId],e,n,r).catch(s=>gr.error(s))}const WI="@firebase/analytics",HI="0.10.17";function Iq(){es(new Lr(bm,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return Tq(r,s,n)},"PUBLIC")),es(new Lr("analytics-internal",t,"PRIVATE")),zn(WI,HI),zn(WI,HI,"esm2017");function t(e){try{const n=e.getProvider(bm).getImmediate();return{logEvent:(r,s,i)=>Sq(n,r,s,i)}}catch(n){throw Nr.create("interop-component-reg-failed",{reason:n})}}}Iq();var qI={};const GI="@firebase/database",KI="1.0.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aO="";function Cq(t){aO=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rq{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),En(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:th(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return so(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=function(t){try{if(typeof window!="undefined"&&typeof window[t]!="undefined"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Rq(e)}}catch(e){}return new Aq},ja=lO("localStorage"),kq=lO("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=new xh("@firebase/database"),Pq=function(){let t=1;return function(){return t++}}(),cO=function(t){const e=Iz(t),n=new Ez;n.update(e);const r=n.digest();return K0.encodeByteArray(r)},Uh=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Uh.apply(null,r):typeof r=="object"?e+=En(r):e+=r,e+=" "}return e};let Id=null,QI=!0;const Nq=function(t,e){de(!e,"Can't turn on custom loggers persistently."),vc.logLevel=Be.VERBOSE,Id=vc.log.bind(vc)},Vn=function(...t){if(QI===!0&&(QI=!1,Id===null&&kq.get("logging_enabled")===!0&&Nq()),Id){const e=Uh.apply(null,t);Id(e)}},zh=function(t){return function(...e){Vn(t,...e)}},lw=function(...t){const e="FIREBASE INTERNAL ERROR: "+Uh(...t);vc.error(e)},eo=function(...t){const e=`FIREBASE FATAL ERROR: ${Uh(...t)}`;throw vc.error(e),new Error(e)},Dr=function(...t){const e="FIREBASE WARNING: "+Uh(...t);vc.warn(e)},Dq=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Dr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},uO=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Oq=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Yc="[MIN_NAME]",cl="[MAX_NAME]",vu=function(t,e){if(t===e)return 0;if(t===Yc||e===cl)return-1;if(e===Yc||t===cl)return 1;{const n=YI(t),r=YI(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Lq=function(t,e){return t===e?0:t<e?-1:1},Wu=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+En(e))},ZE=function(t){if(typeof t!="object"||t===null)return En(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=En(e[r]),n+=":",n+=ZE(t[e[r]]);return n+="}",n},dO=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function ns(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const hO=function(t){de(!uO(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,l;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(s?1:0),c.reverse();const d=c.join("");let h="";for(l=0;l<64;l+=8){let f=parseInt(d.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},Mq=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Fq=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},Vq=new RegExp("^-?(0*)\\d{1,10}$"),jq=-2147483648,Uq=2147483647,YI=function(t){if(Vq.test(t)){const e=Number(t);if(e>=jq&&e<=Uq)return e}return null},Bh=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Dr("Exception was thrown by user callback.",n),e},Math.floor(0))}},zq=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Cd=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno!="undefined"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Zn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Dr(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $q{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Vn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Dr(e)}}class pp{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}pp.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="5",fO="v",pO="s",mO="r",gO="f",yO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,vO="ls",_O="p",cw="ac",wO="websocket",EO="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,n,r,s,i=!1,o="",a=!1,l=!1,c=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ja.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ja.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Wq(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function bO(t,e,n){de(typeof e=="string","typeof type must == string"),de(typeof n=="object","typeof params must == object");let r;if(e===wO)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===EO)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Wq(t)&&(n.ns=t.namespace);const s=[];return ns(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hq{constructor(){this.counters_={}}incrementCounter(e,n=1){so(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return rz(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv={},sv={};function tT(t){const e=t.toString();return rv[e]||(rv[e]=new Hq),rv[e]}function qq(t,e){const n=t.toString();return sv[n]||(sv[n]=e()),sv[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gq{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Bh(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="start",Kq="close",Qq="pLPCommand",Yq="pRTLPCB",xO="id",SO="pw",IO="ser",Xq="cb",Jq="seg",Zq="ts",eG="d",tG="dframe",CO=1870,RO=30,nG=CO-RO,rG=25e3,sG=3e4;class nc{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zh(e),this.stats_=tT(n),this.urlFn=l=>(this.appCheckToken&&(l[cw]=this.appCheckToken),bO(n,EO,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Gq(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(sG)),Oq(()=>{if(this.isClosed_)return;this.scriptTagHolder=new nT((...i)=>{const[o,a,l,c,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===XI)this.id=a,this.password=l;else if(o===Kq)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[XI]="t",r[IO]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Xq]=this.scriptTagHolder.uniqueCallbackIdentifier),r[fO]=eT,this.transportSessionId&&(r[pO]=this.transportSessionId),this.lastSessionId&&(r[vO]=this.lastSessionId),this.applicationId&&(r[_O]=this.applicationId),this.appCheckToken&&(r[cw]=this.appCheckToken),typeof location!="undefined"&&location.hostname&&yO.test(location.hostname)&&(r[mO]=gO);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){nc.forceAllow_=!0}static forceDisallow(){nc.forceDisallow_=!0}static isAvailable(){return nc.forceAllow_?!0:!nc.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!Mq()&&!Fq()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=En(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=rP(n),s=dO(r,nG);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[tG]="t",r[xO]=e,r[SO]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=En(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class nT{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Pq(),window[Qq+this.uniqueCallbackIdentifier]=e,window[Yq+this.uniqueCallbackIdentifier]=n,this.myIFrame=nT.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Vn("frame writing exception"),a.stack&&Vn(a.stack),Vn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Vn("No IE domain setting required")}catch(n){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[xO]=this.myID,e[SO]=this.myPW,e[IO]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+RO+r.length<=CO;){const o=this.pendingSegs.shift();r=r+"&"+Jq+s+"="+o.seg+"&"+Zq+s+"="+o.ts+"&"+eG+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(rG)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Vn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iG=16384,oG=45e3;let xm=null;typeof MozWebSocket!="undefined"?xm=MozWebSocket:typeof WebSocket!="undefined"&&(xm=WebSocket);class ws{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zh(this.connId),this.stats_=tT(n),this.connURL=ws.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[fO]=eT,typeof location!="undefined"&&location.hostname&&yO.test(location.hostname)&&(o[mO]=gO),n&&(o[pO]=n),r&&(o[vO]=r),s&&(o[cw]=s),i&&(o[_O]=i),bO(e,wO,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ja.set("previous_websocket_failure",!0);try{let r;uP(),this.mySock=new xm(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){ws.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator!="undefined"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&xm!==null&&!ws.forceDisallow_}static previouslyFailed(){return ja.isInMemoryStorage||ja.get("previous_websocket_failure")===!0}markConnectionHealthy(){ja.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=th(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(de(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=En(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=dO(n,iG);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(oG))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ws.responsesRequiredToBeHealthy=2;ws.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{static get ALL_TRANSPORTS(){return[nc,ws]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=ws&&ws.isAvailable();let r=n&&!ws.previouslyFailed();if(e.webSocketOnly&&(n||Dr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ws];else{const s=this.transports_=[];for(const i of hh.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);hh.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}hh.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aG=6e4,lG=5e3,cG=10*1024,uG=100*1024,iv="t",JI="d",dG="s",ZI="r",hG="e",e1="o",t1="a",n1="n",r1="p",fG="h";class pG{constructor(e,n,r,s,i,o,a,l,c,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zh("c:"+this.id+":"),this.transportManager_=new hh(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Cd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>uG?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>cG?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(iv in e){const n=e[iv];n===t1?this.upgradeIfSecondaryHealthy_():n===ZI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===e1&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Wu("t",e),r=Wu("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:r1,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:t1,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:n1,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Wu("t",e),r=Wu("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Wu(iv,e);if(JI in e){const r=e[JI];if(n===fG){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===n1){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===dG?this.onConnectionShutdown_(r):n===ZI?this.onReset_(r):n===hG?lw("Server Error: "+r):n===e1?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):lw("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),eT!==r&&Dr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Cd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(aG))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Cd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(lG))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:r1,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ja.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e){this.allowedEvents_=e,this.listeners_={},de(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){de(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm extends kO{static getInstance(){return new Sm}constructor(){super(["online"]),this.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!J0()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return de(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=32,i1=768;class kt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ht(){return new kt("")}function Xe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ha(t){return t.pieces_.length-t.pieceNum_}function Ct(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new kt(t.pieces_,e)}function PO(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function mG(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function NO(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function DO(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new kt(e,0)}function gn(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof kt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new kt(n,0)}function Ge(t){return t.pieceNum_>=t.pieces_.length}function Kr(t,e){const n=Xe(t),r=Xe(e);if(n===null)return e;if(n===r)return Kr(Ct(t),Ct(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function OO(t,e){if(ha(t)!==ha(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function bs(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ha(t)>ha(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class gG{constructor(e,n){this.errorPrefix_=n,this.parts_=NO(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=pg(this.parts_[r]);LO(this)}}function yG(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=pg(e),LO(t)}function vG(t){const e=t.parts_.pop();t.byteLength_-=pg(e),t.parts_.length>0&&(t.byteLength_-=1)}function LO(t){if(t.byteLength_>i1)throw new Error(t.errorPrefix_+"has a key path longer than "+i1+" bytes ("+t.byteLength_+").");if(t.parts_.length>s1)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+s1+") or object contains a cycle "+Aa(t))}function Aa(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT extends kO{static getInstance(){return new rT}constructor(){super(["visible"]);let e,n;typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(n="visibilitychange",e="hidden"):typeof document.mozHidden!="undefined"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden!="undefined"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden!="undefined"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return de(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=1e3,_G=60*5*1e3,o1=30*1e3,wG=1.3,EG=3e4,TG="server_kill",a1=3;class ji extends AO{constructor(e,n,r,s,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=ji.nextPersistentConnectionId_++,this.log_=zh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hu,this.maxReconnectDelay_=_G,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!uP())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");rT.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Sm.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(En(i)),de(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Y0,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),de(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),de(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,c=a.s;ji.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&so(e,"w")){const r=zc(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Dr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||wz(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=o1)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=_z(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),de(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+En(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):lw("Unrecognized action received from server: "+En(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){de(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Hu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>EG&&(this.reconnectDelay_=Hu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*wG)}this.onConnectStatus_(!1)}establishConnection_(){return A(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+ji.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(h){de(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?Vn("getToken() completed but was canceled"):(Vn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new pG(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,p=>{Dr(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(TG)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Dr(h),l())}}})}interrupt(e){Vn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Vn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],D_(this.interruptReasons_)&&(this.reconnectDelay_=Hu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>ZE(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new kt(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Vn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=a1&&(this.reconnectDelay_=o1,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Vn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=a1&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+aO.replace(/\./g,"-")]=1,J0()?e["framework.cordova"]=1:cP()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Sm.getInstance().currentlyOnline();return D_(this.interruptReasons_)&&e}}ji.nextPersistentConnectionId_=0;ji.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Je(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Je(Yc,e),s=new Je(Yc,n);return this.compare(r,s)!==0}minPost(){return Je.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vf;class MO extends Bg{static get __EMPTY_NODE(){return Vf}static set __EMPTY_NODE(e){Vf=e}compare(e,n){return vu(e.name,n.name)}isDefinedOn(e){throw ou("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Je.MIN}maxPost(){return new Je(cl,Vf)}makePost(e,n){return de(typeof e=="string","KeyIndex indexValue must always be a string."),new Je(e,Vf)}toString(){return".key"}}const _c=new MO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class pn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r!=null?r:pn.RED,this.left=s!=null?s:hr.EMPTY_NODE,this.right=i!=null?i:hr.EMPTY_NODE}copy(e,n,r,s,i){return new pn(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,s!=null?s:this.left,i!=null?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return hr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return hr.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}pn.RED=!0;pn.BLACK=!1;class bG{copy(e,n,r,s,i){return this}insert(e,n,r){return new pn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class hr{constructor(e,n=hr.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new hr(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,pn.BLACK,null,null))}remove(e){return new hr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,pn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new jf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new jf(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new jf(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new jf(this.root_,null,this.comparator_,!0,e)}}hr.EMPTY_NODE=new bG;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xG(t,e){return vu(t.name,e.name)}function sT(t,e){return vu(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uw;function SG(t){uw=t}const FO=function(t){return typeof t=="number"?"number:"+hO(t):"string:"+t},VO=function(t){if(t.isLeafNode()){const e=t.val();de(typeof e=="string"||typeof e=="number"||typeof e=="object"&&so(e,".sv"),"Priority must be a string or number.")}else de(t===uw||t.isEmpty(),"priority of unexpected type.");de(t===uw||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l1;class dn{static set __childrenNodeConstructor(e){l1=e}static get __childrenNodeConstructor(){return l1}constructor(e,n=dn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,de(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),VO(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new dn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:dn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ge(e)?this:Xe(e)===".priority"?this.priorityNode_:dn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:dn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Xe(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(de(r!==".priority"||ha(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,dn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ct(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+FO(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=hO(this.value_):e+=this.value_,this.lazyHash_=cO(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===dn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof dn.__childrenNodeConstructor?-1:(de(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=dn.VALUE_TYPE_ORDER.indexOf(n),i=dn.VALUE_TYPE_ORDER.indexOf(r);return de(s>=0,"Unknown leaf type: "+n),de(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}dn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jO,UO;function IG(t){jO=t}function CG(t){UO=t}class RG extends Bg{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?vu(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Je.MIN}maxPost(){return new Je(cl,new dn("[PRIORITY-POST]",UO))}makePost(e,n){const r=jO(e);return new Je(n,new dn("[PRIORITY-POST]",r))}toString(){return".priority"}}const Un=new RG;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AG=Math.log(2);class kG{constructor(e){const n=i=>parseInt(Math.log(i)/AG,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Im=function(t,e,n,r){t.sort(e);const s=function(l,c){const d=c-l;let h,f;if(d===0)return null;if(d===1)return h=t[l],f=n?n(h):h,new pn(f,h.node,pn.BLACK,null,null);{const p=parseInt(d/2,10)+l,T=s(l,p),v=s(p+1,c);return h=t[p],f=n?n(h):h,new pn(f,h.node,pn.BLACK,T,v)}},i=function(l){let c=null,d=null,h=t.length;const f=function(T,v){const w=h-T,E=h;h-=T;const y=s(w+1,E),x=t[w],C=n?n(x):x;p(new pn(C,x.node,v,null,y))},p=function(T){c?(c.left=T,c=T):(d=T,c=T)};for(let T=0;T<l.count;++T){const v=l.nextBitIsOne(),w=Math.pow(2,l.count-(T+1));v?f(w,pn.BLACK):(f(w,pn.BLACK),f(w,pn.RED))}return d},o=new kG(t.length),a=i(o);return new hr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ov;const Ol={};class Ni{static get Default(){return de(Ol&&Un,"ChildrenNode.ts has not been loaded"),ov=ov||new Ni({".priority":Ol},{".priority":Un}),ov}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=zc(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof hr?n:null}hasIndex(e){return so(this.indexSet_,e.toString())}addIndex(e,n){de(e!==_c,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Je.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=Im(r,e.getCompare()):a=Ol;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new Ni(d,c)}addToIndexes(e,n){const r=tm(this.indexes_,(s,i)=>{const o=zc(this.indexSet_,i);if(de(o,"Missing index implementation for "+i),s===Ol)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Je.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Im(a,o.getCompare())}else return Ol;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new Je(e.name,a))),l.insert(e,e.node)}});return new Ni(r,this.indexSet_)}removeFromIndexes(e,n){const r=tm(this.indexes_,s=>{if(s===Ol)return s;{const i=n.get(e.name);return i?s.remove(new Je(e.name,i)):s}});return new Ni(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu;class ot{static get EMPTY_NODE(){return qu||(qu=new ot(new hr(sT),null,Ni.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&VO(this.priorityNode_),this.children_.isEmpty()&&de(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||qu}updatePriority(e){return this.children_.isEmpty()?this:new ot(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?qu:n}}getChild(e){const n=Xe(e);return n===null?this:this.getImmediateChild(n).getChild(Ct(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(de(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Je(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?qu:this.priorityNode_;return new ot(s,o,i)}}updateChild(e,n){const r=Xe(e);if(r===null)return n;{de(Xe(e)!==".priority"||ha(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Ct(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Un,(o,a)=>{n[o]=a.val(e),r++,i&&ot.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+FO(this.getPriority().val())+":"),this.forEachChild(Un,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":cO(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Je(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Je(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Je(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Je.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Je.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===$h?-1:0}withIndex(e){if(e===_c||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ot(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===_c||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Un),s=n.getIterator(Un);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===_c?null:this.indexMap_.get(e.toString())}}ot.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class PG extends ot{constructor(){super(new hr(sT),ot.EMPTY_NODE,Ni.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ot.EMPTY_NODE}isEmpty(){return!1}}const $h=new PG;Object.defineProperties(Je,{MIN:{value:new Je(Yc,ot.EMPTY_NODE)},MAX:{value:new Je(cl,$h)}});MO.__EMPTY_NODE=ot.EMPTY_NODE;dn.__childrenNodeConstructor=ot;SG($h);CG($h);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NG=!0;function jn(t,e=null){if(t===null)return ot.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),de(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new dn(n,jn(e))}if(!(t instanceof Array)&&NG){const n=[];let r=!1;if(ns(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=jn(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Je(o,l)))}}),n.length===0)return ot.EMPTY_NODE;const i=Im(n,xG,o=>o.name,sT);if(r){const o=Im(n,Un.getCompare());return new ot(i,jn(e),new Ni({".priority":o},{".priority":Un}))}else return new ot(i,jn(e),Ni.Default)}else{let n=ot.EMPTY_NODE;return ns(t,(r,s)=>{if(so(t,r)&&r.substring(0,1)!=="."){const i=jn(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(jn(e))}}IG(jn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DG extends Bg{constructor(e){super(),this.indexPath_=e,de(!Ge(e)&&Xe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?vu(e.name,n.name):i}makePost(e,n){const r=jn(e),s=ot.EMPTY_NODE.updateChild(this.indexPath_,r);return new Je(n,s)}maxPost(){const e=ot.EMPTY_NODE.updateChild(this.indexPath_,$h);return new Je(cl,e)}toString(){return NO(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OG extends Bg{compare(e,n){const r=e.node.compareTo(n.node);return r===0?vu(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Je.MIN}maxPost(){return Je.MAX}makePost(e,n){const r=jn(e);return new Je(n,r)}toString(){return".value"}}const LG=new OG;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MG(t){return{type:"value",snapshotNode:t}}function FG(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function VG(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function c1(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function jG(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Un}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return de(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return de(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Yc}hasEnd(){return this.endSet_}getIndexEndValue(){return de(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return de(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:cl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return de(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Un}copy(){const e=new iT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function u1(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Un?n="$priority":t.index_===LG?n="$value":t.index_===_c?n="$key":(de(t.index_ instanceof DG,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=En(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=En(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+En(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=En(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+En(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function d1(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Un&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm extends AO{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(de(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=zh("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Cm.getListenId_(e,r),a={};this.listens_[o]=a;const l=u1(e._queryParams);this.restRequest_(i+".json",l,(c,d)=>{let h=d;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(i,h,!1,r),zc(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",s(f,null)}})}unlisten(e,n){const r=Cm.getListenId_(e,n);delete this.listens_[r]}get(e){const n=u1(e._queryParams),r=e._path.toString(),s=new Y0;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+au(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=th(a.responseText)}catch(c){Dr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Dr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UG{constructor(){this.rootNode_=ot.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(){return{value:null,children:new Map}}function zO(t,e,n){if(Ge(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Xe(e);t.children.has(r)||t.children.set(r,Rm());const s=t.children.get(r);e=Ct(e),zO(s,e,n)}}function dw(t,e,n){t.value!==null?n(e,t.value):zG(t,(r,s)=>{const i=new kt(e.toString()+"/"+r);dw(s,i,n)})}function zG(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BG{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ns(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=10*1e3,$G=30*1e3,WG=5*60*1e3;class HG{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new BG(e);const r=h1+($G-h1)*Math.random();Cd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;ns(e,(s,i)=>{i>0&&so(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Cd(this.reportStats_.bind(this),Math.floor(Math.random()*2*WG))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Js;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Js||(Js={}));function BO(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function $O(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function WO(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Js.ACK_USER_WRITE,this.source=BO()}operationForChild(e){if(Ge(this.path)){if(this.affectedTree.value!=null)return de(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new kt(e));return new Am(ht(),n,this.revert)}}else return de(Xe(this.path)===e,"operationForChild called for unrelated child."),new Am(Ct(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Js.OVERWRITE}operationForChild(e){return Ge(this.path)?new ul(this.source,ht(),this.snap.getImmediateChild(e)):new ul(this.source,Ct(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Js.MERGE}operationForChild(e){if(Ge(this.path)){const n=this.children.subtree(new kt(e));return n.isEmpty()?null:n.value?new ul(this.source,ht(),n.value):new fh(this.source,ht(),n)}else return de(Xe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new fh(this.source,Ct(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ge(e))return this.isFullyInitialized()&&!this.filtered_;const n=Xe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function qG(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(jG(o.childName,o.snapshotNode))}),Gu(t,s,"child_removed",e,r,n),Gu(t,s,"child_added",e,r,n),Gu(t,s,"child_moved",i,r,n),Gu(t,s,"child_changed",e,r,n),Gu(t,s,"value",e,r,n),s}function Gu(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,l)=>KG(t,a,l)),o.forEach(a=>{const l=GG(t,a,i);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function GG(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function KG(t,e,n){if(e.childName==null||n.childName==null)throw ou("Should only compare child_ events.");const r=new Je(e.childName,e.snapshotNode),s=new Je(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t,e){return{eventCache:t,serverCache:e}}function Rd(t,e,n,r){return HO(new oT(e,n,r),t.serverCache)}function qO(t,e,n,r){return HO(t.eventCache,new oT(e,n,r))}function hw(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function dl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let av;const QG=()=>(av||(av=new hr(Lq)),av);class It{static fromObject(e){let n=new It(null);return ns(e,(r,s)=>{n=n.set(new kt(r),s)}),n}constructor(e,n=QG()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ht(),value:this.value};if(Ge(e))return null;{const r=Xe(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Ct(e),n);return i!=null?{path:gn(new kt(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ge(e))return this;{const n=Xe(e),r=this.children.get(n);return r!==null?r.subtree(Ct(e)):new It(null)}}set(e,n){if(Ge(e))return new It(n,this.children);{const r=Xe(e),i=(this.children.get(r)||new It(null)).set(Ct(e),n),o=this.children.insert(r,i);return new It(this.value,o)}}remove(e){if(Ge(e))return this.children.isEmpty()?new It(null):new It(null,this.children);{const n=Xe(e),r=this.children.get(n);if(r){const s=r.remove(Ct(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new It(null):new It(this.value,i)}else return this}}get(e){if(Ge(e))return this.value;{const n=Xe(e),r=this.children.get(n);return r?r.get(Ct(e)):null}}setTree(e,n){if(Ge(e))return n;{const r=Xe(e),i=(this.children.get(r)||new It(null)).setTree(Ct(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new It(this.value,o)}}fold(e){return this.fold_(ht(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(gn(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ht(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Ge(e))return null;{const i=Xe(e),o=this.children.get(i);return o?o.findOnPath_(Ct(e),gn(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ht(),n)}foreachOnPath_(e,n,r){if(Ge(e))return this;{this.value&&r(n,this.value);const s=Xe(e),i=this.children.get(s);return i?i.foreachOnPath_(Ct(e),gn(n,s),r):new It(null)}}foreach(e){this.foreach_(ht(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(gn(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.writeTree_=e}static empty(){return new ks(new It(null))}}function Ad(t,e,n){if(Ge(e))return new ks(new It(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Kr(s,e);return i=i.updateChild(o,n),new ks(t.writeTree_.set(s,i))}else{const s=new It(n),i=t.writeTree_.setTree(e,s);return new ks(i)}}}function f1(t,e,n){let r=t;return ns(n,(s,i)=>{r=Ad(r,gn(e,s),i)}),r}function p1(t,e){if(Ge(e))return ks.empty();{const n=t.writeTree_.setTree(e,new It(null));return new ks(n)}}function fw(t,e){return Tl(t,e)!=null}function Tl(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Kr(n.path,e)):null}function m1(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Un,(r,s)=>{e.push(new Je(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Je(r,s.value))}),e}function ta(t,e){if(Ge(e))return t;{const n=Tl(t,e);return n!=null?new ks(new It(n)):new ks(t.writeTree_.subtree(e))}}function pw(t){return t.writeTree_.isEmpty()}function Xc(t,e){return GO(ht(),t.writeTree_,e)}function GO(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(de(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=GO(gn(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(gn(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(t,e){return ZO(e,t)}function YG(t,e,n,r,s){de(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Ad(t.visibleWrites,e,n)),t.lastWriteId=r}function XG(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function JG(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);de(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&ZG(a,r.path)?s=!1:bs(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return eK(t),!0;if(r.snap)t.visibleWrites=p1(t.visibleWrites,r.path);else{const a=r.children;ns(a,l=>{t.visibleWrites=p1(t.visibleWrites,gn(r.path,l))})}return!0}else return!1}function ZG(t,e){if(t.snap)return bs(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&bs(gn(t.path,n),e))return!0;return!1}function eK(t){t.visibleWrites=QO(t.allWrites,tK,ht()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function tK(t){return t.visible}function QO(t,e,n){let r=ks.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)bs(n,o)?(a=Kr(n,o),r=Ad(r,a,i.snap)):bs(o,n)&&(a=Kr(o,n),r=Ad(r,ht(),i.snap.getChild(a)));else if(i.children){if(bs(n,o))a=Kr(n,o),r=f1(r,a,i.children);else if(bs(o,n))if(a=Kr(o,n),Ge(a))r=f1(r,ht(),i.children);else{const l=zc(i.children,Xe(a));if(l){const c=l.getChild(Ct(a));r=Ad(r,ht(),c)}}}else throw ou("WriteRecord should have .snap or .children")}}return r}function YO(t,e,n,r,s){if(!r&&!s){const i=Tl(t.visibleWrites,e);if(i!=null)return i;{const o=ta(t.visibleWrites,e);if(pw(o))return n;if(n==null&&!fw(o,ht()))return null;{const a=n||ot.EMPTY_NODE;return Xc(o,a)}}}else{const i=ta(t.visibleWrites,e);if(!s&&pw(i))return n;if(!s&&n==null&&!fw(i,ht()))return null;{const o=function(c){return(c.visible||s)&&(!r||!~r.indexOf(c.writeId))&&(bs(c.path,e)||bs(e,c.path))},a=QO(t.allWrites,o,e),l=n||ot.EMPTY_NODE;return Xc(a,l)}}}function nK(t,e,n){let r=ot.EMPTY_NODE;const s=Tl(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Un,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=ta(t.visibleWrites,e);return n.forEachChild(Un,(o,a)=>{const l=Xc(ta(i,new kt(o)),a);r=r.updateImmediateChild(o,l)}),m1(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=ta(t.visibleWrites,e);return m1(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function rK(t,e,n,r,s){de(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=gn(e,n);if(fw(t.visibleWrites,i))return null;{const o=ta(t.visibleWrites,i);return pw(o)?s.getChild(n):Xc(o,s.getChild(n))}}function sK(t,e,n,r){const s=gn(e,n),i=Tl(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=ta(t.visibleWrites,s);return Xc(o,r.getNode().getImmediateChild(n))}else return null}function iK(t,e){return Tl(t.visibleWrites,e)}function oK(t,e,n,r,s,i,o){let a;const l=ta(t.visibleWrites,e),c=Tl(l,ht());if(c!=null)a=c;else if(n!=null)a=Xc(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],h=o.getCompare(),f=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let p=f.getNext();for(;p&&d.length<s;)h(p,r)!==0&&d.push(p),p=f.getNext();return d}else return[]}function aK(){return{visibleWrites:ks.empty(),allWrites:[],lastWriteId:-1}}function mw(t,e,n,r){return YO(t.writeTree,t.treePath,e,n,r)}function XO(t,e){return nK(t.writeTree,t.treePath,e)}function g1(t,e,n,r){return rK(t.writeTree,t.treePath,e,n,r)}function km(t,e){return iK(t.writeTree,gn(t.treePath,e))}function lK(t,e,n,r,s,i){return oK(t.writeTree,t.treePath,e,n,r,s,i)}function aT(t,e,n){return sK(t.writeTree,t.treePath,e,n)}function JO(t,e){return ZO(gn(t.treePath,e),t.writeTree)}function ZO(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cK{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;de(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),de(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,c1(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,VG(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,FG(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,c1(r,e.snapshotNode,s.oldSnap));else throw ou("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uK{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const eL=new uK;class lT{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new oT(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return aT(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:dl(this.viewCache_),i=lK(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}function dK(t,e){de(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),de(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function hK(t,e,n,r,s){const i=new cK;let o,a;if(n.type===Js.OVERWRITE){const c=n;c.source.fromUser?o=gw(t,e,c.path,c.snap,r,s,i):(de(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Ge(c.path),o=Pm(t,e,c.path,c.snap,r,s,a,i))}else if(n.type===Js.MERGE){const c=n;c.source.fromUser?o=pK(t,e,c.path,c.children,r,s,i):(de(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=yw(t,e,c.path,c.children,r,s,a,i))}else if(n.type===Js.ACK_USER_WRITE){const c=n;c.revert?o=yK(t,e,c.path,r,s,i):o=mK(t,e,c.path,c.affectedTree,r,s,i)}else if(n.type===Js.LISTEN_COMPLETE)o=gK(t,e,n.path,r,i);else throw ou("Unknown operation type: "+n.type);const l=i.getChanges();return fK(e,o,l),{viewCache:o,changes:l}}function fK(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=hw(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(MG(hw(e)))}}function tL(t,e,n,r,s,i){const o=e.eventCache;if(km(r,n)!=null)return e;{let a,l;if(Ge(n))if(de(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=dl(e),d=c instanceof ot?c:ot.EMPTY_NODE,h=XO(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const c=mw(r,dl(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const c=Xe(n);if(c===".priority"){de(ha(n)===1,"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const h=g1(r,n,d,l);h!=null?a=t.filter.updatePriority(d,h):a=o.getNode()}else{const d=Ct(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=g1(r,n,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(c).updateChild(d,f):h=o.getNode().getImmediateChild(c)}else h=aT(r,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,d,s,i):a=o.getNode()}}return Rd(e,a,o.isFullyInitialized()||Ge(n),t.filter.filtersNodes())}}function Pm(t,e,n,r,s,i,o,a){const l=e.serverCache;let c;const d=o?t.filter:t.filter.getIndexedFilter();if(Ge(n))c=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(n,r);c=d.updateFullNode(l.getNode(),p,null)}else{const p=Xe(n);if(!l.isCompleteForPath(n)&&ha(n)>1)return e;const T=Ct(n),w=l.getNode().getImmediateChild(p).updateChild(T,r);p===".priority"?c=d.updatePriority(l.getNode(),w):c=d.updateChild(l.getNode(),p,w,T,eL,null)}const h=qO(e,c,l.isFullyInitialized()||Ge(n),d.filtersNodes()),f=new lT(s,h,i);return tL(t,h,n,s,f,a)}function gw(t,e,n,r,s,i,o){const a=e.eventCache;let l,c;const d=new lT(s,e,i);if(Ge(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Rd(e,c,!0,t.filter.filtersNodes());else{const h=Xe(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Rd(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=Ct(n),p=a.getNode().getImmediateChild(h);let T;if(Ge(f))T=r;else{const v=d.getCompleteChild(h);v!=null?PO(f)===".priority"&&v.getChild(DO(f)).isEmpty()?T=v:T=v.updateChild(f,r):T=ot.EMPTY_NODE}if(p.equals(T))l=e;else{const v=t.filter.updateChild(a.getNode(),h,T,f,d,o);l=Rd(e,v,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function y1(t,e){return t.eventCache.isCompleteForChild(e)}function pK(t,e,n,r,s,i,o){let a=e;return r.foreach((l,c)=>{const d=gn(n,l);y1(e,Xe(d))&&(a=gw(t,a,d,c,s,i,o))}),r.foreach((l,c)=>{const d=gn(n,l);y1(e,Xe(d))||(a=gw(t,a,d,c,s,i,o))}),a}function v1(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function yw(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Ge(n)?c=r:c=new It(null).setTree(n,r);const d=e.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const p=e.serverCache.getNode().getImmediateChild(h),T=v1(t,p,f);l=Pm(t,l,new kt(h),T,s,i,o,a)}}),c.children.inorderTraversal((h,f)=>{const p=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!p){const T=e.serverCache.getNode().getImmediateChild(h),v=v1(t,T,f);l=Pm(t,l,new kt(h),v,s,i,o,a)}}),l}function mK(t,e,n,r,s,i,o){if(km(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Ge(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Pm(t,e,n,l.getNode().getChild(n),s,i,a,o);if(Ge(n)){let c=new It(null);return l.getNode().forEachChild(_c,(d,h)=>{c=c.set(new kt(d),h)}),yw(t,e,n,c,s,i,a,o)}else return e}else{let c=new It(null);return r.foreach((d,h)=>{const f=gn(n,d);l.isCompleteForPath(f)&&(c=c.set(d,l.getNode().getChild(f)))}),yw(t,e,n,c,s,i,a,o)}}function gK(t,e,n,r,s){const i=e.serverCache,o=qO(e,i.getNode(),i.isFullyInitialized()||Ge(n),i.isFiltered());return tL(t,o,n,r,eL,s)}function yK(t,e,n,r,s,i){let o;if(km(r,n)!=null)return e;{const a=new lT(r,e,s),l=e.eventCache.getNode();let c;if(Ge(n)||Xe(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=mw(r,dl(e));else{const h=e.serverCache.getNode();de(h instanceof ot,"serverChildren would be complete if leaf node"),d=XO(r,h)}d=d,c=t.filter.updateFullNode(l,d,i)}else{const d=Xe(n);let h=aT(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=l.getImmediateChild(d)),h!=null?c=t.filter.updateChild(l,d,h,Ct(n),a,i):e.eventCache.getNode().hasChild(d)?c=t.filter.updateChild(l,d,ot.EMPTY_NODE,Ct(n),a,i):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=mw(r,dl(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,i)))}return o=e.serverCache.isFullyInitialized()||km(r,ht())!=null,Rd(e,c,o,t.filter.filtersNodes())}}function vK(t,e){const n=dl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ge(e)&&!n.getImmediateChild(Xe(e)).isEmpty())?n.getChild(e):null}function _1(t,e,n,r){e.type===Js.MERGE&&e.source.queryId!==null&&(de(dl(t.viewCache_),"We should always have a full cache before handling merges"),de(hw(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=hK(t.processor_,s,e,n,r);return dK(t.processor_,i.viewCache),de(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,_K(t,i.changes,i.viewCache.eventCache.getNode())}function _K(t,e,n,r){const s=t.eventRegistrations_;return qG(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w1;function wK(t){de(!w1,"__referenceConstructor has already been defined"),w1=t}function cT(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return de(i!=null,"SyncTree gave us an op for an invalid query."),_1(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(_1(o,e,n,r));return i}}function uT(t,e){let n=null;for(const r of t.views.values())n=n||vK(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E1;function EK(t){de(!E1,"__referenceConstructor has already been defined"),E1=t}class T1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new It(null),this.pendingWriteTree_=aK(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function TK(t,e,n,r,s){return YG(t.pendingWriteTree_,e,n,r,s),s?Wg(t,new ul(BO(),e,n)):[]}function rc(t,e,n=!1){const r=XG(t.pendingWriteTree_,e);if(JG(t.pendingWriteTree_,e)){let i=new It(null);return r.snap!=null?i=i.set(ht(),!0):ns(r.children,o=>{i=i.set(new kt(o),!0)}),Wg(t,new Am(r.path,i,n))}else return[]}function $g(t,e,n){return Wg(t,new ul($O(),e,n))}function bK(t,e,n){const r=It.fromObject(n);return Wg(t,new fh($O(),e,r))}function xK(t,e,n,r){const s=iL(t,r);if(s!=null){const i=oL(s),o=i.path,a=i.queryId,l=Kr(o,e),c=new ul(WO(a),l,n);return aL(t,o,c)}else return[]}function SK(t,e,n,r){const s=iL(t,r);if(s){const i=oL(s),o=i.path,a=i.queryId,l=Kr(o,e),c=It.fromObject(n),d=new fh(WO(a),l,c);return aL(t,o,d)}else return[]}function nL(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Kr(o,e),c=uT(a,l);if(c)return c});return YO(s,e,i,n,!0)}function Wg(t,e){return rL(e,t.syncPointTree_,null,KO(t.pendingWriteTree_,ht()))}function rL(t,e,n,r){if(Ge(t.path))return sL(t,e,n,r);{const s=e.get(ht());n==null&&s!=null&&(n=uT(s,ht()));let i=[];const o=Xe(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,d=JO(r,o);i=i.concat(rL(a,l,c,d))}return s&&(i=i.concat(cT(s,t,r,n))),i}}function sL(t,e,n,r){const s=e.get(ht());n==null&&s!=null&&(n=uT(s,ht()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=JO(r,o),d=t.operationForChild(o);d&&(i=i.concat(sL(d,a,l,c)))}),s&&(i=i.concat(cT(s,t,r,n))),i}function iL(t,e){return t.tagToQueryMap.get(e)}function oL(t){const e=t.indexOf("$");return de(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new kt(t.substr(0,e))}}function aL(t,e,n){const r=t.syncPointTree_.get(e);de(r,"Missing sync point for query tag that we're tracking");const s=KO(t.pendingWriteTree_,e);return cT(r,n,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new dT(n)}node(){return this.node_}}class hT{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=gn(this.path_,e);return new hT(this.syncTree_,n)}node(){return nL(this.syncTree_,this.path_)}}const IK=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},b1=function(t,e,n){if(!t||typeof t!="object")return t;if(de(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return CK(t[".sv"],e,n);if(typeof t[".sv"]=="object")return RK(t[".sv"],e);de(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},CK=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:de(!1,"Unexpected server value: "+t)}},RK=function(t,e,n){t.hasOwnProperty("increment")||de(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&de(!1,"Unexpected increment value: "+r);const s=e.node();if(de(s!==null&&typeof s!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},AK=function(t,e,n,r){return fT(e,new hT(n,t),r)},kK=function(t,e,n){return fT(t,new dT(e),n)};function fT(t,e,n){const r=t.getPriority().val(),s=b1(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=b1(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new dn(a,jn(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new dn(s))),o.forEachChild(Un,(a,l)=>{const c=fT(l,e.getImmediateChild(a),n);c!==l&&(i=i.updateImmediateChild(a,c))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function mT(t,e){let n=e instanceof kt?e:new kt(e),r=t,s=Xe(n);for(;s!==null;){const i=zc(r.node.children,s)||{children:{},childCount:0};r=new pT(s,r,i),n=Ct(n),s=Xe(n)}return r}function _u(t){return t.node.value}function lL(t,e){t.node.value=e,vw(t)}function cL(t){return t.node.childCount>0}function PK(t){return _u(t)===void 0&&!cL(t)}function Hg(t,e){ns(t.node.children,(n,r)=>{e(new pT(n,t,r))})}function uL(t,e,n,r){n&&!r&&e(t),Hg(t,s=>{uL(s,e,!0,r)}),n&&r&&e(t)}function NK(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Wh(t){return new kt(t.parent===null?t.name:Wh(t.parent)+"/"+t.name)}function vw(t){t.parent!==null&&DK(t.parent,t.name,t)}function DK(t,e,n){const r=PK(n),s=so(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,vw(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,vw(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OK=/[\[\].#$\/\u0000-\u001F\u007F]/,LK=/[\[\].#$\u0000-\u001F\u007F]/,lv=10*1024*1024,dL=function(t){return typeof t=="string"&&t.length!==0&&!OK.test(t)},MK=function(t){return typeof t=="string"&&t.length!==0&&!LK.test(t)},FK=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),MK(t)},hL=function(t,e,n){const r=n instanceof kt?new gG(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Aa(r));if(typeof e=="function")throw new Error(t+"contains a function "+Aa(r)+" with contents = "+e.toString());if(uO(e))throw new Error(t+"contains "+e.toString()+" "+Aa(r));if(typeof e=="string"&&e.length>lv/3&&pg(e)>lv)throw new Error(t+"contains a string greater than "+lv+" utf8 bytes "+Aa(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(ns(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!dL(o)))throw new Error(t+" contains an invalid key ("+o+") "+Aa(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);yG(r,o),hL(t,a,r),vG(r)}),s&&i)throw new Error(t+' contains ".value" child '+Aa(r)+" in addition to actual children.")}},VK=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!dL(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!FK(n))throw new Error(Sz(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jK{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function UK(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!OO(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function bl(t,e,n){UK(t,n),zK(t,r=>bs(r,e)||bs(e,r))}function zK(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(BK(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function BK(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Id&&Vn("event: "+n.toString()),Bh(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $K="repo_interrupt",WK=25;class HK{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new jK,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Rm(),this.transactionQueueTree_=new pT,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function qK(t,e,n){if(t.stats_=tT(t.repoInfo_),t.forceRestClient_||zq())t.server_=new Cm(t.repoInfo_,(r,s,i,o)=>{x1(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>S1(t,!0),0);else{if(typeof n!="undefined"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{En(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ji(t.repoInfo_,e,(r,s,i,o)=>{x1(t,r,s,i,o)},r=>{S1(t,r)},r=>{KK(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=qq(t.repoInfo_,()=>new HG(t.stats_,t.server_)),t.infoData_=new UG,t.infoSyncTree_=new T1({startListening:(r,s,i,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=$g(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),gT(t,"connected",!1),t.serverSyncTree_=new T1({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,l)=>{const c=o(a,l);bl(t.eventQueue_,r._path,c)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function GK(t){const n=t.infoData_.getNode(new kt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function fL(t){return IK({timestamp:GK(t)})}function x1(t,e,n,r,s){t.dataUpdateCount++;const i=new kt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const l=tm(n,c=>jn(c));o=SK(t.serverSyncTree_,i,l,s)}else{const l=jn(n);o=xK(t.serverSyncTree_,i,l,s)}else if(r){const l=tm(n,c=>jn(c));o=bK(t.serverSyncTree_,i,l)}else{const l=jn(n);o=$g(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=vT(t,i)),bl(t.eventQueue_,a,o)}function S1(t,e){gT(t,"connected",e),e===!1&&YK(t)}function KK(t,e){ns(e,(n,r)=>{gT(t,n,r)})}function gT(t,e,n){const r=new kt("/.info/"+e),s=jn(n);t.infoData_.updateSnapshot(r,s);const i=$g(t.infoSyncTree_,r,s);bl(t.eventQueue_,r,i)}function QK(t){return t.nextWriteId_++}function YK(t){pL(t,"onDisconnectEvents");const e=fL(t),n=Rm();dw(t.onDisconnect_,ht(),(s,i)=>{const o=AK(s,i,t.serverSyncTree_,e);zO(n,s,o)});let r=[];dw(n,ht(),(s,i)=>{r=r.concat($g(t.serverSyncTree_,s,i));const o=eQ(t,s);vT(t,o)}),t.onDisconnect_=Rm(),bl(t.eventQueue_,ht(),r)}function XK(t){t.persistentConnection_&&t.persistentConnection_.interrupt($K)}function pL(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Vn(n,...e)}function mL(t,e,n){return nL(t.serverSyncTree_,e,n)||ot.EMPTY_NODE}function yT(t,e=t.transactionQueueTree_){if(e||qg(t,e),_u(e)){const n=yL(t,e);de(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&JK(t,Wh(e),n)}else cL(e)&&Hg(e,n=>{yT(t,n)})}function JK(t,e,n){const r=n.map(c=>c.currentWriteId),s=mL(t,e,r);let i=s;const o=s.hash();for(let c=0;c<n.length;c++){const d=n[c];de(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=Kr(e,d.path);i=i.updateChild(h,d.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,c=>{pL(t,"transaction put response",{path:l.toString(),status:c});let d=[];if(c==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(rc(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();qg(t,mT(t.transactionQueueTree_,e)),yT(t,t.transactionQueueTree_),bl(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)Bh(h[f])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Dr("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}vT(t,e)}},o)}function vT(t,e){const n=gL(t,e),r=Wh(n),s=yL(t,n);return ZK(t,s,r),r}function ZK(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Kr(n,l.path);let d=!1,h;if(de(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,h=l.abortReason,s=s.concat(rc(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=WK)d=!0,h="maxretry",s=s.concat(rc(t.serverSyncTree_,l.currentWriteId,!0));else{const f=mL(t,l.path,o);l.currentInputSnapshot=f;const p=e[a].update(f.val());if(p!==void 0){hL("transaction failed: Data returned ",p,l.path);let T=jn(p);typeof p=="object"&&p!=null&&so(p,".priority")||(T=T.updatePriority(f.getPriority()));const w=l.currentWriteId,E=fL(t),y=kK(T,f,E);l.currentOutputSnapshotRaw=T,l.currentOutputSnapshotResolved=y,l.currentWriteId=QK(t),o.splice(o.indexOf(w),1),s=s.concat(TK(t.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally)),s=s.concat(rc(t.serverSyncTree_,w,!0))}else d=!0,h="nodata",s=s.concat(rc(t.serverSyncTree_,l.currentWriteId,!0))}bl(t.eventQueue_,n,s),s=[],d&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}qg(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Bh(r[a]);yT(t,t.transactionQueueTree_)}function gL(t,e){let n,r=t.transactionQueueTree_;for(n=Xe(e);n!==null&&_u(r)===void 0;)r=mT(r,n),e=Ct(e),n=Xe(e);return r}function yL(t,e){const n=[];return vL(t,e,n),n.sort((r,s)=>r.order-s.order),n}function vL(t,e,n){const r=_u(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Hg(e,s=>{vL(t,s,n)})}function qg(t,e){const n=_u(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,lL(e,n.length>0?n:void 0)}Hg(e,r=>{qg(t,r)})}function eQ(t,e){const n=Wh(gL(t,e)),r=mT(t.transactionQueueTree_,e);return NK(r,s=>{cv(t,s)}),cv(t,r),uL(r,s=>{cv(t,s)}),n}function cv(t,e){const n=_u(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(de(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(de(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(rc(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?lL(e,void 0):n.length=i+1,bl(t.eventQueue_,Wh(e),s);for(let o=0;o<r.length;o++)Bh(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tQ(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch(i){}e+="/"+s}return e}function nQ(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Dr(`Invalid query segment '${n}' in query '${t}'`)}return e}const I1=function(t,e){const n=rQ(t),r=n.namespace;n.domain==="firebase.com"&&eo(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&eo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Dq();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new TO(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new kt(n.pathString)}},rQ=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(s=tQ(t.substring(d,h)));const f=nQ(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const T=e.indexOf(".");r=e.substring(0,T).toLowerCase(),n=e.substring(T+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Ge(this._path)?null:PO(this._path)}get ref(){return new wu(this._repo,this._path)}get _queryIdentifier(){const e=d1(this._queryParams),n=ZE(e);return n==="{}"?"default":n}get _queryObject(){return d1(this._queryParams)}isEqual(e){if(e=st(e),!(e instanceof _T))return!1;const n=this._repo===e._repo,r=OO(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+mG(this._path)}}class wu extends _T{constructor(e,n){super(e,n,new iT,!1)}get parent(){const e=DO(this._path);return e===null?null:new wu(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}wK(wu);EK(wu);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sQ="FIREBASE_DATABASE_EMULATOR_HOST",_w={};let iQ=!1;function oQ(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=ui(i);t.repoInfo_=new TO(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function aQ(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||eo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vn("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=I1(i,s),a=o.repoInfo,l;typeof process!="undefined"&&qI&&(l=qI[sQ]),l?(i=`http://${l}?ns=${a.namespace}`,o=I1(i,s),a=o.repoInfo):o.repoInfo.secure;const c=new $q(t.name,t.options,e);VK("Invalid Firebase Database URL",o),Ge(o.path)||eo("Database URL must point to the root of a Firebase Database (not including a child path).");const d=cQ(a,t,c,new Bq(t,n));return new uQ(d,t)}function lQ(t,e){const n=_w[e];(!n||n[t.key]!==t)&&eo(`Database ${e}(${t.repoInfo_}) has already been deleted.`),XK(t),delete n[t.key]}function cQ(t,e,n,r){let s=_w[e.name];s||(s={},_w[e.name]=s);let i=s[t.toURLString()];return i&&eo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new HK(t,iQ,n,r),s[t.toURLString()]=i,i}class uQ{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(qK(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wu(this._repo,ht())),this._rootInternal}_delete(){return this._rootInternal!==null&&(lQ(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&eo("Cannot call "+e+" on a deleted database.")}}function C1(t=Sh(),e){const n=io(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Q0("database");r&&dQ(n,...r)}return n}function dQ(t,e,n,r={}){t=st(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&Ki(r,i.repoInfo_.emulatorOptions))return;eo("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&eo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new pp(pp.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:X0(r.mockUserToken,t.app.options.projectId);o=new pp(a)}ui(e)&&(hg(e),fg("Database",!0)),oQ(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hQ(t){Cq(va),es(new Lr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return aQ(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),zn(GI,KI,t),zn(GI,KI,"esm2017")}ji.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ji.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};hQ();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L="firebasestorage.googleapis.com",wL="storageBucket",fQ=2*60*1e3,pQ=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In extends rs{constructor(e,n,r=0){super(uv(e),`Firebase Storage: ${n} (${uv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,In.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return uv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Sn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Sn||(Sn={}));function uv(t){return"storage/"+t}function mQ(){const t="An unknown error occurred, please check the error payload for server response.";return new In(Sn.UNKNOWN,t)}function gQ(t){return new In(Sn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function yQ(t){return new In(Sn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function vQ(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new In(Sn.UNAUTHENTICATED,t)}function _Q(){return new In(Sn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function wQ(t){return new In(Sn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function EQ(){return new In(Sn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function TQ(){return new In(Sn.CANCELED,"User canceled the upload/download.")}function bQ(t){return new In(Sn.INVALID_URL,"Invalid URL '"+t+"'.")}function xQ(t){return new In(Sn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function SQ(){return new In(Sn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wL+"' property when initializing the app?")}function ww(t){return new In(Sn.INVALID_ARGUMENT,t)}function EL(){return new In(Sn.APP_DELETED,"The Firebase app was deleted.")}function IQ(t){return new In(Sn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ku(t){throw new In(Sn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Qr.makeFromUrl(e,n)}catch(s){return new Qr(e,"")}if(r.path==="")return r;throw xQ(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(C){C.path_=decodeURIComponent(C.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),T={bucket:1,path:3},v=n===_L?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",E=new RegExp(`^https?://${v}/${s}/${w}`,"i"),x=[{regex:a,indices:l,postModify:i},{regex:p,indices:T,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let C=0;C<x.length;C++){const D=x[C],V=D.regex.exec(e);if(V){const S=V[D.indices.bucket];let I=V[D.indices.path];I||(I=""),r=new Qr(S,I),D.postModify(r);break}}if(r==null)throw bQ(e);return r}}class CQ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RQ(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...w){c||(c=!0,e.apply(null,w))}function h(w){s=setTimeout(()=>{s=null,t(p,l())},w)}function f(){i&&clearTimeout(i)}function p(w,...E){if(c){f();return}if(w){f(),d.call(null,w,...E);return}if(l()||o){f(),d.call(null,w,...E);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,h(x)}let T=!1;function v(w){T||(T=!0,f(),!c&&(s!==null?(w||(a=2),clearTimeout(s),h(0)):w||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,v(!0)},n),v}function AQ(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kQ(t){return t!==void 0}function R1(t,e,n,r){if(r<e)throw ww(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ww(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PQ(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function NQ(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ka;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ka||(Ka={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DQ(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OQ{constructor(e,n,r,s,i,o,a,l,c,d,h,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,v)=>{this.resolve_=T,this.reject_=v,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Uf(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Ka.NO_ERROR,l=i.getStatus();if(!a||DQ(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Ka.ABORT;r(!1,new Uf(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Uf(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());kQ(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=mQ();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?EL():TQ();o(l)}else{const l=EQ();o(l)}};this.canceled_?n(!1,new Uf(!1,null,!0)):this.backoffId_=RQ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&AQ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Uf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function LQ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function MQ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function FQ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function VQ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function jQ(t,e,n,r,s,i,o=!0,a=!1){const l=NQ(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return FQ(d,e),LQ(d,n),MQ(d,i),VQ(d,r),new OQ(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UQ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function zQ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function BQ(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class $Q{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function WQ(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=_Q():s=vQ():n.getStatus()===402?s=yQ(t.bucket):n.getStatus()===403?s=wQ(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function HQ(t){const e=WQ(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=gQ(t.path)),i.serverResponse=s.serverResponse,i}return n}function qQ(t,e){const n=e.fullServerUrl(),r=PQ(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new $Q(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=HQ(e),a}class GQ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ka.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ka.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ka.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Ku("cannot .send() more than once");if(ui(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ku("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ku("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Ku("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ku("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class KQ extends GQ{initXhr(){this.xhr_.responseType="text"}}function QQ(){return new KQ}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,n){this._service=e,n instanceof Qr?this._location=n:this._location=Qr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new hl(e,n)}get root(){const e=new Qr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return BQ(this._location.path)}get storage(){return this._service}get parent(){const e=UQ(this._location.path);if(e===null)return null;const n=new Qr(this._location.bucket,e);return new hl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw IQ(e)}}function YQ(t){t._throwIfRoot("deleteObject");const e=qQ(t.storage,t._location);return t.storage.makeRequestWithTokens(e,QQ)}function XQ(t,e){const n=zQ(t._location.path,e),r=new Qr(t._location.bucket,n);return new hl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JQ(t){return/^[A-Za-z]+:\/\//.test(t)}function ZQ(t,e){return new hl(t,e)}function TL(t,e){if(t instanceof wT){const n=t;if(n._bucket==null)throw SQ();const r=new hl(n,n._bucket);return e!=null?TL(r,e):r}else return e!==void 0?XQ(t,e):t}function eY(t,e){if(e&&JQ(e)){if(t instanceof wT)return ZQ(t,e);throw ww("To use ref(service, url), the first argument must be a Storage instance.")}else return TL(t,e)}function A1(t,e){const n=e==null?void 0:e[wL];return n==null?null:Qr.makeFromBucketSpec(n,t)}function tY(t,e,n,r={}){t.host=`${e}:${n}`;const s=ui(e);s&&(hg(`https://${t.host}/b`),fg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:X0(i,t.app.options.projectId))}class wT{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=_L,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fQ,this._maxUploadRetryTime=pQ,this._requests=new Set,s!=null?this._bucket=Qr.makeFromBucketSpec(s,this._host):this._bucket=A1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Qr.makeFromBucketSpec(this._url,e):this._bucket=A1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){R1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){R1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return A(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return A(this,null,function*(){if(Zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hl(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new CQ(EL());{const o=jQ(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return A(this,null,function*(){const[r,s]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()})}}const k1="@firebase/storage",P1="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL="storage";function uZ(t){return t=st(t),YQ(t)}function dZ(t,e){return t=st(t),eY(t,e)}function N1(t=Sh(),e){t=st(t);const r=io(t,bL).getImmediate({identifier:e}),s=Q0("storage");return s&&nY(r,...s),r}function nY(t,e,n,r={}){tY(t,e,n,r)}function rY(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new wT(n,r,s,e,va)}function sY(){es(new Lr(bL,rY,"PUBLIC").setMultipleInstances(!0)),zn(k1,P1,""),zn(k1,P1,"esm2017")}sY();const D1={apiKey:"AIzaSyCloqjpaVe56iwMq_J7QFtkw9r8t9Z7tIk",authDomain:"revpad-15232.firebaseapp.com",projectId:"revpad-15232",storageBucket:"revpad-15232.firebasestorage.app",messagingSenderId:"189145988180",appId:"1:189145988180:web:e4a3078221072432a001c1",measurementId:"G-EREJTZ924E",databaseURL:""},iY=t=>t.includes(".firebasestorage.app")?t.replace(".firebasestorage.app",".appspot.com"):t,kd=W(M({},D1),{storageBucket:iY(D1.storageBucket)}),oY=kd.apiKey&&kd.projectId;let Tr,xL=null,Re=null,Ew=null,mt=null,Tw=null;if(pS().length===0)try{if(!oY)console.warn("  Firebase balatlamad - config eksik, uygulama snrl modda alacak");else{Tr=yP(kd),typeof window!="undefined"&&setTimeout(()=>{try{xL=bq(Tr)}catch(t){}},1e3);try{if(Re=Ky(Tr),!Re)throw new Error("Firebase Auth instance oluturulamad")}catch(t){Re=null}if(kd.databaseURL)try{Ew=C1(Tr)}catch(t){}try{mt=iw(Tr)}catch(t){}try{Tw=N1(Tr)}catch(t){}}}catch(t){}else{const t=pS();if(t.length>0){Tr=t[0];try{Re=Ky(Tr),Re||(Re=Ky(Tr))}catch(e){Re=null}if(kd.databaseURL)try{Ew=C1(Tr)}catch(e){}try{mt=iw(Tr)}catch(e){const n=(e==null?void 0:e.message)||"";n.includes("already been started")||n.includes("already initialized")}try{Tw=N1(Tr)}catch(e){}}}const Rt=mt,aY=Object.freeze(Object.defineProperty({__proto__:null,get analytics(){return xL},get app(){return Tr},get auth(){return Re},get database(){return Ew},db:Rt,get firestore(){return mt},get storage(){return Tw}},Symbol.toStringTag,{value:"Module"})),Ui="departments",Hh=()=>A(void 0,null,function*(){var t;try{if(!Rt)throw new Error("Firebase Firestore balatlamad. Ltfen .env dosyasnda Firebase yaplandrmasn kontrol edin.");let e;try{const r=nr(Rt,Ui);e=yield Mr(r)}catch(r){return[]}const n=[];for(const r of e.docs){const s=r.data(),i=M({id:r.id},s);if(i.managerId)try{const{getUserProfile:o}=yield it(()=>A(void 0,null,function*(){const{getUserProfile:l}=yield Promise.resolve().then(()=>gY);return{getUserProfile:l}}),void 0),a=yield o(i.managerId,!1);a&&!a.deleted?i.managerName=a.fullName||a.displayName||a.email:(i.managerName=void 0,Hn(Kt(Rt,Ui,r.id),{managerId:null,updatedAt:ze.now()}).catch(l=>{console.error("Error clearing deleted manager:",l)}))}catch(o){(t=o.message)!=null&&t.includes("silinmi")&&(i.managerName=void 0,Hn(Kt(Rt,Ui,r.id),{managerId:null,updatedAt:ze.now()}).catch(a=>{console.error("Error clearing deleted manager:",a)}))}try{const o=nr(Rt,"users"),a=Jn(o,Vi("departmentId","==",r.id)),l=yield Mr(a);i.userCount=l.size}catch(o){i.userCount=0}n.push(i)}return n}catch(e){return[]}}),lY=t=>A(void 0,null,function*(){var e;try{if(!Rt)throw new Error("Firebase Firestore balatlamad. Ltfen .env dosyasnda Firebase yaplandrmasn kontrol edin.");const n=Kt(Rt,Ui,t),r=yield gu(n);if(!r.exists())return null;const s=r.data(),i=M({id:r.id},s);if(i.managerId)try{const o=yield ai(i.managerId,!1);if(o&&!o.deleted)i.managerName=o.fullName||o.displayName||o.email;else{i.managerName=void 0;try{yield Hn(Kt(Rt,Ui,t),{managerId:null,updatedAt:ze.now()})}catch(a){console.error("Error clearing deleted manager:",a)}}}catch(o){if((e=o.message)!=null&&e.includes("silinmi")){i.managerName=void 0;try{yield Hn(Kt(Rt,Ui,t),{managerId:null,updatedAt:ze.now()})}catch(a){console.error("Error clearing deleted manager:",a)}}else console.error("Error fetching manager:",o)}return i}catch(n){throw console.error("Error getting department:",n),new Error(n.message||"Departman yklenemedi")}}),SL=(t,e=null,n=null)=>A(void 0,null,function*(){try{if(!Rt)throw new Error("Firebase Firestore balatlamad. Ltfen .env dosyasnda Firebase yaplandrmasn kontrol edin.");const r=nr(Rt,Ui),s={name:t,description:e,managerId:n,createdAt:ze.now(),updatedAt:ze.now()};return(yield GE(r,s)).id}catch(r){throw console.error("Error creating department:",r),new Error(r.message||"Departman oluturulamad")}}),IL=(t,e)=>A(void 0,null,function*(){try{if(!Rt)throw new Error("Firebase Firestore balatlamad. Ltfen .env dosyasnda Firebase yaplandrmasn kontrol edin.");const n=Kt(Rt,Ui,t);yield Hn(n,W(M({},e),{updatedAt:ze.now()}))}catch(n){throw console.error("Error updating department:",n),new Error(n.message||"Departman gncellenemedi")}}),cY=t=>A(void 0,null,function*(){try{if(!Rt)throw new Error("Firebase Firestore balatlamad. Ltfen .env dosyasnda Firebase yaplandrmasn kontrol edin.");const e=Kt(Rt,Ui,t);yield LD(e)}catch(e){throw console.error("Error deleting department:",e),new Error(e.message||"Departman silinemedi")}}),uY=()=>A(void 0,null,function*(){try{const t=[{name:"Elektrik Ekibi",description:"Elektrik Departman"},{name:"Mekanik Ekip",description:"Mekanik Departman"},{name:"Yazlm Ekibi",description:"Yazlm Departman"},{name:"Ynetim",description:"Ynetim Departman"}],n=(yield Hh()).map(r=>r.name);for(const r of t)n.includes(r.name)||(yield SL(r.name,r.description,null))}catch(t){throw console.error("Error creating default departments:",t),new Error(t.message||"Varsaylan departmanlar oluturulamad")}}),dv=Object.freeze(Object.defineProperty({__proto__:null,createDefaultDepartments:uY,createDepartment:SL,deleteDepartment:cY,getDepartmentById:lY,getDepartments:Hh,updateDepartment:IL},Symbol.toStringTag,{value:"Module"})),Jc="audit_logs",CL=(t,e,n,r=null,s=null,i=null)=>A(void 0,null,function*(){try{const o=nr(Rt,Jc),a={userId:i,action:t,tableName:e,recordId:n,oldData:r,newData:s,createdAt:ze.now()};return(yield GE(o,a)).id}catch(o){return console.error("Error creating audit log:",o),""}}),RL=t=>A(void 0,null,function*(){var e;try{const n=nr(Rt,Jc);let r=Jn(n,Qc("createdAt","desc"));const s=(t==null?void 0:t.limit)||100;r=Jn(r,Em(s)),t!=null&&t.action&&(r=Jn(r,Vi("action","==",t.action))),t!=null&&t.tableName&&(r=Jn(r,Vi("tableName","==",t.tableName))),t!=null&&t.userId&&(r=Jn(r,Vi("userId","==",t.userId)));const i=yield Mr(r),o=[],a=new Set;for(const c of i.docs){const d=c.data(),h=M({id:c.id},d);h.userId&&a.add(h.userId),o.push(h)}const l=new Map;if(a.size>0)try{(yield Qa()).forEach(d=>{a.has(d.id)&&l.set(d.id,{fullName:d.fullName||d.displayName,email:d.email})})}catch(c){console.error("Error fetching users:",c)}return o.forEach(c=>{if(c.userId){const d=l.get(c.userId);d&&(c.userName=d.fullName||d.email,c.userEmail=d.email)}}),o}catch(n){if((n==null?void 0:n.code)==="failed-precondition"||(e=n==null?void 0:n.message)!=null&&e.includes("index")){console.warn("Audit logs index bulunamad, basit query kullanlyor");try{const r=(t==null?void 0:t.limit)||100,s=Jn(nr(Rt,Jc),Qc("createdAt","desc"),Em(r));let o=(yield Mr(s)).docs.map(c=>{const d=c.data();return M({id:c.id},d)});t!=null&&t.action&&(o=o.filter(c=>c.action===t.action)),t!=null&&t.tableName&&(o=o.filter(c=>c.tableName===t.tableName)),t!=null&&t.userId&&(o=o.filter(c=>c.userId===t.userId)),o.sort((c,d)=>{var p,T;const h=((p=c.createdAt)==null?void 0:p.toMillis())||0;return(((T=d.createdAt)==null?void 0:T.toMillis())||0)-h});const a=new Set(o.map(c=>c.userId).filter(Boolean)),l=new Map;if(a.size>0)try{(yield Qa()).forEach(d=>{a.has(d.id)&&l.set(d.id,{fullName:d.fullName||d.displayName,email:d.email})})}catch(c){console.error("Error fetching users:",c)}return o.forEach(c=>{if(c.userId){const d=l.get(c.userId);d&&(c.userName=d.fullName||d.email,c.userEmail=d.email)}}),o}catch(r){return console.error("Fallback query de baarsz:",r),[]}}throw console.error("Error getting audit logs:",n),new Error(n.message||"Audit loglar yklenemedi")}}),dY=()=>A(void 0,null,function*(){return RL({limit:10})}),hY=t=>A(void 0,null,function*(){var e;try{const[n,r]=yield Promise.all([Hh(),Qa()]),s=n.filter(d=>d.managerId===t),i={managedTeams:s.map(d=>({id:d.id,name:d.name})),teamMembers:[]};if(s.length===0)return{logs:[],teamInfo:i};const o=s.map(d=>d.id),a=r.filter(d=>{const h=d.approvedTeams||[],f=d.pendingTeams||[];return[...h,...f].some(p=>o.includes(p))});i.teamMembers=a.map(d=>({id:d.id,name:d.fullName||d.email,email:d.email}));const c=[...a.map(d=>d.id),t];try{const d=nr(Rt,Jc),h=yield Mr(Jn(d,Qc("createdAt","desc"),Em(500))),f=[],p=new Set;for(const v of h.docs){const w=v.data();if(w.userId&&c.includes(w.userId)){const E=M({id:v.id},w);E.userId&&p.add(E.userId),f.push(E)}}const T=new Map;if(p.size>0)try{(yield Qa()).forEach(w=>{p.has(w.id)&&T.set(w.id,{fullName:w.fullName||w.displayName,email:w.email})})}catch(v){console.error("Error fetching users:",v)}return f.forEach(v=>{if(v.userId){const w=T.get(v.userId);w&&(v.userName=w.fullName||w.email,v.userEmail=w.email)}}),{logs:f,teamInfo:i}}catch(d){if((d==null?void 0:d.code)==="failed-precondition"||(e=d==null?void 0:d.message)!=null&&e.includes("index")){console.warn("Team member logs index bulunamad, basit query kullanlyor");try{const h=Jn(nr(Rt,Jc),Qc("createdAt","desc"));let p=(yield Mr(h)).docs.map(w=>{const E=w.data();return M({id:w.id},E)}).filter(w=>w.userId&&c.includes(w.userId));p.sort((w,E)=>{var C,D;const y=((C=w.createdAt)==null?void 0:C.toMillis())||0;return(((D=E.createdAt)==null?void 0:D.toMillis())||0)-y});const T=new Set(p.map(w=>w.userId).filter(Boolean)),v=new Map;if(T.size>0)try{(yield Qa()).forEach(E=>{T.has(E.id)&&v.set(E.id,{fullName:E.fullName||E.displayName,email:E.email})})}catch(w){console.error("Error fetching users:",w)}return p.forEach(w=>{if(w.userId){const E=v.get(w.userId);E&&(w.userName=E.fullName||E.email,w.userEmail=E.email)}}),{logs:p,teamInfo:i}}catch(h){return console.error("Fallback query de baarsz:",h),{logs:[],teamInfo:i}}}throw d}}catch(n){return console.error("Error getting team member logs:",n),{logs:[],teamInfo:{managedTeams:[],teamMembers:[]}}}}),fY=t=>A(void 0,null,function*(){try{const e=nr(Rt,Jc),n=Jn(e,Vi("userId","==",t)),r=yield Mr(n),s=500,i=r.docs;for(let o=0;o<i.length;o+=s){const a=VD(Rt);i.slice(o,o+s).forEach(c=>{a.delete(c.ref)}),yield a.commit()}}catch(e){throw console.error("Error deleting user logs:",e),e}}),O1=Object.freeze(Object.defineProperty({__proto__:null,createAuditLog:CL,deleteUserLogs:fY,getAuditLogs:RL,getRecentActivities:dY,getTeamMemberLogs:hY},Symbol.toStringTag,{value:"Module"})),ET=(t,e,n,r,s=null,i=null)=>A(void 0,null,function*(){try{yield CL(t,e,n,s,i,r)}catch(o){console.warn("Audit log oluturulamad:",o)}}),AL=(t,e,n,r,s,i)=>A(void 0,null,function*(){var o,a,l;try{if(!Re)throw new Error("Firebase Auth is not initialized");const d=(yield BB(Re,t,e)).user;if(mt)try{const p=nr(mt,"users"),T=Jn(p,Vi("email","==",t)),v=yield Mr(T);if(!v.empty&&v.docs[0].data().deleted===!0){try{yield GB(d)}catch(E){console.error("Kullanc silinirken hata:",E)}throw new Error("Bu e-posta adresi ile kaytl bir hesap silinmi. Yeni bir hesap oluturamazsnz.")}}catch(p){console.warn("Silinmi kullanc kontrol yaplamad:",(p==null?void 0:p.message)||p)}const h=d.uid,f={email:t,displayName:n,fullName:n,role:["viewer"],emailVerified:d.emailVerified,createdAt:Ts(),updatedAt:Ts(),pendingTeams:i?[i]:[],approvedTeams:[]};if(r&&r.trim()!==""&&(f.phone=r.trim()),s&&s.trim()!==""&&(f.dateOfBirth=s.trim()),!mt)throw new Error("Firestore is not initialized");return(!Re.currentUser||Re.currentUser.uid!==h)&&(yield new Promise((p,T)=>{let v=null,w=null,E=!1,y=!1;const x=()=>{w&&(clearTimeout(w),w=null),v&&(v(),v=null)};w=setTimeout(()=>{E||(x(),T(new Error("Auth state gncellenmesi iin timeout (3 saniye)")))},3e3),v=WP(Re,C=>{if(!y){if(y=!0,C&&C.uid===h){E=!0,x(),p();return}return}E||C&&C.uid===h&&(E=!0,x(),p())})})),yield qE(Kt(mt,"users",h),f),n&&(yield $P(d,{displayName:n})),yield BP(d),{success:!0,message:"Kayt baarl! Ltfen e-posta adresinize gnderilen dorulama balantsna tklayarak hesabnz aktifletirin.",user:{id:h,email:t,displayName:n,fullName:n,phone:r||void 0,dateOfBirth:s||void 0,role:["viewer"],pendingTeams:i?[i]:[],approvedTeams:[],emailVerified:!1,createdAt:new Date,updatedAt:new Date}}}catch(c){let d="Kayt baarsz";const h=["auth/email-already-in-use","auth/invalid-email","auth/weak-password","auth/operation-not-allowed"].includes(c.code);return c.code==="auth/email-already-in-use"?d="Bu e-posta adresi zaten kaytl. Ltfen giri yapmay deneyin. Eer ifrenizi unuttuysanz, ifre sfrlama zelliini kullanabilirsiniz.":c.code==="auth/invalid-email"?d="Geersiz e-posta adresi. Ltfen geerli bir e-posta adresi girin.":c.code==="auth/weak-password"?d="ifre ok zayf. ifre en az 6 karakter olmaldr.":c.code==="auth/operation-not-allowed"?d="E-posta/ifre ile kayt u anda devre d. Ltfen yneticiye bavurun.":c.code==="permission-denied"||(o=c.message)!=null&&o.includes("permissions")?d="Firestore izin hatas. Ltfen Firebase Console'da Security Rules'u kontrol edin. Detaylar: "+(c.message||"zin reddedildi"):(a=c.message)!=null&&a.includes("Unsupported field value: undefined")?d="Form verilerinde eksik veya geersiz alanlar var. Ltfen tm zorunlu alanlar doldurun ve tekrar deneyin.":(l=c.message)!=null&&l.includes("invalid data")?d="Gnderilen veriler geersiz. Ltfen tm alanlar kontrol edip tekrar deneyin.":c.message&&(d=c.message),h||console.error("Register error:",c),{success:!1,message:d,user:null}}}),kL=(t,e)=>A(void 0,null,function*(){var n,r;try{if(!Re||!mt)throw new Error("Firebase is not initialized");const i=(yield $B(Re,t,e)).user;try{const o=yield gu(Kt(mt,"users",i.uid));if(o.exists()&&o.data().deleted===!0){try{yield Cs(Re)}catch(l){console.error("k yaplrken hata:",l)}return{success:!1,message:"Bu hesap silinmi. Giri yapamazsnz.",user:null}}}catch(o){console.error("Kullanc kontrol hatas:",o)}try{let o=yield ai(i.uid);if(!o){try{yield Cs(Re)}catch(a){console.error("k yaplrken hata:",a)}return{success:!1,message:"Bu hesap silinmi. Giri yapamazsnz.",user:null}}try{const a=o.lastLoginAt;yield Hn(Kt(mt,"users",i.uid),{lastLoginAt:Ts()}),yield new Promise(c=>setTimeout(c,100));const l=yield ai(i.uid);l&&(o=l);try{const c=new Date().toISOString();yield ET("UPDATE","user_logins",i.uid,i.uid,{lastLoginAt:a?a instanceof ze?a.toDate().toISOString():String(a):null},{lastLoginAt:c,action:"LOGIN",method:"EMAIL",email:t,userId:i.uid,timestamp:c})}catch(c){console.error("Giri logu kaydedilirken hata:",c)}}catch(a){console.error("Son giri zaman gncellenirken hata:",a)}return{success:!0,user:o}}catch(o){if((n=o.message)!=null&&n.includes("silinmi")){try{yield Cs(Re)}catch(a){console.error("k yaplrken hata:",a)}return{success:!1,message:"Bu hesap silinmi. Giri yapamazsnz.",user:null}}throw o}}catch(s){if(console.error("Login error:",s),(r=s.message)!=null&&r.includes("silinmi"))return{success:!1,message:"Bu hesap silinmi. Giri yapamazsnz.",user:null};let i="Giri baarsz";return s.code==="auth/user-not-found"?i="Bu e-posta adresi kaytl deil. Ltfen kayt olun.":s.code==="auth/wrong-password"||s.code==="auth/invalid-credential"?i="E-posta adresi veya ifre hatal. Ltfen bilgilerinizi kontrol edip tekrar deneyin.":s.code==="auth/invalid-email"?i="Geersiz e-posta adresi. Ltfen geerli bir e-posta adresi girin.":s.code==="auth/user-disabled"?i="Bu hesap devre d braklm. Ltfen yneticiye bavurun.":s.code==="auth/too-many-requests"?i="ok fazla baarsz giri denemesi. Ltfen birka dakika sonra tekrar deneyin.":s.code==="auth/network-request-failed"?i="nternet balantnz kontrol edin ve tekrar deneyin.":s.message&&(i=s.message),{success:!1,message:i,user:null}}}),PL=()=>A(void 0,null,function*(){var t,e;try{if(!Re)return{success:!1,message:"Firebase Auth is not initialized"};const n=(t=Re.currentUser)==null?void 0:t.uid,r=(e=Re.currentUser)==null?void 0:e.email;if(n)try{const s=new Date().toISOString();yield ET("UPDATE","user_logins",n,n,{},{action:"LOGOUT",timestamp:s,email:r||null,userId:n})}catch(s){console.error("k logu kaydedilirken hata:",s)}return yield Cs(Re),{success:!0}}catch(n){return console.error("Logout error:",n),{success:!1,message:n.message||"k baarsz"}}}),NL=t=>A(void 0,null,function*(){try{if(!Re)throw new Error("Firebase Auth is not initialized");return yield UB(Re,t),{success:!0,message:"ifre sfrlama e-postas gnderildi"}}catch(e){console.error("Reset password error:",e);let n="ifre sfrlama baarsz";return e.code==="auth/user-not-found"?n="Bu e-posta adresi kaytl deil":e.code==="auth/invalid-email"?n="Geersiz e-posta adresi":e.message&&(n=e.message),{success:!1,message:n}}}),ai=(t,e=!1)=>A(void 0,null,function*(){var n;try{if(!mt)return console.error("Firestore is not initialized"),null;const r=yield gu(Kt(mt,"users",t));if(!r.exists())return null;const s=r.data(),i=(Re==null?void 0:Re.currentUser)||null;if(s.deleted===!0){if(e)return{id:t,email:s.email||"",displayName:"Silinmi Kullanc",fullName:"Silinmi Kullanc",phone:null,dateOfBirth:null,role:[],departmentId:null,emailVerified:!1,createdAt:s.createdAt,updatedAt:s.updatedAt};if(i&&i.uid===t&&Re)try{yield Cs(Re)}catch(f){console.error("k yaplrken hata:",f)}throw new Error("Bu hesap silinmi. Giri yapamazsnz.")}const{getRoles:o}=yield it(()=>A(void 0,null,function*(){const{getRoles:f}=yield import("./rolePermissionsService-BQ7cNajw.js");return{getRoles:f}}),__vite__mapDeps([0,1])),a=yield o(),l=new Set(a.map(f=>f.key)),c=s.role||[],d=c.filter(f=>l.has(f)),h=d.length>0?d:["personnel"];return JSON.stringify(c)!==JSON.stringify(h)&&(yield Hn(r.ref,{role:h})),{id:t,email:s.email||(i==null?void 0:i.email)||"",displayName:s.displayName||(i==null?void 0:i.displayName)||"",fullName:s.fullName,phone:s.phone,dateOfBirth:s.dateOfBirth,role:h,departmentId:s.departmentId,emailVerified:s.emailVerified||(i==null?void 0:i.emailVerified)||!1,createdAt:s.createdAt,updatedAt:s.updatedAt,lastLoginAt:s.lastLoginAt}}catch(r){return console.error("Get user profile error:",r),(r.code==="permission-denied"||(n=r.message)!=null&&n.includes("permissions"))&&(console.warn(" Firestore permissions hatas! Firebase Console'da Security Rules'u kontrol edin:"),console.warn("   https://console.firebase.google.com/project/revpad-15232/firestore/rules"),console.warn("   Geici zm iin test mode kurallar kullann:"),console.warn("   match /{document=**} { allow read, write: if request.auth != null; }")),null}}),DL=(t,e)=>A(void 0,null,function*(){try{if(!mt)throw new Error("Firestore is not initialized");const n={updatedAt:Ts()};return Object.keys(e).forEach(r=>{const s=e[r];s!==void 0&&(n[r]=s)}),yield Hn(Kt(mt,"users",t),n),e.displayName&&(Re!=null&&Re.currentUser)&&(yield $P(Re.currentUser,{displayName:e.displayName})),{success:!0}}catch(n){return console.error("Update user profile error:",n),{success:!1,message:n.message||"Profil gncellenemedi"}}}),pY=DL;let L1=new Map;const OL=t=>{if(!Re)return setTimeout(()=>t(null),0),()=>{};let e=!1;const n=setTimeout(()=>{e||(console.warn("Auth state timeout - callback(null) arlyor"),e=!0,t(null))},3e3),r=WP(Re,s=>{A(void 0,null,function*(){var i;try{if(e||(clearTimeout(n),e=!0),s){if(mt)try{const o=yield gu(Kt(mt,"users",s.uid));if(o.exists()&&o.data().deleted===!0){try{yield Cs(Re)}catch(l){}t(null);return}}catch(o){}try{let o=yield ai(s.uid);if(!o){try{yield Cs(Re)}catch(d){}t(null);return}const a=Date.now(),l=L1.get(s.uid)||0;if(a-l>1*60*1e3||l===0)try{const d=o.lastLoginAt;let h=!1;if(!d)h=!0;else try{let f;if(d instanceof ze)f=d.toDate();else if(d&&typeof d=="object"&&"toDate"in d)f=d.toDate();else if(d&&typeof d=="object"&&"_seconds"in d){const p=Number(d._seconds),T=Number(d._nanoseconds)||0;f=new ze(p,T).toDate()}else h=!0;!h&&f&&Math.floor((a-f.getTime())/6e4)>30&&(h=!0)}catch(f){h=!0}if(h){yield Hn(Kt(mt,"users",s.uid),{lastLoginAt:Ts()}),L1.set(s.uid,a),yield new Promise(p=>setTimeout(p,200));const f=yield ai(s.uid);f&&(o=f)}}catch(d){}t(o)}catch(o){if((i=o.message)!=null&&i.includes("silinmi")){try{yield Cs(Re)}catch(a){}t(null)}else t(null)}}else t(null)}catch(o){try{t(null)}catch(a){}}}).catch(i=>{try{t(null)}catch(o){}})});return()=>{e||clearTimeout(n),r()}},Qa=()=>A(void 0,null,function*(){var t,e;try{if(!mt)throw new Error("Firestore is not initialized");const{getRoles:n}=yield it(()=>A(void 0,null,function*(){const{getRoles:i}=yield import("./rolePermissionsService-BQ7cNajw.js");return{getRoles:i}}),__vite__mapDeps([0,1])),r=yield n(),s=new Set(r.map(i=>i.key));try{const i=Jn(nr(mt,"users"),Qc("displayName","asc"));return(yield Mr(i)).docs.map(l=>{const c=l.data();if(c.deleted===!0)return null;const d=c.role||[],h=d.filter(p=>s.has(p)),f=h.length>0?h:["personnel"];return JSON.stringify(d)!==JSON.stringify(f)&&Hn(l.ref,{role:f}).catch(p=>{console.error(`Error syncing roles for user ${l.id}:`,p)}),{id:l.id,email:c.email||"",displayName:c.displayName||c.fullName||"",fullName:c.fullName||c.displayName||"",phone:c.phone||"",dateOfBirth:c.dateOfBirth||"",role:f,departmentId:c.departmentId||"",pendingTeams:c.pendingTeams||[],approvedTeams:c.approvedTeams||[],teamLeaderIds:c.teamLeaderIds||[],emailVerified:c.emailVerified||!1,createdAt:c.createdAt||null,updatedAt:c.updatedAt||null,lastLoginAt:c.lastLoginAt||null}}).filter(l=>l!==null&&!!l.id&&!!(l.displayName||l.fullName||l.email))}catch(i){console.warn("OrderBy failed, fetching without order:",(i==null?void 0:i.message)||i);const{getRoles:o}=yield it(()=>A(void 0,null,function*(){const{getRoles:h}=yield import("./rolePermissionsService-BQ7cNajw.js");return{getRoles:h}}),__vite__mapDeps([0,1])),a=yield o(),l=new Set(a.map(h=>h.key));return(yield Mr(nr(mt,"users"))).docs.map(h=>{const f=h.data();if(f.deleted===!0)return null;const p=f.role||[],T=p.filter(w=>l.has(w)),v=T.length>0?T:["personnel"];return JSON.stringify(p)!==JSON.stringify(v)&&Hn(h.ref,{role:v}).catch(w=>{console.error(`Error syncing roles for user ${h.id}:`,w)}),{id:h.id,email:f.email||"",displayName:f.displayName||f.fullName||"",fullName:f.fullName||f.displayName||"",phone:f.phone||"",dateOfBirth:f.dateOfBirth||"",role:v,departmentId:f.departmentId||"",pendingTeams:f.pendingTeams||[],approvedTeams:f.approvedTeams||[],teamLeaderIds:f.teamLeaderIds||[],emailVerified:f.emailVerified||!1,createdAt:f.createdAt||null,updatedAt:f.updatedAt||null,lastLoginAt:f.lastLoginAt||null}}).filter(h=>h!==null&&!!h.id&&!!(h.displayName||h.fullName||h.email)).sort((h,f)=>{const p=(h.displayName||h.fullName||"").toLowerCase(),T=(f.displayName||f.fullName||"").toLowerCase();return p.localeCompare(T,"tr")})}}catch(n){return console.error("Get all users error:",n),n.code==="permission-denied"||(t=n.message)!=null&&t.includes("permissions")?(console.error(" Firestore permissions hatas! Kullanc listesi alnamyor."),console.error(" Firebase Console'da Security Rules'u kontrol edin:"),console.error("   https://console.firebase.google.com/project/revpad-15232/firestore/rules"),console.error("   Users collection iin read izni olmal: allow read: if request.auth != null;")):n.code==="unavailable"||(e=n.message)!=null&&e.includes("network")?console.error(" Firestore balant hatas! nternet balantnz kontrol edin."):console.error(" Kullanc listesi alnamad:",n.message||n),[]}}),LL=()=>A(void 0,null,function*(){var t;try{if(!Re)throw new Error("Firebase Auth is not initialized");const e=new Ci;e.addScope("https://www.googleapis.com/auth/drive.file");const r=(yield f$(Re,e)).user;try{const s=yield gu(Kt(mt,"users",r.uid));if(s.exists()&&s.data().deleted===!0){try{yield Cs(Re)}catch(o){console.error("k yaplrken hata:",o)}return{success:!1,message:"Bu hesap silinmi. Giri yapamazsnz.",user:null}}}catch(s){console.error("Kullanc kontrol hatas:",s)}try{let s=yield ai(r.uid);if(!s){try{yield Cs(Re)}catch(a){console.error("k yaplrken hata:",a)}return{success:!1,message:"Bu hesap silinmi. Giri yapamazsnz.",user:null}}const i=s.lastLoginAt;yield Hn(Kt(mt,"users",r.uid),{displayName:r.displayName,fullName:r.displayName,emailVerified:r.emailVerified,updatedAt:Ts(),lastLoginAt:Ts()}),yield new Promise(a=>setTimeout(a,100));const o=yield ai(r.uid);o&&(s=o);try{const a=new Date().toISOString();yield ET("UPDATE","user_logins",r.uid,r.uid,{lastLoginAt:i?i instanceof ze?i.toDate().toISOString():String(i):null},{lastLoginAt:a,action:"LOGIN",method:"GOOGLE",email:r.email,userId:r.uid,timestamp:a})}catch(a){console.error("Giri logu kaydedilirken hata:",a)}return{success:!0,user:s}}catch(s){if((t=s.message)!=null&&t.includes("silinmi")){try{yield Cs(Re)}catch(o){console.error("k yaplrken hata:",o)}return{success:!1,message:"Bu hesap silinmi. Giri yapamazsnz.",user:null}}const i={id:r.uid,email:r.email||"",displayName:r.displayName||"",fullName:r.displayName||"",role:["viewer"],emailVerified:r.emailVerified,createdAt:Ts(),updatedAt:Ts(),pendingTeams:[],approvedTeams:[]};return yield qE(Kt(mt,"users",r.uid),i),{success:!0,user:i}}}catch(e){console.error("Google Sign-In error:",e);let n="Google ile giri baarsz";return e.code==="auth/popup-closed-by-user"?n="Google giri penceresi kapatld.":e.message&&(n=e.message),{success:!1,message:n,user:null}}}),ML=()=>A(void 0,null,function*(){try{if(!Re)return{success:!1,message:"Firebase Auth is not initialized"};const t=Re.currentUser;return t?(yield BP(t),{success:!0,message:"Dorulama e-postas gnderildi"}):{success:!1,message:"Kullanc oturum amam"}}catch(t){return{success:!1,message:t.message||"Dorulama e-postas gnderilemedi"}}}),mY=(t,e)=>A(void 0,null,function*(){var n,r;try{if(!Re||!mt)throw new Error("Firebase is not initialized");const s=yield ai(t);if(!s)throw new Error("Kullanc bulunamad");const i=yield ai(e);if(!i||!((n=i.role)!=null&&n.includes("super_admin"))&&!((r=i.role)!=null&&r.includes("main_admin")))throw new Error("Kullanc silme yetkiniz yok. Sadece ana yneticiler kullanc silebilir.");if(t===e)throw new Error("Kendi hesabnz silemezsiniz.");const{removeUserFromAllTasks:o}=yield it(()=>A(void 0,null,function*(){const{removeUserFromAllTasks:d}=yield import("./taskService-CI62TrOj.js").then(h=>h.W);return{removeUserFromAllTasks:d}}),[]);yield o(t);const{deleteUserLogs:a}=yield it(()=>A(void 0,null,function*(){const{deleteUserLogs:d}=yield Promise.resolve().then(()=>O1);return{deleteUserLogs:d}}),void 0);yield a(t);const l=Kt(mt,"users",t);yield Hn(l,{deleted:!0,deletedAt:Ts(),deletedBy:e,email:`deleted_${Date.now()}_${s.email}`,displayName:"Silinmi Kullanc",fullName:"Silinmi Kullanc",phone:null,role:[],departmentId:null,pendingTeams:[],approvedTeams:[],teamLeaderIds:[]});const{createAuditLog:c}=yield it(()=>A(void 0,null,function*(){const{createAuditLog:d}=yield Promise.resolve().then(()=>O1);return{createAuditLog:d}}),void 0);yield c("DELETE","users",t,s,{deleted:!0,deletedAt:new Date,deletedBy:e},e)}catch(s){throw console.error("Delete user error:",s),s}}),gY=Object.freeze(Object.defineProperty({__proto__:null,deleteUser:mY,getAllUsers:Qa,getUserProfile:ai,login:kL,logout:PL,onAuthChange:OL,register:AL,resetPassword:NL,sendVerificationEmail:ML,signInWithGoogle:LL,updateFirebaseUserProfile:pY,updateUserProfile:DL},Symbol.toStringTag,{value:"Module"})),yY=!1,FL=_.createContext(void 0),vY=({children:t})=>{const[e,n]=_.useState(null),[r,s]=_.useState(!1),[i,o]=_.useState(!1),[a,l]=_.useState(!1),[c,d]=_.useState(!0),h=y=>{o(y.includes("super_admin")),s(y.includes("admin")||y.includes("super_admin")),l(y.includes("team_leader")||y.includes("admin")||y.includes("super_admin"))},f=y=>y?{id:y.id,email:y.email,emailVerified:y.emailVerified,fullName:y.fullName||y.displayName,phone:y.phone,dateOfBirth:y.dateOfBirth,roles:y.role||[],lastLoginAt:y.lastLoginAt}:null;_.useEffect(()=>{let y=null,x=!0;const C=setTimeout(()=>{x&&d(!1)},5e3);try{y=OL(D=>A(void 0,null,function*(){if(x){clearTimeout(C);try{if(D){const V=f(D);n(V),V!=null&&V.roles&&h(V.roles),setTimeout(()=>A(void 0,null,function*(){if(x)try{const{getDepartments:S}=yield it(()=>A(void 0,null,function*(){const{getDepartments:P}=yield Promise.resolve().then(()=>dv);return{getDepartments:P}}),void 0);(yield S()).some(P=>P.managerId===D.id)&&x&&l(!0)}catch(S){}}),500)}else n(null),s(!1),o(!1),l(!1)}catch(V){x&&(n(null),s(!1),o(!1),l(!1))}finally{x&&d(!1)}}}))}catch(D){clearTimeout(C),x&&(d(!1),n(null),s(!1),o(!1),l(!1))}return()=>{x=!1,clearTimeout(C),y&&y()}},[]);const p=(y,x)=>A(void 0,null,function*(){try{const C=yield kL(y,x);if(C.success&&C.user){const D=f(C.user);n(D),D!=null&&D.roles&&h(D.roles);try{const{getDepartments:V}=yield it(()=>A(void 0,null,function*(){const{getDepartments:R}=yield Promise.resolve().then(()=>dv);return{getDepartments:R}}),void 0);(yield V()).some(R=>{var P;return R.managerId===((P=C.user)==null?void 0:P.id)})&&l(!0)}catch(V){console.error("Ekip lideri kontrol hatas:",V)}return yY&&D&&D.emailVerified,window.location.href="/",{success:!0}}else return{success:!1,message:C.message||"Giri baarsz"}}catch(C){return{success:!1,message:C.message||"Giri baarsz"}}}),T=()=>A(void 0,null,function*(){try{const y=yield LL();if(y.success&&y.user){const x=f(y.user);n(x),x!=null&&x.roles&&h(x.roles);try{const{getDepartments:C}=yield it(()=>A(void 0,null,function*(){const{getDepartments:S}=yield Promise.resolve().then(()=>dv);return{getDepartments:S}}),void 0);(yield C()).some(S=>{var I;return S.managerId===((I=y.user)==null?void 0:I.id)})&&l(!0)}catch(C){console.error("Ekip lideri kontrol hatas:",C)}return window.location.href="/",{success:!0}}else return{success:!1,message:y.message||"Google ile giri baarsz"}}catch(y){return{success:!1,message:y.message||"Google ile giri baarsz"}}}),v=(y,x,C,D,V,S)=>A(void 0,null,function*(){try{const I=yield AL(y,x,C,D,V,S);if(I.success&&I.user){const R=f(I.user);return{success:!0,message:I.message||"Kayt baarl! Ltfen e-posta adresinize gnderilen dorulama balantsna tklayn.",user:R}}else return{success:!1,message:I.message||"Kayt baarsz",user:null}}catch(I){return{success:!1,message:I.message||"Kayt baarsz",user:null}}}),w=()=>A(void 0,null,function*(){try{yield PL()}catch(y){}finally{n(null),s(!1),o(!1),l(!1),window.location.href="/auth"}}),E=y=>A(void 0,null,function*(){try{return yield NL(y)}catch(x){return{success:!1,message:x.message||"ifre sfrlama baarsz"}}});return m.jsx(FL.Provider,{value:{user:e,isAdmin:r,isSuperAdmin:i,isTeamLeader:a,signIn:p,signInWithGoogle:T,signUp:v,signOut:w,resetPassword:E,loading:c},children:t})},Gg=()=>{const t=_.useContext(FL);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},rn=({children:t})=>{const[e,n]=_.useState(!1),[r,s]=_.useState(!1),i=_.useRef(null),o=vl();let a,l;try{const c=Gg();a=c.user,l=c.loading,e||n(!0)}catch(c){a=null,l=!0}return _.useEffect(()=>((!e||l)&&(i.current=setTimeout(()=>{s(!0)},1e4)),()=>{i.current&&clearTimeout(i.current)}),[e,l]),_.useEffect(()=>{if(r||!e&&!l){o("/auth");return}!l&&!a&&o("/auth")},[a,l,o,e,r]),!e||r||l?m.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:m.jsxs("div",{className:"flex flex-col items-center gap-3",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary border-t-transparent"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Ykleniyor..."})]})}):a?m.jsx(m.Fragment,{children:t}):null},_Y=({children:t})=>{const{user:e,loading:n,isAdmin:r}=Gg();return n?m.jsx("div",{className:"flex items-center justify-center h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e?r?m.jsx(m.Fragment,{children:t}):(on.error("Bu sayfaya eriim yetkiniz yok"),m.jsx(tS,{to:"/",replace:!0})):m.jsx(tS,{to:"/auth",replace:!0})},wY=A0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-60 disabled:cursor-not-allowed [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 touch-manipulation",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 active:bg-primary/95 active:scale-[0.98] shadow-sm hover:shadow-md",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 active:bg-destructive/95 active:scale-[0.98] shadow-sm hover:shadow-md",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground active:bg-accent/80 active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 active:bg-secondary/70 active:scale-[0.98]",ghost:"hover:bg-accent hover:text-accent-foreground active:bg-accent/80 active:scale-[0.98]",link:"text-primary underline-offset-4 hover:underline active:opacity-80"},size:{default:"h-11 sm:h-10 px-4 sm:px-3 py-2.5 sm:py-2 min-h-[44px] sm:min-h-0 text-sm sm:text-sm",sm:"h-10 sm:h-9 rounded-md px-3 sm:px-2.5 min-h-[44px] sm:min-h-0 text-xs sm:text-xs",lg:"h-12 sm:h-11 rounded-md px-8 sm:px-6 min-h-[44px] sm:min-h-0 text-base sm:text-sm",icon:"h-11 w-11 sm:h-10 sm:w-10 min-h-[44px] min-w-[44px] sm:min-h-0 sm:min-w-0 p-0"}},defaultVariants:{variant:"default",size:"default"}}),an=_.forwardRef((o,i)=>{var a=o,{className:t,variant:e,size:n,asChild:r=!1}=a,s=re(a,["className","variant","size","asChild"]);const l=r?rj:"button";return m.jsx(l,M({className:ft(wY({variant:e,size:n,className:t})),ref:i},s))});an.displayName="Button";const xl=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);return m.jsx("div",M({ref:n,className:ft("rounded-lg border bg-card text-card-foreground shadow-sm",t)},e))});xl.displayName="Card";const Sl=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);return m.jsx("div",M({ref:n,className:ft("flex flex-col space-y-1 sm:space-y-1.5 p-2 sm:p-3 md:p-4 lg:p-6",t)},e))});Sl.displayName="CardHeader";const Il=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);return m.jsx("h3",M({ref:n,className:ft("text-base sm:text-lg md:text-xl lg:text-2xl font-semibold leading-none tracking-tight",t)},e))});Il.displayName="CardTitle";const qh=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);return m.jsx("p",M({ref:n,className:ft("text-xs sm:text-sm text-muted-foreground",t)},e))});qh.displayName="CardDescription";const Cl=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);return m.jsx("div",M({ref:n,className:ft("p-2 sm:p-3 md:p-4 lg:p-6 pt-0",t)},e))});Cl.displayName="CardContent";const EY=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);return m.jsx("div",M({ref:n,className:ft("flex items-center p-3 sm:p-4 md:p-6 pt-0 gap-2 sm:gap-3",t)},e))});EY.displayName="CardFooter";class TY extends _.Component{constructor(n){super(n);lf(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});lf(this,"handleReload",()=>{window.location.reload()});lf(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){this.setState({error:n,errorInfo:r}),console.error("Uygulama hatas:",n.message)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:m.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 relative overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[m.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-blue-200/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"0s"}}),m.jsx("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-indigo-200/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),m.jsxs(xl,{className:"w-full max-w-2xl border-2 shadow-2xl bg-background/98 backdrop-blur-sm relative z-10 max-h-[95vh] flex flex-col",children:[m.jsxs(Sl,{className:"text-center pb-3 flex-shrink-0",children:[m.jsx("div",{className:"flex justify-center mb-3",children:m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"rounded-full p-6 bg-gradient-to-br from-blue-100 via-indigo-100 to-slate-100 dark:from-blue-900/30 dark:via-indigo-900/30 dark:to-slate-900/30 border-4 border-blue-200/50 dark:border-blue-800/50 shadow-lg",children:m.jsx(rC,{className:"h-12 w-12 text-orange-500 dark:text-orange-400"})}),m.jsx("div",{className:"absolute -top-1 -right-1",children:m.jsx("div",{className:"rounded-full p-1.5 bg-yellow-100 dark:bg-yellow-900/30 shadow-md",children:m.jsx(sc,{className:"h-4 w-4 text-yellow-500 animate-pulse"})})})]})}),m.jsx(Il,{className:"text-2xl sm:text-3xl font-extrabold mb-2 bg-gradient-to-r from-blue-600 via-indigo-600 to-slate-600 bg-clip-text text-transparent",children:"Oops! Bir eyler ters gitti"}),m.jsx(qh,{className:"text-sm sm:text-base text-muted-foreground",children:"React component'lerimiz biraz yorulmu olabilir. Endielenme, hemen dzeltiyoruz!"})]}),m.jsxs(Cl,{className:"space-y-3 flex-1 overflow-y-auto min-h-0",children:[this.state.error&&m.jsxs("div",{className:"bg-muted/60 border-2 border-border rounded-xl p-4 shadow-sm",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("div",{className:"rounded-full p-1.5 bg-primary/10",children:m.jsx(sc,{className:"h-4 w-4 text-primary"})}),m.jsx("p",{className:"text-sm font-bold text-foreground",children:"Hata Detaylar:"})]}),m.jsxs("div",{className:"space-y-2 mb-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-xs font-semibold text-foreground min-w-[80px]",children:"Hata Ad:"}),m.jsx("span",{className:"text-xs font-mono text-destructive bg-destructive/10 px-2 py-0.5 rounded",children:this.state.error.name})]}),m.jsxs("div",{className:"flex items-start gap-2",children:[m.jsx("span",{className:"text-xs font-semibold text-foreground min-w-[80px]",children:"Hata Mesaj:"}),m.jsx("span",{className:"text-xs text-muted-foreground flex-1 break-words line-clamp-2",children:this.state.error.message})]})]}),this.state.error.stack&&m.jsxs("div",{className:"space-y-1 pt-2 border-t border-border/50",children:[m.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Stack Trace:"}),m.jsx("pre",{className:"text-xs font-mono text-muted-foreground bg-background/80 p-2 rounded border break-words line-clamp-4",children:this.state.error.stack})]}),this.state.errorInfo&&m.jsxs("div",{className:"space-y-1 pt-2 border-t border-border/50",children:[m.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Component Stack:"}),m.jsx("pre",{className:"text-xs font-mono text-muted-foreground bg-background/80 p-2 rounded border break-words line-clamp-4",children:this.state.errorInfo.componentStack})]})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-2 flex-shrink-0",children:[m.jsxs(an,{onClick:this.handleGoHome,className:"flex-1 gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 active:scale-95",size:"default",children:[m.jsx(sC,{className:"h-4 w-4"}),m.jsx("span",{className:"font-semibold text-sm",children:"Ana Sayfaya Dn"}),m.jsx(iC,{className:"h-3 w-3 animate-bounce"})]}),m.jsxs(an,{onClick:this.handleReset,variant:"outline",className:"flex-1 gap-2 border-2 border-blue-300 hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-950/20 transition-all duration-300 transform hover:scale-105 active:scale-95",size:"default",children:[m.jsx(wv,{className:"h-4 w-4"}),m.jsx("span",{className:"font-semibold text-sm",children:"Tekrar Dene"})]}),m.jsxs(an,{onClick:this.handleReload,variant:"outline",className:"flex-1 gap-2 border-2 border-blue-300 hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-950/20 transition-all duration-300 transform hover:scale-105 active:scale-95",size:"default",children:[m.jsx(oC,{className:"h-4 w-4 animate-spin",style:{animationDuration:"2s"}}),m.jsx("span",{className:"font-semibold text-sm",children:"Sayfay Yenile"})]})]}),m.jsx("div",{className:"bg-gradient-to-r from-blue-50 via-indigo-50 to-slate-50 dark:from-blue-900/20 dark:via-indigo-900/20 dark:to-slate-900/20 rounded-xl p-4 border-2 border-dashed border-blue-200 dark:border-blue-800 shadow-sm",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"rounded-full p-2 bg-blue-100 dark:bg-blue-900/30 shadow-sm flex-shrink-0",children:m.jsx(aC,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),m.jsx("div",{className:"flex-1",children:m.jsxs("p",{className:"text-sm font-semibold text-foreground leading-relaxed",children:["Bu sayfann ekran grntsn ",m.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"Ayenur Aslan"}),"'a gndermelisin. Yukardaki ",m.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"detayl hata bilgileri"})," sayesinde sorunu hzlca zebilir! "]})})]})}),m.jsx("div",{className:"text-center pt-2 flex-shrink-0",children:m.jsxs("div",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200/50 dark:border-blue-800/50",children:[m.jsx(wv,{className:"h-3 w-3 text-blue-500 animate-pulse"}),m.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Teknik ekibimiz sorunu zyor! "}),m.jsx(sc,{className:"h-3 w-3 text-yellow-500 animate-pulse"})]})})]})]})]}):this.props.children}}const _t=()=>{var a;const t=Xk(),e=vl();let n="Oops! Bir eyler ters gitti",r="Beklenmedik bir hata olutu. Endielenme, hemen dzeltiyoruz!",s=null;Ko(t)?(t.status===404?(n="404 - Sayfa Bulunamad",r="Aradn sayfa burada deil. Belki tanm olabilir?"):t.status===403?(n="403 - Eriim Reddedildi",r="Bu sayfaya eriim yetkin yok. Gerekli izinlere sahip deilsin."):t.status===500?(n="500 - Sunucu Hatas",r="Sunucu biraz yorulmu gibi grnyor. Biraz bekleyip tekrar deneyebilirsin!"):(n=`${t.status} - Hata Olutu`,r=t.statusText||"Bir eyler ters gitti. Teknik ekibimiz devrede!"),s=((a=t.data)==null?void 0:a.message)||t.statusText):t instanceof Error&&(s=t.message);const i=()=>{e("/")},o=()=>{window.location.reload()};return m.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 relative overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[m.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-blue-200/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"0s"}}),m.jsx("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-indigo-200/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),m.jsxs(xl,{className:"w-full max-w-2xl border-2 shadow-2xl bg-background/98 backdrop-blur-sm relative z-10 max-h-[95vh] flex flex-col",children:[m.jsxs(Sl,{className:"text-center pb-3 flex-shrink-0",children:[m.jsx("div",{className:"flex justify-center mb-3",children:m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"rounded-full p-6 bg-gradient-to-br from-blue-100 via-indigo-100 to-slate-100 dark:from-blue-900/30 dark:via-indigo-900/30 dark:to-slate-900/30 border-4 border-blue-200/50 dark:border-blue-800/50 shadow-lg",children:m.jsx(rC,{className:"h-12 w-12 text-orange-500 dark:text-orange-400"})}),m.jsx("div",{className:"absolute -top-1 -right-1",children:m.jsx("div",{className:"rounded-full p-1.5 bg-yellow-100 dark:bg-yellow-900/30 shadow-md",children:m.jsx(sc,{className:"h-4 w-4 text-yellow-500 animate-pulse"})})})]})}),m.jsx(Il,{className:"text-2xl sm:text-3xl font-extrabold mb-2 bg-gradient-to-r from-blue-600 via-indigo-600 to-slate-600 bg-clip-text text-transparent",children:n}),m.jsx(qh,{className:"text-sm sm:text-base text-muted-foreground",children:r})]}),m.jsxs(Cl,{className:"space-y-3 flex-1 overflow-y-auto min-h-0",children:[m.jsxs("div",{className:"bg-muted/60 border-2 border-border rounded-xl p-4 shadow-sm",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("div",{className:"rounded-full p-1.5 bg-primary/10",children:m.jsx(sc,{className:"h-4 w-4 text-primary"})}),m.jsx("p",{className:"text-sm font-bold text-foreground",children:"Hata Detaylar:"})]}),Ko(t)&&m.jsxs("div",{className:"space-y-2 mb-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-xs font-semibold text-foreground min-w-[80px]",children:"Hata Kodu:"}),m.jsx("span",{className:"text-xs font-mono text-destructive bg-destructive/10 px-2 py-0.5 rounded",children:t.status}),m.jsx("span",{className:"text-xs text-muted-foreground",children:t.statusText})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-xs font-semibold text-foreground min-w-[80px]",children:"Hata Tr:"}),m.jsx("span",{className:"text-xs text-muted-foreground",children:t.status===404?"Sayfa Bulunamad":t.status===403?"Eriim Reddedildi":t.status===500?"Sunucu Hatas":"Bilinmeyen Hata"})]}),t.data&&m.jsxs("div",{className:"flex items-start gap-2",children:[m.jsx("span",{className:"text-xs font-semibold text-foreground min-w-[80px]",children:"Ek Bilgi:"}),m.jsx("span",{className:"text-xs text-muted-foreground flex-1 break-words line-clamp-2",children:JSON.stringify(t.data)})]})]}),s&&m.jsxs("div",{className:"space-y-1 mb-3",children:[m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Hata Mesaj:"})}),m.jsx("div",{className:"text-xs font-mono text-muted-foreground bg-background/80 p-2 rounded border break-words line-clamp-3",children:s})]}),t instanceof Error&&m.jsxs("div",{className:"space-y-2 pt-2 border-t border-border/50",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-xs font-semibold text-foreground min-w-[80px]",children:"Hata Ad:"}),m.jsx("span",{className:"text-xs font-mono text-destructive bg-destructive/10 px-2 py-0.5 rounded",children:t.name})]}),t.stack&&m.jsxs("div",{className:"space-y-1",children:[m.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Stack Trace:"}),m.jsx("pre",{className:"text-xs font-mono text-muted-foreground bg-background/80 p-2 rounded border break-words line-clamp-4",children:t.stack})]})]}),!s&&!Ko(t)&&!(t instanceof Error)&&m.jsx("div",{className:"text-xs text-muted-foreground italic",children:"Hata detay mevcut deil."})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-2 flex-shrink-0",children:[m.jsxs(an,{onClick:i,className:"flex-1 gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 active:scale-95",size:"default",children:[m.jsx(sC,{className:"h-4 w-4"}),m.jsx("span",{className:"font-semibold text-sm",children:"Ana Sayfaya Dn"}),m.jsx(iC,{className:"h-3 w-3 animate-bounce"})]}),m.jsxs(an,{onClick:o,variant:"outline",className:"flex-1 gap-2 border-2 border-blue-300 hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-950/20 transition-all duration-300 transform hover:scale-105 active:scale-95",size:"default",children:[m.jsx(oC,{className:"h-4 w-4 animate-spin",style:{animationDuration:"2s"}}),m.jsx("span",{className:"font-semibold text-sm",children:"Sayfay Yenile"})]})]}),m.jsx("div",{className:"bg-gradient-to-r from-blue-50 via-indigo-50 to-slate-50 dark:from-blue-900/20 dark:via-indigo-900/20 dark:to-slate-900/20 rounded-xl p-4 border-2 border-dashed border-blue-200 dark:border-blue-800 shadow-sm",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"rounded-full p-2 bg-blue-100 dark:bg-blue-900/30 shadow-sm flex-shrink-0",children:m.jsx(aC,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),m.jsx("div",{className:"flex-1",children:m.jsxs("p",{className:"text-sm font-semibold text-foreground leading-relaxed",children:["Bu sayfann ekran grntsn ",m.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"Ayenur Aslan"}),"'a gndermelisin. Yukardaki ",m.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"detayl hata bilgileri"})," sayesinde sorunu hzlca zebilir! "]})})]})}),m.jsx("div",{className:"text-center pt-2 flex-shrink-0",children:m.jsxs("div",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200/50 dark:border-blue-800/50",children:[m.jsx(wv,{className:"h-3 w-3 text-blue-500 animate-pulse"}),m.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Teknik ekibimiz sorunu zyor! "}),m.jsx(sc,{className:"h-3 w-3 text-yellow-500 animate-pulse"})]})})]})]})]})},Si=_.forwardRef((s,r)=>{var i=s,{className:t,type:e}=i,n=re(i,["className","type"]);return m.jsx("input",M({type:e,className:ft("flex h-11 sm:h-10 w-full rounded-md border border-input bg-background px-4 sm:px-3 py-3 sm:py-2 text-base sm:text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-60 touch-manipulation transition-all duration-200 hover:border-input/80 min-h-[44px] sm:min-h-0",t),ref:r},n))});Si.displayName="Input";const ph=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);const[i,o]=_.useState(!1);return m.jsxs("div",{className:"relative",children:[m.jsx(Si,M({type:i?"text":"password",className:ft("pr-10",t),ref:n},e)),m.jsxs(an,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>o(!i),disabled:e.disabled,children:[i?m.jsx(C2,{className:"h-4 w-4 text-muted-foreground"}):m.jsx(R2,{className:"h-4 w-4 text-muted-foreground"}),m.jsx("span",{className:"sr-only",children:i?"ifreyi gizle":"ifreyi gster"})]})]})});ph.displayName="PasswordInput";var bY="Label",VL=_.forwardRef((t,e)=>m.jsx(Ke.label,W(M({},t),{ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}})));VL.displayName=bY;var jL=VL;const xY=A0("text-sm sm:text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",{variants:{showRequired:{true:"after:ml-0.5 after:text-destructive after:content-['*']",false:""}},defaultVariants:{showRequired:!1}}),br=_.forwardRef((s,r)=>{var i=s,{className:t,showRequired:e}=i,n=re(i,["className","showRequired"]);return m.jsx(jL,M({ref:r,className:ft(xY({showRequired:e}),t)},n))});br.displayName=jL.displayName;var SY=_.createContext(void 0);function TT(t){const e=_.useContext(SY);return t||e||"ltr"}var hv="rovingFocusGroup.onEntryFocus",IY={bubbles:!1,cancelable:!0},Gh="RovingFocusGroup",[bw,UL,CY]=x0(Gh),[RY,zL]=yl(Gh,[CY]),[AY,kY]=RY(Gh),BL=_.forwardRef((t,e)=>m.jsx(bw.Provider,{scope:t.__scopeRovingFocusGroup,children:m.jsx(bw.Slot,{scope:t.__scopeRovingFocusGroup,children:m.jsx(PY,W(M({},t),{ref:e}))})}));BL.displayName=Gh;var PY=_.forwardRef((t,e)=>{const I=t,{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1}=I,h=re(I,["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus","preventScrollOnEntryFocus"]),f=_.useRef(null),p=jt(e,f),T=TT(i),[v,w]=Mc({prop:o,defaultProp:a!=null?a:null,onChange:l,caller:Gh}),[E,y]=_.useState(!1),x=Zr(c),C=UL(n),D=_.useRef(!1),[V,S]=_.useState(0);return _.useEffect(()=>{const R=f.current;if(R)return R.addEventListener(hv,x),()=>R.removeEventListener(hv,x)},[x]),m.jsx(AY,{scope:n,orientation:r,dir:T,loop:s,currentTabStopId:v,onItemFocus:_.useCallback(R=>w(R),[w]),onItemShiftTab:_.useCallback(()=>y(!0),[]),onFocusableItemAdd:_.useCallback(()=>S(R=>R+1),[]),onFocusableItemRemove:_.useCallback(()=>S(R=>R-1),[]),children:m.jsx(Ke.div,W(M({tabIndex:E||V===0?-1:0,"data-orientation":r},h),{ref:p,style:M({outline:"none"},t.style),onMouseDown:Pe(t.onMouseDown,()=>{D.current=!0}),onFocus:Pe(t.onFocus,R=>{const P=!D.current;if(R.target===R.currentTarget&&P&&!E){const O=new CustomEvent(hv,IY);if(R.currentTarget.dispatchEvent(O),!O.defaultPrevented){const L=C().filter(te=>te.focusable),k=L.find(te=>te.active),ee=L.find(te=>te.id===v),Y=[k,ee,...L].filter(Boolean).map(te=>te.ref.current);HL(Y,d)}}D.current=!1}),onBlur:Pe(t.onBlur,()=>y(!1))}))})}),$L="RovingFocusGroupItem",WL=_.forwardRef((t,e)=>{const w=t,{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o}=w,a=re(w,["__scopeRovingFocusGroup","focusable","active","tabStopId","children"]),l=nu(),c=i||l,d=kY($L,n),h=d.currentTabStopId===c,f=UL(n),{onFocusableItemAdd:p,onFocusableItemRemove:T,currentTabStopId:v}=d;return _.useEffect(()=>{if(r)return p(),()=>T()},[r,p,T]),m.jsx(bw.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:m.jsx(Ke.span,W(M({tabIndex:h?0:-1,"data-orientation":d.orientation},a),{ref:e,onMouseDown:Pe(t.onMouseDown,E=>{r?d.onItemFocus(c):E.preventDefault()}),onFocus:Pe(t.onFocus,()=>d.onItemFocus(c)),onKeyDown:Pe(t.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){d.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const y=OY(E,d.orientation,d.dir);if(y!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let C=f().filter(D=>D.focusable).map(D=>D.ref.current);if(y==="last")C.reverse();else if(y==="prev"||y==="next"){y==="prev"&&C.reverse();const D=C.indexOf(E.currentTarget);C=d.loop?LY(C,D+1):C.slice(D+1)}setTimeout(()=>HL(C))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:v!=null}):o}))})});WL.displayName=$L;var NY={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function DY(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function OY(t,e,n){const r=DY(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return NY[r]}function HL(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function LY(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var MY=BL,FY=WL,Kg="Tabs",[VY,hZ]=yl(Kg,[zL]),qL=zL(),[jY,bT]=VY(Kg),GL=_.forwardRef((t,e)=>{const p=t,{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic"}=p,c=re(p,["__scopeTabs","value","onValueChange","defaultValue","orientation","dir","activationMode"]),d=TT(a),[h,f]=Mc({prop:r,onChange:s,defaultProp:i!=null?i:"",caller:Kg});return m.jsx(jY,{scope:n,baseId:nu(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:l,children:m.jsx(Ke.div,W(M({dir:d,"data-orientation":o},c),{ref:e}))})});GL.displayName=Kg;var KL="TabsList",QL=_.forwardRef((t,e)=>{const a=t,{__scopeTabs:n,loop:r=!0}=a,s=re(a,["__scopeTabs","loop"]),i=bT(KL,n),o=qL(n);return m.jsx(MY,W(M({asChild:!0},o),{orientation:i.orientation,dir:i.dir,loop:r,children:m.jsx(Ke.div,W(M({role:"tablist","aria-orientation":i.orientation},s),{ref:e}))}))});QL.displayName=KL;var YL="TabsTrigger",XL=_.forwardRef((t,e)=>{const h=t,{__scopeTabs:n,value:r,disabled:s=!1}=h,i=re(h,["__scopeTabs","value","disabled"]),o=bT(YL,n),a=qL(n),l=eM(o.baseId,r),c=tM(o.baseId,r),d=r===o.value;return m.jsx(FY,W(M({asChild:!0},a),{focusable:!s,active:d,children:m.jsx(Ke.button,W(M({type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l},i),{ref:e,onMouseDown:Pe(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:Pe(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:Pe(t.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!s&&f&&o.onValueChange(r)})}))}))});XL.displayName=YL;var JL="TabsContent",ZL=_.forwardRef((t,e)=>{const f=t,{__scopeTabs:n,value:r,forceMount:s,children:i}=f,o=re(f,["__scopeTabs","value","forceMount","children"]),a=bT(JL,n),l=eM(a.baseId,r),c=tM(a.baseId,r),d=r===a.value,h=_.useRef(d);return _.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),m.jsx(Ym,{present:s||d,children:({present:p})=>m.jsx(Ke.div,W(M({"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:c,tabIndex:0},o),{ref:e,style:W(M({},t.style),{animationDuration:h.current?"0s":void 0}),children:p&&i}))})});ZL.displayName=JL;function eM(t,e){return`${t}-trigger-${e}`}function tM(t,e){return`${t}-content-${e}`}var UY=GL,nM=QL,rM=XL,sM=ZL;const zY=UY,iM=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);return m.jsx(nM,M({ref:n,className:ft("inline-flex h-10 sm:h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground gap-1","overflow-x-auto -webkit-overflow-scrolling-touch scrollbar-hide",t)},e))});iM.displayName=nM.displayName;const xw=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);return m.jsx(rM,M({ref:n,className:ft("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 sm:px-3 py-2 sm:py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 touch-manipulation min-h-[44px] sm:min-h-0",t)},e))});xw.displayName=rM.displayName;const mp=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);return m.jsx(sM,M({ref:n,className:ft("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t)},e))});mp.displayName=sM.displayName;function M1(t,[e,n]){return Math.min(n,Math.max(e,t))}var fv=0;function BY(){_.useEffect(()=>{var e,n;const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=t[0])!=null?e:F1()),document.body.insertAdjacentElement("beforeend",(n=t[1])!=null?n:F1()),fv++,()=>{fv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),fv--}},[])}function F1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var pv="focusScope.autoFocusOnMount",mv="focusScope.autoFocusOnUnmount",V1={bubbles:!1,cancelable:!0},$Y="FocusScope",oM=_.forwardRef((t,e)=>{const v=t,{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i}=v,o=re(v,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]),[a,l]=_.useState(null),c=Zr(s),d=Zr(i),h=_.useRef(null),f=jt(e,w=>l(w)),p=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let w=function(C){if(p.paused||!a)return;const D=C.target;a.contains(D)?h.current=D:To(h.current,{select:!0})},E=function(C){if(p.paused||!a)return;const D=C.relatedTarget;D!==null&&(a.contains(D)||To(h.current,{select:!0}))},y=function(C){if(document.activeElement===document.body)for(const V of C)V.removedNodes.length>0&&To(a)};document.addEventListener("focusin",w),document.addEventListener("focusout",E);const x=new MutationObserver(y);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",E),x.disconnect()}}},[r,a,p.paused]),_.useEffect(()=>{if(a){U1.add(p);const w=document.activeElement;if(!a.contains(w)){const y=new CustomEvent(pv,V1);a.addEventListener(pv,c),a.dispatchEvent(y),y.defaultPrevented||(WY(QY(aM(a)),{select:!0}),document.activeElement===w&&To(a))}return()=>{a.removeEventListener(pv,c),setTimeout(()=>{const y=new CustomEvent(mv,V1);a.addEventListener(mv,d),a.dispatchEvent(y),y.defaultPrevented||To(w!=null?w:document.body,{select:!0}),a.removeEventListener(mv,d),U1.remove(p)},0)}}},[a,c,d,p]);const T=_.useCallback(w=>{if(!n&&!r||p.paused)return;const E=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,y=document.activeElement;if(E&&y){const x=w.currentTarget,[C,D]=HY(x);C&&D?!w.shiftKey&&y===D?(w.preventDefault(),n&&To(C,{select:!0})):w.shiftKey&&y===C&&(w.preventDefault(),n&&To(D,{select:!0})):y===x&&w.preventDefault()}},[n,r,p.paused]);return m.jsx(Ke.div,W(M({tabIndex:-1},o),{ref:f,onKeyDown:T}))});oM.displayName=$Y;function WY(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(To(r,{select:e}),document.activeElement!==n)return}function HY(t){const e=aM(t),n=j1(e,t),r=j1(e.reverse(),t);return[n,r]}function aM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function j1(t,e){for(const n of t)if(!qY(n,{upTo:e}))return n}function qY(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function GY(t){return t instanceof HTMLInputElement&&"select"in t}function To(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&GY(t)&&e&&t.select()}}var U1=KY();function KY(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=z1(t,e),t.unshift(e)},remove(e){var n;t=z1(t,e),(n=t[0])==null||n.resume()}}}function z1(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function QY(t){return t.filter(e=>e.tagName!=="A")}function YY(t){const e=_.useRef({value:t,previous:t});return _.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var XY=function(t){if(typeof document=="undefined")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ll=new WeakMap,zf=new WeakMap,Bf={},gv=0,lM=function(t){return t&&(t.host||lM(t.parentNode))},JY=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=lM(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},ZY=function(t,e,n,r){var s=JY(e,Array.isArray(t)?t:[t]);Bf[n]||(Bf[n]=new WeakMap);var i=Bf[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var p=f.getAttribute(r),T=p!==null&&p!=="false",v=(Ll.get(f)||0)+1,w=(i.get(f)||0)+1;Ll.set(f,v),i.set(f,w),o.push(f),v===1&&T&&zf.set(f,!0),w===1&&f.setAttribute(n,"true"),T||f.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",f,E)}})};return d(e),a.clear(),gv++,function(){o.forEach(function(h){var f=Ll.get(h)-1,p=i.get(h)-1;Ll.set(h,f),i.set(h,p),f||(zf.has(h)||h.removeAttribute(r),zf.delete(h)),p||h.removeAttribute(n)}),gv--,gv||(Ll=new WeakMap,Ll=new WeakMap,zf=new WeakMap,Bf={})}},eX=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=XY(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),ZY(r,s,n,"aria-hidden")):function(){return null}},gp="right-scroll-bar-position",yp="width-before-scroll-bar",tX="with-scroll-bars-hidden",nX="--removed-body-scroll-bar-size";function yv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function rX(t,e){var n=_.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var sX=typeof window!="undefined"?_.useLayoutEffect:_.useEffect,B1=new WeakMap;function iX(t,e){var n=rX(null,function(r){return t.forEach(function(s){return yv(s,r)})});return sX(function(){var r=B1.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||yv(a,null)}),i.forEach(function(a){s.has(a)||yv(a,o)})}B1.set(n,t)},[t]),n}function oX(t){return t}function aX(t,e){e===void 0&&(e=oX);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function lX(t){t===void 0&&(t={});var e=aX(null);return e.options=Ys({async:!0,ssr:!1},t),e}var cM=function(t){var e=t.sideCar,n=Ih(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,Ys({},n))};cM.isSideCarExport=!0;function cX(t,e){return t.useMedium(e),cM}var uM=lX(),vv=function(){},Qg=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:vv,onWheelCapture:vv,onTouchMoveCapture:vv}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,T=t.noIsolation,v=t.inert,w=t.allowPinchZoom,E=t.as,y=E===void 0?"div":E,x=t.gapMode,C=Ih(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=f,V=iX([n,e]),S=Ys(Ys({},C),s);return _.createElement(_.Fragment,null,d&&_.createElement(D,{sideCar:uM,removeScrollBar:c,shards:h,noRelative:p,noIsolation:T,inert:v,setCallbacks:i,allowPinchZoom:!!w,lockRef:n,gapMode:x}),o?_.cloneElement(_.Children.only(a),Ys(Ys({},S),{ref:V})):_.createElement(y,Ys({},S,{className:l,ref:V}),a))});Qg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Qg.classNames={fullWidth:yp,zeroRight:gp};var uX=function(){if(typeof __webpack_nonce__!="undefined")return __webpack_nonce__};function dX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=uX();return e&&t.setAttribute("nonce",e),t}function hX(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function fX(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var pX=function(){var t=0,e=null;return{add:function(n){t==0&&(e=dX())&&(hX(e,n),fX(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},mX=function(){var t=pX();return function(e,n){_.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},dM=function(){var t=mX(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},gX={left:0,top:0,right:0,gap:0},_v=function(t){return parseInt(t||"",10)||0},yX=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[_v(n),_v(r),_v(s)]},vX=function(t){if(t===void 0&&(t="margin"),typeof window=="undefined")return gX;var e=yX(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},_X=dM(),wc="data-scroll-locked",wX=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(tX,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(wc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(gp,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(yp,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(gp," .").concat(gp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(yp," .").concat(yp,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(wc,`] {
    `).concat(nX,": ").concat(a,`px;
  }
`)},$1=function(){var t=parseInt(document.body.getAttribute(wc)||"0",10);return isFinite(t)?t:0},EX=function(){_.useEffect(function(){return document.body.setAttribute(wc,($1()+1).toString()),function(){var t=$1()-1;t<=0?document.body.removeAttribute(wc):document.body.setAttribute(wc,t.toString())}},[])},TX=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;EX();var i=_.useMemo(function(){return vX(s)},[s]);return _.createElement(_X,{styles:wX(i,!e,s,n?"":"!important")})},Sw=!1;if(typeof window!="undefined")try{var $f=Object.defineProperty({},"passive",{get:function(){return Sw=!0,!0}});window.addEventListener("test",$f,$f),window.removeEventListener("test",$f,$f)}catch(t){Sw=!1}var Ml=Sw?{passive:!1}:!1,bX=function(t){return t.tagName==="TEXTAREA"},hM=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!bX(t)&&n[e]==="visible")},xX=function(t){return hM(t,"overflowY")},SX=function(t){return hM(t,"overflowX")},W1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot!="undefined"&&r instanceof ShadowRoot&&(r=r.host);var s=fM(t,r);if(s){var i=pM(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},IX=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},CX=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},fM=function(t,e){return t==="v"?xX(e):SX(e)},pM=function(t,e){return t==="v"?IX(e):CX(e)},RX=function(t,e){return t==="h"&&e==="rtl"?-1:1},AX=function(t,e,n,r,s){var i=RX(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,f=0;do{if(!a)break;var p=pM(t,a),T=p[0],v=p[1],w=p[2],E=v-w-i*T;(T||E)&&fM(t,a)&&(h+=E,f+=T);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(f)<1||!s))&&(c=!0),c},Wf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},H1=function(t){return[t.deltaX,t.deltaY]},q1=function(t){return t&&"current"in t?t.current:t},kX=function(t,e){return t[0]===e[0]&&t[1]===e[1]},PX=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},NX=0,Fl=[];function DX(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),s=_.useState(NX++)[0],i=_.useState(dM)[0],o=_.useRef(t);_.useEffect(function(){o.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=V9([t.lockRef.current],(t.shards||[]).map(q1),!0).filter(Boolean);return v.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=_.useCallback(function(v,w){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var E=Wf(v),y=n.current,x="deltaX"in v?v.deltaX:y[0]-E[0],C="deltaY"in v?v.deltaY:y[1]-E[1],D,V=v.target,S=Math.abs(x)>Math.abs(C)?"h":"v";if("touches"in v&&S==="h"&&V.type==="range")return!1;var I=W1(S,V);if(!I)return!0;if(I?D=S:(D=S==="v"?"h":"v",I=W1(S,V)),!I)return!1;if(!r.current&&"changedTouches"in v&&(x||C)&&(r.current=D),!D)return!0;var R=r.current||D;return AX(R,w,v,R==="h"?x:C,!0)},[]),l=_.useCallback(function(v){var w=v;if(!(!Fl.length||Fl[Fl.length-1]!==i)){var E="deltaY"in w?H1(w):Wf(w),y=e.current.filter(function(D){return D.name===w.type&&(D.target===w.target||w.target===D.shadowParent)&&kX(D.delta,E)})[0];if(y&&y.should){w.cancelable&&w.preventDefault();return}if(!y){var x=(o.current.shards||[]).map(q1).filter(Boolean).filter(function(D){return D.contains(w.target)}),C=x.length>0?a(w,x[0]):!o.current.noIsolation;C&&w.cancelable&&w.preventDefault()}}},[]),c=_.useCallback(function(v,w,E,y){var x={name:v,delta:w,target:E,should:y,shadowParent:OX(E)};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(C){return C!==x})},1)},[]),d=_.useCallback(function(v){n.current=Wf(v),r.current=void 0},[]),h=_.useCallback(function(v){c(v.type,H1(v),v.target,a(v,t.lockRef.current))},[]),f=_.useCallback(function(v){c(v.type,Wf(v),v.target,a(v,t.lockRef.current))},[]);_.useEffect(function(){return Fl.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Ml),document.addEventListener("touchmove",l,Ml),document.addEventListener("touchstart",d,Ml),function(){Fl=Fl.filter(function(v){return v!==i}),document.removeEventListener("wheel",l,Ml),document.removeEventListener("touchmove",l,Ml),document.removeEventListener("touchstart",d,Ml)}},[]);var p=t.removeScrollBar,T=t.inert;return _.createElement(_.Fragment,null,T?_.createElement(i,{styles:PX(s)}):null,p?_.createElement(TX,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function OX(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const LX=cX(uM,DX);var mM=_.forwardRef(function(t,e){return _.createElement(Qg,Ys({},t,{ref:e,sideCar:LX}))});mM.classNames=Qg.classNames;var MX=[" ","Enter","ArrowUp","ArrowDown"],FX=[" ","Enter"],fl="Select",[Yg,Xg,VX]=x0(fl),[Eu,fZ]=yl(fl,[VX,ng]),Jg=ng(),[jX,Ea]=Eu(fl),[UX,zX]=Eu(fl),gM=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:d,autoComplete:h,disabled:f,required:p,form:T}=t,v=Jg(e),[w,E]=_.useState(null),[y,x]=_.useState(null),[C,D]=_.useState(!1),V=TT(c),[S,I]=Mc({prop:r,defaultProp:s!=null?s:!1,onChange:i,caller:fl}),[R,P]=Mc({prop:o,defaultProp:a,onChange:l,caller:fl}),O=_.useRef(null),L=w?T||!!w.closest("form"):!0,[k,ee]=_.useState(new Set),q=Array.from(k).map(Y=>Y.props.value).join(";");return m.jsx(vk,W(M({},v),{children:m.jsxs(jX,{required:p,scope:e,trigger:w,onTriggerChange:E,valueNode:y,onValueNodeChange:x,valueNodeHasChildren:C,onValueNodeHasChildrenChange:D,contentId:nu(),value:R,onValueChange:P,open:S,onOpenChange:I,dir:V,triggerPointerDownPosRef:O,disabled:f,children:[m.jsx(Yg.Provider,{scope:e,children:m.jsx(UX,{scope:t.__scopeSelect,onNativeOptionAdd:_.useCallback(Y=>{ee(te=>new Set(te).add(Y))},[]),onNativeOptionRemove:_.useCallback(Y=>{ee(te=>{const U=new Set(te);return U.delete(Y),U})},[]),children:n})}),L?m.jsxs(UM,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:R,onChange:Y=>P(Y.target.value),disabled:f,form:T,children:[R===void 0?m.jsx("option",{value:""}):null,Array.from(k)]},q):null]})}))};gM.displayName=fl;var yM="SelectTrigger",vM=_.forwardRef((t,e)=>{const v=t,{__scopeSelect:n,disabled:r=!1}=v,s=re(v,["__scopeSelect","disabled"]),i=Jg(n),o=Ea(yM,n),a=o.disabled||r,l=jt(e,o.onTriggerChange),c=Xg(n),d=_.useRef("touch"),[h,f,p]=BM(w=>{const E=c().filter(C=>!C.disabled),y=E.find(C=>C.value===o.value),x=$M(E,w,y);x!==void 0&&o.onValueChange(x.value)}),T=w=>{a||(o.onOpenChange(!0),p()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return m.jsx(_k,W(M({asChild:!0},i),{children:m.jsx(Ke.button,W(M({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":zM(o.value)?"":void 0},s),{ref:l,onClick:Pe(s.onClick,w=>{w.currentTarget.focus(),d.current!=="mouse"&&T(w)}),onPointerDown:Pe(s.onPointerDown,w=>{d.current=w.pointerType;const E=w.target;E.hasPointerCapture(w.pointerId)&&E.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(T(w),w.preventDefault())}),onKeyDown:Pe(s.onKeyDown,w=>{const E=h.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&f(w.key),!(E&&w.key===" ")&&MX.includes(w.key)&&(T(),w.preventDefault())})}))}))});vM.displayName=yM;var _M="SelectValue",wM=_.forwardRef((t,e)=>{const f=t,{__scopeSelect:n,className:r,style:s,children:i,placeholder:o=""}=f,a=re(f,["__scopeSelect","className","style","children","placeholder"]),l=Ea(_M,n),{onValueNodeHasChildrenChange:c}=l,d=i!==void 0,h=jt(e,l.onValueNodeChange);return xn(()=>{c(d)},[c,d]),m.jsx(Ke.span,W(M({},a),{ref:h,style:{pointerEvents:"none"},children:zM(l.value)?m.jsx(m.Fragment,{children:o}):i}))});wM.displayName=_M;var BX="SelectIcon",EM=_.forwardRef((t,e)=>{const i=t,{__scopeSelect:n,children:r}=i,s=re(i,["__scopeSelect","children"]);return m.jsx(Ke.span,W(M({"aria-hidden":!0},s),{ref:e,children:r||""}))});EM.displayName=BX;var $X="SelectPortal",TM=t=>m.jsx(S0,M({asChild:!0},t));TM.displayName=$X;var pl="SelectContent",bM=_.forwardRef((t,e)=>{const n=Ea(pl,t.__scopeSelect),[r,s]=_.useState();if(xn(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?ga.createPortal(m.jsx(xM,{scope:t.__scopeSelect,children:m.jsx(Yg.Slot,{scope:t.__scopeSelect,children:m.jsx("div",{children:t.children})})}),i):null}return m.jsx(SM,W(M({},t),{ref:e}))});bM.displayName=pl;var hs=10,[xM,Ta]=Eu(pl),WX="SelectContentImpl",HX=Kd("SelectContent.RemoveScroll"),SM=_.forwardRef((t,e)=>{const Ee=t,{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:T,hideWhenDetached:v,avoidCollisions:w}=Ee,E=re(Ee,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),y=Ea(pl,n),[x,C]=_.useState(null),[D,V]=_.useState(null),S=jt(e,Te=>C(Te)),[I,R]=_.useState(null),[P,O]=_.useState(null),L=Xg(n),[k,ee]=_.useState(!1),q=_.useRef(!1);_.useEffect(()=>{if(x)return eX(x)},[x]),BY();const Y=_.useCallback(Te=>{const[He,...dt]=L().map(Le=>Le.ref.current),[Fe]=dt.slice(-1),be=document.activeElement;for(const Le of Te)if(Le===be||(Le==null||Le.scrollIntoView({block:"nearest"}),Le===He&&D&&(D.scrollTop=0),Le===Fe&&D&&(D.scrollTop=D.scrollHeight),Le==null||Le.focus(),document.activeElement!==be))return},[L,D]),te=_.useCallback(()=>Y([I,x]),[Y,I,x]);_.useEffect(()=>{k&&te()},[k,te]);const{onOpenChange:U,triggerPointerDownPosRef:$}=y;_.useEffect(()=>{if(x){let Te={x:0,y:0};const He=Fe=>{var be,Le,Ut,Ht;Te={x:Math.abs(Math.round(Fe.pageX)-((Le=(be=$.current)==null?void 0:be.x)!=null?Le:0)),y:Math.abs(Math.round(Fe.pageY)-((Ht=(Ut=$.current)==null?void 0:Ut.y)!=null?Ht:0))}},dt=Fe=>{Te.x<=10&&Te.y<=10?Fe.preventDefault():x.contains(Fe.target)||U(!1),document.removeEventListener("pointermove",He),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",He),document.addEventListener("pointerup",dt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",He),document.removeEventListener("pointerup",dt,{capture:!0})}}},[x,U,$]),_.useEffect(()=>{const Te=()=>U(!1);return window.addEventListener("blur",Te),window.addEventListener("resize",Te),()=>{window.removeEventListener("blur",Te),window.removeEventListener("resize",Te)}},[U]);const[X,ie]=BM(Te=>{const He=L().filter(be=>!be.disabled),dt=He.find(be=>be.ref.current===document.activeElement),Fe=$M(He,Te,dt);Fe&&setTimeout(()=>Fe.ref.current.focus())}),J=_.useCallback((Te,He,dt)=>{const Fe=!q.current&&!dt;(y.value!==void 0&&y.value===He||Fe)&&(R(Te),Fe&&(q.current=!0))},[y.value]),ae=_.useCallback(()=>x==null?void 0:x.focus(),[x]),ye=_.useCallback((Te,He,dt)=>{const Fe=!q.current&&!dt;(y.value!==void 0&&y.value===He||Fe)&&O(Te)},[y.value]),le=r==="popper"?Iw:IM,Ue=le===Iw?{side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:T,hideWhenDetached:v,avoidCollisions:w}:{};return m.jsx(xM,{scope:n,content:x,viewport:D,onViewportChange:V,itemRefCallback:J,selectedItem:I,onItemLeave:ae,itemTextRefCallback:ye,focusSelectedItem:te,selectedItemText:P,position:r,isPositioned:k,searchRef:X,children:m.jsx(mM,{as:HX,allowPinchZoom:!0,children:m.jsx(oM,{asChild:!0,trapped:y.open,onMountAutoFocus:Te=>{Te.preventDefault()},onUnmountAutoFocus:Pe(s,Te=>{var He;(He=y.trigger)==null||He.focus({preventScroll:!0}),Te.preventDefault()}),children:m.jsx(Qm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Te=>Te.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:m.jsx(le,W(M(M({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:Te=>Te.preventDefault()},E),Ue),{onPlaced:()=>ee(!0),ref:S,style:M({display:"flex",flexDirection:"column",outline:"none"},E.style),onKeyDown:Pe(E.onKeyDown,Te=>{const He=Te.ctrlKey||Te.altKey||Te.metaKey;if(Te.key==="Tab"&&Te.preventDefault(),!He&&Te.key.length===1&&ie(Te.key),["ArrowUp","ArrowDown","Home","End"].includes(Te.key)){let Fe=L().filter(be=>!be.disabled).map(be=>be.ref.current);if(["ArrowUp","End"].includes(Te.key)&&(Fe=Fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Te.key)){const be=Te.target,Le=Fe.indexOf(be);Fe=Fe.slice(Le+1)}setTimeout(()=>Y(Fe)),Te.preventDefault()}})}))})})})})});SM.displayName=WX;var qX="SelectItemAlignedPosition",IM=_.forwardRef((t,e)=>{const S=t,{__scopeSelect:n,onPlaced:r}=S,s=re(S,["__scopeSelect","onPlaced"]),i=Ea(pl,n),o=Ta(pl,n),[a,l]=_.useState(null),[c,d]=_.useState(null),h=jt(e,I=>d(I)),f=Xg(n),p=_.useRef(!1),T=_.useRef(!0),{viewport:v,selectedItem:w,selectedItemText:E,focusSelectedItem:y}=o,x=_.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&v&&w&&E){const I=i.trigger.getBoundingClientRect(),R=c.getBoundingClientRect(),P=i.valueNode.getBoundingClientRect(),O=E.getBoundingClientRect();if(i.dir!=="rtl"){const be=O.left-R.left,Le=P.left-be,Ut=I.left-Le,Ht=I.width+Ut,Ot=Math.max(Ht,R.width),jr=window.innerWidth-hs,yr=M1(Le,[hs,Math.max(hs,jr-Ot)]);a.style.minWidth=Ht+"px",a.style.left=yr+"px"}else{const be=R.right-O.right,Le=window.innerWidth-P.right-be,Ut=window.innerWidth-I.right-Le,Ht=I.width+Ut,Ot=Math.max(Ht,R.width),jr=window.innerWidth-hs,yr=M1(Le,[hs,Math.max(hs,jr-Ot)]);a.style.minWidth=Ht+"px",a.style.right=yr+"px"}const L=f(),k=window.innerHeight-hs*2,ee=v.scrollHeight,q=window.getComputedStyle(c),Y=parseInt(q.borderTopWidth,10),te=parseInt(q.paddingTop,10),U=parseInt(q.borderBottomWidth,10),$=parseInt(q.paddingBottom,10),X=Y+te+ee+$+U,ie=Math.min(w.offsetHeight*5,X),J=window.getComputedStyle(v),ae=parseInt(J.paddingTop,10),ye=parseInt(J.paddingBottom,10),le=I.top+I.height/2-hs,Ue=k-le,Ee=w.offsetHeight/2,Te=w.offsetTop+Ee,He=Y+te+Te,dt=X-He;if(He<=le){const be=L.length>0&&w===L[L.length-1].ref.current;a.style.bottom="0px";const Le=c.clientHeight-v.offsetTop-v.offsetHeight,Ut=Math.max(Ue,Ee+(be?ye:0)+Le+U),Ht=He+Ut;a.style.height=Ht+"px"}else{const be=L.length>0&&w===L[0].ref.current;a.style.top="0px";const Ut=Math.max(le,Y+v.offsetTop+(be?ae:0)+Ee)+dt;a.style.height=Ut+"px",v.scrollTop=He-le+v.offsetTop}a.style.margin=`${hs}px 0`,a.style.minHeight=ie+"px",a.style.maxHeight=k+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,a,c,v,w,E,i.dir,r]);xn(()=>x(),[x]);const[C,D]=_.useState();xn(()=>{c&&D(window.getComputedStyle(c).zIndex)},[c]);const V=_.useCallback(I=>{I&&T.current===!0&&(x(),y==null||y(),T.current=!1)},[x,y]);return m.jsx(KX,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:V,children:m.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:m.jsx(Ke.div,W(M({},s),{ref:h,style:M({boxSizing:"border-box",maxHeight:"100%"},s.style)}))})})});IM.displayName=qX;var GX="SelectPopperPosition",Iw=_.forwardRef((t,e)=>{const a=t,{__scopeSelect:n,align:r="start",collisionPadding:s=hs}=a,i=re(a,["__scopeSelect","align","collisionPadding"]),o=Jg(n);return m.jsx(wk,W(M(M({},o),i),{ref:e,align:r,collisionPadding:s,style:W(M({boxSizing:"border-box"},i.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});Iw.displayName=GX;var[KX,xT]=Eu(pl,{}),Cw="SelectViewport",CM=_.forwardRef((t,e)=>{const c=t,{__scopeSelect:n,nonce:r}=c,s=re(c,["__scopeSelect","nonce"]),i=Ta(Cw,n),o=xT(Cw,n),a=jt(e,i.onViewportChange),l=_.useRef(0);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),m.jsx(Yg.Slot,{scope:n,children:m.jsx(Ke.div,W(M({"data-radix-select-viewport":"",role:"presentation"},s),{ref:a,style:M({position:"relative",flex:1,overflow:"hidden auto"},s.style),onScroll:Pe(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&f){const T=Math.abs(l.current-h.scrollTop);if(T>0){const v=window.innerHeight-hs*2,w=parseFloat(f.style.minHeight),E=parseFloat(f.style.height),y=Math.max(w,E);if(y<v){const x=y+T,C=Math.min(v,x),D=x-C;f.style.height=C+"px",f.style.bottom==="0px"&&(h.scrollTop=D>0?D:0,f.style.justifyContent="flex-end")}}}l.current=h.scrollTop})}))})]})});CM.displayName=Cw;var RM="SelectGroup",[QX,YX]=Eu(RM),XX=_.forwardRef((t,e)=>{const i=t,{__scopeSelect:n}=i,r=re(i,["__scopeSelect"]),s=nu();return m.jsx(QX,{scope:n,id:s,children:m.jsx(Ke.div,W(M({role:"group","aria-labelledby":s},r),{ref:e}))})});XX.displayName=RM;var AM="SelectLabel",kM=_.forwardRef((t,e)=>{const i=t,{__scopeSelect:n}=i,r=re(i,["__scopeSelect"]),s=YX(AM,n);return m.jsx(Ke.div,W(M({id:s.id},r),{ref:e}))});kM.displayName=AM;var Nm="SelectItem",[JX,PM]=Eu(Nm),NM=_.forwardRef((t,e)=>{const y=t,{__scopeSelect:n,value:r,disabled:s=!1,textValue:i}=y,o=re(y,["__scopeSelect","value","disabled","textValue"]),a=Ea(Nm,n),l=Ta(Nm,n),c=a.value===r,[d,h]=_.useState(i!=null?i:""),[f,p]=_.useState(!1),T=jt(e,x=>{var C;return(C=l.itemRefCallback)==null?void 0:C.call(l,x,r,s)}),v=nu(),w=_.useRef("touch"),E=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return m.jsx(JX,{scope:n,value:r,disabled:s,textId:v,isSelected:c,onItemTextChange:_.useCallback(x=>{h(C=>{var D;return C||((D=x==null?void 0:x.textContent)!=null?D:"").trim()})},[]),children:m.jsx(Yg.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:m.jsx(Ke.div,W(M({role:"option","aria-labelledby":v,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1},o),{ref:T,onFocus:Pe(o.onFocus,()=>p(!0)),onBlur:Pe(o.onBlur,()=>p(!1)),onClick:Pe(o.onClick,()=>{w.current!=="mouse"&&E()}),onPointerUp:Pe(o.onPointerUp,()=>{w.current==="mouse"&&E()}),onPointerDown:Pe(o.onPointerDown,x=>{w.current=x.pointerType}),onPointerMove:Pe(o.onPointerMove,x=>{var C;w.current=x.pointerType,s?(C=l.onItemLeave)==null||C.call(l):w.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Pe(o.onPointerLeave,x=>{var C;x.currentTarget===document.activeElement&&((C=l.onItemLeave)==null||C.call(l))}),onKeyDown:Pe(o.onKeyDown,x=>{var D;((D=l.searchRef)==null?void 0:D.current)!==""&&x.key===" "||(FX.includes(x.key)&&E(),x.key===" "&&x.preventDefault())})}))})})});NM.displayName=Nm;var id="SelectItemText",DM=_.forwardRef((t,e)=>{const E=t,{__scopeSelect:n,className:r,style:s}=E,i=re(E,["__scopeSelect","className","style"]),o=Ea(id,n),a=Ta(id,n),l=PM(id,n),c=zX(id,n),[d,h]=_.useState(null),f=jt(e,y=>h(y),l.onItemTextChange,y=>{var x;return(x=a.itemTextRefCallback)==null?void 0:x.call(a,y,l.value,l.disabled)}),p=d==null?void 0:d.textContent,T=_.useMemo(()=>m.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:v,onNativeOptionRemove:w}=c;return xn(()=>(v(T),()=>w(T)),[v,w,T]),m.jsxs(m.Fragment,{children:[m.jsx(Ke.span,W(M({id:l.textId},i),{ref:f})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ga.createPortal(i.children,o.valueNode):null]})});DM.displayName=id;var OM="SelectItemIndicator",LM=_.forwardRef((t,e)=>{const i=t,{__scopeSelect:n}=i,r=re(i,["__scopeSelect"]);return PM(OM,n).isSelected?m.jsx(Ke.span,W(M({"aria-hidden":!0},r),{ref:e})):null});LM.displayName=OM;var Rw="SelectScrollUpButton",MM=_.forwardRef((t,e)=>{const n=Ta(Rw,t.__scopeSelect),r=xT(Rw,t.__scopeSelect),[s,i]=_.useState(!1),o=jt(e,r.onScrollButtonChange);return xn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?m.jsx(VM,W(M({},t),{ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}})):null});MM.displayName=Rw;var Aw="SelectScrollDownButton",FM=_.forwardRef((t,e)=>{const n=Ta(Aw,t.__scopeSelect),r=xT(Aw,t.__scopeSelect),[s,i]=_.useState(!1),o=jt(e,r.onScrollButtonChange);return xn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;i(d)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?m.jsx(VM,W(M({},t),{ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}})):null});FM.displayName=Aw;var VM=_.forwardRef((t,e)=>{const c=t,{__scopeSelect:n,onAutoScroll:r}=c,s=re(c,["__scopeSelect","onAutoScroll"]),i=Ta("SelectScrollButton",n),o=_.useRef(null),a=Xg(n),l=_.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return _.useEffect(()=>()=>l(),[l]),xn(()=>{var h;const d=a().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[a]),m.jsx(Ke.div,W(M({"aria-hidden":!0},s),{ref:e,style:M({flexShrink:0},s.style),onPointerDown:Pe(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Pe(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Pe(s.onPointerLeave,()=>{l()})}))}),ZX="SelectSeparator",jM=_.forwardRef((t,e)=>{const s=t,{__scopeSelect:n}=s,r=re(s,["__scopeSelect"]);return m.jsx(Ke.div,W(M({"aria-hidden":!0},r),{ref:e}))});jM.displayName=ZX;var kw="SelectArrow",eJ=_.forwardRef((t,e)=>{const a=t,{__scopeSelect:n}=a,r=re(a,["__scopeSelect"]),s=Jg(n),i=Ea(kw,n),o=Ta(kw,n);return i.open&&o.position==="popper"?m.jsx(Ek,W(M(M({},s),r),{ref:e})):null});eJ.displayName=kw;var tJ="SelectBubbleInput",UM=_.forwardRef((s,r)=>{var i=s,{__scopeSelect:t,value:e}=i,n=re(i,["__scopeSelect","value"]);const o=_.useRef(null),a=jt(r,o),l=YY(e);return _.useEffect(()=>{const c=o.current;if(!c)return;const d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==e&&f){const p=new Event("change",{bubbles:!0});f.call(c,e),c.dispatchEvent(p)}},[l,e]),m.jsx(Ke.select,W(M({},n),{style:M(M({},_A),n.style),ref:a,defaultValue:e}))});UM.displayName=tJ;function zM(t){return t===""||t===void 0}function BM(t){const e=Zr(t),n=_.useRef(""),r=_.useRef(0),s=_.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=_.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function $M(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=nJ(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function nJ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var rJ=gM,WM=vM,sJ=wM,iJ=EM,oJ=TM,HM=bM,aJ=CM,qM=kM,GM=NM,lJ=DM,cJ=LM,KM=MM,QM=FM,YM=jM;const uJ=rJ,dJ=sJ,XM=_.forwardRef((s,r)=>{var i=s,{className:t,children:e}=i,n=re(i,["className","children"]);return m.jsxs(WM,W(M({ref:r,className:ft("flex h-11 sm:h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2.5 sm:py-2 text-base sm:text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-60 [&>span]:line-clamp-1 touch-manipulation min-h-[44px] sm:min-h-0 transition-all duration-200 hover:border-input/80 pointer-events-auto cursor-pointer",t)},n),{children:[e,m.jsx(iJ,{asChild:!0,children:m.jsx(lC,{className:"h-4 w-4 opacity-50"})})]}))});XM.displayName=WM.displayName;const JM=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);return m.jsx(KM,W(M({ref:n,className:ft("flex cursor-default items-center justify-center py-1",t)},e),{children:m.jsx(A2,{className:"h-4 w-4"})}))});JM.displayName=KM.displayName;const ZM=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);return m.jsx(QM,W(M({ref:n,className:ft("flex cursor-default items-center justify-center py-1",t)},e),{children:m.jsx(lC,{className:"h-4 w-4"})}))});ZM.displayName=QM.displayName;const e2=_.forwardRef((a,o)=>{var l=a,{className:t,children:e,position:n="popper",side:r="bottom",sideOffset:s=4}=l,i=re(l,["className","children","position","side","sideOffset"]);return m.jsx(oJ,{children:m.jsxs(HM,W(M({ref:o,side:r,sideOffset:s,collisionPadding:16,avoidCollisions:!1,className:ft("z-[10005] min-w-[8rem] overflow-hidden rounded-lg border-2 border-border/50 bg-popover text-popover-foreground shadow-xl data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1",t),position:n},i),{children:[m.jsx(JM,{}),m.jsx(aJ,{className:ft("p-1 !overflow-y-auto !overflow-x-hidden",n==="popper"?"w-full min-w-[var(--radix-select-trigger-width)]":""),style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pinch-zoom",overscrollBehavior:"contain",overscrollBehaviorY:"contain",overscrollBehaviorX:"contain",scrollbarWidth:"thin",scrollbarColor:"rgba(0, 0, 0, 0.2) transparent",paddingBottom:"0px",scrollPaddingBottom:"0px",height:"auto",maxHeight:n==="popper"?"300px":"85vh"},children:e}),m.jsx(ZM,{})]}))})});e2.displayName=HM.displayName;const hJ=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);return m.jsx(qM,M({ref:n,className:ft("py-1.5 pl-8 pr-2 text-sm font-semibold",t)},e))});hJ.displayName=qM.displayName;const Pw=_.forwardRef((s,r)=>{var i=s,{className:t,children:e}=i,n=re(i,["className","children"]);return m.jsxs(GM,W(M({ref:r,className:ft("relative flex w-full cursor-pointer select-none items-center rounded-md py-2 pl-8 pr-3 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",t)},n),{children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(cJ,{children:m.jsx(k2,{className:"h-4 w-4"})})}),m.jsx(lJ,{children:e})]}))});Pw.displayName=GM.displayName;const fJ=_.forwardRef((r,n)=>{var s=r,{className:t}=s,e=re(s,["className"]);return m.jsx(YM,M({ref:n,className:ft("-mx-1 my-1 h-px bg-muted",t)},e))});fJ.displayName=YM.displayName;const pJ="/assets/images/rev-logo-Vh07wiRv.png",t2=t=>{if(!t)return null;const e=t.replace(/\D/g,"");if(e.length===0)return null;let n=e;if(n.startsWith("0")&&(n=n.substring(1)),n.startsWith("90")&&n.length>=12&&(n=n.substring(2)),n.length===10&&n.startsWith("5"))return`+90${n}`;if(t.trim().startsWith("+90")&&e.length>=12){const r=e.substring(2);if(r.length===10&&r.startsWith("5"))return`+90${r}`}return null},pZ=t=>{if(!t)return"";const e=t.replace(/\D/g,"");if(t.startsWith("+90")&&e.length===12){const n=e.substring(2);return`+90 ${n.substring(0,3)} ${n.substring(3,6)} ${n.substring(6,8)} ${n.substring(8,10)}`}if(e.startsWith("90")&&e.length===12){const n=e.substring(2);return`+90 ${n.substring(0,3)} ${n.substring(3,6)} ${n.substring(6,8)} ${n.substring(8,10)}`}if(e.length===10&&e.startsWith("5"))return`+90 ${e.substring(0,3)} ${e.substring(3,6)} ${e.substring(6,8)} ${e.substring(8,10)}`;if(e.length===11&&e.startsWith("0")){const n=e.substring(1);return`+90 ${n.substring(0,3)} ${n.substring(3,6)} ${n.substring(6,8)} ${n.substring(8,10)}`}return t},mZ=t=>{if(!t)return"";const e=t2(t);return e||t},gZ=t=>{const e=t.replace(/\D/g,"");if(e.length===0)return"";let n="+90 ",r=e;if(e.startsWith("90")&&e.length>2?r=e.substring(2):e.startsWith("0")&&e.length>1&&(r=e.substring(1)),r.length>0&&!r.startsWith("5"))return"+90 5";const i=r.substring(0,10);return i.length<=3?n+=i:i.length<=6?n+=`${i.substring(0,3)} ${i.substring(3)}`:i.length<=8?n+=`${i.substring(0,3)} ${i.substring(3,6)} ${i.substring(6)}`:n+=`${i.substring(0,3)} ${i.substring(3,6)} ${i.substring(6,8)} ${i.substring(8,10)}`,n},mJ=()=>{const{signIn:t,signInWithGoogle:e,signUp:n,resetPassword:r}=Gg(),[s,i]=_.useState("signin"),[o,a]=_.useState(!1),[l,c]=_.useState(!1),[d,h]=_.useState(!1),[f,p]=_.useState(!1),[T,v]=_.useState(null),[w,E]=_.useState(null),[y,x]=_.useState(null),[C,D]=_.useState([]),[V,S]=_.useState(""),[I,R]=_.useState("+90 5");_.useEffect(()=>{A(void 0,null,function*(){try{const ee=yield Hh();ee.length>0?D(ee.map(q=>({id:q.id,name:q.name}))):D([{id:"mechanic",name:"Mekanik Ekip"},{id:"electric",name:"Elektrik Ekibi"},{id:"software",name:"Yazlm Ekibi"}])}catch(ee){D([{id:"mechanic",name:"Mekanik Ekip"},{id:"electric",name:"Elektrik Ekibi"},{id:"software",name:"Yazlm Ekibi"}])}})},[]),_.useEffect(()=>(document.body.style.overflow="auto",document.body.style.height="auto",document.documentElement.style.overflow="auto",document.documentElement.style.height="auto",()=>{document.body.style.overflow="",document.body.style.height="",document.documentElement.style.overflow="",document.documentElement.style.height=""}),[]);const P=k=>A(void 0,null,function*(){k.preventDefault(),a(!0),v(null);const ee=new FormData(k.currentTarget),q=ee.get("email"),Y=ee.get("password"),te=yield t(q,Y);if(te.success)on.success("Ho geldiniz!");else{const U=te.message||"Giri yaplamad. Ltfen bilgilerinizi kontrol edin.";U.includes("dorulanmam")||U.includes("dorulama")?v(U+" E-posta adresinize gnderilen dorulama balantsna tklayn. Ltfen spam kutunuzu da kontrol ediniz."):v(U),(U.includes("Firestore izin hatas")||U.includes("permissions"))&&on.error("Firestore Security Rules hatas! Ltfen Firebase Console'da Rules'u gncelleyin.",{duration:1e4})}a(!1)}),O=k=>A(void 0,null,function*(){k.preventDefault(),c(!0),E(null);const ee=new FormData(k.currentTarget),q=ee.get("email"),Y=ee.get("password"),te=ee.get("fullName");if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(Y)){E("ifre en az 8 karakter, 1 byk harf, 1 kk harf ve 1 rakam iermelidir"),c(!1);return}const $=I&&I.trim()!=="+90 5"?I.trim():null,X=ee.get("birthDate"),ie=$&&$.trim()!==""&&$.trim()!=="+90 5"?t2($.trim()):void 0,J=X&&X.trim()!==""?X.trim():void 0,ae=V&&V.trim()!==""?V.trim():void 0,ye=yield n(q,Y,te,ie,J,ae);if(ye.success){E(null);try{const le=k.currentTarget;le&&le.reset(),R("+90 5"),S("")}catch(le){console.warn("Form reset hatas:",le)}on.success("Kayt baarl! E-posta adresinize gnderilen dorulama balantsna tklayn. Ltfen spam kutunuzu da kontrol ediniz.",{duration:8e3}),on.info("E-posta adresinize gnderilen dorulama balantsna tklayarak hesabnz aktifletirin. Ltfen spam kutunuzu da kontrol ediniz. Dorulama yapmadan giri yapamazsnz.",{duration:1e4}),setTimeout(()=>{i("signin"),v(null),setTimeout(()=>{v("E-posta adresinizi dorulamadan giri yapamazsnz. Ltfen e-postanz (spam kutusu dahil) kontrol edin ve dorulama balantsna tklayn.")},300)},1500)}else{let le=ye.message||"Kayt olurken bir hata olutu";le.includes("Unsupported field value: undefined")||le.includes("invalid data")?le="Form verilerinde eksik veya geersiz alanlar var. Ltfen tm zorunlu alanlar (Ad Soyad, E-posta, ifre) doldurun ve tekrar deneyin.":le.includes("Form verilerinde eksik")||(le.includes("Firestore izin hatas")||le.includes("permissions")?le="Veritaban izin hatas. Ltfen yneticiye bavurun veya Firebase Console'da Security Rules'u kontrol edin.":(le.includes("zaten kaytl")||le.includes("zaten kullanlyor"))&&(le=le+" Giri sayfasna gemek iin 'Zaten hesabnz var m?' linkine tklayn.")),E(le),(le.includes("Firestore izin hatas")||le.includes("permissions")||le.includes("Veritaban izin hatas"))&&on.error("Firestore Security Rules hatas! Ltfen Firebase Console'da Rules'u gncelleyin.",{duration:1e4})}c(!1)}),L=k=>A(void 0,null,function*(){k.preventDefault(),h(!0),x(null);const q=new FormData(k.currentTarget).get("reset-email");try{const Y=yield r(q);Y.success?(p(!0),on.success("ifre sfrlama balants e-posta adresinize gnderildi.")):x(Y.message||"ifre sfrlama e-postas gnderilemedi")}catch(Y){x(Y.message||"ifre sfrlama baarsz")}h(!1)});return m.jsx("div",{className:"min-h-screen w-full flex items-start sm:items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50/30 to-slate-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 p-4 sm:p-6",children:m.jsx("div",{className:"w-full max-w-md my-4 sm:my-auto py-4 sm:py-6",children:m.jsxs(xl,{className:"shadow-2xl border-0 bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm",children:[m.jsxs(Sl,{className:"text-center px-6 pt-6 sm:pt-8 pb-4 sm:pb-6 space-y-4",children:[m.jsx("div",{className:"flex justify-center",children:m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-primary/20 rounded-full blur-xl animate-pulse"}),m.jsx("div",{className:"relative p-4 rounded-full bg-gradient-to-br from-primary/10 to-primary/5 border-2 border-primary/20",children:m.jsx("img",{src:pJ,alt:"Revium ERP",className:"h-16 w-16 sm:h-20 sm:w-20 rounded-full object-contain bg-white dark:bg-slate-800 p-2 shadow-lg"})})]})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Il,{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Revium ERP"}),m.jsx(qh,{className:"text-base text-muted-foreground",children:"irket ii ynetim sistemi"})]})]}),m.jsx(Cl,{className:"px-6 pb-6 sm:pb-8",children:m.jsxs(zY,{value:s,onValueChange:k=>{i(k),k==="signup"&&R("+90 5")},className:"w-full",children:[m.jsxs(iM,{className:"grid w-full grid-cols-2 h-12 bg-muted/50 rounded-lg p-1",children:[m.jsx(xw,{value:"signin",className:"text-sm font-medium touch-manipulation min-h-[44px] data-[state=active]:bg-white dark:data-[state=active]:bg-slate-700 data-[state=active]:shadow-sm transition-all",children:"Giri Yap"}),m.jsx(xw,{value:"signup",className:"text-sm font-medium touch-manipulation min-h-[44px] data-[state=active]:bg-white dark:data-[state=active]:bg-slate-700 data-[state=active]:shadow-sm transition-all",children:"Kayt Ol"})]}),m.jsx(mp,{value:"signin",className:"mt-6 space-y-5",children:m.jsxs("form",{onSubmit:P,className:"space-y-5",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs(br,{htmlFor:"signin-email",className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(Bl,{className:"h-4 w-4 text-muted-foreground"}),"E-posta ",m.jsx("span",{className:"text-destructive",children:"*"})]}),m.jsx(Si,{id:"signin-email",name:"email",type:"email",placeholder:"ornek@reviumtech.com",required:!0,autoComplete:"email",className:"h-11"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs(br,{htmlFor:"signin-password",className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(Ev,{className:"h-4 w-4 text-muted-foreground"}),"ifre ",m.jsx("span",{className:"text-destructive",children:"*"})]}),m.jsx(ph,{id:"signin-password",name:"password",placeholder:"",required:!0,autoComplete:"current-password",className:"h-11"})]}),T&&m.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-destructive/10 border border-destructive/20",children:[m.jsx(od,{className:"h-4 w-4 text-destructive mt-0.5 flex-shrink-0"}),m.jsx("p",{className:"text-sm text-destructive flex-1",children:T})]}),m.jsx(an,{type:"submit",className:"w-full h-11 text-base font-medium shadow-sm",disabled:o,children:o?m.jsxs(m.Fragment,{children:[m.jsx(jo,{className:"mr-2 h-4 w-4 animate-spin"}),"Giri yaplyor..."]}):"Giri Yap"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("span",{className:"w-full border-t"})}),m.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:m.jsx("span",{className:"bg-white dark:bg-slate-800 px-2 text-muted-foreground",children:"veya"})})]}),m.jsxs(an,{type:"button",variant:"outline",className:"w-full h-11 text-base font-medium",onClick:()=>A(void 0,null,function*(){a(!0),v(null);const k=yield e();k.success||(v(k.message||"Google ile giri baarsz oldu"),a(!1))}),disabled:o,children:[m.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[m.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),m.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),m.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),m.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google ile Giri Yap"]}),m.jsx("button",{type:"button",className:"text-sm text-primary hover:text-primary/80 underline-offset-4 hover:underline touch-manipulation min-h-[44px] w-full text-center transition-colors",onClick:()=>{i("forgot"),p(!1),x(null)},children:"ifremi Unuttum"})]})}),m.jsx(mp,{value:"signup",className:"mt-6 space-y-5",children:m.jsxs("form",{onSubmit:O,className:"space-y-5",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs(br,{htmlFor:"signup-name",className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(P2,{className:"h-4 w-4 text-muted-foreground"}),"Ad Soyad ",m.jsx("span",{className:"text-destructive",children:"*"})]}),m.jsx(Si,{id:"signup-name",name:"fullName",type:"text",placeholder:"Ad - Soyad",required:!0,autoComplete:"name",className:"h-11"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs(br,{htmlFor:"signup-email",className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(Bl,{className:"h-4 w-4 text-muted-foreground"}),"E-posta ",m.jsx("span",{className:"text-destructive",children:"*"})]}),m.jsx(Si,{id:"signup-email",name:"email",type:"email",placeholder:"ornek@reviumtech.com",required:!0,autoComplete:"email",className:"h-11"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs(br,{htmlFor:"signup-password",className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(Ev,{className:"h-4 w-4 text-muted-foreground"}),"ifre ",m.jsx("span",{className:"text-destructive",children:"*"})]}),m.jsx(ph,{id:"signup-password",name:"password",placeholder:"",required:!0,minLength:8,pattern:"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).{8,}$",title:"ifre en az 8 karakter, 1 byk harf, 1 kk harf ve 1 rakam iermelidir",autoComplete:"new-password",className:"h-11"}),m.jsx("p",{className:"text-xs text-muted-foreground px-1",children:"En az 8 karakter, 1 byk harf, 1 kk harf ve 1 rakam"})]}),m.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs(br,{htmlFor:"signup-phone",className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(N2,{className:"h-4 w-4 text-muted-foreground"}),"Telefon"]}),m.jsx(Si,{id:"signup-phone",name:"phone",type:"tel",placeholder:"+90 5XX XXX XX XX",autoComplete:"tel",className:"h-11",value:I,onKeyDown:k=>{const ee=k.currentTarget,q=ee.selectionStart||0,Y="+90 5";if((k.key==="Backspace"||k.key==="Delete")&&q<=Y.length){k.preventDefault();return}if(k.key==="ArrowLeft"&&q<=Y.length){k.preventDefault(),ee.setSelectionRange(Y.length,Y.length);return}if(k.key==="Home"){k.preventDefault(),ee.setSelectionRange(Y.length,Y.length);return}},onChange:k=>{const ee=k.target,q=ee.selectionStart||0,Y=ee.value,te="+90 5";if(Y.startsWith(te)){const U=Y.substring(te.length),ie=U.replace(/\D/g,"").substring(0,9);let J=te;ie.length<=2?J+=ie:ie.length<=5?J+=`${ie.substring(0,2)} ${ie.substring(2)}`:ie.length<=7?J+=`${ie.substring(0,2)} ${ie.substring(2,5)} ${ie.substring(5)}`:J+=`${ie.substring(0,2)} ${ie.substring(2,5)} ${ie.substring(5,7)} ${ie.substring(7,9)}`,R(J),setTimeout(()=>{const ae=U.substring(0,q-te.length).replace(/\D/g,"").length;let ye=te.length,le=0;for(let Ue=te.length;Ue<J.length;Ue++)if(/\d/.test(J[Ue])&&(le++,le>=ae)){ye=Ue+1;break}le<ae&&(ye=J.length),ee.setSelectionRange(ye,ye)},0)}else{const U=Y.replace(/\D/g,"");let $=U;if(U.startsWith("90")&&U.length>2?$=U.substring(2):U.startsWith("0")&&U.length>1&&($=U.substring(1)),$.length>0&&!$.startsWith("5")){R(te),setTimeout(()=>{ee.setSelectionRange(te.length,te.length)},0);return}const J=$.substring(1).substring(0,9);let ae=te;J.length<=2?ae+=J:J.length<=5?ae+=`${J.substring(0,2)} ${J.substring(2)}`:J.length<=7?ae+=`${J.substring(0,2)} ${J.substring(2,5)} ${J.substring(5)}`:ae+=`${J.substring(0,2)} ${J.substring(2,5)} ${J.substring(5,7)} ${J.substring(7,9)}`,R(ae),setTimeout(()=>{let ye=ae.length;const le=Y.substring(0,q).replace(/\D/g,"").length;if(le>1){let Ue=1;for(let Ee=te.length;Ee<ae.length;Ee++)if(/\d/.test(ae[Ee])&&(Ue++,Ue>=le)){ye=Ee+1;break}}else ye=te.length;ee.setSelectionRange(ye,ye)},0)}},onPaste:k=>{k.preventDefault();const q=k.clipboardData.getData("text").replace(/\D/g,"");let Y=q;if(q.startsWith("90")&&q.length>2?Y=q.substring(2):q.startsWith("0")&&q.length>1&&(Y=q.substring(1)),Y.length>0&&!Y.startsWith("5")){R("+90 5");return}const $=Y.substring(1).substring(0,9);let X="+90 5";$.length<=2?X+=$:$.length<=5?X+=`${$.substring(0,2)} ${$.substring(2)}`:$.length<=7?X+=`${$.substring(0,2)} ${$.substring(2,5)} ${$.substring(5)}`:X+=`${$.substring(0,2)} ${$.substring(2,5)} ${$.substring(5,7)} ${$.substring(7,9)}`,R(X)},onFocus:k=>{const ee="+90 5";k.target.selectionStart!==null&&k.target.selectionStart<ee.length&&setTimeout(()=>{k.target.setSelectionRange(ee.length,ee.length)},0)}})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs(br,{htmlFor:"signup-birthdate",className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(D2,{className:"h-4 w-4 text-muted-foreground"}),"Doum Tarihi"]}),m.jsx(Si,{id:"signup-birthdate",name:"birthDate",type:"date",autoComplete:"bday",className:"h-11",max:`${new Date().getFullYear()}-12-31`,min:"1900-01-01",onInput:k=>{const ee=k.target,q=ee.value;if(q&&q.length>=4){const Y=q.substring(0,4);if(Y.length>4){const te=Y.substring(0,4).replace(/\D/g,"");if(te.length===4){const U=q.substring(4);ee.value=te+U}}}}})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs(br,{htmlFor:"signup-team",className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(O2,{className:"h-4 w-4 text-muted-foreground"}),"Ekip"]}),m.jsxs(uJ,{value:V||"none",onValueChange:k=>S(k==="none"?"":k),children:[m.jsx(XM,{id:"signup-team",className:"h-11",children:m.jsx(dJ,{placeholder:"Ekip seiniz (opsiyonel)"})}),m.jsxs(e2,{side:"bottom",avoidCollisions:!1,position:"popper",children:[m.jsx(Pw,{value:"none",children:"Ekip seilmedi"}),C.map(k=>m.jsx(Pw,{value:k.id,children:k.name},k.id))]})]}),m.jsx("p",{className:"text-xs text-muted-foreground px-1",children:"Setiiniz ekip lideri tarafndan onaylanmanz gerekecektir"})]}),w&&m.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-destructive/10 border border-destructive/20",children:[m.jsx(od,{className:"h-4 w-4 text-destructive mt-0.5 flex-shrink-0"}),m.jsx("p",{className:"text-sm text-destructive flex-1",children:w})]}),m.jsx(an,{type:"submit",className:"w-full h-11 text-base font-medium shadow-sm",disabled:l,children:l?m.jsxs(m.Fragment,{children:[m.jsx(jo,{className:"mr-2 h-4 w-4 animate-spin"}),"Kayt olunuyor..."]}):"Kayt Ol"})]})}),m.jsx(mp,{value:"forgot",className:"mt-6 space-y-5",children:f?m.jsxs("div",{className:"space-y-5 text-center",children:[m.jsx("div",{className:"flex justify-center",children:m.jsx("div",{className:"p-3 rounded-full bg-green-100 dark:bg-green-900/20",children:m.jsx(cC,{className:"h-8 w-8 text-green-600 dark:text-green-400"})})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("h3",{className:"font-semibold text-lg",children:"E-posta Gnderildi"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"ifre sfrlama balants e-posta adresine gnderildi. Gelen kutunu ve spam klasrn kontrol etmeyi unutma."})]}),m.jsxs(an,{variant:"outline",onClick:()=>i("signin"),className:"w-full",children:[m.jsx(rb,{className:"mr-2 h-4 w-4"}),"Giri sayfasna dn"]})]}):m.jsxs("form",{onSubmit:L,className:"space-y-5",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs(br,{htmlFor:"reset-email",className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(Bl,{className:"h-4 w-4 text-muted-foreground"}),"E-posta ",m.jsx("span",{className:"text-destructive",children:"*"})]}),m.jsx(Si,{id:"reset-email",name:"reset-email",type:"email",placeholder:"ornek@reviumtech.com",required:!0,autoComplete:"email",className:"h-11"}),m.jsx("p",{className:"text-xs text-muted-foreground px-1",children:"ifre sfrlama balants e-posta adresinize gnderilecektir."})]}),y&&m.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-destructive/10 border border-destructive/20",children:[m.jsx(od,{className:"h-4 w-4 text-destructive mt-0.5 flex-shrink-0"}),m.jsx("p",{className:"text-sm text-destructive flex-1",children:y})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsxs(an,{type:"button",variant:"outline",onClick:()=>i("signin"),className:"flex-1",children:[m.jsx(rb,{className:"mr-2 h-4 w-4"}),"Geri"]}),m.jsx(an,{type:"submit",className:"flex-1 h-11 font-medium shadow-sm",disabled:d,children:d?m.jsxs(m.Fragment,{children:[m.jsx(jo,{className:"mr-2 h-4 w-4 animate-spin"}),"Gnderiliyor..."]}):m.jsxs(m.Fragment,{children:[m.jsx(Bl,{className:"mr-2 h-4 w-4"}),"Gnder"]})})]})]})})]})})]})})})},gJ=()=>{const t=ro();return _.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),m.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),m.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),m.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},yJ=()=>{const[t]=eP(),e=vl(),n=t.get("token"),r=t.get("userId"),[s,i]=_.useState("loading"),[o,a]=_.useState("Balant dorulanyor...");return _.useEffect(()=>{if(!n||!r){i("error"),a("Dorulama token veya kullanc ID bulunamad.");return}i("success"),a("E-posta adresiniz onayland. Giri sayfasna ynlendiriliyorsunuz..."),setTimeout(()=>{e("/auth")},2e3)},[n,r,e]),m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30 p-4",children:m.jsxs(xl,{className:"max-w-md w-full text-center",children:[m.jsx(Sl,{children:m.jsx(Il,{children:"E-posta Dorulama"})}),m.jsxs(Cl,{className:"space-y-4",children:[s==="loading"&&m.jsxs("div",{className:"flex flex-col items-center gap-3 text-muted-foreground",children:[m.jsx(jo,{className:"h-8 w-8 animate-spin"}),m.jsx("p",{children:o})]}),s==="success"&&m.jsxs("div",{className:"flex flex-col items-center gap-3 text-green-600",children:[m.jsx(cC,{className:"h-10 w-10"}),m.jsx("p",{children:o}),m.jsxs("div",{className:"flex flex-col items-center gap-2",children:[m.jsx(jo,{className:"h-5 w-5 animate-spin"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Ynlendiriliyorsunuz..."})]})]}),s==="error"&&m.jsxs("div",{className:"flex flex-col items-center gap-3 text-destructive",children:[m.jsx(L2,{className:"h-10 w-10"}),m.jsx("p",{className:"text-sm",children:o}),m.jsx(an,{asChild:!0,variant:"outline",children:m.jsx(Jp,{to:"/auth",children:"Giri Sayfasna Dn"})})]})]})]})})},vJ=()=>{var f,p;const{user:t,signOut:e}=Gg(),n=vl(),r=ro();_.useState(!1);const[s,i]=_.useState(!1),[o,a]=_.useState(null),l=(f=r.state)==null?void 0:f.email,c=(p=r.state)==null?void 0:p.message;_.useEffect(()=>{if(c&&(a(c),on.info(c)),!t){n("/auth");return}if(t.emailVerified){n("/");return}},[t,n,c]);const d=()=>A(void 0,null,function*(){if(t){i(!0);try{yield ML(),on.success("Dorulama e-postas tekrar gnderildi. Ltfen e-posta kutunuzu kontrol edin."),a(null)}catch(T){on.error("E-posta gnderilemedi: "+T.message)}finally{i(!1)}}}),h=()=>A(void 0,null,function*(){yield e(),n("/auth")});return!t||t.emailVerified?null:m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30 p-4",children:m.jsxs(xl,{className:"max-w-md w-full",children:[m.jsxs(Sl,{className:"text-center",children:[m.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-primary/10",children:m.jsx(Bl,{className:"h-8 w-8 text-primary"})}),m.jsx(Il,{children:"E-posta Dorulamas Gerekli"}),m.jsx(qh,{children:"Hesabnz kullanmaya devam etmek iin e-posta adresinizi dorulamanz gerekiyor."})]}),m.jsxs(Cl,{className:"space-y-4",children:[o&&m.jsx("div",{className:"rounded-lg bg-blue-50 border border-blue-200 p-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(od,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),m.jsx("p",{className:"text-sm text-blue-900",children:o})]})}),m.jsx("div",{className:"rounded-lg bg-muted p-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(od,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0"}),m.jsxs("div",{className:"flex-1 space-y-1",children:[m.jsx("p",{className:"text-sm font-medium",children:"E-posta adresinize gnderilen dorulama balantsna tklayn."}),m.jsxs("p",{className:"text-xs text-muted-foreground",children:["E-posta adresi: ",m.jsx("span",{className:"font-medium",children:l||(t==null?void 0:t.email)})]})]})]})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(an,{onClick:d,disabled:s,className:"w-full",children:s?m.jsxs(m.Fragment,{children:[m.jsx(jo,{className:"mr-2 h-4 w-4 animate-spin"}),"Gnderiliyor..."]}):m.jsxs(m.Fragment,{children:[m.jsx(Bl,{className:"mr-2 h-4 w-4"}),"Dorulama E-postasn Tekrar Gnder"]})}),m.jsx(an,{variant:"outline",onClick:h,className:"w-full",children:"k Yap"})]}),m.jsx("div",{className:"pt-4 border-t",children:m.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"E-postay bulamadnz m? Spam klasrn kontrol edin veya yukardaki butona tklayarak tekrar gnderin."})})]})]})})},_J=()=>{const[t]=eP(),e=t.get("token"),n=t.get("userId"),[r,s]=_.useState(!0),[i,o]=_.useState(null),[a,l]=_.useState(""),[c,d]=_.useState(""),[h,f]=_.useState(!1),[p,T]=_.useState(null),[v,w]=_.useState(!1);_.useEffect(()=>{A(void 0,null,function*(){if(!e||!n){T("Geersiz balant - token veya kullanc ID bulunamad"),s(!1);return}try{o("E-posta adresi"),s(!1)}catch(x){T("Bu balant geersiz veya sresi dolmu."),s(!1)}})},[e,n]);const E=y=>A(void 0,null,function*(){if(y.preventDefault(),!e){on.error("Geersiz token");return}if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(a)){on.error("ifre en az 8 karakter, 1 byk harf, 1 kk harf ve 1 rakam iermelidir");return}if(a!==c){on.error("ifreler uyumuyor");return}f(!0);try{yield zB(Re,e,a),w(!0),on.success("ifreniz gncellendi")}catch(C){on.error("ifre sfrlanamad: "+C.message)}f(!1)});return m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30 p-4",children:m.jsxs(xl,{className:"max-w-md w-full",children:[m.jsxs(Sl,{className:"text-center",children:[m.jsx("div",{className:"flex justify-center mb-2",children:m.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:m.jsx(Ev,{className:"h-6 w-6 text-primary"})})}),m.jsx(Il,{children:"ifre Sfrlama"})]}),m.jsx(Cl,{children:r?m.jsxs("div",{className:"flex flex-col items-center gap-3 text-muted-foreground py-6",children:[m.jsx(jo,{className:"h-6 w-6 animate-spin"}),m.jsx("p",{children:"Balant dorulanyor..."})]}):p?m.jsxs("div",{className:"text-center space-y-4",children:[m.jsx("p",{className:"text-sm text-destructive",children:p}),m.jsx(an,{asChild:!0,variant:"outline",children:m.jsx(Jp,{to:"/auth",children:"Giri sayfasna dn"})})]}):v?m.jsxs("div",{className:"text-center space-y-4",children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"ifreniz gncellendi. Yeni ifrenizle giri yapabilirsiniz."}),m.jsx(an,{asChild:!0,children:m.jsx(Jp,{to:"/auth",children:"Giri Yap"})})]}):m.jsxs("form",{className:"space-y-4",onSubmit:E,children:[m.jsxs("div",{children:[m.jsx(br,{children:"E-posta"}),m.jsx(Si,{value:i!=null?i:"",disabled:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(br,{children:"Yeni ifre"}),m.jsx(ph,{value:a,minLength:8,pattern:"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).{8,}$",title:"ifre en az 8 karakter, 1 byk harf, 1 kk harf ve 1 rakam iermelidir",onChange:y=>l(y.target.value),required:!0}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"En az 8 karakter, 1 byk harf, 1 kk harf ve 1 rakam"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(br,{children:"Yeni ifre (Tekrar)"}),m.jsx(ph,{value:c,minLength:8,onChange:y=>d(y.target.value),required:!0})]}),m.jsx(an,{type:"submit",className:"w-full",disabled:h,children:h?"Gncelleniyor...":"ifreyi Gncelle"})]})})]})})},un=t=>_.lazy(()=>A(void 0,null,function*(){let e;for(let r=0;r<2;r++)try{return yield t()}catch(s){e=s,r<1&&(yield new Promise(i=>setTimeout(i,1e3)))}throw e})),wJ=un(()=>it(()=>import("./Dashboard-leWEM6OP.js"),__vite__mapDeps([2,1,3,4,5,6,7,8,9]))),EJ=un(()=>it(()=>import("./Production-Ds8dXTpq.js"),__vite__mapDeps([10,1,3,4,11,12,13,14,15,16,17,18,19,20]))),G1=un(()=>it(()=>import("./Tasks-CkJtzJaY.js"),__vite__mapDeps([21,1,3,4,22,11,23,14,24,7,8,25,26,17,27,0,28,29,30,31,32,33]))),TJ=un(()=>it(()=>import("./TaskDetail-CuRZUy-b.js"),__vite__mapDeps([34,1,3,4,22,35,29]))),bJ=un(()=>it(()=>import("./TaskPool-BH52gMfq.js"),__vite__mapDeps([36,1,3,4,11,14,24,7,8,25,26,17,22,27,0,28,29,30,31,32]))),xJ=un(()=>it(()=>import("./TasksArchive-Nwo1H-U5.js"),__vite__mapDeps([37,1,3,4,22,11,20,38,27,0,19,39,26,17,29,14]))),SJ=un(()=>it(()=>import("./Customers-D_wHKmvX.js"),__vite__mapDeps([40,1,3,4,11,14,18,41,35,6,7,8,29,42,12,43,13,20]))),IJ=un(()=>it(()=>import("./Products-BpS_Hh3O.js"),__vite__mapDeps([44,1,3,4,11,14,45,9,12,42,43,13,20]))),CJ=un(()=>it(()=>import("./Orders-DGg9ENAG.js"),__vite__mapDeps([46,1,3,4,11,12,14,47,16,17,18,35,31,29,48,32,33,41,6,7,8,13,20]))),RJ=un(()=>it(()=>import("./Reports-DVW0fROy.js"),__vite__mapDeps([49,1,3,4,50,12,43,9,16,17,18,13]))),AJ=un(()=>it(()=>import("./RawMaterials-D-hG636A.js"),__vite__mapDeps([51,1,3,4,11,39,9,52,13,12,45,29,42,43,20,14]))),kJ=un(()=>it(()=>import("./Settings-DSbQg3ek.js"),__vite__mapDeps([53,1,3,4,29,54,8,20]))),PJ=un(()=>it(()=>import("./Profile-D3uSTI2i.js"),__vite__mapDeps([55,3,1,4,22,12,56,50,57,31,29,48,32,30]))),NJ=un(()=>it(()=>import("./Admin-BRZE4rHI.js"),__vite__mapDeps([58,1,3,4,22,11,12,14,0,57,31,29,48,32,30,54,35,25,59,39,56,5,60,38,27,19,26,17,15,16,18,47,33,41,6,7,8,13,50]))),DJ=un(()=>it(()=>import("./TeamManagement-D6To5UvI.js"),__vite__mapDeps([61,1,3,4,14,22,24,7,8,25,26,17,27,0,33,29,32,50,11,12,59,39,56,48]))),OJ=un(()=>it(()=>import("./Projects-a9Z7ut5S.js"),__vite__mapDeps([62,1,3,4,11,27,0,14,24,7,8,25,26,17,22,20]))),LJ=un(()=>it(()=>import("./Warranty-BZnZOps6.js"),__vite__mapDeps([63,1,3,4,11,60,14,20]))),MJ=un(()=>it(()=>import("./Requests-D2rFGBYl.js"),__vite__mapDeps([64,1,3,4,12,23,13,14,29]))),FJ=un(()=>it(()=>import("./Notifications-Bjwjam8f.js"),__vite__mapDeps([65,1,3,4]))),Yt=()=>m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:m.jsxs("div",{className:"flex flex-col items-center gap-4",children:[m.jsx(jo,{className:"h-8 w-8 animate-spin text-primary"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Sayfa ykleniyor..."})]})}),VJ=new g5({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnMount:!1,networkMode:"online",structuralSharing:!0}}}),jJ=()=>m.jsx(vY,{children:m.jsx(A6,{})}),UJ=V6([{element:m.jsx(jJ,{}),errorElement:m.jsx(_t,{}),children:[{path:"/verify-email",element:m.jsx(yJ,{}),errorElement:m.jsx(_t,{})},{path:"/verify-email-prompt",element:m.jsx(vJ,{}),errorElement:m.jsx(_t,{})},{path:"/reset-password",element:m.jsx(_J,{}),errorElement:m.jsx(_t,{})},{path:"/auth",element:m.jsx(mJ,{}),errorElement:m.jsx(_t,{})},{path:"/",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(wJ,{})})}),errorElement:m.jsx(_t,{})},{path:"/production",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(EJ,{})})}),errorElement:m.jsx(_t,{})},{path:"/tasks",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(G1,{})})}),errorElement:m.jsx(_t,{})},{path:"/tasks/:id",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(TJ,{})})}),errorElement:m.jsx(_t,{})},{path:"/tasks/archive",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(xJ,{})})}),errorElement:m.jsx(_t,{})},{path:"/task-pool",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(bJ,{})})}),errorElement:m.jsx(_t,{})},{path:"/projects",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(OJ,{})})}),errorElement:m.jsx(_t,{})},{path:"/projects/:projectId/tasks",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(G1,{})})}),errorElement:m.jsx(_t,{})},{path:"/customers",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(SJ,{})})}),errorElement:m.jsx(_t,{})},{path:"/products",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(IJ,{})})}),errorElement:m.jsx(_t,{})},{path:"/orders",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(CJ,{})})}),errorElement:m.jsx(_t,{})},{path:"/requests",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(MJ,{})})}),errorElement:m.jsx(_t,{})},{path:"/reports",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(RJ,{})})}),errorElement:m.jsx(_t,{})},{path:"/raw-materials",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(AJ,{})})}),errorElement:m.jsx(_t,{})},{path:"/warranty",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(LJ,{})})}),errorElement:m.jsx(_t,{})},{path:"/admin",element:m.jsx(_Y,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(NJ,{})})}),errorElement:m.jsx(_t,{})},{path:"/team-management",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(DJ,{})})}),errorElement:m.jsx(_t,{})},{path:"/settings",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(kJ,{})})}),errorElement:m.jsx(_t,{})},{path:"/profile",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(PJ,{})})}),errorElement:m.jsx(_t,{})},{path:"/notifications",element:m.jsx(rn,{children:m.jsx(_.Suspense,{fallback:m.jsx(Yt,{}),children:m.jsx(FJ,{})})}),errorElement:m.jsx(_t,{})},{path:"*",element:m.jsx(gJ,{}),errorElement:m.jsx(_t,{})}]}]),zJ=()=>m.jsx(TY,{children:m.jsx(y5,{client:VJ,children:m.jsxs(q3,{children:[m.jsx(C4,{}),m.jsx(iU,{}),m.jsx(q6,{router:UJ})]})})}),BJ=(t,e)=>A(void 0,null,function*(){try{const r=(yield Qa()).find(a=>a.email.toLowerCase()===t.toLowerCase());if(!r)return{success:!1,message:`Kullanc bulunamad: ${t}`};const s=yield Hh();if(s.length===0)return{success:!1,message:"Hi departman bulunamad. nce departman oluturun."};let i=e?s.find(a=>a.id===e):s[0];if(!i)return{success:!1,message:`Departman bulunamad: ${e}`};yield IL(i.id,{managerId:r.id});const o=r.role||[];if(!o.includes("team_leader")&&!o.includes("super_admin")){const{updateDoc:a,doc:l}=yield it(()=>A(void 0,null,function*(){const{updateDoc:h,doc:f}=yield Promise.resolve().then(()=>i7);return{updateDoc:h,doc:f}}),void 0),{db:c}=yield it(()=>A(void 0,null,function*(){const{db:h}=yield Promise.resolve().then(()=>aY);return{db:h}}),void 0),d=l(c,"users",r.id);yield a(d,{role:[...o,"team_leader"]})}return{success:!0,message:`${r.fullName||r.email} kullancs "${i.name}" ekibinin lideri olarak atand ve rol gncellendi.`}}catch(n){return console.error("Set team leader error:",n),{success:!1,message:n.message||"Ekip lideri atanrken hata olutu"}}}),$J=t=>A(void 0,null,function*(){try{console.log(` Kullanc aranyor: ${t}`);const e=nr(Rt,"users"),n=Jn(e,Vi("email","==",t)),r=yield Mr(n);if(r.empty){console.error(" Kullanc bulunamad!");return}const s=r.docs[0],i=s.data(),o=i.role||["viewer"];if(console.log(` Kullanc bulundu: ${i.displayName||t}`),console.log(` Mevcut Roller: ${o.join(", ")}`),o.includes("admin"))console.log(" Bu kullanc zaten admin yetkisine sahip.");else{const a=[...o,"admin"];yield Hn(Kt(Rt,"users",s.id),{role:a}),console.log(` BAARILI: ${t} kullancsna 'admin' rol eklendi.`),console.log(` Yeni Roller: ${a.join(", ")}`),console.log(" Deiikliin etkili olmas iin kullancnn k yapp tekrar girmesi gerekebilir.")}}catch(e){console.error(" Hata olutu:",e)}}),WJ=t=>A(void 0,null,function*(){try{const e=nr(mt,"users"),n=Jn(e,Vi("email","==",t)),r=yield Mr(n);if(r.empty){on.error(`Kullanc bulunamad: ${t}`),console.error(`Kullanc bulunamad: ${t}`);return}const s=r.docs[0],o=s.data().role||[];if(o.includes("super_admin")){on.info(`${t} zaten sper ynetici rolne sahip.`),console.log(`${t} zaten sper ynetici rolne sahip.`);return}yield Hn(s.ref,{role:[...o,"super_admin"]}),on.success(`${t} kullancs sper ynetici olarak ayarland.`),console.log(`${t} kullancs sper ynetici olarak ayarland.`)}catch(e){console.error("Sper ynetici atama hatas:",e),on.error(`Sper ynetici atama hatas: ${e.message}`)}}),n2=t=>A(void 0,null,function*(){let e="http://localhost:3000/api/send-email";!e||e.includes("localhost")||e.includes("127.0.0.1")?e="http://localhost:3000/api/send-email":!e.endsWith("/send-email")&&!e.endsWith("/send-email/")&&(e=e.replace(/\/$/,"")+"/send-email");const n="https://revpad.net/api/send-email",r=(s,i,o=8e3)=>Promise.race([fetch(s,W(M({},i),{headers:W(M({},i.headers),{Accept:"application/json"}),mode:"cors"})).catch(a=>{const l=(a==null?void 0:a.message)||String(a);return l.includes("CORS")||l.includes("Failed to fetch")||l.includes("ERR_")?Promise.reject(new Error("NetworkError")):Promise.reject(a)}),new Promise((a,l)=>setTimeout(()=>l(new Error("Timeout")),o))]);if(e)try{const s=yield r(e,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({to:t.to,subject:t.subject,html:t.html})});if(s.ok){const i=s.headers.get("content-type");if(i&&i.includes("application/json")&&(yield s.json()).success)return{success:!0}}}catch(s){}try{const s=yield r(n,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({to:t.to,subject:t.subject,html:t.html})}),i=s.headers.get("content-type");if(!i||!i.includes("application/json")){const a=yield s.text().catch(()=>"");return{success:!1,error:"E-posta servisi u an megul"}}const o=yield s.json().catch(()=>({}));return s.ok&&o.success?{success:!0}:{success:!1,error:o.error||`E-posta servisi yant vermedi (${s.status})`}}catch(s){let i=(s==null?void 0:s.message)||String(s)||"E-posta gnderilemedi";return i.includes("CORS")||i.includes("Access-Control-Allow-Origin")||i.includes("ERR_CONNECTION_REFUSED")||i.includes("ERR_FAILED"),i.includes("Failed to fetch")||i.includes("NetworkError"),i.includes("Timeout"),{success:!1,error:"E-posta servisine eriilemedi"}}}),K1=t=>A(void 0,null,function*(){if(!t||!t.includes("@"))return{success:!1,error:"Geerli bir e-posta adresi giriniz",details:{testEmail:t,timestamp:new Date().toISOString()}};try{const e="http://localhost:3000/api/send-email",n=e&&(e.includes("localhost")||e.includes("127.0.0.1"));let r;n?r="https://revpad.net/api/send-email":r="http://localhost:3000/api/send-email",console.log(" E-posta servisi test ediliyor..."),console.log(" Test e-postas:",t),console.log(" Primary URL:",e||"Yok"),console.log(" Fallback URL:",r),console.log(" Primary localhost mu?",n);const s=yield n2({to:t,subject:"Revium ERP - E-posta Servisi Test",html:`
        <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 600px; margin: 0 auto;">
          <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="color: white; margin: 0; font-size: 24px;">Revium ERP Suite</h1>
          </div>
          <div style="background: #f9f9f9; padding: 30px; border-radius: 0 0 10px 10px; border: 1px solid #e0e0e0; border-top: none;">
            <h2 style="color: #333; margin-top: 0;"> E-posta Servisi Testi</h2>
            <p style="color: #666; font-size: 16px;">
              Bu bir test e-postasdr. Eer bu e-postay alyorsanz, e-posta servisi baaryla alyor!
            </p>
            <p style="color: #666; font-size: 14px; margin-top: 20px;">
              <strong>Test Zaman:</strong> ${new Date().toLocaleString("tr-TR")}
            </p>
            <p style="color: #666; font-size: 14px;">
              <strong>API Endpoint:</strong> ${e||r}
            </p>
          </div>
        </div>
      `});return s.success?console.log(" E-posta baaryla gnderildi! Ltfen e-posta kutunuzu kontrol edin."):console.error(" E-posta gnderilemedi:",s.error||"Bilinmeyen hata"),{success:s.success,error:s.error,details:{testEmail:t,timestamp:new Date().toISOString(),primaryUrl:e||"Yok",fallbackUrl:r,usedUrl:s.success?e||r:"Hibiri almad"}}}catch(e){const n=(e==null?void 0:e.message)||String(e)||"E-posta testi baarsz oldu";return console.error(" E-posta testi hatas:",n),{success:!1,error:n,details:{testEmail:t,timestamp:new Date().toISOString(),error:String(e)}}}}),yZ=(t,e,n,r,s)=>A(void 0,null,function*(){const i="https://revpad.net";let o=`${i}/tasks`;s&&["task_assigned","task_updated","task_completed","task_created","task_approval"].includes(r)?o=`${i}/tasks?taskId=${s}`:s&&["order_created","order_updated"].includes(r)?o=`${i}/orders`:r==="role_changed"&&(o=`${i}/admin`);const a=`
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>${e}</title>
</head>
<body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">
  <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
    <h1 style="color: white; margin: 0; font-size: 24px;">Revium ERP Suite</h1>
  </div>
  <div style="background: #f9f9f9; padding: 30px; border-radius: 0 0 10px 10px; border: 1px solid #e0e0e0; border-top: none;">
    <h2 style="color: #333; margin-top: 0; font-size: 20px;">${e}</h2>
    <p style="color: #666; font-size: 16px; margin-bottom: 30px;">${n}</p>
    ${s?`
    <div style="text-align: center; margin: 30px 0;">
      <a href="${o}" style="display: inline-block; background: #667eea; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; font-weight: bold;">Detaylar Grntle</a>
    </div>
    `:""}
    <hr style="border: none; border-top: 1px solid #e0e0e0; margin: 30px 0;">
    <p style="color: #999; font-size: 12px; text-align: center; margin: 0;">
      Bu e-posta Revium ERP Suite tarafndan otomatik olarak gnderilmitir.<br>
      E-posta bildirimlerini ayarlardan ynetebilirsiniz.
    </p>
  </div>
</body>
</html>
  `.trim();return yield n2({to:t,subject:`Revium ERP - ${e}`,html:a})});typeof window!="undefined"&&(window.setTeamLeader=BJ,window.setAdmin=$J,window.setSuperAdmin=WJ,window.testEmail=K1,window.testEmailService=K1);window.addEventListener("error",t=>{var n;const e=((n=t.error)==null?void 0:n.message)||t.message||"";if(e.includes("quic")||e.includes("QUIC")||e.includes("protocol")){t.preventDefault();return}if(e.includes("useAuth must be used within an AuthProvider")){t.preventDefault();return}if(e.includes("already been started")&&e.includes("persistence")){t.preventDefault();return}console.error("Global error:",t.error),t.error&&t.error.message&&(console.error("Error message:",t.error.message),console.error("Error stack:",t.error.stack))});window.addEventListener("unhandledrejection",t=>{var n;const e=((n=t.reason)==null?void 0:n.message)||String(t.reason)||"";if(e.includes("quic")||e.includes("QUIC")||e.includes("protocol")){t.preventDefault();return}if(e.includes("useAuth must be used within an AuthProvider")){t.preventDefault();return}if(e.includes("already been started")&&e.includes("persistence")){t.preventDefault();return}console.error("Unhandled promise rejection:",t.reason)});try{const t=document.getElementById("root");if(!t)throw new Error("Root element (#root) bulunamad. index.html dosyasn kontrol edin.");if(typeof p_=="undefined")throw new Error("React yklenemedi. JavaScript dosyalarnn doru yklendiinden emin olun.");p_(t).render(m.jsx(zJ,{}))}catch(t){console.error("Uygulama render hatas:",t);const e=t instanceof Error?t.message:String(t),n=t instanceof Error?t.stack:"";document.body.innerHTML=`
    <div style="display: flex; align-items: center; justify-content: center; height: 100vh; flex-direction: column; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f5f5; padding: 20px;">
      <div style="background: white; padding: 40px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 800px; width: 100%;">
        <h1 style="color: #dc2626; margin: 0 0 16px 0; font-size: 24px;"> Uygulama Yklenemedi</h1>
        <p style="color: #666; margin: 0 0 24px 0; line-height: 1.6;">
          Uygulama balatlrken bir hata olutu. Ltfen aadaki admlar deneyin:
        </p>
        <ol style="color: #666; margin: 0 0 24px 0; padding-left: 24px; line-height: 1.8;">
          <li>Sayfay yenileyin (Ctrl + Shift + R veya Cmd + Shift + R)</li>
          <li>Tarayc cache'ini temizleyin</li>
          <li>Konsolu kontrol edin (F12) ve hata mesajlarn inceleyin</li>
          <li>Eer sorun devam ederse, ltfen teknik ekiple iletiime gein</li>
        </ol>
        <details style="margin-top: 24px;">
          <summary style="color: #666; cursor: pointer; font-weight: 500; margin-bottom: 12px;">Hata Detaylar (Geniletmek iin tklayn)</summary>
          <pre style="background: #f5f5f5; padding: 16px; border-radius: 6px; overflow: auto; font-size: 12px; line-height: 1.5; color: #333; margin: 0;">
${e}${n?`

`+n:""}
          </pre>
        </details>
        <button onclick="window.location.reload()" style="margin-top: 24px; padding: 12px 24px; background: #2563eb; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500;">
          Sayfay Yenile
        </button>
      </div>
    </div>
  `}export{uZ as $,Jn as A,an as B,xl as C,nr as D,mt as E,Qc as F,Vi as G,Mr as H,Si as I,Ts as J,GE as K,br as L,ET as M,Hn as N,Kt as O,LD as P,gu as Q,ai as R,uJ as S,ze as T,Rt as U,qE as V,s7 as W,Re as X,Tw as Y,dZ as Z,it as _,on as a,fA as a$,Ci as a0,f$ as a1,tS as a2,RL as a3,Ke as a4,yl as a5,jt as a6,Mc as a7,Pe as a8,YY as a9,gZ as aA,pY as aB,A0 as aC,Zr as aD,xn as aE,og as aF,s5 as aG,X3 as aH,eZ as aI,I_ as aJ,ps as aK,ag as aL,Q3 as aM,Y3 as aN,Nk as aO,c5 as aP,Z3 as aQ,Xn as aR,tZ as aS,sZ as aT,GJ as aU,ro as aV,aZ as aW,x0 as aX,zL as aY,MY as aZ,FY as a_,w3 as aa,hY as ab,lY as ac,Ym as ad,ng as ae,_k as af,eX as ag,mM as ah,BY as ai,oM as aj,Qm as ak,wk as al,Ek as am,vk as an,nu as ao,S0 as ap,Kd as aq,ij as ar,wY as as,q3 as at,Em as au,yZ as av,VD as aw,pJ as ax,fJ as ay,qh as az,Cl as b,mA as b0,TT as b1,M1 as b2,mY as b3,IL as b4,SL as b5,cY as b6,uY as b7,dY as b8,UA as b9,i7 as ba,dv as bb,gY as bc,XM as c,dJ as d,e2 as e,Pw as f,iZ as g,vl as h,eP as i,m as j,Hh as k,ft as l,zY as m,iM as n,xw as o,Sl as p,Il as q,Qa as r,JJ as s,ZJ as t,Gg as u,G3 as v,pZ as w,mZ as x,mp as y,t2 as z};

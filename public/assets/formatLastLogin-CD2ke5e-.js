import{T as c}from"./index-Xd90qdO9.js";import{o as p,w as m}from"./MainLayout-DW7UjMSA.js";import{i as b}from"./isSameDay-CmhUF_DM.js";import{s as D}from"./subDays-BSPI1LCX.js";import{i as N}from"./isToday-C_-qpr0F.js";import{f as d}from"./format-DuC-NjES.js";function t(e){return b(e,D(p(e),1))}const I=e=>{if(!e)return"Hiç giriş yapmamış";let o;try{if(e instanceof c)o=e.toDate();else if(e&&typeof e=="object"&&"toDate"in e&&typeof e.toDate=="function")o=e.toDate();else if(e&&typeof e=="object"&&"seconds"in e){let f,s=0;typeof e.seconds=="number"?f=e.seconds:e.seconds&&typeof e.seconds=="object"&&typeof e.seconds.toNumber=="function"?f=e.seconds.toNumber():f=Number(e.seconds),"nanoseconds"in e&&(typeof e.nanoseconds=="number"?s=e.nanoseconds:e.nanoseconds&&typeof e.nanoseconds=="object"&&typeof e.nanoseconds.toNumber=="function"?s=e.nanoseconds.toNumber():s=Number(e.nanoseconds)||0),o=new c(f,s).toDate()}else if(e&&typeof e=="object"&&"_seconds"in e){const f=Number(e._seconds),s=Number(e._nanoseconds)||0;o=new c(f,s).toDate()}else if(e&&typeof e=="object"&&"toMillis"in e&&typeof e.toMillis=="function")o=new Date(e.toMillis());else if(typeof e=="string"||typeof e=="number"){if(o=new Date(e),isNaN(o.getTime()))return"Geçersiz tarih"}else if(o=new Date(e),isNaN(o.getTime()))return console.error("formatLastLogin: Geçersiz tarih formatı",e),"Geçersiz tarih"}catch(f){return console.error("formatLastLogin error:",f,"lastLoginAt:",e,"type:",typeof e),"Geçersiz tarih"}const u=new Date().getTime()-o.getTime(),n=Math.floor(u/(1e3*60)),r=Math.floor(u/1e3);if(n<1)return`${r} saniye önce`;if(n<60)return`${n} dakika önce`;const i=Math.floor(n/60);return i<24?N(o)?`Bugün ${d(o,"HH:mm",{locale:m})}`:`${i} saat önce`:t(o)?`Dün ${d(o,"HH:mm",{locale:m})}`:Math.floor(i/24)<7?d(o,"EEEE HH:mm",{locale:m}):d(o,"dd MMMM yyyy HH:mm",{locale:m})},_=e=>{if(!e)return!1;let o;try{if(e instanceof c)o=e.toDate();else if(e&&typeof e=="object"&&"toDate"in e&&typeof e.toDate=="function")o=e.toDate();else if(e&&typeof e=="object"&&"seconds"in e){let n,r=0;typeof e.seconds=="number"?n=e.seconds:e.seconds&&typeof e.seconds=="object"&&typeof e.seconds.toNumber=="function"?n=e.seconds.toNumber():n=Number(e.seconds),"nanoseconds"in e&&(typeof e.nanoseconds=="number"?r=e.nanoseconds:e.nanoseconds&&typeof e.nanoseconds=="object"&&typeof e.nanoseconds.toNumber=="function"?r=e.nanoseconds.toNumber():r=Number(e.nanoseconds)||0),o=new c(n,r).toDate()}else if(e&&typeof e=="object"&&"_seconds"in e){const n=Number(e._seconds),r=Number(e._nanoseconds)||0;o=new c(n,r).toDate()}else if(e&&typeof e=="object"&&"toMillis"in e&&typeof e.toMillis=="function")o=new Date(e.toMillis());else if(typeof e=="string"||typeof e=="number"){if(o=new Date(e),isNaN(o.getTime()))return!1}else if(o=new Date(e),isNaN(o.getTime()))return!1}catch(n){return console.error("isUserOnline error:",n,"lastLoginAt:",e),!1}return Math.floor((new Date().getTime()-o.getTime())/(1e3*60))<5};export{I as f,_ as i};

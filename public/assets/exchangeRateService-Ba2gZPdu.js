var i=(t,e,a)=>new Promise((r,n)=>{var s=o=>{try{R(a.next(o))}catch(h){n(h)}},f=o=>{try{R(a.throw(o))}catch(h){n(h)}},R=o=>o.done?r(o.value):Promise.resolve(o.value).then(s,f);R((a=a.apply(t,e)).next())});let c=null,w=0;const g=60*60*1e3,T=()=>i(void 0,null,function*(){var e,a,r;const t=Date.now();if(c&&t-w<g)return c;try{const n=yield fetch("https://api.exchangerate-api.com/v4/latest/TRY");if(!n.ok)throw new Error("Exchange rate API error");const s=yield n.json();return c={base:"TRY",rates:{USD:(e=s.rates)!=null&&e.USD?1/s.rates.USD:void 0,EUR:(a=s.rates)!=null&&a.EUR?1/s.rates.EUR:void 0,GBP:(r=s.rates)!=null&&r.GBP?1/s.rates.GBP:void 0},date:s.date||new Date().toISOString().split("T")[0]},w=t,c}catch(n){return console.error("Exchange rate fetch error:",n),c||{base:"TRY",rates:{USD:.034,EUR:.037,GBP:.043},date:new Date().toISOString().split("T")[0]}}}),d=(t,e)=>i(void 0,null,function*(){if(e==="TRY")return t;const r=(yield T()).rates[e];return r?t/r:(console.warn(`Exchange rate not found for ${e}, using 1:1`),t)}),l=(t,e)=>i(void 0,null,function*(){if(e==="TRY")return t;const r=(yield T()).rates[e];return r?t*r:(console.warn(`Exchange rate not found for ${e}, using 1:1`),t)});export{l as a,d as c};

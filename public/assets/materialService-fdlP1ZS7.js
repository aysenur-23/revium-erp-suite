import{z as M,x as h,M as i,N as p,E as m,O as c,J as y,G as u,F as f,H as g,Q as w,I as D}from"./index-Xd90qdO9.js";import{i as n,h as d}from"./taskService-CQO0i9v5.js";const I=async()=>{var a,o;try{const e=M(h(i,"rawMaterials"),p("createdAt","desc"));return(await m(e)).docs.map(t=>({id:t.id,...t.data()}))}catch(e){throw console.error("Get raw materials error:",e),n(e)?d(e,{operation:"read",collection:"rawMaterials",userId:(o=(a=c)==null?void 0:a.currentUser)==null?void 0:o.uid}):e}},l=async a=>{var o,e;try{const r=await f(u(i,"rawMaterials",a));return r.exists()?{id:r.id,...r.data()}:null}catch(r){throw console.error("Get raw material by id error:",r),n(r)?d(r,{operation:"read",collection:"rawMaterials",documentId:a,userId:(e=(o=c)==null?void 0:o.currentUser)==null?void 0:e.uid}):r}},x=async a=>{var o,e;try{const r=await g(h(i,"rawMaterials"),{...a,createdAt:w(),updatedAt:w()}),t=await l(r.id);if(!t)throw new Error("Hammade oluşturulamadı");return t}catch(r){throw console.error("Create raw material error:",r),n(r)?d(r,{operation:"create",collection:"rawMaterials",userId:(e=(o=c)==null?void 0:o.currentUser)==null?void 0:e.uid,data:a}):r}},G=async(a,o,e)=>{var r,t;try{const s=await l(a);await D(u(i,"rawMaterials",a),{...o,updatedAt:w()});const R=await l(a)}catch(s){throw console.error("Update raw material error:",s),n(s)?d(s,{operation:"update",collection:"rawMaterials",documentId:a,userId:(t=(r=c)==null?void 0:r.currentUser)==null?void 0:t.uid,data:o}):s}},P=async(a,o)=>{var e,r;try{const t=await l(a);await y(u(i,"rawMaterials",a))}catch(t){throw console.error("Delete raw material error:",t),n(t)?d(t,{operation:"delete",collection:"rawMaterials",documentId:a,userId:(r=(e=c)==null?void 0:e.currentUser)==null?void 0:r.uid}):t}};export{x as c,P as d,I as g,G as u};

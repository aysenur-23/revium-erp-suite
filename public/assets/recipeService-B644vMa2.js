var k=Object.defineProperty;var g=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var h=(t,e,r)=>e in t?k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,w=(t,e)=>{for(var r in e||(e={}))A.call(e,r)&&h(t,r,e[r]);if(g)for(var r of g(e))M.call(e,r)&&h(t,r,e[r]);return t};var p=(t,e,r)=>new Promise((s,i)=>{var n=o=>{try{c(r.next(o))}catch(a){i(a)}},l=o=>{try{c(r.throw(o))}catch(a){i(a)}},c=o=>o.done?s(o.value):Promise.resolve(o.value).then(n,l);c((r=r.apply(t,e)).next())});import{D as f,U as d,A as y,G as E,H as D,Q as I,O as m,T as R,K as P,N as S,P as q}from"./index-BQmY0BmM.js";import"./lucide-react-CAeuRJQk.js";const u="recipes",T=t=>p(void 0,null,function*(){try{const e=f(d,u),r=y(e,E("productId","==",t)),s=yield D(r),i=[];for(const n of s.docs){const l=n.data(),c=w({id:n.id},l);if(c.rawMaterialId)try{const o=yield I(m(d,"raw_materials",c.rawMaterialId));if(o.exists()){const a=o.data();if(a.deleted===!0||a.isDeleted===!0)continue;c.rawMaterial={id:o.id,name:a.name||"",unit:a.unit||"Adet",cost:a.cost||a.unitPrice||0,stock:a.stock||a.currentStock||0}}else continue}catch(o){console.error("Error fetching raw material:",o);continue}else continue;i.push(c)}return i}catch(e){throw console.error("Error getting product recipes:",e),new Error(e.message||"Reçeteler yüklenemedi")}}),L=(t,e,r)=>p(void 0,null,function*(){try{const s=f(d,u),i={productId:t,rawMaterialId:e,quantityPerUnit:r,createdAt:R.now(),updatedAt:R.now()};return(yield P(s,i)).id}catch(s){throw console.error("Error adding recipe item:",s),new Error(s.message||"Reçete eklenemedi")}}),N=(t,e)=>p(void 0,null,function*(){try{const r=m(d,u,t);yield S(r,{quantityPerUnit:e,updatedAt:R.now()})}catch(r){throw console.error("Error updating recipe item:",r),new Error(r.message||"Reçete güncellenemedi")}}),_=t=>p(void 0,null,function*(){try{const e=m(d,u,t);yield q(e)}catch(e){throw console.error("Error deleting recipe item:",e),new Error(e.message||"Reçete silinemedi")}}),b=t=>p(void 0,null,function*(){try{const e=f(d,u),r=y(e,E("rawMaterialId","==",t)),s=yield D(r),i=[];for(const n of s.docs){const l=n.data(),c=w({id:n.id},l);if(c.productId)try{const o=yield I(m(d,"products",c.productId));o.exists()&&(c.product=w({id:o.id},o.data()))}catch(o){console.error("Error fetching product:",o)}i.push(c)}return i}catch(e){throw console.error("Error getting raw material recipes:",e),new Error(e.message||"Reçeteler yüklenemedi")}});export{L as addRecipeItem,_ as deleteRecipeItem,T as getProductRecipes,b as getRawMaterialRecipes,N as updateRecipeItem};

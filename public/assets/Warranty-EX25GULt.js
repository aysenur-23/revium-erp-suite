import{a3 as Ae,z as Fe,x as je,M as A,N as Re,E as Be,T as se,Q as O,H as Ee,P as ae,I as Me,G as re,J as Le,F as Ge,k as Ke,r as u,g as ze,b as o,j as e,B as b,C as g,e as v,L as Pe,S as f,p as N,q as y,s as w,t as n,U as _,X as W,c as H,d as $,w as c,R as z}from"./index-Xd90qdO9.js";import{x as Ve,g as qe,y as Ue,M as xe,P as J,D as Q,a as X,b as Z,c as ee,T as P}from"./MainLayout-DW7UjMSA.js";import{S as Ye}from"./search-input-QX7HVhJf.js";import{A as _e,a as We,b as He,c as $e,d as Je,e as Qe,f as Xe,g as Ze}from"./alert-dialog-BVp-ELLM.js";import{L as es}from"./loading-state-CyTUOPV3.js";import{P as ss}from"./plus-D9uLCipi.js";import{S as he}from"./square-pen-zeHrcQ7c.js";import{T as as}from"./trash-2-DlZRXDqX.js";import{S as ue}from"./save-Bgz0wbo5.js";import"./taskService-CQO0i9v5.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=Ae("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),F="warranty",rs=async r=>{try{let l=Fe(je(A,F),Re("receivedDate","desc"));return r!=null&&r.customerId,r!=null&&r.status,(await Be(l)).docs.map(d=>({id:d.id,...d.data()}))}catch(l){throw console.error("Get warranty records error:",l),l}},q=async r=>{try{const l=await Ge(re(A,F,r));return l.exists()?{id:l.id,...l.data()}:null}catch(l){throw console.error("Get warranty record by id error:",l),l}},ts=async r=>{try{const l={...r,receivedDate:r.receivedDate||se.now(),createdAt:O(),updatedAt:O()},h=await Ee(je(A,F),l),d=await q(h.id);if(!d)throw new Error("Garanti kaydı oluşturulamadı");return await ae("CREATE","warranty",h.id,r.createdBy,null,d),d}catch(l){throw console.error("Create warranty record error:",l),l}},pe=async(r,l,h)=>{try{const d=await q(r),C={...l,updatedAt:O()};l.status==="completed"&&!(d!=null&&d.completedDate)&&(C.completedDate=O()),l.status==="returned"&&!(d!=null&&d.returnedDate)&&(C.returnedDate=O()),await Me(re(A,F,r),C);const I=await q(r);h&&await ae("UPDATE","warranty",r,h,d,I)}catch(d){throw console.error("Update warranty record error:",d),d}},is=async(r,l)=>{try{const h=await q(r);await Le(re(A,F,r)),l&&await ae("DELETE","warranty",r,l,h,null)}catch(h){throw console.error("Delete warranty record error:",h),h}},gs=()=>{var me,oe;const{user:r}=Ke(),[l,h]=u.useState([]),[d,C]=u.useState([]),[I,ge]=u.useState([]),[R,ve]=u.useState([]),[fe,Ne]=u.useState({}),[te,ie]=u.useState(!0),[ye,B]=u.useState(!1),[we,E]=u.useState(!1),[be,U]=u.useState(!1),[De,M]=u.useState(!1),[i,k]=u.useState(null),[S,ke]=u.useState(""),[a,m]=u.useState({customerId:"",productId:"",orderId:"",reason:"",status:"received",repairDescription:"",cost:0,receivedDate:new Date().toISOString().split("T")[0]});u.useEffect(()=>{L()},[]);const L=async()=>{try{ie(!0);const[s,t,x,p,D]=await Promise.all([rs(),Ve(),qe(),Ue(),ze()]);h(s),C(t),ge(x),ve(p);const j={};D.forEach(K=>{j[K.id]=K.fullName||K.displayName||K.email||"Bilinmeyen"}),Ne(j)}catch(s){console.error("Fetch warranty records error:",s),o.error(s.message||"Kayıtlar yüklenirken hata oluştu")}finally{ie(!1)}},Ce=async()=>{if(!a.customerId||!a.productId||!a.reason.trim()){o.error("Müşteri, ürün ve neden gereklidir");return}if(!(r!=null&&r.id)){o.error("Kullanıcı bilgisi bulunamadı");return}try{await ts({customerId:a.customerId,productId:a.productId,orderId:a.orderId||null,reason:a.reason.trim(),status:a.status,repairDescription:a.repairDescription.trim()||null,cost:a.cost||0,receivedDate:se.fromDate(new Date(a.receivedDate)),createdBy:r.id}),o.success("Garanti kaydı oluşturuldu"),B(!1),Y(),L()}catch(s){console.error("Create warranty record error:",s),o.error(s.message||"Kayıt oluşturulurken hata oluştu")}},le=async(s,t)=>{if(!(r!=null&&r.id)){o.error("Kullanıcı bilgisi bulunamadı");return}try{await pe(s,{status:t},r.id),o.success("Durum güncellendi"),i&&i.id===s&&k({...i,status:t}),h(x=>x.map(p=>p.id===s?{...p,status:t}:p))}catch(x){console.error("Update warranty status error:",x),o.error(x.message||"Durum güncellenirken hata oluştu")}},Ie=async()=>{var p,D;if(!i){o.error("Kayıt seçilmedi");return}const s=(a.customerId||"").trim(),t=(a.productId||"").trim(),x=(a.reason||"").trim();if(!s){o.error("Müşteri seçimi gereklidir");return}if(!t){o.error("Ürün seçimi gereklidir");return}if(!x){o.error("Neden alanı gereklidir");return}if(!(r!=null&&r.id)){o.error("Kullanıcı bilgisi bulunamadı");return}try{const j={customerId:s,productId:t,orderId:((p=a.orderId)==null?void 0:p.trim())||null,reason:x,status:a.status,repairDescription:((D=a.repairDescription)==null?void 0:D.trim())||null,cost:a.cost||0};i.receivedDate.toDate().toISOString().split("T")[0]!==a.receivedDate&&(j.receivedDate=se.fromDate(new Date(a.receivedDate))),await pe(i.id,j,r.id),o.success("Garanti kaydı güncellendi"),E(!1),k(null),Y(),L()}catch(j){console.error("Update warranty record error:",j),o.error(j.message||"Kayıt güncellenirken hata oluştu")}},Se=async()=>{if(i){if(!(r!=null&&r.id)){o.error("Kullanıcı bilgisi bulunamadı");return}try{await is(i.id,r.id),o.success("Garanti kaydı silindi"),L(),U(!1),k(null)}catch(s){console.error("Delete warranty record error:",s),o.error(s.message||"Kayıt silinirken hata oluştu")}}},Te=s=>{k(s),M(!0)},ne=s=>{var D,j;k(s);const t=(s.customerId||"").trim(),x=(s.productId||"").trim(),p=(s.reason||"").trim();m({customerId:t,productId:x,orderId:(s.orderId||"").trim(),reason:p,status:s.status||"received",repairDescription:(s.repairDescription||"").trim(),cost:s.cost||0,receivedDate:((j=(D=s.receivedDate)==null?void 0:D.toDate())==null?void 0:j.toISOString().split("T")[0])||new Date().toISOString().split("T")[0]}),E(!0)},Oe=s=>{k(s),U(!0)},Y=()=>{m({customerId:"",productId:"",orderId:"",reason:"",status:"received",repairDescription:"",cost:0,receivedDate:new Date().toISOString().split("T")[0]})},G=s=>{if(!s)return"Bilinmeyen Müşteri";const t=d.find(x=>x.id===s);return(t==null?void 0:t.name)||"Bilinmeyen Müşteri"},T=s=>{if(!s)return"Bilinmeyen Ürün";const t=I.find(x=>x.id===s);return(t==null?void 0:t.name)||"Bilinmeyen Ürün"},de=s=>s&&fe[s]||"Bilinmeyen Kullanıcı",ce=l.filter(s=>{const t=G(s.customerId).toLowerCase(),x=T(s.productId).toLowerCase(),p=s.reason.toLowerCase();return t.includes(S.toLowerCase())||x.includes(S.toLowerCase())||p.includes(S.toLowerCase())});return te?e.jsx(xe,{children:e.jsx(es,{message:"Garanti kayıtları yükleniyor..."})}):e.jsx(xe,{children:e.jsxs("div",{className:"space-y-3 sm:space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-foreground",children:"Satış Sonrası Takip"}),e.jsx("p",{className:"text-muted-foreground mt-0.5 sm:mt-1 text-xs sm:text-sm",children:"Garantiye gelen ürünleri takip edin"})]}),e.jsxs(b,{className:"gap-2 w-full sm:w-auto min-h-[44px] sm:min-h-0",onClick:()=>{Y(),B(!0)},children:[e.jsx(ss,{className:"h-4 w-4"}),"Yeni Kayıt"]})]}),e.jsx(g,{children:e.jsx(v,{className:"p-4 sm:p-6",children:e.jsx("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4",children:e.jsx(Ye,{placeholder:"Müşteri, ürün veya neden ara...",value:S,onChange:s=>ke(s.target.value),containerClassName:"flex-1 min-w-[200px] sm:min-w-[250px]"})})})}),e.jsx(g,{children:e.jsx(v,{className:"p-0",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 p-4 sm:p-6",children:te?e.jsxs("div",{className:"col-span-full text-center py-12 text-muted-foreground",children:[e.jsx(Pe,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Yükleniyor..."})]}):ce.length===0?e.jsxs("div",{className:"col-span-full text-center py-12 text-muted-foreground",children:[e.jsx(J,{className:"h-12 w-12 mx-auto mb-3 opacity-20"}),e.jsx("p",{className:"text-sm",children:S?"Arama sonucu bulunamadı":"Henüz kayıt yok"})]}):ce.map(s=>e.jsx(g,{className:"group cursor-pointer hover:shadow-md transition-shadow",onClick:()=>Te(s),children:e.jsxs(v,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-base sm:text-lg truncate text-foreground mb-1",title:T(s.productId),children:T(s.productId)}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",title:G(s.customerId),children:G(s.customerId)})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",onClick:t=>t.stopPropagation(),children:[e.jsx(b,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:t=>{t.stopPropagation(),ne(s)},children:e.jsx(he,{className:"h-4 w-4"})}),e.jsx(b,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-destructive hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity",onClick:t=>{t.stopPropagation(),Oe(s)},children:e.jsx(as,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground",children:"Durum"}),e.jsxs(f,{value:s.status,onValueChange:t=>{le(s.id,t)},children:[e.jsx(N,{className:"w-[140px] h-8 text-xs sm:text-sm min-h-[32px]",onClick:t=>t.stopPropagation(),children:e.jsx(y,{})}),e.jsxs(w,{onClick:t=>t.stopPropagation(),children:[e.jsx(n,{value:"received",children:"Alındı"}),e.jsx(n,{value:"in_repair",children:"Onarımda"}),e.jsx(n,{value:"completed",children:"Tamamlandı"}),e.jsx(n,{value:"returned",children:"İade Edildi"})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-muted/30 px-3 py-2",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-1",children:"Neden"}),e.jsx("p",{className:"text-sm sm:text-base font-medium text-foreground line-clamp-2",children:s.reason})]}),s.repairDescription&&e.jsxs("div",{className:"rounded-lg border bg-muted/30 px-3 py-2",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-1",children:"Yapılan İşlem"}),e.jsx("p",{className:"text-sm sm:text-base font-medium text-foreground line-clamp-2",children:s.repairDescription})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[e.jsx("div",{className:"flex items-center gap-1 text-sm sm:text-base font-semibold",children:e.jsxs("span",{children:["₺",new Intl.NumberFormat("tr-TR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(s.cost)]})}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:s.receivedDate.toDate().toLocaleDateString("tr-TR")}),s.createdBy&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(_,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:de(s.createdBy)})]})]})]})]})},s.id))})})}),e.jsx(Q,{open:De,onOpenChange:M,children:e.jsx(X,{className:"!max-w-[100vw] sm:!max-w-[95vw] !w-[100vw] sm:!w-[95vw] !h-[100vh] sm:!h-[90vh] !max-h-[100vh] sm:!max-h-[90vh] !left-0 sm:!left-[2.5vw] !top-0 sm:!top-[5vh] !right-0 sm:!right-auto !bottom-0 sm:!bottom-auto !translate-x-0 !translate-y-0 overflow-hidden !p-0 gap-0 bg-white flex flex-col !m-0 !rounded-none sm:!rounded-lg !border-0 sm:!border",children:e.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[e.jsx(Z,{className:"p-3 sm:p-4 border-b bg-white flex-shrink-0 relative pr-12 sm:pr-16",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-lg bg-primary/10 flex items-center justify-center border border-primary/20 flex-shrink-0",children:e.jsx(V,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),e.jsx(ee,{className:"text-lg sm:text-xl font-semibold text-foreground truncate",children:i?T(i.productId):"Garanti Kaydı Detayı"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 flex-shrink-0",children:[i&&e.jsxs(b,{variant:"outline",size:"sm",className:"border-primary/20 hover:bg-primary/5 rounded-lg px-3 py-1.5 font-medium text-xs sm:text-sm flex-shrink-0",onClick:()=>{M(!1),i&&ne(i)},children:[e.jsx(he,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1.5 flex-shrink-0"}),"Düzenle"]}),e.jsxs(b,{variant:"default",size:"sm",className:"bg-primary hover:bg-primary/90 rounded-lg px-3 py-1.5 font-medium text-xs sm:text-sm flex-shrink-0 text-white",onClick:()=>M(!1),children:[e.jsx(W,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1.5 flex-shrink-0"}),"Kapat"]})]})]})}),e.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50/50 p-3 sm:p-4 min-h-0",children:e.jsx("div",{className:"max-w-full mx-auto h-full overflow-y-auto",children:i&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[e.jsx(g,{children:e.jsx(v,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-primary/10 flex items-center justify-center border border-primary/20",children:e.jsx(_,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Müşteri"}),e.jsx("p",{className:"text-sm font-semibold truncate",children:G(i.customerId)})]})]})})}),e.jsx(g,{children:e.jsx(v,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-emerald-100 flex items-center justify-center border border-emerald-200",children:e.jsx(J,{className:"h-5 w-5 text-emerald-700"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ürün"}),e.jsx("p",{className:"text-sm font-semibold truncate",children:T(i.productId)})]})]})})}),e.jsx(g,{children:e.jsx(v,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-blue-100 flex items-center justify-center border border-blue-200",children:e.jsx(J,{className:"h-5 w-5 text-blue-700"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maliyet"}),e.jsxs("p",{className:"text-sm font-semibold",children:["₺",new Intl.NumberFormat("tr-TR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(i.cost)]})]})]})})}),e.jsx(g,{children:e.jsx(v,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-amber-100 flex items-center justify-center border border-amber-200",children:e.jsx(V,{className:"h-5 w-5 text-amber-700"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Durum"}),e.jsxs(f,{value:i.status,onValueChange:s=>{le(i.id,s)},children:[e.jsx(N,{className:"h-8 text-xs border-0 p-0 font-semibold min-h-[32px]",children:e.jsx(y,{})}),e.jsxs(w,{children:[e.jsx(n,{value:"received",children:"Alındı"}),e.jsx(n,{value:"in_repair",children:"Onarımda"}),e.jsx(n,{value:"completed",children:"Tamamlandı"}),e.jsx(n,{value:"returned",children:"İade Edildi"})]})]})]})]})})})]}),e.jsxs(g,{children:[e.jsx(H,{children:e.jsx($,{className:"text-base sm:text-lg",children:"Detaylar"})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-sm text-muted-foreground",children:"Alınma Tarihi"}),e.jsx("div",{className:"rounded-lg border bg-muted/30 px-3 py-2",children:e.jsx("p",{className:"text-sm font-medium",children:i.receivedDate.toDate().toLocaleDateString("tr-TR")})})]}),i.orderId&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-sm text-muted-foreground",children:"İlgili Sipariş"}),e.jsx("div",{className:"rounded-lg border bg-muted/30 px-3 py-2",children:e.jsx("p",{className:"text-sm font-medium",children:((me=R.find(s=>s.id===i.orderId))==null?void 0:me.orderNumber)||((oe=R.find(s=>s.id===i.orderId))==null?void 0:oe.order_number)||"Bulunamadı"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-sm text-muted-foreground",children:"Geliş Nedeni"}),e.jsx("div",{className:"rounded-lg border bg-muted/30 px-3 py-2.5",children:e.jsx("p",{className:"text-sm",children:i.reason})})]}),i.repairDescription&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-sm text-muted-foreground",children:"Yapılan İşlem"}),e.jsx("div",{className:"rounded-lg border bg-muted/30 px-3 py-2.5",children:e.jsx("p",{className:"text-sm",children:i.repairDescription})})]}),i.createdBy&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-sm text-muted-foreground",children:"Oluşturan"}),e.jsx("div",{className:"rounded-lg border bg-muted/30 px-3 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsx("p",{className:"text-sm font-medium",children:de(i.createdBy)})]})})]})]})]})]})})})]})})}),e.jsx(Q,{open:ye,onOpenChange:B,children:e.jsx(X,{className:"!max-w-[100vw] sm:!max-w-[95vw] !w-[100vw] sm:!w-[95vw] !h-[100vh] sm:!h-[90vh] !max-h-[100vh] sm:!max-h-[90vh] !left-0 sm:!left-[2.5vw] !top-0 sm:!top-[5vh] !right-0 sm:!right-auto !bottom-0 sm:!bottom-auto !translate-x-0 !translate-y-0 overflow-hidden !p-0 gap-0 bg-white flex flex-col !m-0 !rounded-none sm:!rounded-lg !border-0 sm:!border",children:e.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[e.jsx(Z,{className:"p-3 sm:p-4 border-b bg-white flex-shrink-0 relative pr-12 sm:pr-16",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-lg bg-primary/10 flex items-center justify-center border border-primary/20 flex-shrink-0",children:e.jsx(V,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),e.jsx(ee,{className:"text-lg sm:text-xl font-semibold text-foreground truncate",children:"Yeni Garanti Kaydı"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 flex-shrink-0",children:[e.jsxs(b,{variant:"outline",size:"sm",className:"border-primary/20 hover:bg-primary/5 rounded-lg px-3 py-1.5 font-medium text-xs sm:text-sm flex-shrink-0",onClick:()=>B(!1),children:[e.jsx(W,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1.5 flex-shrink-0"}),"İptal"]}),e.jsxs(b,{variant:"default",size:"sm",className:"bg-primary hover:bg-primary/90 rounded-lg px-3 py-1.5 font-medium text-xs sm:text-sm flex-shrink-0 text-white",onClick:Ce,children:[e.jsx(ue,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1.5 flex-shrink-0"}),"Oluştur"]})]})]})}),e.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50/50 p-3 sm:p-4 min-h-0",children:e.jsx("div",{className:"max-w-full mx-auto h-full overflow-y-auto",children:e.jsxs(g,{children:[e.jsx(H,{children:e.jsx($,{className:"text-base sm:text-lg",children:"Garanti Bilgileri"})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"create-customer",className:"text-sm sm:text-base",showRequired:!0,children:"Müşteri"}),e.jsxs(f,{value:a.customerId,onValueChange:s=>m({...a,customerId:s}),children:[e.jsx(N,{id:"create-customer",className:"min-h-[44px] sm:min-h-0",children:e.jsx(y,{placeholder:"Müşteri seçin"})}),e.jsx(w,{children:d.map(s=>e.jsxs(n,{value:s.id,children:[s.name," ",s.company&&`(${s.company})`]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"create-product",className:"text-sm sm:text-base",showRequired:!0,children:"Ürün"}),e.jsxs(f,{value:a.productId,onValueChange:s=>m({...a,productId:s}),children:[e.jsx(N,{id:"create-product",className:"min-h-[44px] sm:min-h-0",children:e.jsx(y,{placeholder:"Ürün seçin"})}),e.jsx(w,{children:I.map(s=>e.jsx(n,{value:s.id,children:s.name},s.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"create-order",className:"text-sm sm:text-base",children:"Sipariş (Opsiyonel)"}),e.jsxs(f,{value:a.orderId||"none",onValueChange:s=>m({...a,orderId:s==="none"?"":s}),children:[e.jsx(N,{id:"create-order",className:"min-h-[44px] sm:min-h-0",children:e.jsx(y,{placeholder:"Sipariş seçin"})}),e.jsxs(w,{children:[e.jsx(n,{value:"none",children:"Sipariş yok"}),R.map(s=>e.jsx(n,{value:s.id,children:s.orderNumber||s.order_number||s.id},s.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"create-received-date",className:"text-sm sm:text-base",children:"Alınma Tarihi"}),e.jsx(z,{id:"create-received-date",type:"date",value:a.receivedDate,onChange:s=>m({...a,receivedDate:s.target.value}),className:"min-h-[44px] sm:min-h-0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"create-status",className:"text-sm sm:text-base",children:"Durum"}),e.jsxs(f,{value:a.status,onValueChange:s=>m({...a,status:s}),children:[e.jsx(N,{id:"create-status",className:"min-h-[44px] sm:min-h-0",children:e.jsx(y,{})}),e.jsxs(w,{children:[e.jsx(n,{value:"received",children:"Alındı"}),e.jsx(n,{value:"in_repair",children:"Onarımda"}),e.jsx(n,{value:"completed",children:"Tamamlandı"}),e.jsx(n,{value:"returned",children:"İade Edildi"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"create-reason",className:"text-sm sm:text-base",showRequired:!0,children:"Neden Geldi"}),e.jsx(P,{id:"create-reason",value:a.reason,onChange:s=>m({...a,reason:s.target.value}),placeholder:"Ürünün garantiye gelme nedeni",rows:4,className:"min-h-[100px] sm:min-h-[120px]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"create-repair",className:"text-sm sm:text-base",children:"Yapılan İşlem"}),e.jsx(P,{id:"create-repair",value:a.repairDescription,onChange:s=>m({...a,repairDescription:s.target.value}),placeholder:"Ürüne yapılan işlem açıklaması",rows:4,className:"min-h-[100px] sm:min-h-[120px]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"create-cost",className:"text-sm sm:text-base",children:"Maliyet (₺)"}),e.jsx(z,{id:"create-cost",type:"number",value:a.cost,onChange:s=>m({...a,cost:Number(s.target.value)||0}),placeholder:"0",min:"0",step:"0.01",className:"min-h-[44px] sm:min-h-0"})]})]})]})})})]})})}),e.jsx(Q,{open:we,onOpenChange:E,children:e.jsx(X,{className:"!max-w-[100vw] sm:!max-w-[95vw] !w-[100vw] sm:!w-[95vw] !h-[100vh] sm:!h-[90vh] !max-h-[100vh] sm:!max-h-[90vh] !left-0 sm:!left-[2.5vw] !top-0 sm:!top-[5vh] !right-0 sm:!right-auto !bottom-0 sm:!bottom-auto !translate-x-0 !translate-y-0 overflow-hidden !p-0 gap-0 bg-white flex flex-col !m-0 !rounded-none sm:!rounded-lg !border-0 sm:!border",children:e.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[e.jsx(Z,{className:"p-3 sm:p-4 border-b bg-white flex-shrink-0 relative pr-12 sm:pr-16",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-lg bg-primary/10 flex items-center justify-center border border-primary/20 flex-shrink-0",children:e.jsx(V,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),e.jsx(ee,{className:"text-lg sm:text-xl font-semibold text-foreground truncate",children:"Garanti Kaydı Düzenle"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 flex-shrink-0",children:[e.jsxs(b,{variant:"outline",size:"sm",className:"border-primary/20 hover:bg-primary/5 rounded-lg px-3 py-1.5 font-medium text-xs sm:text-sm flex-shrink-0",onClick:()=>E(!1),children:[e.jsx(W,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1.5 flex-shrink-0"}),"İptal"]}),e.jsxs(b,{variant:"default",size:"sm",className:"bg-primary hover:bg-primary/90 rounded-lg px-3 py-1.5 font-medium text-xs sm:text-sm flex-shrink-0 text-white",onClick:Ie,children:[e.jsx(ue,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1.5 flex-shrink-0"}),"Kaydet"]})]})]})}),e.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50/50 p-3 sm:p-4 min-h-0",children:e.jsx("div",{className:"max-w-full mx-auto h-full overflow-y-auto",children:e.jsxs(g,{children:[e.jsx(H,{children:e.jsx($,{className:"text-base sm:text-lg",children:"Garanti Bilgileri"})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-customer",className:"text-sm sm:text-base",showRequired:!0,children:"Müşteri"}),e.jsxs(f,{value:a.customerId||"",onValueChange:s=>m({...a,customerId:s}),children:[e.jsx(N,{id:"edit-customer",className:"min-h-[44px] sm:min-h-0",children:e.jsx(y,{placeholder:"Müşteri seçin"})}),e.jsx(w,{children:d.map(s=>e.jsxs(n,{value:s.id,children:[s.name," ",s.company&&`(${s.company})`]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-product",className:"text-sm sm:text-base",showRequired:!0,children:"Ürün"}),e.jsxs(f,{value:a.productId||"",onValueChange:s=>m({...a,productId:s}),children:[e.jsx(N,{id:"edit-product",className:"min-h-[44px] sm:min-h-0",children:e.jsx(y,{placeholder:"Ürün seçin"})}),e.jsx(w,{children:I.map(s=>e.jsx(n,{value:s.id,children:s.name},s.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-order",className:"text-sm sm:text-base",children:"Sipariş (Opsiyonel)"}),e.jsxs(f,{value:a.orderId||"none",onValueChange:s=>m({...a,orderId:s==="none"?"":s}),children:[e.jsx(N,{id:"edit-order",className:"min-h-[44px] sm:min-h-0",children:e.jsx(y,{placeholder:"Sipariş seçin"})}),e.jsxs(w,{children:[e.jsx(n,{value:"none",children:"Sipariş yok"}),R.map(s=>e.jsx(n,{value:s.id,children:s.orderNumber||s.order_number||s.id},s.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-received-date",className:"text-sm sm:text-base",children:"Alınma Tarihi"}),e.jsx(z,{id:"edit-received-date",type:"date",value:a.receivedDate,onChange:s=>m({...a,receivedDate:s.target.value}),className:"min-h-[44px] sm:min-h-0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-status",className:"text-sm sm:text-base",children:"Durum"}),e.jsxs(f,{value:a.status,onValueChange:s=>m({...a,status:s}),children:[e.jsx(N,{id:"edit-status",className:"min-h-[44px] sm:min-h-0",children:e.jsx(y,{})}),e.jsxs(w,{children:[e.jsx(n,{value:"received",children:"Alındı"}),e.jsx(n,{value:"in_repair",children:"Onarımda"}),e.jsx(n,{value:"completed",children:"Tamamlandı"}),e.jsx(n,{value:"returned",children:"İade Edildi"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-reason",className:"text-sm sm:text-base",showRequired:!0,children:"Neden Geldi"}),e.jsx(P,{id:"edit-reason",value:a.reason||"",onChange:s=>m({...a,reason:s.target.value}),placeholder:"Ürünün garantiye gelme nedeni",rows:4,className:"min-h-[100px] sm:min-h-[120px]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-repair",className:"text-sm sm:text-base",children:"Yapılan İşlem"}),e.jsx(P,{id:"edit-repair",value:a.repairDescription,onChange:s=>m({...a,repairDescription:s.target.value}),placeholder:"Ürüne yapılan işlem açıklaması",rows:4,className:"min-h-[100px] sm:min-h-[120px]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-cost",className:"text-sm sm:text-base",children:"Maliyet (₺)"}),e.jsx(z,{id:"edit-cost",type:"number",value:a.cost,onChange:s=>m({...a,cost:Number(s.target.value)||0}),placeholder:"0",min:"0",step:"0.01",className:"min-h-[44px] sm:min-h-0"})]})]})]})})})]})})}),e.jsx(_e,{open:be,onOpenChange:U,children:e.jsxs(We,{children:[e.jsxs(He,{children:[e.jsx($e,{children:"Garanti Kaydını Sil"}),e.jsx(Je,{children:i&&e.jsx(e.Fragment,{children:"Bu garanti kaydını silmek istediğinizden emin misiniz? Bu işlem geri alınamaz."})})]}),e.jsxs(Qe,{children:[e.jsx(Xe,{children:"İptal"}),e.jsx(Ze,{onClick:Se,className:"bg-destructive text-destructive-foreground",children:"Sil"})]})]})})]})})};export{gs as default};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/reportService-eZYvGhBr.js","assets/index-Xd90qdO9.js","assets/index-HS3kTX7E.css","assets/storageService-pEqhfEwa.js","assets/driveService-020R8zku.js"])))=>i.map(i=>d[i]);
import{a3 as Oe,k as de,r as y,b as S,j as e,C as R,c as I,d as P,e as C,w as L,B as D,f as we,R as B,o as Ne,T as Se,_ as me,i as Le,X as Ee,aX as Pe,S as qe,p as Ue,q as Be,s as Ye,t as ze,aY as $e}from"./index-Xd90qdO9.js";import{y as De,l as Fe,D as xe,a as ue,b as he,c as pe,d as ge,S as fe,C as ke,B as ce,P as ve,x as Ce,g as Ge,L as Ve,M as Ke,W as Te}from"./MainLayout-DW7UjMSA.js";import{a as He,b as We,c as Qe,d as Xe,e as Ze}from"./pdfGenerator-H9L-JbYf.js";import{T as ee,a as te,b as E,c as N,d as se,e as v}from"./table-CHpYTcky.js";import{D as ie}from"./download-Bq-rl9Ru.js";import{T as ye}from"./trending-up-DyiN6Ad2.js";import{U as Je}from"./user-plus-DWuSLDZe.js";import{c as je,D as et}from"./exchangeRateService-Cpnvl6ZU.js";import{g as tt}from"./materialService-fdlP1ZS7.js";import{a as st,A as rt}from"./arrow-up-CYB1EkPb.js";import{C as at}from"./CustomerCombobox-B9g9riZZ.js";import{D as it,a as nt,C as ae}from"./currency-BpxR3_y8.js";import{S as lt}from"./save-Bgz0wbo5.js";import{P as Ae}from"./plus-D9uLCipi.js";import{T as ot}from"./trash-2-DlZRXDqX.js";import"./taskService-CQO0i9v5.js";import"./popover-BA39Kv9C.js";import"./CreateCustomerDialog-Ct1V89iV.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=Oe("FileChartColumnIncreasing",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=Oe("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=Oe("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),dt=({open:q,onOpenChange:X})=>{const{user:z}=de(),[_,A]=y.useState(!1),[m,k]=y.useState(""),[d,j]=y.useState(""),[o,i]=y.useState(null),F=t=>{if(t.createdAt instanceof Se)return t.createdAt.toDate();if(t.created_at){const r=new Date(t.created_at);if(!Number.isNaN(r.getTime()))return r}return new Date},Y=t=>t.total??t.totalAmount??t.total_amount??t.subtotal??0,K=t=>t.quantity??0,U=t=>typeof t.total=="number"?t.total:(t.unit_price??t.unitPrice??0)*K(t),$=y.useCallback(async()=>{if(!m||!d){i(null);return}A(!0);try{const r=(await De()).filter(x=>{const n=F(x).toISOString().split("T")[0];return n>=m&&n<=d}),a=r.reduce((x,s)=>x+Y(s),0),g=r.length,w=new Set(r.map(x=>x.customerId).filter(Boolean)).size,l=new Map,f=r.map(async x=>{try{return await Fe(x.id)}catch(s){return console.error("Get order items error:",s),[]}});(await Promise.all(f)).flat().forEach(x=>{const s=x.product_name||x.productName||"Bilinmeyen";l.has(s)||l.set(s,{name:s,quantity:0,revenue:0});const n=l.get(s);n&&(n.quantity+=K(x),n.revenue+=U(x))});const ne=Array.from(l.values()).sort((x,s)=>s.revenue-x.revenue).slice(0,10),M={totalRevenue:a,totalOrders:g,activeCustomers:w,orders:r,topProducts:ne,avgOrderValue:g>0?a/g:0};i(M)}catch(t){console.error("Fetch report data error:",t),S.error("Veri yüklenirken hata oluştu")}finally{A(!1)}},[m,d]);y.useEffect(()=>{if(m&&d){const t=setTimeout(()=>{$()},500);return()=>clearTimeout(t)}},[m,d,$]);const c=async()=>{if(!m||!d){S.error("Lütfen tarih aralığı seçin");return}if(!o){S.error("Lütfen önce rapor verilerini yükleyin");return}A(!0);try{const t=await He(o,m,d),r=URL.createObjectURL(t),a=document.createElement("a");a.href=r;const g=new Date().toISOString().split("T")[0];a.download=`Satis-Raporu-${m}-${d}-${g}.pdf`,document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout(()=>URL.revokeObjectURL(r),100),S.success("Rapor indiriliyor...");try{const{saveReport:w}=await me(async()=>{const{saveReport:f}=await import("./reportService-eZYvGhBr.js");return{saveReport:f}},__vite__mapDeps([0,1,2,3,4])),l=`Satış Raporu - ${m} / ${d}`;await w("sales",l,t,(z==null?void 0:z.id)||"",{startDate:m,endDate:d,metadata:{totalRevenue:o.totalRevenue,totalOrders:o.totalOrders,activeCustomers:o.activeCustomers}}),S.success("Rapor buluta yedeklendi.")}catch(w){console.warn("Rapor buluta kaydedilemedi (CORS/Yetki):",w)}}catch(t){console.error("Generate sales report error:",t);const r=t instanceof Error?t.message:"Rapor oluşturulamadı";S.error("Hata: "+r)}};return e.jsx(xe,{open:q,onOpenChange:X,children:e.jsxs(ue,{className:"w-full max-w-[98vw] md:max-w-6xl max-h-[95vh] flex flex-col p-0 !overflow-hidden",children:[e.jsxs(he,{className:"px-4 sm:px-6 pt-4 sm:pt-6 pb-4 border-b bg-gradient-to-r from-primary/5 to-transparent flex-shrink-0",children:[e.jsxs(pe,{className:"text-lg sm:text-xl font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(ie,{className:"h-4 w-4 text-primary"})}),"Satış Raporu Oluştur"]}),e.jsx(ge,{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:"Tarih aralığı seçerek detaylı satış raporu oluşturun ve PDF olarak indirin"})]}),e.jsx(fe,{className:"flex-1 min-h-0",children:e.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[e.jsxs(R,{className:"bg-gradient-to-br from-gray-50/50 to-white border-2",children:[e.jsx(I,{className:"pb-3",children:e.jsx(P,{className:"text-sm font-semibold text-muted-foreground",children:"Tarih Aralığı Seçimi"})}),e.jsxs(C,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(L,{className:"text-xs font-medium text-muted-foreground mb-2 block",children:"Hızlı Seçim"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=new Date,r=new Date(t);r.setDate(t.getDate()-7),k(r.toISOString().split("T")[0]),j(t.toISOString().split("T")[0])},className:"text-xs",children:[e.jsx(ke,{className:"h-3 w-3 mr-1"}),"Son 7 Gün"]}),e.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=new Date,r=new Date(t);r.setDate(t.getDate()-30),k(r.toISOString().split("T")[0]),j(t.toISOString().split("T")[0])},className:"text-xs",children:[e.jsx(we,{className:"h-3 w-3 mr-1"}),"Son 30 Gün"]}),e.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=new Date,r=new Date(t.getFullYear(),t.getMonth(),1);k(r.toISOString().split("T")[0]),j(t.toISOString().split("T")[0])},className:"text-xs",children:"Bu Ay"}),e.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=new Date,r=new Date(t.getFullYear(),t.getMonth()-1,1),a=new Date(t.getFullYear(),t.getMonth(),0);k(r.toISOString().split("T")[0]),j(a.toISOString().split("T")[0])},className:"text-xs",children:"Geçen Ay"}),e.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=new Date,r=new Date(t.getFullYear(),0,1);k(r.toISOString().split("T")[0]),j(t.toISOString().split("T")[0])},className:"text-xs",children:"Bu Yıl"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Başlangıç Tarihi"}),e.jsx(B,{type:"date",value:m,onChange:t=>k(t.target.value),className:"border-2 focus:border-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Bitiş Tarihi"}),e.jsx(B,{type:"date",value:d,onChange:t=>j(t.target.value),className:"border-2 focus:border-primary"})]})]})]})]}),o&&e.jsxs("div",{className:"space-y-6 border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"}),"Rapor Önizlemesi"]}),e.jsxs(ce,{variant:"outline",className:"text-xs",children:[m," - ",d]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(R,{className:"bg-gradient-to-br from-primary/10 via-white to-white border-primary/20 hover:shadow-lg transition-all duration-300",children:[e.jsx(I,{className:"pb-3",children:e.jsxs(P,{className:"text-sm font-semibold text-muted-foreground flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4 text-primary"}),"Toplam Gelir"]})}),e.jsxs(C,{children:[e.jsxs("p",{className:"text-3xl font-bold text-primary",children:["₺",o.totalRevenue.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Ortalama: ₺",o.avgOrderValue.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),e.jsxs(R,{className:"bg-gradient-to-br from-blue-50 via-white to-white border-blue-200 hover:shadow-lg transition-all duration-300",children:[e.jsx(I,{className:"pb-3",children:e.jsxs(P,{className:"text-sm font-semibold text-muted-foreground flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4 text-blue-500"}),"Toplam Sipariş"]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:o.totalOrders}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Tarih aralığında"})]})]}),e.jsxs(R,{className:"bg-gradient-to-br from-green-50 via-white to-white border-green-200 hover:shadow-lg transition-all duration-300",children:[e.jsx(I,{className:"pb-3",children:e.jsxs(P,{className:"text-sm font-semibold text-muted-foreground flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4 text-green-500"}),"Aktif Müşteri"]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:o.activeCustomers}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Sipariş veren müşteri"})]})]})]}),e.jsxs(R,{className:"border-2 shadow-sm",children:[e.jsx(I,{className:"bg-gradient-to-r from-gray-50 to-white border-b",children:e.jsxs(P,{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-1 w-1 rounded-full bg-primary"}),"Sipariş Durumu Dağılımı"]})}),e.jsx(C,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ee,{children:[e.jsx(te,{children:e.jsxs(E,{className:"bg-gray-50/50",children:[e.jsx(N,{className:"font-semibold",children:"Durum"}),e.jsx(N,{className:"text-right font-semibold",children:"Sipariş Sayısı"}),e.jsx(N,{className:"text-right font-semibold",children:"Toplam Tutar"}),e.jsx(N,{className:"text-right font-semibold",children:"Oran"})]})}),e.jsx(se,{children:(()=>{const t=new Map;o.orders.forEach(g=>{const w=g.status||"Bilinmeyen",l=Y(g);t.has(w)||t.set(w,{count:0,total:0});const f=t.get(w);f.count+=1,f.total+=l});const r={draft:"Taslak",pending:"Beklemede",confirmed:"Onaylandı",in_production:"Üretimde",completed:"Tamamlandı",shipped:"Kargoda",delivered:"Teslim Edildi",cancelled:"İptal"},a=o.orders.length;return Array.from(t.entries()).sort((g,w)=>w[1].count-g[1].count).map(([g,w])=>e.jsxs(E,{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsx(v,{className:"font-medium",children:r[g]||g}),e.jsx(v,{className:"text-right font-semibold",children:w.count}),e.jsxs(v,{className:"text-right font-semibold text-primary",children:["₺",w.total.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs(v,{className:"text-right font-semibold text-muted-foreground",children:[a>0?(w.count/a*100).toFixed(1):0,"%"]})]},g))})()})]})})})]}),e.jsxs(R,{className:"border-2 shadow-sm",children:[e.jsx(I,{className:"bg-gradient-to-r from-gray-50 to-white border-b",children:e.jsxs(P,{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-1 w-1 rounded-full bg-primary"}),"En Çok Satan Ürünler"]})}),e.jsx(C,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ee,{children:[e.jsx(te,{children:e.jsxs(E,{className:"bg-gray-50/50",children:[e.jsx(N,{className:"font-semibold",children:"Sıra"}),e.jsx(N,{className:"font-semibold",children:"Ürün Adı"}),e.jsx(N,{className:"text-right font-semibold",children:"Adet"}),e.jsx(N,{className:"text-right font-semibold",children:"Gelir"})]})}),e.jsx(se,{children:o.topProducts.slice(0,10).map((t,r)=>e.jsxs(E,{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsxs(v,{className:"font-medium text-muted-foreground",children:["#",r+1]}),e.jsx(v,{className:"font-medium",children:t.name}),e.jsx(v,{className:"text-right font-semibold",children:t.quantity}),e.jsxs(v,{className:"text-right font-semibold text-primary",children:["₺",t.revenue.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]},r))})]})})})]})]}),_&&!o&&e.jsx(R,{className:"border-2 border-dashed",children:e.jsx(C,{className:"py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Veriler yükleniyor..."})]})})}),e.jsx("div",{className:"flex gap-3 pt-2",children:e.jsxs(D,{onClick:c,disabled:_||!o,size:"lg",className:"flex-1 bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary shadow-lg",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),_?"PDF Oluşturuluyor...":o?"PDF İndir":"Tarih Aralığı Seçin"]})})]})})]})})},mt=({open:q,onOpenChange:X})=>{const{user:z}=de(),[_,A]=y.useState(!1),[m,k]=y.useState(""),[d,j]=y.useState(""),[o,i]=y.useState(null),F={planned:"Planlandı",in_production:"Üretimde",quality_check:"Kalite Kontrol",completed:"Tamamlandı",on_hold:"Beklemede"},Y=t=>{if(t.createdAt instanceof Se)return t.createdAt.toDate();if(t.created_at){const r=new Date(t.created_at);if(!Number.isNaN(r.getTime()))return r}return new Date},K=t=>typeof t.quantity=="number"?t.quantity:t.itemsCount?t.itemsCount:t.totalQuantity?t.totalQuantity:0,U=t=>t&&["planned","in_production","quality_check","completed","on_hold"].includes(t)?t:null,$=y.useCallback(async()=>{if(!m||!d){i(null);return}A(!0);try{const r=(await De()).filter(M=>{const s=Y(M).toISOString().split("T")[0];return s>=m&&s<=d}),a=(r==null?void 0:r.length)||0,g=(r==null?void 0:r.filter(M=>M.status==="completed").length)||0,w=a>0?g/a*100:0,l={planned:0,in_production:0,quality_check:0,completed:0,on_hold:0};r==null||r.forEach(M=>{const x=U(M.status);x&&(l[x]+=1)});const f=new Map;r==null||r.forEach(M=>{const x=M.product_name||M.customerName||"Bilinmeyen";f.has(x)||f.set(x,{name:x,quantity:0,orders:0});const s=f.get(x);s&&(s.quantity+=K(M),s.orders+=1)});const G=Array.from(f.values()).sort((M,x)=>x.quantity-M.quantity).slice(0,10);i({totalOrders:a,completed:g,completionRate:w,statusDistribution:l,topProducts:G})}catch(t){console.error("Fetch report data error:",t),S.error("Veri yüklenirken hata oluştu")}finally{A(!1)}},[m,d]);y.useEffect(()=>{if(m&&d){const t=setTimeout(()=>{$()},500);return()=>clearTimeout(t)}},[m,d,$]);const c=async()=>{if(!m||!d){S.error("Lütfen tarih aralığı seçin");return}if(!o){S.error("Lütfen önce rapor verilerini yükleyin");return}A(!0);try{const t=await We(o,m,d),r=URL.createObjectURL(t),a=document.createElement("a");a.href=r;const g=new Date().toISOString().split("T")[0];a.download=`Uretim-Raporu-${m}-${d}-${g}.pdf`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r),S.success("Rapor indiriliyor...");try{const{saveReport:w}=await me(async()=>{const{saveReport:f}=await import("./reportService-eZYvGhBr.js");return{saveReport:f}},__vite__mapDeps([0,1,2,3,4])),l=`Üretim Raporu - ${m} / ${d}`;await w("production",l,t,(z==null?void 0:z.id)||"",{startDate:m,endDate:d,metadata:{totalOrders:o.totalOrders,statusDistribution:o.statusDistribution}}),S.success("Rapor buluta yedeklendi.")}catch(w){console.warn("Rapor buluta kaydedilemedi (CORS/Yetki):",w)}}catch(t){const r=t instanceof Error?t.message:"Bilinmeyen hata";S.error("Hata: "+r)}finally{A(!1)}};return e.jsx(xe,{open:q,onOpenChange:X,children:e.jsxs(ue,{className:"w-full max-w-[98vw] md:max-w-6xl max-h-[95vh] flex flex-col p-0 !overflow-hidden",children:[e.jsxs(he,{className:"px-4 sm:px-6 pt-4 sm:pt-6 pb-4 border-b bg-gradient-to-r from-blue-500/5 to-transparent flex-shrink-0",children:[e.jsxs(pe,{className:"text-lg sm:text-xl font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-blue-500/10 flex items-center justify-center",children:e.jsx(Me,{className:"h-4 w-4 text-blue-600"})}),"Üretim Raporu Oluştur"]}),e.jsx(ge,{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:"Tarih aralığı seçerek detaylı üretim raporu oluşturun ve PDF olarak indirin"})]}),e.jsx(fe,{className:"flex-1 min-h-0",children:e.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[e.jsxs(R,{className:"bg-gradient-to-br from-gray-50/50 to-white border-2",children:[e.jsx(I,{className:"pb-3",children:e.jsx(P,{className:"text-sm font-semibold text-muted-foreground",children:"Tarih Aralığı Seçimi"})}),e.jsxs(C,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(L,{className:"text-xs font-medium text-muted-foreground mb-2 block",children:"Hızlı Seçim"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=new Date,r=new Date(t);r.setDate(t.getDate()-7),k(r.toISOString().split("T")[0]),j(t.toISOString().split("T")[0])},className:"text-xs",children:[e.jsx(ke,{className:"h-3 w-3 mr-1"}),"Son 7 Gün"]}),e.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=new Date,r=new Date(t);r.setDate(t.getDate()-30),k(r.toISOString().split("T")[0]),j(t.toISOString().split("T")[0])},className:"text-xs",children:[e.jsx(we,{className:"h-3 w-3 mr-1"}),"Son 30 Gün"]}),e.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=new Date,r=new Date(t.getFullYear(),t.getMonth(),1);k(r.toISOString().split("T")[0]),j(t.toISOString().split("T")[0])},className:"text-xs",children:"Bu Ay"}),e.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=new Date,r=new Date(t.getFullYear(),t.getMonth()-1,1),a=new Date(t.getFullYear(),t.getMonth(),0);k(r.toISOString().split("T")[0]),j(a.toISOString().split("T")[0])},className:"text-xs",children:"Geçen Ay"}),e.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=new Date,r=new Date(t.getFullYear(),0,1);k(r.toISOString().split("T")[0]),j(t.toISOString().split("T")[0])},className:"text-xs",children:"Bu Yıl"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Başlangıç Tarihi"}),e.jsx(B,{type:"date",value:m,onChange:t=>k(t.target.value),className:"border-2 focus:border-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Bitiş Tarihi"}),e.jsx(B,{type:"date",value:d,onChange:t=>j(t.target.value),className:"border-2 focus:border-primary"})]})]})]})]}),_&&!o&&e.jsx(R,{className:"border-2 border-dashed",children:e.jsx(C,{className:"py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Veriler yükleniyor..."})]})})}),o&&e.jsxs("div",{className:"space-y-6 border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"}),"Rapor Önizlemesi"]}),e.jsxs(ce,{variant:"outline",className:"text-xs",children:[m," - ",d]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(R,{className:"bg-gradient-to-br from-blue-50 via-white to-white border-blue-200 hover:shadow-lg transition-all duration-300",children:[e.jsx(I,{className:"pb-3",children:e.jsxs(P,{className:"text-sm font-semibold text-muted-foreground flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-blue-500"}),"Toplam Sipariş"]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:o.totalOrders}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Tarih aralığında"})]})]}),e.jsxs(R,{className:"bg-gradient-to-br from-green-50 via-white to-white border-green-200 hover:shadow-lg transition-all duration-300",children:[e.jsx(I,{className:"pb-3",children:e.jsxs(P,{className:"text-sm font-semibold text-muted-foreground flex items-center gap-2",children:[e.jsx(Le,{className:"h-4 w-4 text-green-500"}),"Tamamlanan"]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:o.completed}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Başarıyla tamamlandı"})]})]}),e.jsxs(R,{className:"bg-gradient-to-br from-primary/10 via-white to-white border-primary/20 hover:shadow-lg transition-all duration-300",children:[e.jsx(I,{className:"pb-3",children:e.jsxs(P,{className:"text-sm font-semibold text-muted-foreground flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4 text-primary"}),"Tamamlanma Oranı"]})}),e.jsxs(C,{children:[e.jsxs("p",{className:"text-3xl font-bold text-primary",children:[o.completionRate.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Başarı oranı"})]})]})]}),e.jsxs(R,{className:"border-2 shadow-sm",children:[e.jsx(I,{className:"bg-gradient-to-r from-gray-50 to-white border-b",children:e.jsxs(P,{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-1 w-1 rounded-full bg-primary"}),"Durum Dağılımı"]})}),e.jsx(C,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ee,{children:[e.jsx(te,{children:e.jsxs(E,{className:"bg-gray-50/50",children:[e.jsx(N,{className:"font-semibold",children:"Durum"}),e.jsx(N,{className:"text-right font-semibold",children:"Sipariş Sayısı"}),e.jsx(N,{className:"text-right font-semibold",children:"Oran"})]})}),e.jsx(se,{children:Object.entries(o.statusDistribution).filter(([t,r])=>r>0).sort((t,r)=>r[1]-t[1]).map(([t,r])=>{const a=o.totalOrders>0?(r/o.totalOrders*100).toFixed(1):"0";return e.jsxs(E,{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsx(v,{className:"font-medium",children:F[t]}),e.jsx(v,{className:"text-right font-semibold",children:r}),e.jsxs(v,{className:"text-right font-semibold text-muted-foreground",children:[a,"%"]})]},t)})})]})})})]}),e.jsxs(R,{className:"border-2 shadow-sm",children:[e.jsx(I,{className:"bg-gradient-to-r from-gray-50 to-white border-b",children:e.jsxs(P,{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-1 w-1 rounded-full bg-primary"}),"En Çok Üretilen Ürünler"]})}),e.jsx(C,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ee,{children:[e.jsx(te,{children:e.jsxs(E,{className:"bg-gray-50/50",children:[e.jsx(N,{className:"font-semibold",children:"Sıra"}),e.jsx(N,{className:"font-semibold",children:"Ürün Adı"}),e.jsx(N,{className:"text-right font-semibold",children:"Miktar"}),e.jsx(N,{className:"text-right font-semibold",children:"Sipariş Sayısı"})]})}),e.jsx(se,{children:o.topProducts.slice(0,10).map((t,r)=>e.jsxs(E,{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsxs(v,{className:"font-medium text-muted-foreground",children:["#",r+1]}),e.jsx(v,{className:"font-medium",children:t.name}),e.jsx(v,{className:"text-right font-semibold",children:t.quantity}),e.jsx(v,{className:"text-right font-semibold text-primary",children:t.orders})]},r))})]})})})]})]}),e.jsx("div",{className:"flex gap-3 pt-2",children:e.jsxs(D,{onClick:c,disabled:_||!o,size:"lg",className:"flex-1 bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary shadow-lg",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),_?"PDF Oluşturuluyor...":o?"PDF İndir":"Tarih Aralığı Seçin"]})})]})})]})})},xt=({open:q,onOpenChange:X})=>{const{user:z}=de(),[_,A]=y.useState(!1),[m,k]=y.useState(""),[d,j]=y.useState(""),[o,i]=y.useState(null),F=c=>{if(c.createdAt instanceof Se)return c.createdAt.toDate();if(c.created_at){const t=new Date(c.created_at);if(!Number.isNaN(t.getTime()))return t}return new Date},Y=(c,t,r)=>{const a=typeof c=="string"?c:c.toISOString().split("T")[0];return a>=t&&a<=r},K=c=>c.total??c.totalAmount??c.total_amount??c.subtotal??0,U=y.useCallback(async()=>{if(!m||!d){i(null);return}A(!0);try{const[c,t]=await Promise.all([Ce(),De()]),r=t.filter(x=>{const n=F(x).toISOString().split("T")[0];return n>=m&&n<=d}),a=c.map(x=>{const s=r.filter(n=>n.customerId===x.id||n.customer_id===x.id);return{...x,orders:s}}),g=(a==null?void 0:a.length)||0,w=(a==null?void 0:a.filter(x=>{if(!x.createdAt)return!1;const s=x.createdAt.toDate().toISOString().split("T")[0];return s>=m&&s<=d}).length)||0,l=(a==null?void 0:a.filter(x=>{var s;return(s=x.orders)==null?void 0:s.some(n=>{const h=n.order_date||n.created_at||F(n).toISOString().split("T")[0];return Y(h,m,d)})}).length)||0,f=(a==null?void 0:a.map(x=>{var h;const s=((h=x.orders)==null?void 0:h.filter(u=>{const p=u.order_date||u.created_at||F(u).toISOString().split("T")[0];return Y(p,m,d)}))||[],n=s.reduce((u,p)=>u+K(p),0);return{name:x.name??x.company??"Bilinmeyen",orders:s.length,total:n}}))||[],G=f.filter(x=>x.orders>0).sort((x,s)=>s.total-x.total).slice(0,10),ne={high:f.filter(x=>x.total>5e4).length,medium:f.filter(x=>x.total>=1e4&&x.total<=5e4).length,low:f.filter(x=>x.total<1e4&&x.total>0).length};i({totalCustomers:g,activeCustomers:l,newCustomers:w,topCustomers:G,segments:ne})}catch(c){console.error("Fetch report data error:",c),S.error("Veri yüklenirken hata oluştu")}finally{A(!1)}},[m,d]);y.useEffect(()=>{if(m&&d){const c=setTimeout(()=>{U()},500);return()=>clearTimeout(c)}},[m,d,U]);const $=async()=>{if(!m||!d){S.error("Lütfen tarih aralığı seçin");return}if(!o){S.error("Lütfen önce rapor verilerini yükleyin");return}A(!0);try{const c=await Qe(o,m,d),t=URL.createObjectURL(c),r=document.createElement("a");r.href=t;const a=new Date().toISOString().split("T")[0];r.download=`Musteri-Raporu-${m}-${d}-${a}.pdf`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t),S.success("Rapor indiriliyor...");try{const{saveReport:g}=await me(async()=>{const{saveReport:l}=await import("./reportService-eZYvGhBr.js");return{saveReport:l}},__vite__mapDeps([0,1,2,3,4])),w=`Müşteri Raporu - ${m} / ${d}`;await g("customer",w,c,(z==null?void 0:z.id)||"",{startDate:m,endDate:d,metadata:{totalCustomers:o.totalCustomers,activeCustomers:o.activeCustomers}}),S.success("Rapor buluta yedeklendi.")}catch(g){console.warn("Rapor buluta kaydedilemedi (CORS/Yetki):",g)}}catch(c){const t=c instanceof Error?c.message:"Bilinmeyen hata";S.error("Hata: "+t)}finally{A(!1)}};return e.jsx(xe,{open:q,onOpenChange:X,children:e.jsxs(ue,{className:"w-full max-w-[98vw] md:max-w-6xl max-h-[95vh] flex flex-col p-0 !overflow-hidden",children:[e.jsxs(he,{className:"px-4 sm:px-6 pt-4 sm:pt-6 pb-4 border-b bg-gradient-to-r from-purple-500/5 to-transparent flex-shrink-0",children:[e.jsxs(pe,{className:"text-lg sm:text-xl font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-purple-500/10 flex items-center justify-center",children:e.jsx(Ne,{className:"h-4 w-4 text-purple-600"})}),"Müşteri Raporu Oluştur"]}),e.jsx(ge,{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:"Tarih aralığı seçerek detaylı müşteri raporu oluşturun ve PDF olarak indirin"})]}),e.jsx(fe,{className:"flex-1 min-h-0",children:e.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[e.jsxs(R,{className:"bg-gradient-to-br from-gray-50/50 to-white border-2",children:[e.jsx(I,{className:"pb-3",children:e.jsx(P,{className:"text-sm font-semibold text-muted-foreground",children:"Tarih Aralığı Seçimi"})}),e.jsxs(C,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(L,{className:"text-xs font-medium text-muted-foreground mb-2 block",children:"Hızlı Seçim"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const c=new Date,t=new Date(c);t.setDate(c.getDate()-7),k(t.toISOString().split("T")[0]),j(c.toISOString().split("T")[0])},className:"text-xs",children:[e.jsx(ke,{className:"h-3 w-3 mr-1"}),"Son 7 Gün"]}),e.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const c=new Date,t=new Date(c);t.setDate(c.getDate()-30),k(t.toISOString().split("T")[0]),j(c.toISOString().split("T")[0])},className:"text-xs",children:[e.jsx(we,{className:"h-3 w-3 mr-1"}),"Son 30 Gün"]}),e.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const c=new Date,t=new Date(c.getFullYear(),c.getMonth(),1);k(t.toISOString().split("T")[0]),j(c.toISOString().split("T")[0])},className:"text-xs",children:"Bu Ay"}),e.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const c=new Date,t=new Date(c.getFullYear(),c.getMonth()-1,1),r=new Date(c.getFullYear(),c.getMonth(),0);k(t.toISOString().split("T")[0]),j(r.toISOString().split("T")[0])},className:"text-xs",children:"Geçen Ay"}),e.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const c=new Date,t=new Date(c.getFullYear(),0,1);k(t.toISOString().split("T")[0]),j(c.toISOString().split("T")[0])},className:"text-xs",children:"Bu Yıl"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Başlangıç Tarihi"}),e.jsx(B,{type:"date",value:m,onChange:c=>k(c.target.value),className:"border-2 focus:border-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Bitiş Tarihi"}),e.jsx(B,{type:"date",value:d,onChange:c=>j(c.target.value),className:"border-2 focus:border-primary"})]})]})]})]}),_&&!o&&e.jsx(R,{className:"border-2 border-dashed",children:e.jsx(C,{className:"py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Veriler yükleniyor..."})]})})}),o&&e.jsxs("div",{className:"space-y-6 border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"}),"Rapor Önizlemesi"]}),e.jsxs(ce,{variant:"outline",className:"text-xs",children:[m," - ",d]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(R,{className:"bg-gradient-to-br from-purple-50 via-white to-white border-purple-200 hover:shadow-lg transition-all duration-300",children:[e.jsx(I,{className:"pb-3",children:e.jsxs(P,{className:"text-sm font-semibold text-muted-foreground flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4 text-purple-500"}),"Toplam Müşteri"]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:o.totalCustomers}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Tüm müşteriler"})]})]}),e.jsxs(R,{className:"bg-gradient-to-br from-green-50 via-white to-white border-green-200 hover:shadow-lg transition-all duration-300",children:[e.jsx(I,{className:"pb-3",children:e.jsxs(P,{className:"text-sm font-semibold text-muted-foreground flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4 text-green-500"}),"Aktif Müşteri"]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:o.activeCustomers}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Sipariş veren müşteri"})]})]}),e.jsxs(R,{className:"bg-gradient-to-br from-blue-50 via-white to-white border-blue-200 hover:shadow-lg transition-all duration-300",children:[e.jsx(I,{className:"pb-3",children:e.jsxs(P,{className:"text-sm font-semibold text-muted-foreground flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4 text-blue-500"}),"Yeni Müşteri"]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:o.newCustomers}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Tarih aralığında"})]})]})]}),e.jsxs(R,{className:"border-2 shadow-sm",children:[e.jsx(I,{className:"bg-gradient-to-r from-gray-50 to-white border-b",children:e.jsxs(P,{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-1 w-1 rounded-full bg-primary"}),"Müşteri Segmentasyonu"]})}),e.jsx(C,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ee,{children:[e.jsx(te,{children:e.jsxs(E,{className:"bg-gray-50/50",children:[e.jsx(N,{className:"font-semibold",children:"Segment"}),e.jsx(N,{className:"text-right font-semibold",children:"Müşteri Sayısı"}),e.jsx(N,{className:"text-right font-semibold",children:"Oran"})]})}),e.jsx(se,{children:(()=>{const c=o.segments.high+o.segments.medium+o.segments.low;return[{label:"Yüksek Değerli (>₺50K)",value:o.segments.high},{label:"Orta Değerli (₺10K-₺50K)",value:o.segments.medium},{label:"Düşük Değerli (<₺10K)",value:o.segments.low}].map((r,a)=>{const g=c>0?(r.value/c*100).toFixed(1):"0";return e.jsxs(E,{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsx(v,{className:"font-medium",children:r.label}),e.jsx(v,{className:"text-right font-semibold",children:r.value}),e.jsxs(v,{className:"text-right font-semibold text-muted-foreground",children:[g,"%"]})]},a)})})()})]})})})]}),e.jsxs(R,{className:"border-2 shadow-sm",children:[e.jsx(I,{className:"bg-gradient-to-r from-gray-50 to-white border-b",children:e.jsxs(P,{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-1 w-1 rounded-full bg-primary"}),"En Değerli Müşteriler"]})}),e.jsx(C,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ee,{children:[e.jsx(te,{children:e.jsxs(E,{className:"bg-gray-50/50",children:[e.jsx(N,{className:"font-semibold",children:"Sıra"}),e.jsx(N,{className:"font-semibold",children:"Müşteri"}),e.jsx(N,{className:"text-right font-semibold",children:"Sipariş Sayısı"}),e.jsx(N,{className:"text-right font-semibold",children:"Toplam Harcama"})]})}),e.jsx(se,{children:o.topCustomers.slice(0,10).map((c,t)=>e.jsxs(E,{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsxs(v,{className:"font-medium text-muted-foreground",children:["#",t+1]}),e.jsx(v,{className:"font-medium",children:c.name}),e.jsx(v,{className:"text-right font-semibold",children:c.orders}),e.jsxs(v,{className:"text-right font-semibold text-primary",children:["₺",c.total.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]},t))})]})})})]})]}),e.jsx("div",{className:"flex gap-3 pt-2",children:e.jsxs(D,{onClick:$,disabled:_||!o,size:"lg",className:"flex-1 bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary shadow-lg",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),_?"PDF Oluşturuluyor...":o?"PDF İndir":"Tarih Aralığı Seçin"]})})]})})]})})},ut=({open:q,onOpenChange:X})=>{const{user:z}=de(),[_,A]=y.useState(!1),[m,k]=y.useState(""),[d,j]=y.useState(""),[o,i]=y.useState(null),F=t=>{if(t.createdAt instanceof Se)return t.createdAt.toDate();if(t.created_at){const r=new Date(t.created_at);if(!Number.isNaN(r.getTime()))return r}return new Date},Y=t=>t.order_date?new Date(t.order_date).toISOString().slice(0,7):t.created_at?new Date(t.created_at).toISOString().slice(0,7):F(t).toISOString().slice(0,7),K=t=>t.total??t.totalAmount??t.total_amount??t.subtotal??0,U=t=>t.cost??t.unit_price??t.unitPrice??0,$=y.useCallback(async()=>{if(!m||!d){i(null);return}A(!0);try{const r=(await De()).filter(b=>{const O=F(b).toISOString().split("T")[0];return O>=m&&O<=d}),a=await Promise.all(r.map(async b=>{try{const T=await Fe(b.id);return{...b,order_items:T}}catch(T){return console.error("Get order items error:",T),{...b,order_items:[]}}})),g=(a==null?void 0:a.reduce((b,T)=>b+K(T),0))||0,w=await tt(),l=new Map(w.map(b=>[b.id,b]));let f=0;const G=(a==null?void 0:a.flatMap(b=>{var T;return((T=b.order_items)==null?void 0:T.map(async O=>{const Q=U(O);let le=Q;if(O.currency&&O.currency!=="TRY")try{le=await je(Q,O.currency)}catch{console.warn(`Exchange rate conversion failed for ${O.currency}, using original value`)}if(O.raw_material_id&&l.has(O.raw_material_id)){const H=l.get(O.raw_material_id);if(H.unitPrice){let oe=H.unitPrice;if(H.currency&&H.currency!=="TRY")try{oe=await je(H.unitPrice,H.currency)}catch{console.warn(`Exchange rate conversion failed for material ${H.currency}, using original value`)}le+=oe*(O.quantity||1)}}return le*O.quantity}))||[]}))||[];f=(await Promise.all(G)).reduce((b,T)=>b+T,0);const M=g-f,x=g>0?M/g*100:0,s=new Map,n=(a==null?void 0:a.map(async b=>{var oe;const T=Y(b),O=K(b),Q=((oe=b.order_items)==null?void 0:oe.map(async re=>{const be=U(re);let Ie=be;if(re.currency&&re.currency!=="TRY")try{Ie=await je(be,re.currency)}catch{console.warn("Exchange rate conversion failed, using original value")}return Ie*re.quantity}))||[],H=(await Promise.all(Q)).reduce((re,be)=>re+be,0);return{month:T,revenue:O,cost:H}}))||[];(await Promise.all(n)).forEach(({month:b,revenue:T,cost:O})=>{s.has(b)||s.set(b,{revenue:0,cost:0});const Q=s.get(b);Q.revenue+=T,Q.cost+=O});const u=Array.from(s.entries()).map(([b,T])=>({month:b,revenue:T.revenue,cost:T.cost,profit:T.revenue-T.cost})).sort((b,T)=>b.month.localeCompare(T.month)),p=new Map,V=(a==null?void 0:a.flatMap(b=>{var T;return((T=b.order_items)==null?void 0:T.map(async O=>{const Q=O.product_name||"Bilinmeyen",le=U(O);let H=le;if(O.currency&&O.currency!=="TRY")try{H=await je(le,O.currency)}catch{console.warn("Exchange rate conversion failed, using original value")}return{productName:Q,revenue:O.total??0,cost:H*O.quantity}}))||[]}))||[];(await Promise.all(V)).forEach(({productName:b,revenue:T,cost:O})=>{p.has(b)||p.set(b,{name:b,revenue:0,cost:0});const Q=p.get(b);Q.revenue+=T,Q.cost+=O});const J=Array.from(p.values()).map(b=>({...b,profit:b.revenue-b.cost})).sort((b,T)=>T.profit-b.profit).slice(0,10);i({totalRevenue:g,totalCost:f,grossProfit:M,profitMargin:x,monthlyTrend:u,topProfitableProducts:J})}catch(t){console.error("Fetch report data error:",t),S.error("Veri yüklenirken hata oluştu")}finally{A(!1)}},[m,d]);y.useEffect(()=>{if(m&&d){const t=setTimeout(()=>{$()},500);return()=>clearTimeout(t)}},[m,d,$]);const c=async()=>{if(!m||!d){S.error("Lütfen tarih aralığı seçin");return}if(!o){S.error("Lütfen önce rapor verilerini yükleyin");return}A(!0);try{const t=await Xe(o,m,d),r=URL.createObjectURL(t),a=document.createElement("a");a.href=r;const g=new Date().toISOString().split("T")[0];a.download=`Mali-Rapor-${m}-${d}-${g}.pdf`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r),S.success("Rapor indiriliyor...");try{const{saveReport:w}=await me(async()=>{const{saveReport:f}=await import("./reportService-eZYvGhBr.js");return{saveReport:f}},__vite__mapDeps([0,1,2,3,4])),l=`Mali Rapor - ${m} / ${d}`;await w("financial",l,t,(z==null?void 0:z.id)||"",{startDate:m,endDate:d,metadata:{totalRevenue:o.totalRevenue,grossProfit:o.grossProfit}}),S.success("Rapor buluta yedeklendi.")}catch(w){console.warn("Rapor buluta kaydedilemedi (CORS/Yetki):",w)}}catch(t){const r=t instanceof Error?t.message:"Bilinmeyen hata";S.error("Hata: "+r)}finally{A(!1)}};return e.jsx(xe,{open:q,onOpenChange:X,children:e.jsxs(ue,{className:"w-full max-w-[98vw] md:max-w-6xl max-h-[95vh] flex flex-col p-0 !overflow-hidden",children:[e.jsxs(he,{className:"px-4 sm:px-6 pt-4 sm:pt-6 pb-4 border-b bg-gradient-to-r from-emerald-500/5 to-transparent flex-shrink-0",children:[e.jsxs(pe,{className:"text-lg sm:text-xl font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-emerald-500/10 flex items-center justify-center",children:e.jsx(et,{className:"h-4 w-4 text-emerald-600"})}),"Mali Rapor Oluştur"]}),e.jsx(ge,{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:"Tarih aralığı seçerek detaylı mali rapor oluşturun ve PDF olarak indirin"})]}),e.jsx(fe,{className:"flex-1 min-h-0",children:e.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[e.jsxs(R,{className:"bg-gradient-to-br from-gray-50/50 to-white border-2",children:[e.jsx(I,{className:"pb-3",children:e.jsx(P,{className:"text-sm font-semibold text-muted-foreground",children:"Tarih Aralığı Seçimi"})}),e.jsxs(C,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(L,{className:"text-xs font-medium text-muted-foreground mb-2 block",children:"Hızlı Seçim"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=new Date,r=new Date(t);r.setDate(t.getDate()-7),k(r.toISOString().split("T")[0]),j(t.toISOString().split("T")[0])},className:"text-xs",children:[e.jsx(ke,{className:"h-3 w-3 mr-1"}),"Son 7 Gün"]}),e.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=new Date,r=new Date(t);r.setDate(t.getDate()-30),k(r.toISOString().split("T")[0]),j(t.toISOString().split("T")[0])},className:"text-xs",children:[e.jsx(we,{className:"h-3 w-3 mr-1"}),"Son 30 Gün"]}),e.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=new Date,r=new Date(t.getFullYear(),t.getMonth(),1);k(r.toISOString().split("T")[0]),j(t.toISOString().split("T")[0])},className:"text-xs",children:"Bu Ay"}),e.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=new Date,r=new Date(t.getFullYear(),t.getMonth()-1,1),a=new Date(t.getFullYear(),t.getMonth(),0);k(r.toISOString().split("T")[0]),j(a.toISOString().split("T")[0])},className:"text-xs",children:"Geçen Ay"}),e.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=new Date,r=new Date(t.getFullYear(),0,1);k(r.toISOString().split("T")[0]),j(t.toISOString().split("T")[0])},className:"text-xs",children:"Bu Yıl"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Başlangıç Tarihi"}),e.jsx(B,{type:"date",value:m,onChange:t=>k(t.target.value),className:"border-2 focus:border-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Bitiş Tarihi"}),e.jsx(B,{type:"date",value:d,onChange:t=>j(t.target.value),className:"border-2 focus:border-primary"})]})]})]})]}),_&&!o&&e.jsx(R,{className:"border-2 border-dashed",children:e.jsx(C,{className:"py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Veriler yükleniyor..."})]})})}),o&&e.jsxs("div",{className:"space-y-6 border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"}),"Rapor Önizlemesi"]}),e.jsxs(ce,{variant:"outline",className:"text-xs",children:[m," - ",d]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(R,{className:"bg-gradient-to-br from-green-50 via-white to-white border-green-200 hover:shadow-lg transition-all duration-300",children:[e.jsx(I,{className:"pb-3",children:e.jsxs(P,{className:"text-sm font-semibold text-muted-foreground flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4 text-green-500"}),"Toplam Gelir"]})}),e.jsxs(C,{children:[e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["₺",o.totalRevenue.toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Toplam ciro"})]})]}),e.jsxs(R,{className:"bg-gradient-to-br from-red-50 via-white to-white border-red-200 hover:shadow-lg transition-all duration-300",children:[e.jsx(I,{className:"pb-3",children:e.jsxs(P,{className:"text-sm font-semibold text-muted-foreground flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-red-500"}),"Toplam Gider"]})}),e.jsxs(C,{children:[e.jsxs("p",{className:"text-3xl font-bold text-red-600",children:["₺",o.totalCost.toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Toplam maliyet"})]})]}),e.jsxs(R,{className:"bg-gradient-to-br from-emerald-50 via-white to-white border-emerald-200 hover:shadow-lg transition-all duration-300",children:[e.jsx(I,{className:"pb-3",children:e.jsxs(P,{className:"text-sm font-semibold text-muted-foreground flex items-center gap-2",children:[e.jsx(rt,{className:"h-4 w-4 text-emerald-500"}),"Brüt Kar"]})}),e.jsxs(C,{children:[e.jsxs("p",{className:"text-3xl font-bold text-emerald-600",children:["₺",o.grossProfit.toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Net kar"})]})]}),e.jsxs(R,{className:"bg-gradient-to-br from-primary/10 via-white to-white border-primary/20 hover:shadow-lg transition-all duration-300",children:[e.jsx(I,{className:"pb-3",children:e.jsxs(P,{className:"text-sm font-semibold text-muted-foreground flex items-center gap-2",children:[e.jsx(ct,{className:"h-4 w-4 text-primary"}),"Kar Marjı"]})}),e.jsxs(C,{children:[e.jsxs("p",{className:"text-3xl font-bold text-primary",children:[o.profitMargin.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Karlılık oranı"})]})]})]}),e.jsxs(R,{className:"border-2 shadow-sm",children:[e.jsx(I,{className:"bg-gradient-to-r from-gray-50 to-white border-b",children:e.jsxs(P,{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-1 w-1 rounded-full bg-primary"}),"Aylık Gelir-Gider-Kar Trendi"]})}),e.jsx(C,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ee,{children:[e.jsx(te,{children:e.jsxs(E,{className:"bg-gray-50/50",children:[e.jsx(N,{className:"font-semibold",children:"Ay"}),e.jsx(N,{className:"text-right font-semibold",children:"Gelir"}),e.jsx(N,{className:"text-right font-semibold",children:"Gider"}),e.jsx(N,{className:"text-right font-semibold",children:"Kar"})]})}),e.jsx(se,{children:o.monthlyTrend.map((t,r)=>{const[a,g]=t.month.split("-"),l={"01":"Ocak","02":"Şubat","03":"Mart","04":"Nisan","05":"Mayıs","06":"Haziran","07":"Temmuz","08":"Ağustos","09":"Eylül",10:"Ekim",11:"Kasım",12:"Aralık"}[g]||g;return e.jsxs(E,{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsxs(v,{className:"font-medium",children:[l," ",a]}),e.jsxs(v,{className:"text-right font-semibold text-green-600",children:["₺",t.revenue.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs(v,{className:"text-right font-semibold text-red-600",children:["₺",t.cost.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs(v,{className:"text-right font-semibold text-emerald-600",children:["₺",t.profit.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]},r)})})]})})})]}),e.jsxs(R,{className:"border-2 shadow-sm",children:[e.jsx(I,{className:"bg-gradient-to-r from-gray-50 to-white border-b",children:e.jsxs(P,{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-1 w-1 rounded-full bg-primary"}),"En Karlı Ürünler"]})}),e.jsx(C,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ee,{children:[e.jsx(te,{children:e.jsxs(E,{className:"bg-gray-50/50",children:[e.jsx(N,{className:"font-semibold",children:"Sıra"}),e.jsx(N,{className:"font-semibold",children:"Ürün"}),e.jsx(N,{className:"text-right font-semibold",children:"Gelir"}),e.jsx(N,{className:"text-right font-semibold",children:"Gider"}),e.jsx(N,{className:"text-right font-semibold",children:"Kar"})]})}),e.jsx(se,{children:o.topProfitableProducts.slice(0,10).map((t,r)=>e.jsxs(E,{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsxs(v,{className:"font-medium text-muted-foreground",children:["#",r+1]}),e.jsx(v,{className:"font-medium",children:t.name}),e.jsxs(v,{className:"text-right font-semibold text-green-600",children:["₺",t.revenue.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs(v,{className:"text-right font-semibold text-red-600",children:["₺",t.cost.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs(v,{className:"text-right font-semibold text-emerald-600",children:["₺",t.profit.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]},r))})]})})})]})]}),e.jsx("div",{className:"flex gap-3 pt-2",children:e.jsxs(D,{onClick:c,disabled:_||!o,size:"lg",className:"flex-1 bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary shadow-lg",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),_?"PDF Oluşturuluyor...":o?"PDF İndir":"Tarih Aralığı Seçin"]})})]})})]})})},Re=[{productId:null,productName:"",quantity:1,unitPrice:0,discount:0,total:0,isManual:!1}],ht=({open:q,onOpenChange:X,orderId:z})=>{const _=new Date,A=_.toISOString().split("T")[0],m=new Date(_);m.setDate(_.getDate()+7);const k=m.toISOString().split("T")[0],{user:d}=de(),[j,o]=y.useState(!1),[i,F]=y.useState({quoteNumber:`REV-${new Date().getFullYear()}${String(new Date().getMonth()+1).padStart(2,"0")}-${String(Math.floor(Math.random()*1e3)).padStart(3,"0")}`,quoteDate:A,validUntil:k,customerId:"",customerName:"",customerCompany:"",customerAddress:"",customerPhone:"",customerEmail:"",currency:it,taxRate:20,items:Re,terms:["Nakliye ücreti fiyata dahil değildir.","Cihaz, imalat hatalarına karşı 2 yıl garanti kapsamındadır.","Üretim süresi, %50 peşin ödeme alındıktan sonra 10 iş günüdür."]}),[Y,K]=y.useState([]),[U,$]=y.useState([]),c=y.useCallback(async()=>{try{const s=await Ce();K(s)}catch(s){console.error("Fetch customers error:",s)}},[]),t=y.useCallback(async()=>{try{const s=await Ge();$(s)}catch(s){console.error("Fetch products error:",s)}},[]),r=y.useCallback(async()=>{if(z)try{const[s,n]=await Promise.all([Ve(z),Fe(z)]);s&&F(h=>({...h,customerId:s.customerId||s.customer_id||"",customerName:s.customerName||s.customer_name||"",customerCompany:s.customerCompany||s.customer_company||"",items:n&&n.length>0?n.map(u=>({productId:u.productId||u.product_id||null,productName:u.productName||u.product_name||"",quantity:u.quantity||1,unitPrice:u.unitPrice||u.unit_price||0,discount:u.discount||0,total:u.total||0,isManual:!u.product_id})):Re}))}catch{}},[z]);y.useEffect(()=>{if(q)if(c(),t(),z)r();else{const s=new Date,n=s.toISOString().split("T")[0],h=new Date(s);h.setDate(s.getDate()+7);const u=h.toISOString().split("T")[0];F(p=>({...p,quoteNumber:`REV-${s.getFullYear()}${String(s.getMonth()+1).padStart(2,"0")}-${String(Math.floor(Math.random()*1e3)).padStart(3,"0")}`,quoteDate:n,validUntil:u,customerId:"",customerName:"",customerCompany:"",customerAddress:"",customerPhone:"",customerEmail:"",items:Re})),o(!1)}},[q,z]);const a=s=>{const n=Number(s);return isNaN(n)||!isFinite(n)?0:n},g=y.useMemo(()=>{const s=(Array.isArray(i.items)?i.items:[]).reduce((Z,J)=>{const W=a(J.quantity),b=a(J.unitPrice),T=a(J.discount||0),O=W*b-T;return Z+O},0),n=a(s),h=a(i.taxRate||20),u=n*(h/100),p=n+a(u),V=(Array.isArray(i.items)?i.items:[]).reduce((Z,J)=>Z+a(J.discount||0),0);return{subtotal:n,tax:a(u),grandTotal:a(p),totalDiscount:a(V)}},[i.items,i.taxRate]),w=(Array.isArray(i.items)?i.items:[]).some(s=>(s.discount||0)>0),l=(s,n,h)=>{F(u=>{const p=[...u.items];if(n==="productId")if(h==="manual")p[s]={...p[s],productId:null,productName:"",unitPrice:0,isManual:!0};else if(h){const W=U.find(b=>b.id===h);W&&(p[s]={...p[s],productId:W.id,productName:W.name,unitPrice:W.price||0,isManual:!1},W.price&&W.price>0?S.success(`Ürün fiyatı otomatik olarak eklendi: ${W.price.toFixed(2)} ${ae[i.currency]||i.currency}`):S.info("Bu ürün için fiyat tanımlı değil, lütfen manuel olarak girin"))}else p[s]={...p[s],productId:null,productName:"",unitPrice:0,isManual:!1};else{const W=n==="productName"?h:Number(h)||0;p[s]={...p[s],[n]:W}}const V=a(p[s].quantity),Z=a(p[s].unitPrice),J=a(p[s].discount||0);return p[s].total=a(V*Z-J),{...u,items:p}})},f=()=>{F(s=>({...s,items:[...s.items,{productId:null,productName:"",quantity:1,unitPrice:0,discount:0,total:0,isManual:!1}]}))},G=s=>{Array.isArray(i.items)&&i.items.length>1&&F(n=>({...n,items:n.items.filter((h,u)=>u!==s)}))},ne=y.useCallback((s,n)=>{const h=Y.find(u=>u.id===s);Ce().then(u=>{const p=u.find(V=>V.id===s);F(V=>({...V,customerId:s||"",customerName:(p==null?void 0:p.name)||n||"",customerCompany:(p==null?void 0:p.company)||(h==null?void 0:h.company)||"",customerAddress:(p==null?void 0:p.address)||"",customerPhone:(p==null?void 0:p.phone)||"",customerEmail:(p==null?void 0:p.email)||""}))}).catch(()=>{F(u=>({...u,customerId:s||"",customerName:(h==null?void 0:h.name)||n||"",customerCompany:(h==null?void 0:h.company)||""}))})},[Y]),M=s=>{if(!s||s.trim()==="")return"-";try{const n=new Date(s);if(isNaN(n.getTime())||!isFinite(n.getTime()))return console.warn("Geçersiz tarih:",s),"-";const h=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],u=n.getDate(),p=n.getMonth(),V=n.getFullYear();if(isNaN(u)||isNaN(p)||isNaN(V)||p<0||p>11||u<1||u>31||V<1900||V>2100)return console.warn("Geçersiz tarih bileşenleri:",{day:u,monthIndex:p,year:V}),"-";const Z=h[p];return Z?`${u} ${Z} ${V}`:(console.warn("Geçersiz ay indeksi:",p),"-")}catch(n){return console.error("Tarih formatlama hatası:",n,s),"-"}},x=async()=>{if(!i.customerCompany&&!i.customerName){S.error("Lütfen müşteri bilgisini girin.");return}if(!Array.isArray(i.items)||i.items.length===0||i.items.every(s=>!s.productName)){S.error("Lütfen en az bir ürün ekleyin.");return}try{const s=await Ze({quoteNumber:i.quoteNumber,quoteDate:M(i.quoteDate),validUntil:M(i.validUntil),customerName:i.customerName,customerCompany:i.customerCompany,customerAddress:i.customerAddress||void 0,customerPhone:i.customerPhone||void 0,customerEmail:i.customerEmail||void 0,projectName:"",deliveryTerms:"",paymentTerms:"",notes:"",currency:i.currency,taxRate:i.taxRate,discountRate:0,items:Array.isArray(i.items)?i.items.filter(u=>u.productName&&u.productName.trim()!=="").map(u=>({description:u.productName||"-",quantity:u.quantity||0,unitPrice:u.unitPrice||0,discount:u.discount||0})):[],totals:{...g,discount:g.totalDiscount},terms:i.terms}),n=URL.createObjectURL(s),h=document.createElement("a");h.href=n,h.download=`Satis-Teklifi-${i.quoteNumber}.pdf`,h.click(),URL.revokeObjectURL(n),S.success("Teklif PDF hazırlandı");try{const{saveReport:u}=await me(async()=>{const{saveReport:p}=await import("./reportService-eZYvGhBr.js");return{saveReport:p}},__vite__mapDeps([0,1,2,3,4]));await u("sales_quote",`Teklif ${i.quoteNumber}`,s,(d==null?void 0:d.id)||"anonymous",{metadata:{customerId:i.customerId||null,customerName:i.customerCompany||i.customerName||"Bilinmiyor",currency:i.currency,grandTotal:Number(g.grandTotal)||0,subtotal:Number(g.subtotal)||0,tax:Number(g.tax)||0,discount:Number(g.totalDiscount)||0}})}catch(u){console.warn("Teklif raporu kaydedilemedi (PDF indirme başarılı):",u)}}catch(s){const n=s instanceof Error?s.message:"Bilinmeyen hata";S.error("PDF oluşturulamadı: "+n)}};return e.jsx(xe,{open:q,onOpenChange:X,children:e.jsxs(ue,{className:"w-full max-w-[98vw] md:max-w-6xl max-h-[95vh] flex flex-col p-0 !overflow-hidden bg-gradient-to-br from-background via-background to-muted/20",children:[e.jsx(he,{className:"px-4 sm:px-6 pt-4 sm:pt-6 pb-4 border-b bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 backdrop-blur-sm flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary/20 to-primary/10 backdrop-blur-sm flex items-center justify-center border border-primary/20",children:e.jsx(ve,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(pe,{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-foreground to-foreground/80 bg-clip-text text-transparent",children:"Satış Teklif Formu"}),e.jsx(ge,{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:"Teklif formunu düzenleyip PDF olarak indirebilirsiniz"})]})]}),!j&&e.jsxs(D,{onClick:()=>o(!0),variant:"outline",size:"sm",className:"shadow-sm hover:shadow-md transition-all duration-200 hover:scale-105",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Düzenle"]})]})}),e.jsx(fe,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"p-4 sm:p-6 flex justify-center bg-gradient-to-br from-muted/20 via-background to-muted/10",children:e.jsxs("div",{className:"w-full max-w-[820px] space-y-4 sm:space-y-6",children:[j&&e.jsxs("div",{className:"space-y-4 p-5 bg-gradient-to-br from-primary/5 via-white to-white rounded-xl border-2 border-primary/20 shadow-lg backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-primary/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(_e,{className:"h-4 w-4 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg text-foreground",children:"Form Bilgilerini Düzenle"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{onClick:()=>o(!1),variant:"default",size:"sm",className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary shadow-md hover:shadow-lg transition-all duration-200",children:[e.jsx(lt,{className:"h-4 w-4 mr-2"}),"Kaydet"]}),e.jsx(D,{onClick:()=>o(!1),variant:"ghost",size:"sm",className:"hover:bg-destructive/10 hover:text-destructive transition-colors",children:e.jsx(Ee,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm font-medium text-foreground/80",children:"Teklif No"}),e.jsx(B,{value:i.quoteNumber,onChange:s=>F(n=>({...n,quoteNumber:s.target.value})),className:"border-primary/20 focus:border-primary focus:ring-primary/20 transition-all"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm font-medium text-foreground/80",children:"Tarih"}),e.jsx(B,{type:"date",value:i.quoteDate,onChange:s=>F(n=>({...n,quoteDate:s.target.value})),className:"border-primary/20 focus:border-primary focus:ring-primary/20 transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm font-medium text-foreground/80",children:"Geçerlilik Tarihi"}),e.jsx(B,{type:"date",value:i.validUntil,onChange:s=>F(n=>({...n,validUntil:s.target.value})),className:"border-primary/20 focus:border-primary focus:ring-primary/20 transition-all"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm font-medium text-foreground/80",children:"Müşteri"}),e.jsx("div",{className:"border-primary/20 rounded-md",children:e.jsx(at,{value:i.customerId||"",onChange:ne,placeholder:"Müşteri seçin..."})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm font-medium text-foreground/80",children:"Para Birimi"}),e.jsx("select",{className:"w-full rounded-md border border-primary/20 bg-background px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",value:i.currency,onChange:s=>F(n=>({...n,currency:s.target.value})),children:nt.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"text-sm font-medium text-foreground/80",children:"KDV (%)"}),e.jsx(B,{type:"number",min:"0",max:"100",value:i.taxRate,onChange:s=>F(n=>({...n,taxRate:Number(s.target.value)})),className:"border-primary/20 focus:border-primary focus:ring-primary/20 transition-all"})]})]})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl shadow-xl relative overflow-hidden transition-all duration-300 hover:shadow-2xl",style:{minWidth:"720px",maxWidth:"794px",width:"794px",padding:"32px",margin:"0 auto"},children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute top-8 left-8 w-40 h-32 bg-gray-400 transform rotate-12",style:{opacity:.02}}),e.jsx("div",{className:"absolute top-16 left-16 w-28 h-24 bg-gray-400 transform -rotate-12",style:{opacity:.02}}),e.jsx("div",{className:"absolute top-4 left-48 w-20 h-16 bg-gray-400 transform rotate-45",style:{opacity:.02}})]}),e.jsxs("div",{className:"flex justify-between items-start mb-8 relative z-10",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-[28px] font-bold mb-4 text-black leading-tight",style:{letterSpacing:"0.5px",lineHeight:"1.15",fontWeight:700},children:"SATIŞ TEKLİF FORMU"}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-sm font-semibold text-black mb-0.5",style:{fontWeight:600},children:"Müşteri"}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",style:{lineHeight:"1.4",fontSize:"14px"},children:i.customerCompany||i.customerName||"Müşteri seçin"})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0 ml-12",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2.5",children:[e.jsx("img",{src:Pe,alt:"REVIUM",className:"h-10 w-10 object-contain"}),e.jsx("span",{className:"text-2xl font-bold text-black",style:{fontWeight:700},children:"REVIUM"})]}),e.jsxs("div",{className:"text-[10px] text-gray-600 space-y-[1px] leading-tight",style:{fontSize:"10px",lineHeight:"1.2"},children:[e.jsx("p",{children:"Fevzi Çakmak Mah. Milenyum Cad. No:81"}),e.jsx("p",{children:"Karatay/KONYA"}),e.jsx("p",{children:"info@reviumtech.com"}),e.jsx("p",{children:"+90 (551) 829-1613"})]})]})]}),e.jsx("div",{className:"mb-8 text-sm relative z-10 flex justify-end",children:e.jsxs("div",{className:"text-right space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-black",style:{fontWeight:600,fontSize:"14px"},children:"Tarih:"})," ",e.jsx("span",{className:"text-gray-700",style:{fontSize:"14px"},children:M(i.quoteDate)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-black",style:{fontWeight:600,fontSize:"14px"},children:"Geçerlilik Tarihi:"})," ",e.jsx("span",{className:"text-gray-700",style:{fontSize:"14px"},children:M(i.validUntil)})]})]})}),e.jsxs("div",{className:"mb-8 relative z-10",children:[e.jsx("div",{className:"border border-gray-300 rounded-none overflow-hidden",children:e.jsxs(ee,{className:"border-collapse m-0",children:[e.jsx(te,{children:e.jsxs(E,{className:"border-0",children:[e.jsx(N,{className:"w-12 text-black font-bold border border-gray-300 bg-gray-100 py-2.5 px-3 text-left text-xs",style:{fontWeight:700,backgroundColor:"#f3f4f6"},children:"No"}),e.jsx(N,{className:"text-black font-bold border border-gray-300 bg-gray-100 py-2.5 px-3 text-left text-xs",style:{fontWeight:700,backgroundColor:"#f3f4f6"},children:"Ürün Adı"}),e.jsx(N,{className:"w-24 text-black font-bold border border-gray-300 bg-gray-100 py-2.5 px-3 text-center text-xs",style:{fontWeight:700,backgroundColor:"#f3f4f6"},children:"Adet"}),e.jsx(N,{className:"w-32 text-black font-bold border border-gray-300 bg-gray-100 py-2.5 px-3 text-right text-xs",style:{fontWeight:700,backgroundColor:"#f3f4f6"},children:"Birim Fiyat"}),w&&e.jsx(N,{className:"w-28 text-black font-bold border border-gray-300 bg-gray-100 py-2.5 px-3 text-right text-xs",style:{fontWeight:700,backgroundColor:"#f3f4f6"},children:"İskonto"}),e.jsx(N,{className:"w-32 text-black font-bold border border-gray-300 bg-gray-100 py-2.5 px-3 text-right text-xs",style:{fontWeight:700,backgroundColor:"#f3f4f6"},children:"Toplam"}),j&&e.jsx(N,{className:"w-12 border border-gray-300 bg-gray-100 py-3 px-3"})]})}),e.jsx(se,{children:(Array.isArray(i.items)?i.items:[]).map((s,n)=>e.jsxs(E,{className:"border-0",children:[e.jsx(v,{className:"border border-gray-300 text-left py-2.5 px-3 text-xs",children:n+1}),e.jsx(v,{className:"min-w-[300px] border border-gray-300 py-2.5 px-3 text-xs",children:j?s.isManual?e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{value:s.productName,onChange:h=>l(n,"productName",h.target.value),placeholder:"Ürün adı",className:"h-8 text-xs border-primary/20 focus:border-primary focus:ring-primary/20 transition-all"}),e.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:()=>l(n,"productId",""),className:"h-7 text-xs border-primary/30 hover:border-primary hover:bg-primary/5 transition-all",children:[e.jsx(ve,{className:"h-3 w-3 mr-1"}),"Kayıtlı Ürün Seç"]})]}):e.jsx("div",{className:"space-y-2",children:e.jsxs(qe,{value:s.productId||"",onValueChange:h=>{l(n,"productId",h)},children:[e.jsx(Ue,{className:"h-8 text-xs border-primary/20 focus:border-primary focus:ring-primary/20",children:e.jsx(Be,{placeholder:"Ürün seçin veya manuel ekleyin"})}),e.jsxs(Ye,{className:"max-h-[60vh] sm:max-h-80",children:[U.length>0?U.map(h=>e.jsx(ze,{value:h.id,className:"hover:bg-primary/5",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:h.name}),h.sku&&e.jsx(ce,{variant:"outline",className:"ml-2 text-xs border-primary/20",children:h.sku})]})},h.id)):e.jsx("div",{className:"px-2 py-4 text-center text-xs text-muted-foreground",children:"Ürün bulunamadı"}),e.jsx($e,{}),e.jsxs(ze,{value:"manual",className:"text-primary font-medium text-xs hover:bg-primary/10",children:[e.jsx(Ae,{className:"h-3 w-3 inline mr-1"}),"Manuel Ürün Ekle"]})]})]})}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.productName||"-"}),s.isManual&&e.jsx(ce,{variant:"outline",className:"text-xs border-primary/30 text-primary bg-primary/5",children:"Manuel"})]})}),e.jsx(v,{className:"border border-gray-300 text-center py-2.5 px-3 text-xs",children:j?e.jsx(B,{type:"number",min:"1",value:s.quantity,onChange:h=>l(n,"quantity",h.target.value),className:"border-primary/20 focus:border-primary focus:ring-primary/20 h-8 w-20 text-center text-xs transition-all"}):e.jsx("span",{className:"font-medium",children:s.quantity})}),e.jsx(v,{className:"border border-gray-300 text-right py-2.5 px-3 text-xs",children:j?e.jsx(B,{type:"number",min:"0",step:"0.01",value:s.unitPrice,onChange:h=>l(n,"unitPrice",h.target.value),className:"border-primary/20 focus:border-primary focus:ring-primary/20 h-8 w-28 text-right text-xs transition-all"}):e.jsxs("span",{className:"font-medium",children:[ae[i.currency]||i.currency,(s.unitPrice||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),w&&e.jsx(v,{className:"border border-gray-300 text-right py-2.5 px-3 text-xs",children:j?e.jsx(B,{type:"number",min:"0",step:"0.01",value:s.discount||0,onChange:h=>l(n,"discount",h.target.value),className:"border-primary/20 focus:border-primary focus:ring-primary/20 h-8 w-24 text-right text-xs transition-all",placeholder:"0.00"}):(s.discount||0)>0?e.jsxs("span",{className:"text-red-600 font-medium",children:["-",ae[i.currency]||i.currency,(s.discount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(v,{className:"font-semibold text-right border border-gray-300 py-2.5 px-3 text-xs",children:e.jsxs("span",{className:"text-foreground",children:[ae[i.currency]||i.currency,(s.total||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),j&&e.jsx(v,{className:"border border-gray-300 py-3 px-3",children:e.jsx(D,{type:"button",variant:"ghost",size:"icon",onClick:()=>G(n),disabled:!Array.isArray(i.items)||i.items.length===1,className:"h-7 w-7 hover:bg-destructive/10 hover:text-destructive transition-colors disabled:opacity-30",children:e.jsx(ot,{className:"h-3.5 w-3.5"})})})]},n))})]})}),j&&e.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:f,className:"mt-3 border-primary/30 hover:border-primary hover:bg-primary/5 transition-all duration-200 shadow-sm hover:shadow-md",children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Satır Ekle"]})]}),e.jsxs("div",{className:"grid grid-cols-2 mb-6 relative z-10",style:{gap:"64px"},children:[e.jsx("div",{className:"space-y-2",children:j?e.jsx("div",{className:"space-y-3",children:(Array.isArray(i.terms)?i.terms:[]).map((s,n)=>e.jsx(B,{value:s,onChange:h=>{const u=[...i.terms];u[n]=h.target.value,F(p=>({...p,terms:u}))},className:"text-sm border-primary/20 focus:border-primary focus:ring-primary/20 transition-all",placeholder:`Şart ${n+1}`},n))}):e.jsx("ul",{className:"list-disc list-inside space-y-2.5 text-sm text-gray-700 leading-relaxed",style:{paddingLeft:"1.25rem",lineHeight:"1.5"},children:(Array.isArray(i.terms)?i.terms:[]).map((s,n)=>e.jsx("li",{className:"hover:text-foreground transition-colors",style:{marginBottom:"0.5rem",fontSize:"14px"},children:s},n))})}),e.jsxs("div",{className:"space-y-2.5 text-right",children:[g.totalDiscount>0&&e.jsxs("div",{className:"flex justify-between items-center mb-2.5 p-2 rounded-md hover:bg-muted/30 transition-colors",children:[e.jsx("span",{className:"text-sm text-foreground/80",style:{fontSize:"14px"},children:"Toplam İskonto:"}),e.jsxs("span",{className:"font-semibold text-red-600 text-sm",style:{fontSize:"14px",fontWeight:600},children:["-",ae[i.currency]||i.currency,(g.totalDiscount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2.5 p-2 rounded-md hover:bg-muted/30 transition-colors",children:[e.jsx("span",{className:"text-sm text-foreground/80",style:{fontSize:"14px"},children:"Ara Toplam:"}),e.jsxs("span",{className:"font-semibold text-foreground text-sm",style:{fontSize:"14px",fontWeight:600},children:[ae[i.currency]||i.currency,(g.subtotal||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2.5 p-2 rounded-md hover:bg-muted/30 transition-colors",children:[e.jsxs("span",{className:"text-sm text-foreground/80",style:{fontSize:"14px"},children:["KDV (%",i.taxRate,"):"]}),e.jsxs("span",{className:"font-semibold text-foreground text-sm",style:{fontSize:"14px",fontWeight:600},children:[ae[i.currency]||i.currency,(g.tax||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t-2 border-gray-500 mt-4 rounded-lg bg-gray-100",style:{borderTopWidth:"2px",borderTopColor:"#6b7280",padding:"14px 18px",marginTop:"14px",marginLeft:"-18px",marginRight:"-18px",paddingLeft:"18px",paddingRight:"18px",backgroundColor:"#f3f4f6"},children:[e.jsx("span",{className:"text-base font-bold text-black",style:{fontSize:"16px",fontWeight:700},children:"GENEL TOPLAM:"}),e.jsxs("span",{className:"text-base font-bold text-black",style:{fontSize:"16px",fontWeight:700},children:[ae[i.currency]||i.currency,(g.grandTotal||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),e.jsxs("div",{className:"mt-8 pt-4 border-t border-gray-200 flex justify-between items-end text-[10px] text-gray-600 relative z-10",style:{fontSize:"10px",lineHeight:"1.2"},children:[e.jsxs("div",{className:"space-y-[1px]",children:[e.jsx("p",{className:"font-semibold text-black",style:{fontWeight:600,fontSize:"9px"},children:"Revium Ltd. Şti."}),e.jsx("p",{style:{fontSize:"10px"},children:"Fevzi Çakmak Mah. Milenyum Cad."}),e.jsx("p",{style:{fontSize:"10px"},children:"No:81 Karatay/KONYA"}),e.jsx("p",{style:{fontSize:"10px"},children:"info@reviumtech.com | www.reviumtech.com"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Pe,alt:"REVIUM",className:"h-8 w-8 object-contain"}),e.jsx("span",{className:"text-base font-bold text-black",style:{fontSize:"14px",fontWeight:700},children:"REVIUM"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(D,{onClick:x,size:"lg",className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 text-white font-semibold",children:[e.jsx(ie,{className:"h-5 w-5 mr-2"}),"PDF Olarak İndir"]})})]})})})]})})},zt=()=>{const{user:q}=de(),[X,z]=y.useState(!1),[_,A]=y.useState(!1),[m,k]=y.useState(!1),[d,j]=y.useState(!1),[o,i]=y.useState(!1),[F,Y]=y.useState([]),[K,U]=y.useState(null);y.useState(null);const[$,c]=y.useState(null);y.useEffect(()=>{q&&r()},[q]);const t=l=>{if(!l)return null;const f=l.match(/https:\/\/[^\s]+/);return f?f[0]:null},r=async()=>{try{const{getSavedReports:l}=await me(async()=>{const{getSavedReports:G}=await import("./reportService-eZYvGhBr.js");return{getSavedReports:G}},__vite__mapDeps([0,1,2,3,4])),f=await l({createdBy:q==null?void 0:q.id});Y(f),U(null)}catch(l){console.error("Fetch saved reports error:",l);const f=t(l==null?void 0:l.message);f&&(U(f),S.warning("Raporlar için Firestore index’i oluşturmanız gerekiyor.")),Y([])}},a=async l=>{c(l.id);try{if(l.fileUrl){const f=document.createElement("a");f.href=l.fileUrl,f.download=l.fileName||`rapor-${l.id}.pdf`,document.body.appendChild(f),f.click(),document.body.removeChild(f),S.success("Rapor indiriliyor...")}else S.error("Rapor dosyası bulunamadı")}catch(f){console.error("Download report error:",f),S.error(f.message||"Rapor indirilemedi")}finally{c(null)}},g=l=>({sales:"Satış",production:"Üretim",customer:"Müşteri",financial:"Mali"})[l]||l,w=[{icon:ye,title:"Satış Raporu",description:"Günlük, haftalık ve aylık satış analizleri",color:"primary",onClick:()=>z(!0)},{icon:Te,title:"Satış Teklifi",description:"Teklif formunu düzenleyip PDF olarak indir",color:"default",onClick:()=>i(!0)},{icon:ve,title:"Üretim Raporu",description:"Üretim süreçleri ve tamamlanma oranları",color:"success",onClick:()=>A(!0)},{icon:Ne,title:"Müşteri Raporu",description:"Müşteri analizleri ve davranış raporları",color:"info",onClick:()=>k(!0)},{icon:Te,title:"Mali Rapor",description:"Gelir-gider ve kar-zarar analizi",color:"warning",onClick:()=>j(!0)}];return e.jsx(Ke,{children:e.jsxs("div",{className:"space-y-3 sm:space-y-4 md:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-foreground",children:"Raporlar"}),e.jsx("p",{className:"text-muted-foreground mt-0.5 sm:mt-1 text-xs sm:text-sm",children:"İş analizleri ve raporlama"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:gap-6 md:grid-cols-2",children:w.map((l,f)=>e.jsxs(R,{className:"hover:shadow-lg transition-all duration-300 cursor-pointer touch-manipulation min-h-[44px]",onClick:l.onClick,children:[e.jsx(I,{children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"p-2 sm:p-3 rounded-lg bg-primary/10 flex-shrink-0",children:e.jsx(l.icon,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"})}),e.jsx(P,{className:"text-base sm:text-lg",children:l.title})]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-muted-foreground mb-3 sm:mb-4 text-sm sm:text-base",children:l.description}),e.jsx(D,{className:"w-full sm:w-auto min-h-[44px] sm:min-h-0",variant:"outline",onClick:G=>{G.stopPropagation(),l.onClick()},children:"Rapor Oluştur"})]})]},f))}),e.jsx(dt,{open:X,onOpenChange:l=>{z(l),l||r()}}),e.jsx(mt,{open:_,onOpenChange:l=>{A(l),l||r()}}),e.jsx(xt,{open:m,onOpenChange:l=>{k(l),l||r()}}),e.jsx(ut,{open:d,onOpenChange:l=>{j(l),l||r()}}),e.jsx(ht,{open:o,onOpenChange:i}),K&&e.jsxs("div",{className:"rounded-lg border border-amber-500 bg-amber-50 p-4 text-sm text-amber-900 space-y-2",children:[e.jsx("div",{className:"font-semibold",children:"Firestore index gerekli"}),e.jsx("p",{children:"Kayıtlı raporları görebilmek için Firestore’da aşağıdaki linkteki index’i oluşturup “Active” olmasını beklemelisiniz:"}),e.jsxs("a",{href:K,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 text-amber-900 font-medium underline",children:["Index’i aç",e.jsx(ie,{className:"h-4 w-4"})]}),e.jsx("p",{className:"text-xs text-amber-800",children:"Index “building” durumundan “active” olana kadar birkaç dakika sürebilir. Tamamlandıktan sonra liste otomatik olarak çalışacaktır."})]}),e.jsxs(R,{children:[e.jsx(I,{children:e.jsx(P,{children:"Son Oluşturulan Raporlar"})}),e.jsx(C,{children:F.length===0?e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"Henüz rapor oluşturulmamış"}):e.jsx("div",{className:"space-y-3",children:F.map(l=>{var f,G;return e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Te,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:l.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[g(l.reportType)," • ",l.createdAt?(l.createdAt instanceof Date?l.createdAt:((G=(f=l.createdAt)==null?void 0:f.toDate)==null?void 0:G.call(f))||new Date).toLocaleDateString("tr-TR"):"-"]})]})]}),e.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>a(l),disabled:$===l.id,children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),$===l.id?"İndiriliyor...":"İndir"]})]},l.id)})})})]})]})})};export{zt as default};

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Mobile optimizations */
@layer utilities {
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .touch-manipulation {
    touch-action: manipulation;
  }
}

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222 47% 11%;

    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;

    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;

    --primary: 221 83% 53%;
    --primary-foreground: 0 0% 100%;

    --secondary: 214 32% 91%;
    --secondary-foreground: 222 47% 11%;

    --muted: 210 40% 96%;
    --muted-foreground: 215 16% 47%;

    --accent: 142 76% 36%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: 221 83% 53%;

    --radius: 0.5rem;

    --sidebar-background: 222 47% 11%;
    --sidebar-foreground: 210 40% 98%;
    --sidebar-primary: 221 83% 53%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 217 33% 17%;
    --sidebar-accent-foreground: 210 40% 98%;
    --sidebar-border: 217 33% 17%;
    --sidebar-ring: 221 83% 53%;

    --success: 142 76% 36%;
    --success-foreground: 0 0% 100%;
    
    --warning: 38 92% 50%;
    --warning-foreground: 0 0% 100%;
    
    --info: 199 89% 48%;
    --info-foreground: 0 0% 100%;

    --gradient-primary: linear-gradient(135deg, hsl(221 83% 53%) 0%, hsl(221 83% 43%) 100%);
    --gradient-accent: linear-gradient(135deg, hsl(142 76% 36%) 0%, hsl(142 76% 46%) 100%);
    
    --shadow-sm: 0 1px 2px 0 hsl(221 83% 53% / 0.05);
    --shadow-md: 0 4px 6px -1px hsl(221 83% 53% / 0.1);
    --shadow-lg: 0 10px 15px -3px hsl(221 83% 53% / 0.1);

    --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .dark {
    --background: 222 47% 11%;
    --foreground: 210 40% 98%;

    --card: 217 33% 17%;
    --card-foreground: 210 40% 98%;

    --popover: 217 33% 17%;
    --popover-foreground: 210 40% 98%;

    --primary: 221 83% 53%;
    --primary-foreground: 0 0% 100%;

    --secondary: 217 33% 17%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217 33% 17%;
    --muted-foreground: 215 20% 65%;

    --accent: 142 76% 36%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 63% 31%;
    --destructive-foreground: 210 40% 98%;

    --border: 217 33% 17%;
    --input: 217 33% 17%;
    --ring: 221 83% 53%;

    --sidebar-background: 222 47% 11%;
    --sidebar-foreground: 210 40% 98%;
    --sidebar-primary: 221 83% 53%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 217 33% 17%;
    --sidebar-accent-foreground: 210 40% 98%;
    --sidebar-border: 217 33% 17%;
    --sidebar-ring: 221 83% 53%;

    --success: 142 76% 36%;
    --success-foreground: 0 0% 100%;
    
    --warning: 38 92% 50%;
    --warning-foreground: 0 0% 100%;
    
    --info: 199 89% 48%;
    --info-foreground: 0 0% 100%;
  }
}

@layer base {
  * {
    @apply border-border;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }

  body {
    @apply bg-background text-foreground;
    /* Mobile optimizations */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* Prevent text size adjust on iOS */
    -webkit-text-size-adjust: 100%;
    /* Smooth scrolling */
    scroll-behavior: smooth;
    overscroll-behavior-y: contain;
    overscroll-behavior-x: contain;
  }

  /* Mobile touch optimizations */
  button, a, input, select, textarea {
    touch-action: manipulation;
  }

  /* Improved focus styles for better accessibility */
  *:focus-visible {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
    border-radius: 0.25rem;
  }

  /* Smooth transitions for interactive elements */
  button, a, [role="button"], [tabindex] {
    transition: all 0.2s ease-in-out;
  }

  /* Better disabled state visibility */
  *:disabled {
    cursor: not-allowed !important;
    opacity: 0.6 !important;
  }

  /* Safe area support for iOS */
  @supports (padding: max(0px)) {
    body {
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
    }
  }

  /* Prevent pull-to-refresh on overscroll */

  @media (max-width: 768px) {
    /* Mobile specific optimizations */
    body {
      overscroll-behavior-y: contain;
      overscroll-behavior-x: contain;
    }
  }

  /* Ensure all scrollable containers work properly */
  [data-scroll-container] {
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
    scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
  }


  /* Ensure all elements with overflow can be scrolled with mouse wheel and touchpad */
  [style*="overflow-y: auto"],
  [style*="overflow-y: scroll"],
  [class*="overflow-y-auto"],
  [class*="overflow-y-scroll"],
  [class*="overflow-auto"] {
    overscroll-behavior: contain;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
    scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
    scroll-behavior: smooth;
  }

  /* Ensure main content area can always scroll */
  /* Flexbox scroll için parent container'ın height constraint'i olmalı */
  /* Parent div: flex-1 flex overflow-hidden */
  div.flex.flex-1.overflow-hidden {
    /* Flexbox scroll için min-height: 0 gerekli */
    min-height: 0;
  }
  
  /* Flexbox scroll için main elementinin min-height constraint'i olmalı */
  main {
    min-height: 0;
  }
  
  /* Scroll container için özel class - flexbox scroll için height: 0 gerekli */
  /* flex: 1 ile birlikte scroll çalışması için */
  main.main-scroll-container,
  main[class*="main-scroll-container"] {
    /* Flexbox scroll için min-height: 0 gerekli */
    min-height: 0;
    /* Scroll'un çalışması için overflow-y: auto olmalı */
    overflow-y: auto !important;
    overflow-x: auto !important;
  }
  
  /* Overflow-auto veya overflow-y-auto class'ına sahip main elementleri için (fallback) */
  main.overflow-y-auto,
  main.overflow-auto,
  main[class*="overflow-y-auto"],
  main[class*="overflow-auto"] {
    /* Flexbox scroll için min-height: 0 gerekli */
    min-height: 0;
  }

  /* Tüm sayfa container'larının scroll edilebilir olmasını garantile */
  main > div {
    width: 100%;
    /* min-width: 0 kaldırıldı - scroll'u engelliyor olabilir */
    /* min-height kaldırıldı - scroll'un çalışması için içeriğin doğal yüksekliğine izin ver */
    /* Flexbox'ta scroll için height constraint olmamalı, içerik doğal yüksekliğinde olmalı */
    /* Scroll'un çalışması için min-height: 0 olmalı (flexbox scroll için) */
    min-height: 0;
  }

  /* Scroll yönetimi: Body scroll'u engelle, main element scroll edilebilir olacak */
  /* SPA'larda body scroll'u engellemek normaldir, scroll main element'te olacak */
  html, body {
    height: 100%;
    width: 100%;
    /* Body scroll'u engelle - main element scroll edilebilir olacak */
    overflow: hidden;
  }
  
  /* Root element scroll'u engelle */
  #root {
    height: 100%;
    width: 100%;
    overflow: hidden;
  }

  /* Better focus management for accessibility */
  :focus-visible {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
    border-radius: 0.25rem;
  }

         /* Professional responsive design - Touch targets and spacing */
         /* Mobile-first: Ensure minimum touch targets on mobile */
         @media (max-width: 767px) {
           /* Touch targets - Apple HIG minimum 44x44px */
           button:not(.no-touch-target),
           a[role="button"],
           [role="button"]:not(.no-touch-target),
           input[type="button"],
           input[type="submit"],
           input[type="reset"],
           label[for] {
             min-height: 44px;
             min-width: 44px;
           }
           
           /* Form inputs should also have comfortable touch targets */
           input:not([type="checkbox"]):not([type="radio"]),
           select,
           textarea {
             min-height: 44px;
           }
           
           /* Better spacing on mobile - reduced for compactness */
           .space-y-4 > * + * {
             margin-top: 0.75rem;
           }
           
           .space-y-6 > * + * {
             margin-top: 1rem;
           }
           
           /* Improved padding for mobile */
           .p-4 {
             padding: 0.75rem;
           }
           
           .p-6 {
             padding: 1rem;
           }
           
           /* Better gap for mobile */
           .gap-4 {
             gap: 0.75rem;
           }
           
           .gap-6 {
             gap: 1rem;
           }
         }
         
         /* Tablet optimizations */
         @media (min-width: 768px) and (max-width: 1023px) {
           button:not(.no-touch-target),
           a[role="button"],
           [role="button"]:not(.no-touch-target) {
             min-height: 40px;
           }
         }
         
         /* Desktop - no minimum touch target requirement */
         @media (min-width: 1024px) {
           button:not(.no-touch-target),
           a[role="button"],
           [role="button"]:not(.no-touch-target) {
             min-height: auto;
             min-width: auto;
           }
         }


  /* Professional scrollbar styling - responsive */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  @media (max-width: 640px) {
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: 4px;
    transition: background-color 0.2s ease;
  }
  
  @media (max-width: 640px) {
    ::-webkit-scrollbar-thumb {
      border-radius: 3px;
    }
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: rgba(0, 0, 0, 0.3);
  }
  
  /* Firefox scrollbar */
  * {
    scrollbar-width: thin;
    scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
  }
  
  @media (max-width: 640px) {
    * {
      scrollbar-width: thin;
    }
  }

  /* Responsive container improvements */
  .container {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem;
    padding-right: 1rem;
  }

  @media (min-width: 640px) {
    .container {
      max-width: 640px;
      padding-left: 1.5rem;
      padding-right: 1.5rem;
    }
  }

  @media (min-width: 768px) {
    .container {
      max-width: 768px;
    }
  }

  @media (min-width: 1024px) {
    .container {
      max-width: 1024px;
    }
  }

  @media (min-width: 1280px) {
    .container {
      max-width: 1280px;
    }
  }

  @media (min-width: 1536px) {
    .container {
      max-width: 1536px;
    }
  }

         /* Professional responsive typography - Mobile-first approach */
         /* Base styles (mobile) */
         h1 {
           font-size: 1.5rem;
           line-height: 1.75rem;
           letter-spacing: -0.02em;
         }
         h2 {
           font-size: 1.25rem;
           line-height: 1.5rem;
           letter-spacing: -0.01em;
         }
         h3 {
           font-size: 1.125rem;
           line-height: 1.5rem;
         }
         h4 {
           font-size: 1rem;
           line-height: 1.5rem;
         }
         p {
           font-size: 0.875rem;
           line-height: 1.5rem;
         }
         
         /* Tablet and up */
         @media (min-width: 640px) {
           h1 {
             font-size: 1.875rem;
             line-height: 2.25rem;
           }
           h2 {
             font-size: 1.5rem;
             line-height: 1.75rem;
           }
           h3 {
             font-size: 1.25rem;
             line-height: 1.75rem;
           }
           p {
             font-size: 1rem;
             line-height: 1.5rem;
           }
         }
         
         /* Desktop */
         @media (min-width: 1024px) {
           h1 {
             font-size: 2.25rem;
             line-height: 2.5rem;
           }
           h2 {
             font-size: 1.875rem;
             line-height: 2.25rem;
           }
           h3 {
             font-size: 1.5rem;
             line-height: 2rem;
           }
         }

  /* Responsive grid improvements for better breakpoint handling */
  @media (max-width: 640px) {
    .responsive-grid-1 {
      grid-template-columns: 1fr;
    }
    .responsive-grid-2 {
      grid-template-columns: 1fr;
    }
    .responsive-grid-3 {
      grid-template-columns: 1fr;
    }
    .responsive-grid-4 {
      grid-template-columns: 1fr;
    }
    .responsive-grid-5 {
      grid-template-columns: 1fr;
    }
  }

  @media (min-width: 640px) and (max-width: 1024px) {
    .responsive-grid-2 {
      grid-template-columns: repeat(2, 1fr);
    }
    .responsive-grid-3 {
      grid-template-columns: repeat(2, 1fr);
    }
    .responsive-grid-4 {
      grid-template-columns: repeat(2, 1fr);
    }
    .responsive-grid-5 {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .responsive-grid-3 {
      grid-template-columns: repeat(3, 1fr);
    }
    .responsive-grid-4 {
      grid-template-columns: repeat(4, 1fr);
    }
    .responsive-grid-5 {
      grid-template-columns: repeat(5, 1fr);
    }
  }

  /* Better responsive spacing */
  @media (max-width: 640px) {
    .responsive-padding {
      padding: 0.75rem;
    }
    .responsive-gap {
      gap: 0.75rem;
    }
  }

  @media (min-width: 640px) {
    .responsive-padding {
      padding: 1rem;
    }
    .responsive-gap {
      gap: 1rem;
    }
  }

  @media (min-width: 1024px) {
    .responsive-padding {
      padding: 1.5rem;
    }
    .responsive-gap {
      gap: 1.5rem;
    }
  }
}

/* Utility class for safe area padding */
@layer utilities {
  .pb-safe {
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }
  
  .pt-safe {
    padding-top: max(1rem, env(safe-area-inset-top));
  }
  
  .pl-safe {
    padding-left: max(1rem, env(safe-area-inset-left));
  }
  
  .pr-safe {
    padding-right: max(1rem, env(safe-area-inset-right));
  }
}

/* Görev modalı genişliği için özel kural - DialogContent'in varsayılan sm:max-w-lg sınıfını override et */
/* Tüm olası selector'ları kullanarak maksimum specificity sağlıyoruz */
[data-task-modal],
[data-radix-dialog-content][data-task-modal],
[data-task-modal][role="dialog"],
div[data-task-modal],
[data-radix-dialog-content][data-task-modal][data-state],
[data-task-modal][data-state],
[data-radix-dialog-content][data-task-modal][data-state="open"],
[data-task-modal][data-state="open"],
[data-radix-dialog-content][data-task-modal][data-state="closed"],
[data-task-modal][data-state="closed"] {
  max-width: 100vw !important;
  width: 100vw !important;
  left: 0 !important;
  right: 0 !important;
  top: 0 !important;
  bottom: 0 !important;
  transform: none !important;
  margin: 0 !important;
  translate: none !important;
}

@media (min-width: 640px) {
  [data-task-modal],
  [data-radix-dialog-content][data-task-modal],
  [data-task-modal][role="dialog"],
  div[data-task-modal],
  [data-radix-dialog-content][data-task-modal][data-state],
  [data-task-modal][data-state],
  [data-radix-dialog-content][data-task-modal][data-state="open"],
  [data-task-modal][data-state="open"],
  [data-radix-dialog-content][data-task-modal][data-state="closed"],
  [data-task-modal][data-state="closed"] {
    max-width: 95vw !important;
    width: 95vw !important;
    left: 2.5vw !important;
    right: auto !important;
    top: 5vh !important;
    bottom: auto !important;
    transform: none !important;
    margin: 0 !important;
    translate: none !important;
  }
}
